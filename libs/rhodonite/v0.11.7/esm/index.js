/*! For license information please see index.js.LICENSE.txt */
var __webpack_modules__={4878:(e,t,n)=>{n.d(t,{Z:()=>r});const r={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\nin vec2 v_texcoord_0;\nin vec3 v_color;\nin vec3 v_normal_inWorld;\nin vec3 v_position_inWorld;\n\nuniform int u_envHdriFormat; // initialValue=0\nuniform float u_envRotation; // initialValue=0\nuniform vec4 u_diffuseColorFactor; // initialValue=(1,1,1,1)\nuniform samplerCube u_colorEnvTexture; // initialValue=(0,black)\nuniform bool u_makeOutputSrgb; // initialValue=true\nuniform bool u_inverseEnvironment; // initialValue=true\n\n/* shaderity: @{renderTargetBegin} */\n\n\n/* shaderity: @{getters} */\n\nvec3 linearToSrgb(vec3 linearColor) {\n  return pow(linearColor, vec3(1.0/2.2));\n}\n\nvec3 srgbToLinear(vec3 srgbColor) {\n  return pow(srgbColor, vec3(2.2));\n}\n\nvoid main() {\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  // diffuseColor\n  vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\n  float alpha = 1.0;\n  vec4 diffuseColorFactor = get_diffuseColorFactor(materialSID, 0);\n  if (v_color != diffuseColor && diffuseColorFactor.rgb != diffuseColor) {\n    diffuseColor = v_color * diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (v_color == diffuseColor) {\n    diffuseColor = diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (diffuseColorFactor.rgb == diffuseColor) {\n    diffuseColor = v_color;\n  } else {\n    diffuseColor = vec3(1.0, 1.0, 1.0);\n  }\n\n  // diffuseColorTexture\n\n  // adapt OpenGL (RenderMan) CubeMap convention\n  float envRotation = get_envRotation(materialSID, 0);\n  float rot = envRotation + 3.1415;\n  mat3 rotEnvMatrix = mat3(cos(rot), 0.0, -sin(rot), 0.0, 1.0, 0.0, sin(rot), 0.0, cos(rot));\n  vec3 envNormal = normalize(rotEnvMatrix * v_position_inWorld);\n\n  if (get_inverseEnvironment(materialSID, 0)) {\n    envNormal.x *= -1.0;\n  }\n\n  vec4 diffuseTexel = texture(u_colorEnvTexture, envNormal);\n  vec3 textureColor;\n  int EnvHdriFormat = get_envHdriFormat(materialSID, 0);\n  if (EnvHdriFormat == 0) { // LDR_SRGB\n    textureColor = srgbToLinear(diffuseTexel.rgb);\n  } else if (EnvHdriFormat == 3) { // RGBE\n    textureColor = diffuseTexel.rgb * pow(2.0, diffuseTexel.a*255.0-128.0);\n  } else {\n    textureColor = diffuseTexel.rgb;\n  }\n  diffuseColor *= textureColor;\n\n  rt0 = vec4(diffuseColor, alpha);\n\nfloat makeOutputSrgb = float(get_makeOutputSrgb(materialSID, 0));\nrt0.rgb = mix(rt0.rgb, linearToSrgb(rt0.rgb), makeOutputSrgb);\n\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n",shaderStage:"fragment",isFragmentShader:!0}},5757:(e,t,n)=>{n.d(t,{Z:()=>r});const r={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec4 a_instanceInfo;\nin vec2 a_texcoord_0;\nin vec3 a_position;\nin vec3 a_color;\nin vec3 a_normal;\n\nout vec2 v_texcoord_0;\nout vec3 v_color;\nout vec3 v_normal_inWorld;\nout vec3 v_position_inWorld;\n\nuniform bool u_enableViewMatrix; // initialValue=true\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nvoid main(){\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  mat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n\n  if (get_enableViewMatrix(materialSID, 0)) {\n    mat4 rotateMatrix = viewMatrix;\n    rotateMatrix[3][0] = 0.0;\n    rotateMatrix[3][1] = 0.0;\n    rotateMatrix[3][2] = 0.0;\n    gl_Position = projectionMatrix * rotateMatrix * worldMatrix * vec4(a_position, 1.0);\n  } else {\n    gl_Position = projectionMatrix * worldMatrix * vec4(a_position, 1.0);\n  }\n\n  mat3 normalMatrix = get_normalMatrix(a_instanceInfo.x);\n  v_normal_inWorld = normalMatrix * a_normal;\n\n  v_color = a_color;\n  v_position_inWorld = (worldMatrix * vec4(a_position, 1.0)).xyz;\n  v_texcoord_0 = a_texcoord_0;\n\n}\n",shaderStage:"vertex",isFragmentShader:!1}},3034:e=>{e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./../../dist/",n(n.s="./src/index.ts")}({"./src/index.ts":function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n("./src/main/Shaderity.ts"));t.default=o.default},"./src/main/Reflection.ts":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t){this.__attributeSemanticsMap=new Map,this.__uniformSemanticsMap=new Map,this.__attributes=[],this.__varyings=[],this.__uniforms=[],this.__splittedShaderCode=e,this.__shaderStage=t,this.__setDefaultAttributeAndUniformSemanticsMap()}get attributes(){return this.__attributes}get varyings(){return this.__varyings}get uniforms(){return this.__uniforms}get attributesNames(){return this.__attributes.map((e=>e.name))}get attributesSemantics(){return this.__attributes.map((e=>e.semantic))}get attributesTypes(){return this.__attributes.map((e=>e.type))}addAttributeSemanticsMap(e){this.__attributeSemanticsMap=new Map([...this.__attributeSemanticsMap,...e])}addUniformSemanticsMap(e){this.__uniformSemanticsMap=new Map([...this.__uniformSemanticsMap,...e])}addAttributeSemantics(e,t){this.__attributeSemanticsMap.set(e,t)}addUniformSemantics(e,t){this.__uniformSemanticsMap.set(e,t)}resetAttributeSemantics(){this.__attributeSemanticsMap=new Map}resetUniformSemantics(){this.__uniformSemanticsMap=new Map}reflect(){const e=this.__splittedShaderCode,t=this.__shaderStage;for(const n of e)this.__matchAttribute(n,t)?this.__addAttribute(n):this.__matchVarying(n,t)?this.__addVarying(n,t):n.match(/^(?![\/])[\t ]*uniform[\t ]+/)&&this.__addUniform(n)}__setDefaultAttributeAndUniformSemanticsMap(){this.__attributeSemanticsMap.set("position","POSITION"),this.__attributeSemanticsMap.set("color$","COLOR_0"),this.__attributeSemanticsMap.set("color_?0","COLOR_0"),this.__attributeSemanticsMap.set("texcoord$","TEXCOORD_0"),this.__attributeSemanticsMap.set("texcoord_?0","TEXCOORD_0"),this.__attributeSemanticsMap.set("texcoord_?1","TEXCOORD_1"),this.__attributeSemanticsMap.set("texcoord_?2","TEXCOORD_2"),this.__attributeSemanticsMap.set("normal","NORMAL"),this.__attributeSemanticsMap.set("tangent","TANGENT"),this.__attributeSemanticsMap.set("joint$","JOINTS_0"),this.__attributeSemanticsMap.set("bone$","JOINTS_0"),this.__attributeSemanticsMap.set("joint_?0","JOINTS_0"),this.__attributeSemanticsMap.set("bone_?0","JOINTS_0"),this.__attributeSemanticsMap.set("weight$","WEIGHTS_0"),this.__attributeSemanticsMap.set("weight_?0","WEIGHTS_0"),this.__uniformSemanticsMap.set("worldmatrix","WorldMatrix"),this.__uniformSemanticsMap.set("normalmatrix","NormalMatrix"),this.__uniformSemanticsMap.set("viewmatrix","ViewMatrix"),this.__uniformSemanticsMap.set("projectionmatrix","ProjectionMatrix"),this.__uniformSemanticsMap.set("modelviewmatrix","ModelViewMatrix")}__matchAttribute(e,t){return"vertex"===t&&e.match(/^(?![\/])[\t ]*(attribute|in)[\t ]+.+;/)}__addAttribute(e){const t={name:"",type:"float",semantic:"UNKNOWN"},n=e.match(r.attributeAndVaryingTypeRegExp);if(n){const o=n[1];t.type=o;const i=n[2];t.name=i;const a=e.match(r.semanticRegExp);if(a)t.semantic=a[1];else for(let[e,n]of this.__attributeSemanticsMap)i.match(new RegExp(e,"i"))&&(t.semantic=n)}this.__attributes.push(t)}__matchVarying(e,t){return"vertex"===t?e.match(/^(?![\/])[\t ]*(varying|out)[\t ]+.+;/):e.match(/^(?![\/])[\t ]*(varying|in)[\t ]+.+;/)}__addVarying(e,t){const n={name:"",type:"float",inout:"in"},o=e.match(r.attributeAndVaryingTypeRegExp);if(o){const e=o[1];n.type=e;const r=o[2];n.name=r,n.inout="vertex"===t?"out":"in"}this.__varyings.push(n)}__addUniform(e){const t={name:"",type:"float",semantic:"UNKNOWN"},n=e.match(r.uniformTypeRegExp);if(n){const o=n[1];t.type=o;const i=n[2];t.name=i;const a=e.match(r.semanticRegExp);if(a)t.semantic=a[1];else for(let[e,n]of this.__uniformSemanticsMap)i.match(new RegExp(e,"i"))&&(t.semantic=n)}this.__uniforms.push(t)}}t.default=r,r.attributeAndVaryingTypeRegExp=/[\t ]+(float|int|vec2|vec3|vec4|mat2|mat3|mat4|ivec2|ivec3|ivec4)[\t ]+(\w+);/,r.uniformTypeRegExp=/[\t ]+(float|int|vec2|vec3|vec4|mat2|mat3|mat4|ivec2|ivec3|ivec4|sampler2D|samplerCube|sampler3D)[\t ]+(\w+);/,r.semanticRegExp=/<.*semantic[\t ]*=[\t ]*(\w+).*>/},"./src/main/ShaderEditor.ts":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static _insertDefinition(e,t){const n=t.replace(/#define[\t ]+/,"");e.unshift(`#define ${n}`)}static _fillTemplate(e,t){const n=e.replace(/\/\*[\t ]*shaderity:[\t ]*(@{[\t ]*)(\S+)([\t ]*})[\t ]*\*\//g,"${this.$2}");return new Function("return `"+n+"`;").call(t)}}},"./src/main/ShaderTransformer.ts":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static _transformToGLSLES1(e,t,n){return this.__convertOrInsertVersionGLSLES1(e),this.__removeES3Qualifier(e,n),this.__convertIn(e,t),this.__convertOut(e,t,n),this.__removePrecisionForES3(e),this.__convertTextureFunctionToES1(e,t,n),e}static _transformToGLSLES3(e,t){return this.__convertOrInsertVersionGLSLES3(e),this.__convertAttribute(e,t),this.__convertVarying(e,t),this.__convertTextureCube(e),this.__convertTexture2D(e),this.__convertTexture2DProd(e),this.__convertTexture3D(e),this.__convertTexture3DProd(e),e}static _transformTo(e,t,n,r){return e.match(/webgl2|es3/i)?this._transformToGLSLES3(t,n):e.match(/webgl1|es1/i)?this._transformToGLSLES1(t,n,r):(console.error("Invalid Version"),t)}static __convertOrInsertVersionGLSLES1(e){this.__removeFirstMatchingLine(e,/^(?![\/])[\t ]*#[\t ]*version[\t ]+.*/),e.unshift("#version 100")}static __convertOrInsertVersionGLSLES3(e){this.__removeFirstMatchingLine(e,/^(?![\/])[\t ]*#[\t ]*version[\t ]+.*/),e.unshift("#define GLSL_ES3"),e.unshift("#version 300 es")}static __convertIn(e,t){let n;n=t?function(e,t){return"varying "+t}:function(e,t){return"attribute "+t},this.__replaceLine(e,/^(?![\/])[\t ]*in[\t ]+((highp|mediump|lowp|)[\t ]*\w+[\t ]*\w+[\t ]*;)/,n)}static __convertOut(e,t,n){if(t){const t=this.__removeOutQualifier(e,n);if(null==t)return;this.__addGLFragColor(t,e,n)}else{const t=/^(?![\/])[\t ]*out[\t ]+((highp|mediump|lowp|)[\t ]*\w+[\t ]*\w+[\t ]*;)/,n=function(e,t){return"varying "+t};this.__replaceLine(e,t,n)}}static __removeOutQualifier(e,t){const n=/^(?![\/])[\t ]*out[\t ]+((highp|mediump|lowp|)[\t ]*\w+[\t ]*(\w+)[\t ]*;)/;let r;for(let t=0;t<e.length;t++){const o=e[t].match(n);if(o){e[t]=o[1],r=o[3];break}}return r}static __addGLFragColor(e,t,n){const r=/(.*)\}[\n\t ]*$/,o=/[\n\t ]*return[\n\t ]*;/,i=/(^|^(?![\/])[\t\n ]+)void[\t\n ]+main([\t\n ]|\(|$)/,a=`  gl_FragColor = ${e};`;let s=!1;for(let e=t.length-1;e>=0;e--){const n=t[e];if(!s&&n.match(r)&&(t[e]=n.replace(r,`$1\n${a}\n}\n`),s=!0),n.match(o)&&t.splice(e,0,a),n.match(i))break}if(!s){const e="__removeOutQualifier: Not found the closing brackets for the main function";this.__outError(t,t.length,e,n)}}static __removeES3Qualifier(e,t){this.__removeVaryingQualifier(e,t),this.__removeLayout(e)}static __removeVaryingQualifier(e,t){const n=/^(?![\/])[\t ]*(flat|smooth)[\t ]*((in|out)[\t ]+.*)/;for(let r=0;r<e.length;r++)e[r]=e[r].replace(n,((n,o,i)=>"flat"===o?(this.__outError(e,r+1,"__removeVaryingQualifier: glsl es1 does not support flat qualifier",t),n):i))}static __removeLayout(e){this.__replaceLine(e,/^(?![\/])[\t ]*layout[\t ]*\([\t ]*location[\t ]*\=[\t ]*\d[\t ]*\)[\t ]+/g,"")}static __removePrecisionForES3(e){const t=/^(?![\/])[\t ]*precision[\t ]+(highp|mediump|lowp)[\t ]+(\w+)[\t ]*;/;for(let n=0;n<e.length;n++){const r=e[n].match(t);if(null!=r){if("int"===r[2]||"float"===r[2]||"sampler2D"===r[2]||"samplerCube"===r[2])continue;e.splice(n--,1)}}}static __convertTextureFunctionToES1(e,t,n){var r,o;const i=this.__regSymbols(),a=new RegExp(`(${i}+)textureProj(Lod|)(${i}+)`,"g"),s=new RegExp(`(${i}+)texture(Lod|)(${i}+)`,"g");let c;const l=this.__createUniformSamplerMap(e,n);for(let i=0;i<e.length;i++){const u=e[i],f=u.match(/textureProj(Lod|)[\t ]*\([\t ]*(\w+),/);if(f){c=null!=c?c:this.__createArgumentSamplerMap(e,i,n);const o="Lod"===f[1],s=t&&o?"EXT":"",u=f[2],_=null!==(r=null==c?void 0:c.get(u))&&void 0!==r?r:l.get(u);if(null!=_)if("sampler2D"===_)e[i]=e[i].replace(a,`$1texture2DProj$2${s}$3`);else{const t="__convertTextureFunctionToES1: do not support "+_+" type";this.__outError(e,i,t,n)}continue}const _=u.match(/texture(Lod|)[\t ]*\([\t ]*(\w+),/);if(_){c=null!=c?c:this.__createArgumentSamplerMap(e,i,n);const r="Lod"===_[1],a=t&&r?"EXT":"",u=_[2],f=null!==(o=null==c?void 0:c.get(u))&&void 0!==o?o:l.get(u);if(null!=f){let t;if("sampler2D"===f)t="texture2D";else if("samplerCube"===f)t="textureCube";else{t="";const r="__convertTextureFunctionToES1: do not support "+f+" type";this.__outError(e,i,r,n)}""!==t&&(e[i]=e[i].replace(s,`$1${t}$2${a}$3`))}}else u.match(/\}/)&&(c=void 0)}}static __createUniformSamplerMap(e,t){const n=new Map;for(let r=0;r<e.length;r++){const o=e[r].match(/^(?![\/])[\t ]*uniform*[\t ]*(highp|mediump|lowp|)[\t ]*(sampler\w+)[\t ]+(\w+)/);if(o){const i=o[2],a=o[3];if(n.get(a)){const n="__createUniformSamplerMap: duplicate variable name";this.__outError(e,r,n,t)}n.set(a,i)}}return n}static __createArgumentSamplerMap(e,t,n){var r,o;const i=new Map;for(let a=t;a>=0;a--){if(!e[a].match(/\{/))continue;const t=null===(r=this.__getBracketSection(e,a).match(/.*\((.*)\)/))||void 0===r?void 0:r[1];if(null==t)return;const s=t.split(","),c=/[\n\t ]*(highp|mediump|lowp|)[\n\t ]*(sampler\w+)[\n\t ]*(\w+)[\n\t ]*/;if(null!==(o=s[0].match(c))&&void 0!==o?o:s[0].match(/^[\n\t ]*$/)){for(const t of s){const r=t.match(c);if(null==r)continue;const o=r[2],s=r[3];if(i.get(s)){const t="__createArgumentSamplerMap: duplicate variable name";this.__outError(e,a,t,n)}i.set(s,o)}break}}return i}static __getBracketSection(e,t){let n=0;for(let r=t;r>=0;r--)if(e[r].match(/\(/)){n=r;break}let r="";for(let o=n;o<=t;o++)r+=e[o];return r}static __convertAttribute(e,t){t||this.__replaceLine(e,/^(?![\/])[\t ]*attribute[\t ]+/g,"in ")}static __convertVarying(e,t){const n=t?"in ":"out ";this.__replaceLine(e,/^(?![\/])[\t ]*varying[\t ]+/g,n)}static __convertTextureCube(e){const t=this.__regSymbols(),n=new RegExp(`(${t}+)(textureCube)(${t}+)`,"g");this.__replaceLine(e,n,"$1texture$3")}static __convertTexture2D(e){const t=this.__regSymbols(),n=new RegExp(`(${t}+)(texture2D)(${t}+)`,"g");this.__replaceLine(e,n,"$1texture$3")}static __convertTexture2DProd(e){const t=this.__regSymbols(),n=new RegExp(`(${t}+)(texture2DProj)(${t}+)`,"g");this.__replaceLine(e,n,"$1textureProj$3")}static __convertTexture3D(e){const t=this.__regSymbols(),n=new RegExp(`(${t}+)(texture3D)(${t}+)`,"g");this.__replaceLine(e,n,"$1texture$3")}static __convertTexture3DProd(e){const t=this.__regSymbols(),n=new RegExp(`(${t}+)(texture3DProj)(${t}+)`,"g");this.__replaceLine(e,n,"$1textureProj$3")}static __regSymbols(){return"[!\"#$%&'()*+-.,/:;<=>?@[\\]^`{|}~\t\n ]"}static __replaceLine(e,t,n){for(let r=0;r<e.length;r++)e[r]=e[r].replace(t,n)}static __removeFirstMatchingLine(e,t){for(let n=0;n<e.length;n++)if(e[n].match(t)){e.splice(n,1);break}}static __outError(e,t,n,r){if(!r)throw new Error(n);{const r=`// line ${t}: ${n}\n`,o=/(.*)\}[\n\t ]*$/;for(let t=e.length-1;t>=0&&!e[t].match(o);t--)if(e[t]===r)return;console.error(n),e.push(r)}}}},"./src/main/Shaderity.ts":function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n("./src/main/Reflection.ts")),i=r(n("./src/main/ShaderTransformer.ts")),a=r(n("./src/main/ShaderEditor.ts")),s=r(n("./src/main/Utility.ts")),c=r(n("./src/main/ShaderityObjectCreator.ts"));t.default=class{static transformToGLSLES1(e,t=!1){const n=s.default._splitByLineFeedCode(e.code),r=i.default._transformToGLSLES1(n,e.isFragmentShader,t);return{code:s.default._joinSplittedLine(r),shaderStage:e.shaderStage,isFragmentShader:e.isFragmentShader}}static transformToGLSLES3(e){const t=s.default._splitByLineFeedCode(e.code),n=i.default._transformToGLSLES3(t,e.isFragmentShader);return{code:s.default._joinSplittedLine(n),shaderStage:e.shaderStage,isFragmentShader:e.isFragmentShader}}static transformTo(e,t,n=!1){const r=s.default._splitByLineFeedCode(t.code),o=i.default._transformTo(e,r,t.isFragmentShader,n);return{code:s.default._joinSplittedLine(o),shaderStage:t.shaderStage,isFragmentShader:t.isFragmentShader}}static createShaderityObjectCreator(e){return new c.default(e)}static fillTemplate(e,t){const n=this.__copyShaderityObject(e);return n.code=a.default._fillTemplate(n.code,t),n}static insertDefinition(e,t){const n=this.__copyShaderityObject(e),r=s.default._splitByLineFeedCode(e.code);return a.default._insertDefinition(r,t),n.code=s.default._joinSplittedLine(r),n}static createReflectionObject(e){const t=s.default._splitByLineFeedCode(e.code);return new o.default(t,e.shaderStage)}static __copyShaderityObject(e){return{code:e.code,shaderStage:e.shaderStage,isFragmentShader:e.isFragmentShader}}}},"./src/main/ShaderityObjectCreator.ts":function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n("./src/main/Utility.ts"));class i{constructor(e){this.__functionIdCount=0,this.__defineDirectiveNames=[],this.__extensions=[],this.__globalPrecision={int:"highp",float:"highp",sampler2D:"highp",samplerCube:"highp",sampler3D:"highp",sampler2DArray:"highp",isampler2D:"highp",isamplerCube:"highp",isampler3D:"highp",isampler2DArray:"highp",usampler2D:"highp",usamplerCube:"highp",usampler3D:"highp",usampler2DArray:"highp",sampler2DShadow:"highp",samplerCubeShadow:"highp",sampler2DArrayShadow:"highp"},this.__structDefinitions=[],this.__globalConstantValues=[],this.__globalConstantStructValues=[],this.__attributes=[],this.__varyings=[],this.__uniforms=[],this.__uniformStructs=[],this.__uniformBufferObjects=[],this.__functions=[],this.__mainFunctionCode="void main() {}",this.__outputColorVariableName="renderTarget0",this.__shaderStage=e}addDefineDirective(e){this.__defineDirectiveNames.some((t=>t===e))?console.warn("addDefineDirective: this define directive is already set"):this.__defineDirectiveNames.push(e)}addExtension(e,t="enable"){this.__extensions.some((t=>t.extensionName===e))?console.warn("addExtension: this extension is already set"):this.__extensions.push({extensionName:e,behavior:t})}addStructDefinition(e,t){this.__structDefinitions.some((t=>t.structName===e))?console.error(`addStructDefinition: duplicate struct type name ${e}`):this.__structDefinitions.push({structName:e,memberObjects:t})}addGlobalConstantValue(e,t,n){this.__globalConstantValues.some((t=>t.variableName===e))?console.error(`addGlobalConstantValue: duplicate variable name ${e}`):o.default._isValidComponentCount(t,n)?(o.default._isIntType(t)&&i.__existNonIntegerValue(n)&&console.warn(`addGlobalConstantValue: non-integer value is set to ${e}`),this.__globalConstantValues.push({variableName:e,type:t,values:n})):console.error(`addGlobalConstantValue: the component count of ${e} is invalid`)}addGlobalConstantStructValue(e,t,n){this.__globalConstantStructValues.some((e=>e.variableName===t))?console.error(`addGlobalConstantStructValue: duplicate variable name ${t}`):this.__globalConstantStructValues.push({variableName:t,structName:e,values:n})}addAttributeDeclaration(e,t,n){"vertex"===this.__shaderStage?this.__attributes.some((t=>t.variableName===e))?console.error(`addAttribute: duplicate variable name ${e}`):this.__attributes.push({variableName:e,type:t,precision:null==n?void 0:n.precision,location:null==n?void 0:n.location}):console.error("addAttribute: this method is for vertex shader only")}addVaryingDeclaration(e,t,n){if(this.__varyings.some((t=>t.variableName===e)))return void console.error(`addVarying: duplicate variable name ${e}`);const r=o.default._isIntType(t);let i=null==n?void 0:n.interpolationType;if(r&&"flat"!==i){if(null!=i)return void console.error("addVarying: the interpolationType must be flat for integer types");console.warn("addVarying: set the interpolationType of integer types to flat to avoid compilation error"),i="flat"}this.__varyings.push({variableName:e,type:t,precision:null==n?void 0:n.precision,interpolationType:i})}addUniformDeclaration(e,t,n){this.__uniforms.some((t=>t.variableName===e))?console.error(`addUniform: duplicate variable name ${e}`):("bool"===t&&null!=(null==n?void 0:n.precision)&&(console.warn("addUniform: remove the specification of precision for bool type to avoid compilation error"),n.precision=void 0),this.__uniforms.push({variableName:e,type:t,precision:null==n?void 0:n.precision}))}addUniformStructDeclaration(e,t){this.__uniformStructs.some((e=>e.variableName===t))?console.error(`addUniformStructDeclaration: duplicate variable name ${t}`):this.__uniformStructs.push({variableName:t,structName:e})}addUniformBufferObjectDeclaration(e,t,n){if(this.__uniformBufferObjects.some((t=>t.blockName===e)))console.error(`addUniformBufferObjectDeclaration: duplicate block name ${e}`);else{for(const e of this.__uniformBufferObjects)for(const n of e.variableObjects)for(const e of t)if(n.variableName===e.variableName)return void console.error(`addUniformBufferObjectDeclaration: duplicate variable name ${e.variableName}`);this.__uniformBufferObjects.push({blockName:e,variableObjects:t,instanceName:null==n?void 0:n.instanceName})}}addFunctionDefinition(e,t){var n,r;const o=this.__functionIdCount++,i=null!==(n=null==t?void 0:t.dependencyLevel)&&void 0!==n?n:0;return this.__functions[i]=null!==(r=this.__functions[i])&&void 0!==r?r:[],this.__functions[i].push({functionCode:e,functionId:o}),o}updateGlobalPrecision(e){Object.assign(this.__globalPrecision,e)}updateStructDefinition(e,t){const n=this.__structDefinitions.findIndex((t=>t.structName===e));-1!==n?this.__structDefinitions[n].memberObjects=t:console.error(`updateStructDefinition: the struct type name ${e} is not exist`)}updateGlobalConstantValue(e,t){const n=this.__globalConstantValues.findIndex((t=>t.variableName===e));if(-1===n)return void console.warn(`updateGlobalConstantValue: the variable name ${e} is not exist`);const r=this.__globalConstantValues[n].type;o.default._isValidComponentCount(r,t)?(o.default._isIntType(r)&&i.__existNonIntegerValue(t)&&console.warn(`updateGlobalConstantValue: the ${e} has a non-integer value.`),this.__globalConstantValues[n].values=t):console.error("updateGlobalConstantValue: the component count is invalid")}updateGlobalConstantStructValue(e,t){const n=this.__globalConstantStructValues.findIndex((t=>t.variableName===e));-1!==n?this.__globalConstantStructValues[n].values=t:console.error(`updateGlobalConstantStructValue:  the variable name ${e} is not exist`)}updateMainFunction(e){this.__mainFunctionCode=e}updateOutputColorVariableName(e){"fragment"===this.__shaderStage?0!==e.length?this.__outputColorVariableName=e:console.error("updateOutputColorVariableName: invalid outColorVariableName"):console.error("updateOutputColorVariableName: this method is for fragment shader only")}removeDefineDirective(e){const t=this.__defineDirectiveNames.indexOf(e);-1!==t?this.__defineDirectiveNames.splice(t,1):console.warn("removedDefineDirective: this define directive is not exist")}removeExtension(e){const t=this.__extensions.findIndex((t=>t.extensionName===e));-1!==t?this.__extensions.splice(t,1):console.warn("removeExtension: this extension is not exist")}removeStructDefinition(e){const t=this.__structDefinitions.findIndex((t=>t.structName===e));-1!==t?this.__structDefinitions.splice(t,1):console.error(`removeStructDefinition: the struct type name ${e} is not exist`)}removeGlobalConstantValue(e){const t=this.__globalConstantValues.findIndex((t=>t.variableName===e));-1!==t?this.__globalConstantValues.splice(t,1):console.warn(`removeGlobalConstantValue: the variable name ${e} is not exist`)}removeGlobalConstantStructValue(e){const t=this.__globalConstantStructValues.findIndex((t=>t.variableName===e));-1!==t?this.__globalConstantStructValues.splice(t,1):console.error(`updateGlobalConstantStructValue:  the variable name ${e} is not exist`)}removeAttributeDeclaration(e){const t=this.__attributes.findIndex((t=>t.variableName===e));-1!==t?this.__attributes.splice(t,1):console.warn(`removeAttribute: the variable name ${e} is not exist`)}removeVaryingDeclaration(e){const t=this.__varyings.findIndex((t=>t.variableName===e));-1!==t?this.__varyings.splice(t,1):console.warn(`removeVarying: the variable name ${e} is not exist`)}removeUniformDeclaration(e){const t=this.__uniforms.findIndex((t=>t.variableName===e));-1!==t?this.__uniforms.splice(t,1):console.warn(`removeUniform: the variable name ${e} is not exist`)}removeUniformStructDeclaration(e){const t=this.__uniformStructs.findIndex((t=>t.variableName===e));-1!==t?this.__uniformStructs.splice(t,1):console.warn(`removeUniformStructDeclaration: the variable name ${e} is not exist`)}removeUniformBufferObjectDeclaration(e){const t=this.__uniformBufferObjects.findIndex((t=>t.blockName===e));-1!==t?this.__uniformBufferObjects.splice(t,1):console.warn(`removeUniformStructDeclaration: the variable name ${e} is not exist`)}removeFunctionDefinition(e){this.__fillEmptyFunctions(),(e<0||e>=this.__functionIdCount)&&console.warn("removeFunctionDefinition: invalid function id");for(const t of this.__functions){const n=t.findIndex((t=>t.functionId===e));if(-1!==n)return void t.splice(n,1)}console.warn(`removeFunctionDefinition: not found the function of functionId ${e}`)}createShaderityObject(){return{code:this.__createShaderCode(),shaderStage:this.__shaderStage,isFragmentShader:"fragment"===this.__shaderStage}}static __existNonIntegerValue(e){for(const t of e)if(!Number.isInteger(t))return!0;return!1}__createShaderCode(){return this.__fillEmptyFunctions(),"#version 300 es\n\n"+this.__createDefineDirectiveShaderCode()+this.__createExtensionShaderCode()+this.__createGlobalPrecisionShaderCode()+this.__createStructDefinitionShaderCode()+this.__createGlobalConstantValueShaderCode()+this.__createGlobalConstantStructValueShaderCode()+this.__createAttributeDeclarationShaderCode()+this.__createVaryingDeclarationShaderCode()+this.__createOutputColorDeclarationShaderCode()+this.__createUniformDeclarationShaderCode()+this.__createUniformStructDeclarationShaderCode()+this.__createUniformBufferObjectShaderCode()+this.__createFunctionDefinitionShaderCode()+this.__createMainFunctionDefinitionShaderCode()}__fillEmptyFunctions(){var e;for(let t=0;t<this.__functions.length;t++)this.__functions[t]=null!==(e=this.__functions[t])&&void 0!==e?e:[]}__createDefineDirectiveShaderCode(){let e="";for(const t of this.__defineDirectiveNames)e+=`#define ${t}\n`;return o.default._addLineFeedCodeIfNotNullString(e)}__createExtensionShaderCode(){let e="";for(const t of this.__extensions)e+=`#extension ${t.extensionName}: ${t.behavior}\n`;return o.default._addLineFeedCodeIfNotNullString(e)}__createGlobalPrecisionShaderCode(){let e="";for(const t in this.__globalPrecision){const n=t;e+=`precision ${this.__globalPrecision[n]} ${n};\n`}return o.default._addLineFeedCodeIfNotNullString(e)}__createStructDefinitionShaderCode(){let e="";for(const t of this.__structDefinitions){e+=`struct ${t.structName} {\n`;for(let n=0;n<t.memberObjects.length;n++){const r=t.memberObjects[n];e+="  ",null!=r.precision&&(e+=`${r.precision} `),e+=`${r.type} ${r.memberName};\n`}e+="};\n"}return o.default._addLineFeedCodeIfNotNullString(e)}__createGlobalConstantValueShaderCode(){let e="";for(const t of this.__globalConstantValues){const n=t.type,r=t.variableName,o=t.values;e+=`const ${n} ${r} = ${n}(`;for(let t=0;t<o.length;t++)e+=o[t]+", ";e=e.replace(/,\s$/,");\n")}return o.default._addLineFeedCodeIfNotNullString(e)}__createGlobalConstantStructValueShaderCode(){let e="";for(const t of this.__globalConstantStructValues){const n=this.__structDefinitions.findIndex((e=>e.structName===t.structName));if(-1===n){console.error(`__createGlobalConstantStructValueShaderCode: the struct type ${t.structName} is not defined`);continue}e+=`const ${t.structName} ${t.variableName} = ${t.structName} (\n`;const r=this.__structDefinitions[n];if(r.memberObjects.length===Object.keys(t.values).length)if(r.memberObjects.some((e=>o.default._isSamplerType(e.type))))console.error(`__createGlobalConstantStructValueShaderCode: ConstantStructValue (${t.variableName}) cannot have sampler type parameter`);else{for(let n=0;n<r.memberObjects.length;n++){const i=r.memberObjects[n].memberName,a=t.values[i];if(null==a){console.error(`__createGlobalConstantStructValueShaderCode: ${t.variableName} does not have the value of ${i}`);continue}const s=r.memberObjects[n].type;if(o.default._isValidComponentCount(s,a)){e+=`  ${s}(`;for(let t=0;t<a.length;t++)e+=a[t]+", ";e=e.replace(/,\s$/,"),\n")}else console.error(`__createGlobalConstantStructValueShaderCode: the component count of ${i} in ${t.variableName} is invalid`)}e=e.replace(/,\n$/,"\n);\n")}else console.error(`__createGlobalConstantStructValueShaderCode: Invalid number of variables that ${t.variableName} has`)}return o.default._addLineFeedCodeIfNotNullString(e)}__createAttributeDeclarationShaderCode(){let e="";for(const t of this.__attributes)null!=t.location&&(e+=`layout (location = ${t.location}) `),e+="in ",null!=t.precision&&(e+=`${t.precision} `),e+=`${t.type} ${t.variableName};\n`;return o.default._addLineFeedCodeIfNotNullString(e)}__createVaryingDeclarationShaderCode(){let e="";for(const t of this.__varyings)null!=t.interpolationType&&(e+=`${t.interpolationType} `),e+="vertex"==this.__shaderStage?"out ":"in ",null!=t.precision&&(e+=`${t.precision} `),e+=`${t.type} ${t.variableName};\n`;return o.default._addLineFeedCodeIfNotNullString(e)}__createOutputColorDeclarationShaderCode(){return"fragment"!==this.__shaderStage?"":`layout(location = 0) out vec4 ${this.__outputColorVariableName};\n\n`}__createUniformDeclarationShaderCode(){let e="";for(const t of this.__uniforms)e+="uniform ",null!=t.precision&&(e+=`${t.precision} `),e+=`${t.type} ${t.variableName};\n`;return o.default._addLineFeedCodeIfNotNullString(e)}__createUniformStructDeclarationShaderCode(){let e="";for(const t of this.__uniformStructs){const n=t.structName;this.__structDefinitions.some((e=>e.structName===n))?e+=`uniform ${n} ${t.variableName};\n`:console.error(`__createUniformStructDeclarationShaderCode: the struct type ${n} is not defined`)}return o.default._addLineFeedCodeIfNotNullString(e)}__createUniformBufferObjectShaderCode(){let e="";for(const t of this.__uniformBufferObjects){e+=`layout (std140) uniform ${t.blockName} {\n`;for(let n=0;n<t.variableObjects.length;n++){const r=t.variableObjects[n];e+=`  ${r.type} ${r.variableName};\n`}null!=t.instanceName?e+=`} ${t.instanceName};\n`:e+="};\n"}return o.default._addLineFeedCodeIfNotNullString(e)}__createFunctionDefinitionShaderCode(){let e="";for(let t=0;t<this.__functions.length;t++){const n=this.__functions[t];for(let t=0;t<n.length;t++)e+=n[t].functionCode+"\n"}return o.default._addLineFeedCodeIfNotNullString(e)}__createMainFunctionDefinitionShaderCode(){return this.__mainFunctionCode+"\n"}}t.default=i},"./src/main/Utility.ts":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});class r{static _splitByLineFeedCode(e){return e.split(/\r\n|\n/)}static _joinSplittedLine(e){return e.join("\n")}static _addLineFeedCodeIfNotNullString(e){return""===e?e:e+"\n"}static _componentNumber(e){let t;return"float"===e||"int"===e||"bool"===e||"uint"===e||"sampler2D"===e||"samplerCube"===e||"sampler3D"===e||"sampler2DArray"===e||"isampler2D"===e||"isamplerCube"===e||"isampler3D"===e||"isampler2DArray"===e||"usampler2D"===e||"usamplerCube"===e||"usampler3D"===e||"usampler2DArray"===e||"sampler2DShadow"===e||"samplerCubeShadow"===e||"sampler2DArrayShadow"===e?t=1:"vec2"===e||"ivec2"===e||"bvec2"===e||"uvec2"===e?t=2:"vec3"===e||"ivec3"===e||"bvec3"===e||"uvec3"===e?t=3:"vec4"===e||"ivec4"===e||"bvec4"===e||"uvec4"===e||"mat2"===e||"mat2x2"===e?t=4:"mat2x3"===e||"mat3x2"===e?t=6:"mat2x4"===e||"mat4x2"===e?t=8:"mat3"===e||"mat3x3"===e?t=9:"mat3x4"===e||"mat4x3"===e?t=12:"mat4"===e||"mat4x4"===e?t=16:(t=0,console.error("Utility._componentNumber: detect unknown type")),t}static _isIntType(e){return"int"===e||"ivec2"===e||"ivec3"===e||"ivec4"===e||"uint"===e||"uvec2"===e||"uvec3"===e||"uvec4"===e}static _isValidComponentCount(e,t){return r._componentNumber(e)===t.length}static _isSamplerType(e){return"sampler2D"===e||"samplerCube"===e||"sampler3D"===e||"sampler2DArray"===e||"isampler2D"===e||"isamplerCube"===e||"isampler3D"===e||"isampler2DArray"===e||"usampler2D"===e||"usamplerCube"===e||"usampler3D"===e||"usampler2DArray"===e||"sampler2DShadow"===e||"samplerCubeShadow"===e||"sampler2DArrayShadow"===e}}t.default=r}})},7302:(e,t,n)=>{n.d(t,{Z:()=>j});var r={};n.r(r),n.d(r,{AABB:()=>o.mNG,AABBGizmo:()=>o.qfN,AbsoluteAnimation:()=>o.lam,AbstractArrayBufferBaseMathNumber:()=>o.bCT,AbstractCameraController:()=>o.mC0,AbstractMaterialContent:()=>o.PxB,AbstractMatrix:()=>o.XAY,AbstractQuaternion:()=>o.lJH,AbstractShaderNode:()=>o.VI2,AbstractTexture:()=>o.yEY,AbstractVector:()=>o.OxW,Accessor:()=>o.U_s,AddShaderNode:()=>o.yd$,AlphaMode:()=>o.FvO,AnimationAssigner:()=>o.tVY,AnimationAttribute:()=>o.sdx,AnimationComponent:()=>o.cwg,AnimationInterpolation:()=>o.kOi,AttributeNormalShaderNode:()=>o.Sy_,AttributePositionShaderNode:()=>o.JRY,Axis:()=>o.RDh,BasisCompressionType:()=>o.l6R,BlendShapeComponent:()=>o.xTt,BlockBeginShader:()=>_.I,BlockBeginShaderNode:()=>o.afv,BlockEndShader:()=>h.$,BlockEndShaderNode:()=>o.fgK,BoneDataType:()=>o.Nh_,Buffer:()=>o.lWr,BufferUse:()=>o.$HW,BufferView:()=>o.qP0,CGAPIResourceRepository:()=>o.FOu,Cache:()=>o.CtF,CameraComponent:()=>o.Myt,CameraControllerComponent:()=>o.SPq,CameraControllerType:()=>o.MyC,CameraType:()=>o.iM5,ClassicShadingShader:()=>g,ColorGradingUsingLUTsMaterialContent:()=>o.h_U,ColorRgb:()=>o.sZ3,ColorRgba:()=>o.tWC,ComplexVertexAttribute:()=>o.et4,Component:()=>o.wA2,ComponentRepository:()=>o.C2e,ComponentType:()=>o.reR,CompositionType:()=>o.dh2,CompressionTextureType:()=>o.bfi,Config:()=>o.DeH,ConstRgbaBlack:()=>o.SGm,ConstRgbaWhite:()=>o.zUz,ConstVector2_0_0:()=>o.igI,ConstVector2_1_1:()=>o.HOX,ConstVector3_0_0_0:()=>o.R1o,ConstVector3_1_1_1:()=>o.p8_,ConstVector4_0_0_0_0:()=>o.GYQ,ConstVector4_0_0_0_1:()=>o.cV0,ConstVector4_1_1_1_1:()=>o.n9W,ConstantVariableShader:()=>x.i,ConstantVariableShaderNode:()=>o.GFx,Cube:()=>o.Xv,CubeTexture:()=>o.BtG,CustomMaterialContent:()=>o.fZl,DataUtil:()=>o.j4H,DepthEncodeMaterialContent:()=>o.Q5_,DetectHighLuminanceMaterialContent:()=>o.tlJ,DotProductShaderNode:()=>o.jLO,DrcPointCloudImporter:()=>o.c5O,EVENT_CLICK:()=>o.Lfs,EVENT_KEY_DOWN:()=>o._QQ,EVENT_KEY_PRESS:()=>o.lOB,EVENT_KEY_UP:()=>o.k$j,EVENT_MOUSE_DOWN:()=>o.zUJ,EVENT_MOUSE_ENTER:()=>o.ak0,EVENT_MOUSE_LEAVE:()=>o.n9,EVENT_MOUSE_MOVE:()=>o.k4,EVENT_MOUSE_OVER:()=>o.vE_,EVENT_MOUSE_UP:()=>o.cG$,EVENT_MOUSE_WHEEL:()=>o.Sss,EVENT_MSPOINTER_DOWN:()=>o.q7F,EVENT_MSPOINTER_MOVE:()=>o.cAE,EVENT_MSPOINTER_UP:()=>o.fAB,EVENT_ORIENTATION_CHANGE:()=>o.SGU,EVENT_POINTER_CANCEL:()=>o.cEP,EVENT_POINTER_DOWN:()=>o.cSB,EVENT_POINTER_ENTER:()=>o.lcf,EVENT_POINTER_LEAVE:()=>o.RyN,EVENT_POINTER_MOVE:()=>o._6o,EVENT_POINTER_OUT:()=>o.UB9,EVENT_POINTER_OVER:()=>o.Cfj,EVENT_POINTER_UP:()=>o.ROv,EVENT_RESIZE:()=>o.hDl,EVENT_TOUCH_CANCEL:()=>o.VS3,EVENT_TOUCH_DOUBLE_TAP:()=>o.Ywc,EVENT_TOUCH_DRAG:()=>o.pt8,EVENT_TOUCH_END:()=>o.p22,EVENT_TOUCH_ENTER:()=>o.jPE,EVENT_TOUCH_HOLD:()=>o.lv,EVENT_TOUCH_LEAVE:()=>o.adG,EVENT_TOUCH_LONG_TAP:()=>o.oM$,EVENT_TOUCH_MOVE:()=>o.jXG,EVENT_TOUCH_OUT:()=>o.fAN,EVENT_TOUCH_OVER:()=>o.KP1,EVENT_TOUCH_PINCH:()=>o.hdu,EVENT_TOUCH_START:()=>o.uso,EVENT_TOUCH_SWIPE:()=>o.yyZ,EVENT_TOUCH_TAP:()=>o.Rz4,Effekseer:()=>G.A,EffekseerComponent:()=>G.D,EndShader:()=>I.x,Entity:()=>o.JHW,EntityHelper:()=>o._nU,EntityRepository:()=>o.gIQ,EntityUIDOutputMaterialContent:()=>o.zFq,EnumClass:()=>o.Jxr,EnvConstantMaterialContent:()=>o.Zfh,Err:()=>o.UGl,EventPubSub:()=>o.U7Y,Expression:()=>o.A2z,FileType:()=>o.Tv5,ForwardRenderPipeline:()=>o.n8g,Frame:()=>o.RQC,FrameBuffer:()=>o.uLm,Frustum:()=>o.iWj,FurnaceTestMaterialContent:()=>o.bLY,GLSLShader:()=>f.m,GLTF2_EXPORT_DRACO:()=>o.Dy6,GLTF2_EXPORT_EMBEDDED:()=>o.jll,GLTF2_EXPORT_GLB:()=>o.Dbu,GLTF2_EXPORT_GLTF:()=>o.ESz,GLTF2_EXPORT_NO_DOWNLOAD:()=>o.S5k,GL_ACTIVE_ATTRIBUTES:()=>F._$8,GL_ACTIVE_TEXTURE:()=>F.lkt,GL_ACTIVE_UNIFORMS:()=>F.Td9,GL_ACTIVE_UNIFORM_BLOCKS:()=>F.wEd,GL_ALIASED_LINE_WIDTH_RANGE:()=>F.ogk,GL_ALIASED_POINT_SIZE_RANGE:()=>F.AY1,GL_ALPHA:()=>F.fNk,GL_ALPHA_BITS:()=>F.Y0n,GL_ALREADY_SIGNALED:()=>F.WPj,GL_ALWAYS:()=>F.gOo,GL_ANY_SAMPLES_PASSED:()=>F.$LR,GL_ANY_SAMPLES_PASSED_CONSERVATIVE:()=>F.faJ,GL_ARRAY_BUFFER:()=>F.TdU,GL_ARRAY_BUFFER_BINDING:()=>F.UAv,GL_ATTACHED_SHADERS:()=>F.Q$l,GL_BACK:()=>F.wIF,GL_BLEND:()=>F.ZXb,GL_BLEND_COLOR:()=>F.hzX,GL_BLEND_DST_ALPHA:()=>F.r9F,GL_BLEND_DST_RGB:()=>F.Kzo,GL_BLEND_EQUATION:()=>F.ttq,GL_BLEND_EQUATION_ALPHA:()=>F.XG_,GL_BLEND_EQUATION_RGB:()=>F.HPC,GL_BLEND_SRC_ALPHA:()=>F.QH$,GL_BLEND_SRC_RGB:()=>F._1o,GL_BLUE_BITS:()=>F.EZ0,GL_BOOL:()=>F.N9T,GL_BOOL_VEC2:()=>F.vgW,GL_BOOL_VEC3:()=>F.tqi,GL_BOOL_VEC4:()=>F.iU2,GL_BROWSER_DEFAULT_WEBGL:()=>F.BWL,GL_BUFFER_SIZE:()=>F.F_m,GL_BUFFER_USAGE:()=>F.$et,GL_CCW:()=>F.gx8,GL_CLAMP_TO_EDGE:()=>F.Y8m,GL_COLOR:()=>F.Wlc,GL_COLOR_ATTACHMENT0:()=>F.krQ,GL_COLOR_ATTACHMENT0_WEBGL:()=>F.YCV,GL_COLOR_ATTACHMENT1:()=>F.p7w,GL_COLOR_ATTACHMENT10:()=>F.Axb,GL_COLOR_ATTACHMENT10_WEBGL:()=>F.eqO,GL_COLOR_ATTACHMENT11:()=>F.gwn,GL_COLOR_ATTACHMENT11_WEBGL:()=>F.BM1,GL_COLOR_ATTACHMENT12:()=>F.w4x,GL_COLOR_ATTACHMENT12_WEBGL:()=>F.CCZ,GL_COLOR_ATTACHMENT13:()=>F.FQh,GL_COLOR_ATTACHMENT13_WEBGL:()=>F.AOk,GL_COLOR_ATTACHMENT14:()=>F.rjz,GL_COLOR_ATTACHMENT14_WEBGL:()=>F.LwI,GL_COLOR_ATTACHMENT15:()=>F._8G,GL_COLOR_ATTACHMENT15_WEBGL:()=>F.ZC4,GL_COLOR_ATTACHMENT1_WEBGL:()=>F.$9l,GL_COLOR_ATTACHMENT2:()=>F.Bky,GL_COLOR_ATTACHMENT2_WEBGL:()=>F.qNf,GL_COLOR_ATTACHMENT3:()=>F.I2u,GL_COLOR_ATTACHMENT3_WEBGL:()=>F.oC9,GL_COLOR_ATTACHMENT4:()=>F.ip$,GL_COLOR_ATTACHMENT4_WEBGL:()=>F.HBF,GL_COLOR_ATTACHMENT5:()=>F._Mr,GL_COLOR_ATTACHMENT5_WEBGL:()=>F.vpR,GL_COLOR_ATTACHMENT6:()=>F.w_G,GL_COLOR_ATTACHMENT6_WEBGL:()=>F.wpZ,GL_COLOR_ATTACHMENT7:()=>F.UBE,GL_COLOR_ATTACHMENT7_WEBGL:()=>F.L8z,GL_COLOR_ATTACHMENT8:()=>F.egt,GL_COLOR_ATTACHMENT8_WEBGL:()=>F.J6F,GL_COLOR_ATTACHMENT9:()=>F.O27,GL_COLOR_ATTACHMENT9_WEBGL:()=>F.L4c,GL_COLOR_BUFFER_BIT:()=>F.$FK,GL_COLOR_CLEAR_VALUE:()=>F.FEv,GL_COLOR_WRITEMASK:()=>F.Ut4,GL_COMPARE_REF_TO_TEXTURE:()=>F.M_A,GL_COMPILE_STATUS:()=>F.MKG,GL_COMPRESSED_R11_EAC:()=>F.d6W,GL_COMPRESSED_RG11_EAC:()=>F.y3r,GL_COMPRESSED_RGB8_ETC2:()=>F.L3p,GL_COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:()=>F.aLt,GL_COMPRESSED_RGBA8_ETC2_EAC:()=>F.DM,GL_COMPRESSED_RGBA_ASTC_10X10_KHR:()=>F.Hfs,GL_COMPRESSED_RGBA_ASTC_10X5_KHR:()=>F.ObQ,GL_COMPRESSED_RGBA_ASTC_10X6_KHR:()=>F.Q2$,GL_COMPRESSED_RGBA_ASTC_10X8_KHR:()=>F.kvX,GL_COMPRESSED_RGBA_ASTC_12X10_KHR:()=>F.U05,GL_COMPRESSED_RGBA_ASTC_12X12_KHR:()=>F.nsH,GL_COMPRESSED_RGBA_ASTC_4X4_KHR:()=>F.mrS,GL_COMPRESSED_RGBA_ASTC_5X4_KHR:()=>F.yZM,GL_COMPRESSED_RGBA_ASTC_5X5_KHR:()=>F.ij3,GL_COMPRESSED_RGBA_ASTC_6X5_KHR:()=>F.qSO,GL_COMPRESSED_RGBA_ASTC_6X6_KHR:()=>F.Fh_,GL_COMPRESSED_RGBA_ASTC_8X5_KHR:()=>F._zC,GL_COMPRESSED_RGBA_ASTC_8X6_KHR:()=>F.$9u,GL_COMPRESSED_RGBA_ASTC_8X8_KHR:()=>F.Gow,GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:()=>F.$1s,GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:()=>F.$PT,GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:()=>F.fYk,GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:()=>F.DcX,GL_COMPRESSED_RGBA_S3TC_DXT1_EXT:()=>F.bTO,GL_COMPRESSED_RGBA_S3TC_DXT3_EXT:()=>F.TsK,GL_COMPRESSED_RGBA_S3TC_DXT5_EXT:()=>F.G00,GL_COMPRESSED_RGB_ATC_WEBGL:()=>F.xug,GL_COMPRESSED_RGB_ETC1_WEBGL:()=>F.mhR,GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG:()=>F.Awc,GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG:()=>F.EW4,GL_COMPRESSED_RGB_S3TC_DXT1_EXT:()=>F.suj,GL_COMPRESSED_SIGNED_R11_EAC:()=>F.SzQ,GL_COMPRESSED_SIGNED_RG11_EAC:()=>F.Y_Y,GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:()=>F.dN8,GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:()=>F.TY8,GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:()=>F.EMZ,GL_COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:()=>F.DnL,GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:()=>F.dpg,GL_COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:()=>F.kW3,GL_COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:()=>F.dcZ,GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:()=>F.qfx,GL_COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:()=>F.a2d,GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:()=>F.hRd,GL_COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:()=>F.Tkf,GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:()=>F.EiH,GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:()=>F.Ham,GL_COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:()=>F.kUS,GL_COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:()=>F.iLk,GL_COMPRESSED_SRGB8_ETC2:()=>F.rZr,GL_COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:()=>F.eyW,GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:()=>F.XY4,GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:()=>F.FyP,GL_COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:()=>F.QrU,GL_COMPRESSED_SRGB_S3TC_DXT1_EXT:()=>F.F8G,GL_COMPRESSED_TEXTURE_FORMATS:()=>F.r4j,GL_CONDITION_SATISFIED:()=>F.oRF,GL_CONSTANT_ALPHA:()=>F.HN$,GL_CONSTANT_COLOR:()=>F.obT,GL_CONTEXT_LOST_WEBGL:()=>F.Ahs,GL_COPY_READ_BUFFER:()=>F.jIl,GL_COPY_READ_BUFFER_BINDING:()=>F.F0I,GL_COPY_WRITE_BUFFER:()=>F.Pa5,GL_COPY_WRITE_BUFFER_BINDING:()=>F.$XJ,GL_CULL_FACE:()=>F.tef,GL_CULL_FACE_MODE:()=>F.lkd,GL_CURRENT_PROGRAM:()=>F.Gi2,GL_CURRENT_QUERY:()=>F.pcv,GL_CURRENT_QUERY_EXT:()=>F.bye,GL_CURRENT_VERTEX_ATTRIB:()=>F.tV_,GL_CW:()=>F.PU5,GL_DATA_BYTE:()=>F.q7Q,GL_DATA_FLOAT:()=>F.OT$,GL_DATA_INT:()=>F.Nq4,GL_DATA_SHORT:()=>F._TP,GL_DATA_UNSIGNED_BYTE:()=>F.Ywg,GL_DATA_UNSIGNED_INT:()=>F.M_8,GL_DATA_UNSIGNED_SHORT:()=>F.rkl,GL_DECR:()=>F.nTe,GL_DECR_WRAP:()=>F.k4y,GL_DELETE_STATUS:()=>F.Pw6,GL_DEPTH:()=>F.gLP,GL_DEPTH24_STENCIL8:()=>F.pmD,GL_DEPTH32F_STENCIL8:()=>F.WB9,GL_DEPTH_ATTACHMENT:()=>F.ksX,GL_DEPTH_BITS:()=>F.Ro9,GL_DEPTH_BUFFER_BIT:()=>F.GuG,GL_DEPTH_CLEAR_VALUE:()=>F.WRC,GL_DEPTH_COMPONENT:()=>F.pEo,GL_DEPTH_COMPONENT16:()=>F.r7P,GL_DEPTH_COMPONENT24:()=>F.LjI,GL_DEPTH_COMPONENT32F:()=>F.FcV,GL_DEPTH_FUNC:()=>F.hvl,GL_DEPTH_RANGE:()=>F.w97,GL_DEPTH_STENCIL:()=>F.Bwm,GL_DEPTH_STENCIL_ATTACHMENT:()=>F.y$A,GL_DEPTH_TEST:()=>F.oHv,GL_DEPTH_WRITEMASK:()=>F.b0C,GL_DITHER:()=>F.Rad,GL_DONT_CARE:()=>F.u3g,GL_DRAW_BUFFER0:()=>F.a36,GL_DRAW_BUFFER0_WEBGL:()=>F.Jql,GL_DRAW_BUFFER1:()=>F.lsi,GL_DRAW_BUFFER10:()=>F.y1m,GL_DRAW_BUFFER10_WEBGL:()=>F.L42,GL_DRAW_BUFFER11:()=>F.ubh,GL_DRAW_BUFFER11_WEBGL:()=>F.LcQ,GL_DRAW_BUFFER12:()=>F.j7V,GL_DRAW_BUFFER12_WEBGL:()=>F.Sp2,GL_DRAW_BUFFER13:()=>F.dk8,GL_DRAW_BUFFER13_WEBGL:()=>F.oLV,GL_DRAW_BUFFER14:()=>F.AV8,GL_DRAW_BUFFER14_WEBGL:()=>F.k5c,GL_DRAW_BUFFER15:()=>F.so$,GL_DRAW_BUFFER15_WEBGL:()=>F.uyr,GL_DRAW_BUFFER1_WEBGL:()=>F.mRc,GL_DRAW_BUFFER2:()=>F.E$e,GL_DRAW_BUFFER2_WEBGL:()=>F.B5U,GL_DRAW_BUFFER3:()=>F.AQ3,GL_DRAW_BUFFER3_WEBGL:()=>F.iMT,GL_DRAW_BUFFER4:()=>F.WUY,GL_DRAW_BUFFER4_WEBGL:()=>F.fln,GL_DRAW_BUFFER5:()=>F.AtN,GL_DRAW_BUFFER5_WEBGL:()=>F.l_g,GL_DRAW_BUFFER6:()=>F.PZH,GL_DRAW_BUFFER6_WEBGL:()=>F.HDK,GL_DRAW_BUFFER7:()=>F.KTo,GL_DRAW_BUFFER7_WEBGL:()=>F.WVN,GL_DRAW_BUFFER8:()=>F.R66,GL_DRAW_BUFFER8_WEBGL:()=>F.YxF,GL_DRAW_BUFFER9:()=>F.Wkg,GL_DRAW_BUFFER9_WEBGL:()=>F.wA8,GL_DRAW_FRAMEBUFFER:()=>F.l3h,GL_DRAW_FRAMEBUFFER_BINDING:()=>F.UwG,GL_DST_ALPHA:()=>F.J$B,GL_DST_COLOR:()=>F.koL,GL_DYNAMIC_COPY:()=>F.KCX,GL_DYNAMIC_DRAW:()=>F.Kn$,GL_DYNAMIC_READ:()=>F.opG,GL_ELEMENT_ARRAY_BUFFER:()=>F.hAw,GL_ELEMENT_ARRAY_BUFFER_BINDING:()=>F.fMn,GL_EQUAL:()=>F.IuO,GL_FASTEST:()=>F.wGk,GL_FLOAT_32_UNSIGNED_INT_24_8_REV:()=>F.wER,GL_FLOAT_MAT2:()=>F.a$d,GL_FLOAT_MAT2X3:()=>F.h$M,GL_FLOAT_MAT2X4:()=>F.d8l,GL_FLOAT_MAT3:()=>F.ODf,GL_FLOAT_MAT3X2:()=>F.oud,GL_FLOAT_MAT3X4:()=>F.LhK,GL_FLOAT_MAT4:()=>F.wSW,GL_FLOAT_MAT4X2:()=>F.ozE,GL_FLOAT_MAT4X3:()=>F.Dq,GL_FLOAT_VEC2:()=>F.e3O,GL_FLOAT_VEC3:()=>F.qhU,GL_FLOAT_VEC4:()=>F.dtP,GL_FRAGMENT_SHADER:()=>F.QoZ,GL_FRAGMENT_SHADER_DERIVATIVE_HINT:()=>F.AQL,GL_FRAGMENT_SHADER_DERIVATIVE_HINT_OES:()=>F.Qh0,GL_FRAMEBUFFER:()=>F.Iqe,GL_FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:()=>F.vEJ,GL_FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:()=>F.BSP,GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:()=>F.Yhe,GL_FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:()=>F.U4r,GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:()=>F.MLp,GL_FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:()=>F.$ri,GL_FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:()=>F.hCR,GL_FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:()=>F.y8S,GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:()=>F.UlJ,GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:()=>F.KY4,GL_FRAMEBUFFER_ATTACHMENT_RED_SIZE:()=>F.HHs,GL_FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:()=>F.HGq,GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:()=>F.jD8,GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:()=>F.dIe,GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:()=>F.$TT,GL_FRAMEBUFFER_BINDING:()=>F.F06,GL_FRAMEBUFFER_COMPLETE:()=>F.Erj,GL_FRAMEBUFFER_DEFAULT:()=>F.AjE,GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT:()=>F.Qlq,GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS:()=>F.URo,GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:()=>F.lmp,GL_FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:()=>F.rfC,GL_FRAMEBUFFER_UNSUPPORTED:()=>F.JZg,GL_FRONT:()=>F.dte,GL_FRONT_AND_BACK:()=>F.cN,GL_FRONT_FACE:()=>F.gI2,GL_FUNC_ADD:()=>F.gNb,GL_FUNC_REVERSE_SUBTRACT:()=>F.lJZ,GL_FUNC_SUBSTRACT:()=>F.xHF,GL_GENERATE_MIPMAP_HINT:()=>F.NyC,GL_GEQUAL:()=>F.qbs,GL_GPU_DISJOINT_EXT:()=>F.FpK,GL_GREATER:()=>F.hys,GL_GREEN_BITS:()=>F.jtX,GL_HALF_FLOAT:()=>F.XpU,GL_HALF_FLOAT_OES:()=>F.fb9,GL_HIGH_FLOAT:()=>F.w8k,GL_HIGH_INT:()=>F.F8$,GL_IMPLEMENTATION_COLOR_READ_FORMAT:()=>F.az3,GL_IMPLEMENTATION_COLOR_READ_TYPE:()=>F.AKO,GL_INCR:()=>F.uyu,GL_INCR_WRAP:()=>F.It5,GL_INTERLEAVED_ATTRIBS:()=>F.MNF,GL_INT_2_10_10_10_REV:()=>F.Seb,GL_INT_SAMPLER_2D:()=>F.qiu,GL_INT_SAMPLER_2D_ARRAY:()=>F.uU2,GL_INT_SAMPLER_3D:()=>F.PnX,GL_INT_SAMPLER_CUBE:()=>F.WfD,GL_INT_VEC2:()=>F.RS3,GL_INT_VEC3:()=>F.yYj,GL_INT_VEC4:()=>F.xyr,GL_INVALID_ENUM:()=>F.JC7,GL_INVALID_FRAMEBUFFER_OPERATION:()=>F.aXw,GL_INVALID_INDEX:()=>F.h2K,GL_INVALID_OPERATION:()=>F.lZq,GL_INVALID_VALUE:()=>F.Qpw,GL_INVERT:()=>F.SUn,GL_KEEP:()=>F.Rk$,GL_LEQUAL:()=>F.Vfd,GL_LESS:()=>F.hyR,GL_LINEAR:()=>F.utc,GL_LINEAR_MIPMAP_LINEAR:()=>F.Onn,GL_LINEAR_MIPMAP_NEAREST:()=>F.D68,GL_LINES:()=>F.CB7,GL_LINE_LOOP:()=>F.Jxz,GL_LINE_STRIP:()=>F.M0t,GL_LINE_WIDTH:()=>F.uik,GL_LINK_STATUS:()=>F.WNe,GL_LOW_FLOAT:()=>F.B2j,GL_LOW_INT:()=>F.OJ6,GL_LUMINANCE:()=>F.y9I,GL_LUMINANCE_ALPHA:()=>F.VPl,GL_MAX:()=>F.bQw,GL_MAX_3D_TEXTURE_SIZE:()=>F.TSE,GL_MAX_ARRAY_TEXTURE_LAYERS:()=>F.Dn,GL_MAX_CLIENT_WAIT_TIMEOUT_WEBGL:()=>F.Tr4,GL_MAX_COLOR_ATTACHMENTS:()=>F.DM2,GL_MAX_COLOR_ATTACHMENTS_WEBGL:()=>F.AA5,GL_MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:()=>F.lPV,GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS:()=>F.QZz,GL_MAX_COMBINED_UNIFORM_BLOCKS:()=>F.PKw,GL_MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:()=>F.Dgg,GL_MAX_CUBE_MAP_TEXTURE_SIZE:()=>F.ly5,GL_MAX_DRAW_BUFFERS:()=>F.TQ9,GL_MAX_DRAW_BUFFERS_WEBGL:()=>F.GuK,GL_MAX_ELEMENTS_INDICES:()=>F.iIj,GL_MAX_ELEMENTS_VERTICES:()=>F.$OY,GL_MAX_ELEMENT_INDEX:()=>F.SKn,GL_MAX_EXT:()=>F.VdM,GL_MAX_FRAGMENT_INPUT_COMPONENTS:()=>F.YNJ,GL_MAX_FRAGMENT_UNIFORM_BLOCKS:()=>F.PUO,GL_MAX_FRAGMENT_UNIFORM_COMPONENTS:()=>F.Jvo,GL_MAX_FRAGMENT_UNIFORM_VECTORS:()=>F.JJY,GL_MAX_PROGRAM_TEXEL_OFFSET:()=>F._b_,GL_MAX_RENDERBUFFER_SIZE:()=>F.ml9,GL_MAX_SAMPLES:()=>F.WBe,GL_MAX_SERVER_WAIT_TIMEOUT:()=>F.epv,GL_MAX_TEXTURE_IMAGE_UNITS:()=>F.D8i,GL_MAX_TEXTURE_LOD_BIAS:()=>F.kky,GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT:()=>F.oR$,GL_MAX_TEXTURE_SIZE:()=>F.S1v,GL_MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:()=>F.QkI,GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:()=>F._YZ,GL_MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:()=>F.Mlt,GL_MAX_UNIFORM_BLOCK_SIZE:()=>F.uri,GL_MAX_UNIFORM_BUFFER_BINDINGS:()=>F.E6I,GL_MAX_VARYING_COMPONENTS:()=>F.Cj5,GL_MAX_VARYING_VECTORS:()=>F.jHY,GL_MAX_VERTEX_ATTRIBS:()=>F.hfp,GL_MAX_VERTEX_OUTPUT_COMPONENTS:()=>F.ksA,GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS:()=>F.Rw3,GL_MAX_VERTEX_UNIFORM_BLOCKS:()=>F.SH3,GL_MAX_VERTEX_UNIFORM_COMPONENTS:()=>F.Ft1,GL_MAX_VERTEX_UNIFORM_VECTORS:()=>F.N8N,GL_MAX_VIEWPORT_DIMS:()=>F.oDL,GL_MEDIUM_FLOAT:()=>F.fL$,GL_MEDIUM_INT:()=>F.XEX,GL_MIN:()=>F.Awz,GL_MIN_EXT:()=>F.fxg,GL_MIN_PROGRAM_TEXEL_OFFSET:()=>F.pc5,GL_MIRRORED_REPEAT:()=>F.GjS,GL_NEAREST:()=>F.R1c,GL_NEAREST_MIPMAP_LINEAR:()=>F.vTv,GL_NEAREST_MIPMAP_NEAREST:()=>F.wWb,GL_NEVER:()=>F.shP,GL_NICEST:()=>F.wVD,GL_NONE:()=>F.Hh0,GL_NOTEQUAL:()=>F.UnN,GL_NO_ERROR:()=>F.Wen,GL_OBJECT_TYPE:()=>F.BHy,GL_ONE:()=>F.Qak,GL_ONE_MINUS_CONSTANT_ALPHA:()=>F.D__,GL_ONE_MINUS_CONSTANT_COLOR:()=>F.$rK,GL_ONE_MINUS_DST_ALPHA:()=>F.X5J,GL_ONE_MINUS_DST_COLOR:()=>F.hOW,GL_ONE_MINUS_SRC_ALPHA:()=>F.GR4,GL_ONE_MINUS_SRC_COLOR:()=>F.IDP,GL_OUT_OF_MEMORY:()=>F.gcz,GL_PACK_ALIGNMENT:()=>F.XPs,GL_PACK_ROW_LENGTH:()=>F.wMK,GL_PACK_SKIP_PIXELS:()=>F.voy,GL_PACK_SKIP_ROWS:()=>F.VNU,GL_PIXEL_PACK_BUFFER:()=>F.OAM,GL_PIXEL_PACK_BUFFER_BINDING:()=>F.vce,GL_PIXEL_UNPACK_BUFFER:()=>F.fsJ,GL_PIXEL_UNPACK_BUFFER_BINDING:()=>F.mED,GL_PIXEL_UNSIGNED_BYTE:()=>F.vnd,GL_PIXEL_UNSIGNED_SHORT_4_4_4_4:()=>F.yD3,GL_PIXEL_UNSIGNED_SHORT_5_5_5_1:()=>F.kyN,GL_PIXEL_UNSIGNED_SHORT_5_6_5:()=>F.nJx,GL_POINTS:()=>F.u$A,GL_POLYGON_OFFSET_FACTOR:()=>F.tzR,GL_POLYGON_OFFSET_FILL:()=>F.Lbl,GL_POLYGON_OFFSET_UNITS:()=>F.DEk,GL_QUERY_COUNTER_BITS_EXT:()=>F.HPM,GL_QUERY_RESULT:()=>F.dbf,GL_QUERY_RESULT_AVAILABLE:()=>F.vPW,GL_QUERY_RESULT_AVAILABLE_EXT:()=>F.KAt,GL_QUERY_RESULT_EXT:()=>F._UX,GL_R11F_G11F_B10F:()=>F.zsc,GL_R16F:()=>F.oY_,GL_R16I:()=>F.gj3,GL_R16UI:()=>F.oqe,GL_R32F:()=>F.uER,GL_R32I:()=>F._TF,GL_R32UI:()=>F.YlY,GL_R8:()=>F.cYm,GL_R8I:()=>F._EH,GL_R8UI:()=>F.S00,GL_R8_SNORM:()=>F.w9H,GL_RASTERIZER_DISCARD:()=>F.ZXo,GL_READ_BUFFER:()=>F._Ir,GL_READ_FRAMEBUFFER:()=>F.yun,GL_READ_FRAMEBUFFER_BINDING:()=>F.bXZ,GL_RED:()=>F.ZhV,GL_RED_BITS:()=>F.jZr,GL_RED_INTEGER:()=>F.iKz,GL_RENDERBUFFER:()=>F.vPm,GL_RENDERBUFFER_ALPHA_SIZE:()=>F.Ysb,GL_RENDERBUFFER_BINDING:()=>F.qk$,GL_RENDERBUFFER_BLUE_SIZE:()=>F.pBm,GL_RENDERBUFFER_DEPTH_SIZE:()=>F.lbA,GL_RENDERBUFFER_GREEN_SIZE:()=>F.OSM,GL_RENDERBUFFER_HEIGHT:()=>F.Bxb,GL_RENDERBUFFER_INTERNAL_FORMAT:()=>F.TpV,GL_RENDERBUFFER_RED_SIZE:()=>F.eco,GL_RENDERBUFFER_SAMPLES:()=>F.CW9,GL_RENDERBUFFER_STENCIL_SIZE:()=>F.Dm9,GL_RENDERBUFFER_WIDTH:()=>F._ZX,GL_RENDERER:()=>F.mfM,GL_REPEAT:()=>F.$7R,GL_REPLACE:()=>F.Snx,GL_RG:()=>F.SJU,GL_RG16F:()=>F.uLG,GL_RG16I:()=>F.XE4,GL_RG16UI:()=>F.r0$,GL_RG32F:()=>F.uM4,GL_RG32I:()=>F.dH_,GL_RG32UI:()=>F.xIw,GL_RG8:()=>F.OAe,GL_RG8I:()=>F.plb,GL_RG8UI:()=>F.lR$,GL_RG8_SNORM:()=>F.sOz,GL_RGB:()=>F.Zkt,GL_RGB10_A2:()=>F.Zvf,GL_RGB10_A2UI:()=>F.sC0,GL_RGB16F:()=>F.eok,GL_RGB16I:()=>F.j7s,GL_RGB16UI:()=>F.WHG,GL_RGB32F:()=>F.GV0,GL_RGB32F_EXT:()=>F.Aoj,GL_RGB32I:()=>F.P7o,GL_RGB32UI:()=>F.yx3,GL_RGB565:()=>F.Hft,GL_RGB5_A1:()=>F.PB9,GL_RGB8:()=>F.Evp,GL_RGB8I:()=>F.kWN,GL_RGB8UI:()=>F.ZB$,GL_RGB8_SNORM:()=>F.aig,GL_RGB9_E5:()=>F.SaD,GL_RGBA:()=>F.gAT,GL_RGBA16F:()=>F.kcF,GL_RGBA16I:()=>F.Spt,GL_RGBA16UI:()=>F.k26,GL_RGBA32F:()=>F.qNt,GL_RGBA32F_EXT:()=>F.ps6,GL_RGBA32I:()=>F.Zsj,GL_RGBA32UI:()=>F.mae,GL_RGBA4:()=>F.EYP,GL_RGBA8:()=>F.ebJ,GL_RGBA8I:()=>F.KkT,GL_RGBA8UI:()=>F.KdC,GL_RGBA8_SNORM:()=>F.wXe,GL_RGBA_INTEGER:()=>F.jH6,GL_RGB_INTEGER:()=>F.PUt,GL_RG_INTEGER:()=>F.qH5,GL_SAMPLER_2D:()=>F.tps,GL_SAMPLER_2D_ARRAY:()=>F.pXP,GL_SAMPLER_2D_ARRAY_SHADOW:()=>F.P8N,GL_SAMPLER_2D_SHADOW:()=>F.oEd,GL_SAMPLER_3D:()=>F.t_W,GL_SAMPLER_BINDING:()=>F.FSc,GL_SAMPLER_CUBE:()=>F.vUb,GL_SAMPLER_CUBE_SHADOW:()=>F.rWQ,GL_SAMPLES:()=>F.L_4,GL_SAMPLE_ALPHA_TO_COVERAGE:()=>F.oIP,GL_SAMPLE_BUFFERS:()=>F.Od7,GL_SAMPLE_COVERAGE:()=>F.Nu1,GL_SAMPLE_COVERAGE_INVERT:()=>F.JGk,GL_SAMPLE_COVERAGE_VALUE:()=>F.VJW,GL_SCISSOR_BOX:()=>F.LCZ,GL_SCISSOR_TEST:()=>F.iku,GL_SEPARATE_ATTRIBS:()=>F.ixi,GL_SHADER_TYPE:()=>F.wrZ,GL_SHADING_LANGUAGE_VERSION:()=>F.SFW,GL_SIGNALED:()=>F._M2,GL_SIGNED_NORMALIZED:()=>F.oiY,GL_SRC_ALPHA:()=>F.B3l,GL_SRC_ALPHA_SATURATE:()=>F.JRp,GL_SRC_COLOR:()=>F.o9e,GL_SRGB:()=>F.GTV,GL_SRGB8:()=>F.LQI,GL_SRGB8_ALPHA8:()=>F.TsT,GL_SRGB8_ALPHA8_EXT:()=>F.SNQ,GL_SRGB_ALPHA_EXT:()=>F.VFW,GL_SRGB_EXT:()=>F.Hjq,GL_STATIC_COPY:()=>F.yZh,GL_STATIC_DRAW:()=>F.o4I,GL_STATIC_READ:()=>F.Spp,GL_STENCIL:()=>F.EH4,GL_STENCIL_ATTACHMENT:()=>F.m88,GL_STENCIL_BACK_FAIL:()=>F._5_,GL_STENCIL_BACK_FUNC:()=>F.xR7,GL_STENCIL_BACK_PASS_DEPTH_FAIL:()=>F.WK5,GL_STENCIL_BACK_PASS_DEPTH_PASS:()=>F.PNz,GL_STENCIL_BACK_REF:()=>F.hoP,GL_STENCIL_BACK_VALUE_MASK:()=>F.n0B,GL_STENCIL_BACK_WRITEMASK:()=>F.Z$r,GL_STENCIL_BITS:()=>F.ad4,GL_STENCIL_BUFFER_BIT:()=>F.BbZ,GL_STENCIL_CLEAR_VALUE:()=>F.zSL,GL_STENCIL_FAIL:()=>F.wce,GL_STENCIL_FUNC:()=>F.Qbd,GL_STENCIL_INDEX:()=>F.OBi,GL_STENCIL_INDEX8:()=>F.VX_,GL_STENCIL_PASS_DEPTH_FAIL:()=>F.O5p,GL_STENCIL_PASS_DEPTH_PASS:()=>F.OiW,GL_STENCIL_REF:()=>F.nVM,GL_STENCIL_TEST:()=>F.lxv,GL_STENCIL_VALUE_MASK:()=>F.b6i,GL_STENCIL_WRITEMASK:()=>F.Q$q,GL_STREAM_COPY:()=>F.kMJ,GL_STREAM_DRAW:()=>F.RIC,GL_STREAM_READ:()=>F.BTT,GL_SUBPIXEL_BITS:()=>F.xp,GL_SYNC_CONDITION:()=>F.vHc,GL_SYNC_FENCE:()=>F.YoK,GL_SYNC_FLAGS:()=>F.lF1,GL_SYNC_FLUSH_COMMANDS_BIT:()=>F.tFw,GL_SYNC_GPU_COMMANDS_COMPLETE:()=>F.z8r,GL_SYNC_STATUS:()=>F.wm0,GL_TEXTURE:()=>F.p8j,GL_TEXTURE0:()=>F.Lmx,GL_TEXTURE1:()=>F.ZrN,GL_TEXTURE10:()=>F.M1Q,GL_TEXTURE11:()=>F.nPy,GL_TEXTURE12:()=>F.SX1,GL_TEXTURE13:()=>F.pYl,GL_TEXTURE14:()=>F.EPR,GL_TEXTURE15:()=>F.kpL,GL_TEXTURE16:()=>F.RjA,GL_TEXTURE17:()=>F.uJm,GL_TEXTURE18:()=>F.Wtd,GL_TEXTURE19:()=>F.emu,GL_TEXTURE2:()=>F.Ehj,GL_TEXTURE20:()=>F.iVc,GL_TEXTURE21:()=>F.Bvy,GL_TEXTURE22:()=>F.pJJ,GL_TEXTURE23:()=>F.WQq,GL_TEXTURE24:()=>F.AC$,GL_TEXTURE25:()=>F.jol,GL_TEXTURE26:()=>F.kOB,GL_TEXTURE27:()=>F.RO1,GL_TEXTURE28:()=>F.Uu$,GL_TEXTURE29:()=>F.Kwr,GL_TEXTURE3:()=>F._mt,GL_TEXTURE30:()=>F.SEn,GL_TEXTURE31:()=>F.Guy,GL_TEXTURE4:()=>F.OG0,GL_TEXTURE5:()=>F.PHR,GL_TEXTURE6:()=>F.vC$,GL_TEXTURE7:()=>F.uzX,GL_TEXTURE8:()=>F.Ac_,GL_TEXTURE9:()=>F.Rtt,GL_TEXTURE_2D:()=>F.CbE,GL_TEXTURE_2D_ARRAY:()=>F.k0l,GL_TEXTURE_3D:()=>F.FU3,GL_TEXTURE_BASE_LEVEL:()=>F.qz_,GL_TEXTURE_BINDING_2D:()=>F.Fp$,GL_TEXTURE_BINDING_2D_ARRAY:()=>F.alV,GL_TEXTURE_BINDING_3D:()=>F.M0H,GL_TEXTURE_BINDING_CUBE_MAP:()=>F.YZ8,GL_TEXTURE_COMPARE_FUNC:()=>F.n3r,GL_TEXTURE_COMPARE_MODE:()=>F.dUx,GL_TEXTURE_CUBE_MAP:()=>F.oHN,GL_TEXTURE_CUBE_MAP_NEGATIVE_X:()=>F.KZB,GL_TEXTURE_CUBE_MAP_NEGATIVE_Y:()=>F.Q4l,GL_TEXTURE_CUBE_MAP_NEGATIVE_Z:()=>F.QJs,GL_TEXTURE_CUBE_MAP_POSITIVE_X:()=>F.tkF,GL_TEXTURE_CUBE_MAP_POSITIVE_Y:()=>F.AE4,GL_TEXTURE_CUBE_MAP_POSITIVE_Z:()=>F.UP3,GL_TEXTURE_IMMUTABLE_FORMAT:()=>F.YCj,GL_TEXTURE_IMMUTABLE_LEVELS:()=>F.cds,GL_TEXTURE_MAG_FILTER:()=>F.c6V,GL_TEXTURE_MAX_ANISOTROPY_EXT:()=>F.bmu,GL_TEXTURE_MAX_LEVEL:()=>F.JqA,GL_TEXTURE_MAX_LOD:()=>F.Yz$,GL_TEXTURE_MIN_FILTER:()=>F.Bc6,GL_TEXTURE_MIN_LOD:()=>F.RDW,GL_TEXTURE_WRAP_R:()=>F.gbE,GL_TEXTURE_WRAP_S:()=>F.OoY,GL_TEXTURE_WRAP_T:()=>F.heo,GL_TIMEOUT_EXPIRED:()=>F.aK$,GL_TIMEOUT_IGNORED:()=>F.eke,GL_TIMESTAMP_EXT:()=>F.Qt8,GL_TIME_ELAPSED_EXT:()=>F.sr4,GL_TRANSFORM_FEEDBACK:()=>F.Sa0,GL_TRANSFORM_FEEDBACK_ACTIVE:()=>F.vWN,GL_TRANSFORM_FEEDBACK_BINDING:()=>F.C6I,GL_TRANSFORM_FEEDBACK_BUFFER:()=>F.AQZ,GL_TRANSFORM_FEEDBACK_BUFFER_BINDING:()=>F.x6H,GL_TRANSFORM_FEEDBACK_BUFFER_MODE:()=>F.H2K,GL_TRANSFORM_FEEDBACK_BUFFER_SIZE:()=>F.f5L,GL_TRANSFORM_FEEDBACK_BUFFER_START:()=>F.ILt,GL_TRANSFORM_FEEDBACK_PAUSED:()=>F.ccF,GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:()=>F.VYu,GL_TRANSFORM_FEEDBACK_VARYINGS:()=>F.y3j,GL_TRIANGLES:()=>F.FgH,GL_TRIANGLE_FAN:()=>F.vtI,GL_TRIANGLE_STRIP:()=>F.uCq,GL_UNIFORM_ARRAY_STRIDE:()=>F.qWZ,GL_UNIFORM_BLOCK_ACTIVE_UNIFORMS:()=>F.t75,GL_UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:()=>F.Kzi,GL_UNIFORM_BLOCK_BINDING:()=>F.tNI,GL_UNIFORM_BLOCK_DATA_SIZE:()=>F.zfW,GL_UNIFORM_BLOCK_INDEX:()=>F.mcF,GL_UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:()=>F.Nyi,GL_UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:()=>F.sxC,GL_UNIFORM_BUFFER:()=>F.q__,GL_UNIFORM_BUFFER_BINDING:()=>F.DBb,GL_UNIFORM_BUFFER_OFFSET_ALIGNMENT:()=>F.mMN,GL_UNIFORM_BUFFER_SIZE:()=>F.rve,GL_UNIFORM_BUFFER_START:()=>F.o7C,GL_UNIFORM_IS_ROW_MAJOR:()=>F.HM$,GL_UNIFORM_MATRIX_STRIDE:()=>F.mS1,GL_UNIFORM_OFFSET:()=>F.xUI,GL_UNIFORM_SIZE:()=>F.djG,GL_UNIFORM_TYPE:()=>F.Kn4,GL_UNMASKED_RENDERER_WEBGL:()=>F.jGD,GL_UNMASKED_VENDOR_WEBGL:()=>F.ycd,GL_UNPACK_ALIGNMENT:()=>F.GM3,GL_UNPACK_COLORSPACE_CONVERSION_WEBGL:()=>F.XxT,GL_UNPACK_FLIP_Y_WEBGL:()=>F.PYx,GL_UNPACK_IMAGE_HEIGHT:()=>F.EVZ,GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL:()=>F.WYY,GL_UNPACK_ROW_LENGTH:()=>F.m7j,GL_UNPACK_SKIP_IMAGES:()=>F.SK7,GL_UNPACK_SKIP_PIXELS:()=>F.YrP,GL_UNPACK_SKIP_ROWS:()=>F.bd_,GL_UNSIGNALED:()=>F.n9O,GL_UNSIGNED_INT_10F_11F_11F_REV:()=>F.nQ9,GL_UNSIGNED_INT_24_8:()=>F.bTv,GL_UNSIGNED_INT_24_8_WEBGL:()=>F.iyB,GL_UNSIGNED_INT_2_10_10_10_REV:()=>F.LX0,GL_UNSIGNED_INT_5_9_9_9_REV:()=>F.vEp,GL_UNSIGNED_INT_SAMPLER_2D:()=>F.Zx4,GL_UNSIGNED_INT_SAMPLER_2D_ARRAY:()=>F.yd2,GL_UNSIGNED_INT_SAMPLER_3D:()=>F.ZtN,GL_UNSIGNED_INT_SAMPLER_CUBE:()=>F.lg3,GL_UNSIGNED_INT_VEC2:()=>F.DAo,GL_UNSIGNED_INT_VEC3:()=>F.TAU,GL_UNSIGNED_INT_VEC4:()=>F.Ki3,GL_UNSIGNED_NORMALIZED:()=>F.Dr$,GL_UNSIGNED_NORMALIZED_EXT:()=>F.$z8,GL_VALIDATE_STATUS:()=>F.eQR,GL_VENDOR:()=>F.zSP,GL_VERSION:()=>F.$bm,GL_VERTEX_ARRAY_BINDING:()=>F.RGR,GL_VERTEX_ARRAY_BINDING_OES:()=>F.fsT,GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:()=>F.HRE,GL_VERTEX_ATTRIB_ARRAY_DIVISOR:()=>F.LUh,GL_VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:()=>F.C9t,GL_VERTEX_ATTRIB_ARRAY_ENABLED:()=>F.I4M,GL_VERTEX_ATTRIB_ARRAY_INTEGER:()=>F.XZ2,GL_VERTEX_ATTRIB_ARRAY_NORMALIZED:()=>F.s7G,GL_VERTEX_ATTRIB_ARRAY_POINTER:()=>F.bsK,GL_VERTEX_ATTRIB_ARRAY_SIZE:()=>F.vEN,GL_VERTEX_ATTRIB_ARRAY_STRIDE:()=>F.cqm,GL_VERTEX_ATTRIB_ARRAY_TYPE:()=>F.eFf,GL_VERTEX_SHADER:()=>F.lQo,GL_VIEWPORT:()=>F.Ith,GL_WAIT_FAILED:()=>F.GIj,GL_ZERO:()=>F._sJ,GaussianBlurForEncodedDepthMaterialContent:()=>o._Bd,GaussianBlurMaterialContent:()=>o.WLX,GetComponentFromEntities:()=>o.swI,Gizmo:()=>o.tb4,GlobalDataRepository:()=>o.$jt,GlobalRetarget:()=>o.B5B,GlobalRetarget2:()=>o.xzS,Gltf2Exporter:()=>o.ObQ,Gltf2Importer:()=>o.Zb6,GltfImporter:()=>o.j6Y,GreaterShaderNode:()=>o.imh,Grid:()=>o.rjZ,HdriFormat:()=>o.czt,INPUT_HANDLING_STATE_CAMERA_CONTROLLER:()=>o.jOP,INPUT_HANDLING_STATE_GIZMO_SCALE:()=>o.K2G,INPUT_HANDLING_STATE_GIZMO_TRANSLATION:()=>o.KQz,INPUT_HANDLING_STATE_NONE:()=>o.Tr1,IShape:()=>o.ALp,IdentityMatrix33:()=>o.cmF,IdentityMatrix44:()=>o.aqQ,IfStatementShader:()=>E.p,IfStatementShaderNode:()=>o.uP$,ImageUtil:()=>o.LkB,InputManager:()=>o.$tz,Is:()=>o.Is,IsObj:()=>o.V5,Joint:()=>o.d90,KTX2TextureLoader:()=>C.N,LightComponent:()=>o.r0A,LightType:()=>o.vBC,Line:()=>o.x12,LocatorGizmo:()=>o.klP,LogQuaternion:()=>o.lW,MToonMaterialContent:()=>o.fQ$,MatCapMaterialContent:()=>o.Svh,Material:()=>o.F5T,MaterialHelper:()=>o.G$p,MaterialRepository:()=>o.rFg,MathClassUtil:()=>o.Db6,MathUtil:()=>o.kj,Matrix22:()=>o.ak,Matrix33:()=>o.haE,Matrix44:()=>o.Jeh,MemoryManager:()=>o.B_3,Mesh:()=>o.Kj0,MeshComponent:()=>o.$tA,MeshHelper:()=>o.tVI,MeshRendererComponent:()=>o.YZ_,MiscUtil:()=>o.KfE,ModelConverter:()=>o.eDb,ModuleManager:()=>o.xJl,MultiplyShaderNode:()=>o.P4J,MutableColorRgb:()=>o.CEM,MutableColorRgba:()=>o.l$X,MutableMatrix22:()=>o.f7L,MutableMatrix33:()=>o.xkj,MutableMatrix44:()=>o.ecr,MutableQuaternion:()=>o.yGy,MutableScalar:()=>o.DUM,MutableScalar_:()=>o.EtM,MutableScalard:()=>o.$_9,MutableVector2:()=>o.NRp,MutableVector2_:()=>o.elw,MutableVector2d:()=>o.th1,MutableVector3:()=>o.d6n,MutableVector3_:()=>o.I18,MutableVector3d:()=>o.oVE,MutableVector4:()=>o.xQg,MutableVector4_:()=>o.e2p,MutableVector4d:()=>o.hnX,None:()=>o.Hq9,NormalMatrixShaderNode:()=>o.fbG,NormalizeShaderNode:()=>o.dHi,Ok:()=>o.Ok,Option:()=>o.Wxm,OrbitCameraController:()=>o.jfW,OutColorShaderNode:()=>o.y8Z,OutPositionShaderNode:()=>o.Nus,PhysicsComponent:()=>o.ZeV,PixelFormat:()=>o.VIj,Plane:()=>o.JOQ,Primitive:()=>o.WV0,PrimitiveMode:()=>o.TcR,PrimitiveSortKey_BitLength_Depth:()=>o.Qob,PrimitiveSortKey_BitLength_Material:()=>o.xzx,PrimitiveSortKey_BitLength_PrimitiveType:()=>o.aKP,PrimitiveSortKey_BitLength_TranslucencyType:()=>o.IMH,PrimitiveSortKey_BitOffset_Material:()=>o.V_R,PrimitiveSortKey_BitOffset_PrimitiveType:()=>o.Y1P,PrimitiveSortKey_BitOffset_TranslucencyType:()=>o.Yxr,PrimitiveSortKey_BitOffset_ViewportLayer:()=>o.BHz,ProcessApproach:()=>o.V7o,ProcessApproachClass:()=>o.yvy,ProcessStage:()=>o.Iqz,ProjectionMatrixShaderNode:()=>o.DEK,Quaternion:()=>o._fP,RenderBuffer:()=>o.NiD,RenderBufferTarget:()=>o.G22,RenderPass:()=>o.CDd,RenderPassHelper:()=>o.$Og,RenderTargetTexture:()=>o._iX,RenderableHelper:()=>o.L0o,RhodoniteImportExtension:()=>o.zYy,RnException:()=>o.MrI,RnObject:()=>o.S7_,RnPromise:()=>o.niV,Scalar:()=>o.Rus,ScalarToVector4ShaderNode:()=>o.udm,Scalar_:()=>o.apw,Scalard:()=>o.kOh,ScaleGizmo:()=>o.que,SceneGraphComponent:()=>o.aj7,ShaderGraphResolver:()=>o.dBk,ShaderNode:()=>o.Zp7,ShaderSemantics:()=>o.f5e,ShaderSemanticsClass:()=>o.wyA,ShaderType:()=>o.HoG,ShaderVariableType:()=>o.LvG,ShaderVariableUpdateInterval:()=>o.axw,ShaderityMaterialContent:()=>o.unQ,ShaderityUtility:()=>o.QIo,ShadingModel:()=>o.DAE,ShadowMap:()=>o.l6Z,ShadowMapDecodeClassicMaterialContent:()=>o.RKA,SimpleVertexAttribute:()=>o.OCV,SkeletalComponent:()=>o.YbW,Some:()=>o.bDM,Sphere:()=>o.aLr,SphereCollider:()=>o.BMK,SymbolWeakMap:()=>o.bsk,SynthesizeHdrMaterialContent:()=>o.dob,System:()=>o.xP7,TagGltf2NodeIndex:()=>F.j3U,Texture:()=>o.xEZ,TextureDataFloat:()=>o.h36,TextureFetchMaterialNode:()=>o.IW4,TextureFetchShader:()=>w.S,TextureParameter:()=>o.dIQ,Time:()=>o.qpU,Transform3D:()=>o.WQ0,TransformComponent:()=>o.Uvn,TranslationGizmo:()=>o.ug2,UniformDataShader:()=>S.$,UniformDataShaderNode:()=>o.X1h,VERSION:()=>Q,VRMColliderGroup:()=>o.Dit,VRMSpringBoneGroup:()=>o.UUB,VRMSpringBonePhysicsStrategy:()=>o.tM2,VarianceShadowMapDecodeClassicMaterialContent:()=>o.Q_Q,VaryingInVariableShaderNode:()=>o.hLT,VaryingOutVariableShaderNode:()=>o.H9W,VaryingVariableShader:()=>T.e,Vector2:()=>o.FM8,Vector2_:()=>o.pV,Vector2d:()=>o.EYs,Vector3:()=>o.Pa4,Vector3AndScalarToVector4ShaderNode:()=>o.TaZ,Vector3_:()=>o.pg_,Vector3d:()=>o.UJ,Vector4:()=>o.Ltg,Vector4_:()=>o.rEL,Vector4d:()=>o.Tjf,VectorN:()=>o.j8u,VertexAttribute:()=>o.TaT,VertexAttributeClass:()=>o.x$u,VideoTexture:()=>o.fO1,ViewMatrixShaderNode:()=>o.UaW,Visibility:()=>o.EEb,Vrm0xImporter:()=>o.ao$,VrmComponent:()=>o.ZAV,VrmImporter:()=>o.pbL,WalkThroughCameraController:()=>o.IsZ,WeakNone:()=>o.Lq7,WeakOption:()=>o.lIh,WeakSome:()=>o.Bxs,WebGLContextWrapper:()=>i.d,WebGLExtension:()=>a.c,WebGLResourceRepository:()=>s.x,WebGLStrategyDataTexture:()=>l.X,WebGLStrategyUniform:()=>u.I,WebGpuDeviceWrapper:()=>R,WebGpuResourceRepository:()=>L,WebXRSystem:()=>z.X,WellKnownComponentTIDs:()=>o.zzN,WireframeMaterialNode:()=>o.sqk,WorldMatrixShaderNode:()=>o.KRN,_from:()=>o.lim,_fromString:()=>o.cuJ,_fromStringCaseSensitively:()=>o.bmc,_getPropertyIndex:()=>o.VlM,_getPropertyIndex2:()=>o.ULo,add2:()=>o.Zzs,add2_offset:()=>o.TLr,add3:()=>o.sZE,add3_offset:()=>o.jIe,add4:()=>o.F5f,add4_offset:()=>o.vPp,addLineNumberToCode:()=>o._zI,applyMixins:()=>o.efS,array3_lerp_offsetAsComposition:()=>o.to5,arrayN_lerp_offsetAsComposition:()=>o.wrt,assertDoesNotHave:()=>o.Waq,assertExist:()=>o.dKe,assertHas:()=>o.ZzZ,assertIsErr:()=>o.Z65,assertIsOk:()=>o.UDi,calcAlignedByteLength:()=>o.Kyk,combineImages:()=>o.U28,convertHTMLImageElementToCanvas:()=>o.ABp,createAndAddGltf2BufferView:()=>o.CTh,createEffekseer:()=>o.OHV,createMotionController:()=>V.RQ,deepCopyUsingJsonStringify:()=>o.j37,defaultAnimationTrackName:()=>o.vAU,defaultValue:()=>o.LSm,detectFormatByArrayBuffers:()=>o.Dhi,detectFormatByUri:()=>o.jeP,downloadArrayBuffer:()=>o.CWu,downloadTypedArray:()=>o.$z2,enhanceArray:()=>o.OTk,fromTensorToCompositionType:()=>F.bup,get1:()=>o.nnL,get1_offset:()=>o.w08,get1_offsetAsComposition:()=>o.GWg,get2:()=>o.t5w,get2_offset:()=>o.vk8,get2_offsetAsComposition:()=>o.PFe,get3:()=>o.Ffi,get3_offset:()=>o.Upt,get3_offsetAsComposition:()=>o.Dq2,get4:()=>o.VIV,get4_offset:()=>o.hxV,get4_offsetAsComposition:()=>o.JIQ,getEvent:()=>o.EYp,getMotionController:()=>V.sz,getN_offset:()=>o.fKE,getN_offsetAsComposition:()=>o.lxk,getWebXRSystem:()=>U,greaterThan:()=>o.tSN,ifDefinedThen:()=>o.JxS,ifDefinedThenWithReturn:()=>o.t0P,ifExistsThen:()=>o.fK9,ifExistsThenWithReturn:()=>o.OBD,ifNotExistsThen:()=>o.bhs,ifNotExistsThenWithReturn:()=>o.ZsA,ifUndefinedThen:()=>o.fYc,ifUndefinedThenWithReturn:()=>o.eD0,isSameGlTF2TextureSampler:()=>F.CLY,lessThan:()=>o.QjB,mulArray3WithScalar_offset:()=>o.nsy,mulArray4WithScalar_offset:()=>o.p8g,mulArrayNWithScalar_offset:()=>o.n5i,mulThatAndThisToOutAsMat44_offsetAsComposition:()=>o.QUJ,normalizeArray4:()=>o.XgD,nullishToEmptyArray:()=>o.vVE,nullishToEmptyMap:()=>o.YUA,objectCachify:()=>o.ozT,primitiveCachify1:()=>o.EY5,qlerp_offsetAsComposition:()=>o.Rlh,scalar_lerp_offsetAsComposition:()=>o._7O,setupShaderProgramForMeshComponent:()=>c.M,updateGamePad:()=>V.KA,updateMotionControllerModel:()=>V._0,valueWithCompensation:()=>o.wv6,valueWithDefault:()=>o.kSU});var o=n(1442),i=n(2129),a=n(1067),s=n(2166),c=n(9807),l=n(1623),u=n(733),f=(n(6014),n(8808)),_=n(4387),h=n(1256),d=n(9977),m=n(3740);function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function y(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e,t){return A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},A(e,t)}var b=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(o){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this)).vertexShaderBody="\n\n\n  ",e}return a.getInstance=function(){return this.__instance||(this.__instance=new a),this.__instance},t=a,(n=[{key:"vertexShaderDefinitions",get:function(){return"\n\n"}},{key:"pixelShaderDefinitions",get:function(){return"\nuniform int u_shadingModel;\nuniform float u_shininess;\n\nstruct Light {\n  vec4 lightPosition;\n  vec4 lightDirection;\n  vec4 lightIntensity;\n};\nuniform Light u_lights[".concat(d.D.maxLightNumberInShader,"];\nuniform int u_lightNumber;\nuniform vec3 u_viewPosition;\n\n\nbool classicShading(\n  in vec3 diffuseColor,\n  in vec3 position_inWorld,\n  in vec3 normal_inWorld,\n  out vec3 outColor\n  )\n{\n  // Lighting\n  outColor = vec3(0.0, 0.0, 0.0);\n  if (u_shadingModel > 0) {\n\n    vec3 diffuse = vec3(0.0, 0.0, 0.0);\n    vec3 specular = vec3(0.0, 0.0, 0.0);\n    for (int i = 0; i < ").concat(d.D.maxLightNumberInShader,"; i++) {\n      if (i >= u_lightNumber) {\n        break;\n      }\n\n      vec3 lightDirection = u_lights[i].lightDirection.xyz;\n      float lightType = u_lights[i].lightPosition.w;\n      float spotCosCutoff = u_lights[i].lightDirection.w;\n      float spotExponent = u_lights[i].lightIntensity.w;\n\n      if (0.75 < lightType) { // is pointlight or spotlight\n        lightDirection = normalize(u_lights[i].lightPosition.xyz - position_inWorld.xyz);\n      }\n      float spotEffect = 1.0;\n      if (lightType > 1.75) { // is spotlight\n        spotEffect = dot(u_lights[i].lightDirection.xyz, lightDirection);\n        if (spotEffect > spotCosCutoff) {\n          spotEffect = pow(spotEffect, spotExponent);\n        } else {\n          spotEffect = 0.0;\n        }\n      }\n\n      vec3 incidentLight = spotEffect * u_lights[i].lightIntensity.xyz;\n//      incidentLight *= M_PI;\n\n      normal_inWorld = normalize(normal_inWorld);\n\n      diffuse += diffuseColor * max(0.0, dot(normal_inWorld, lightDirection)) * incidentLight;\n\n      if (u_shadingModel == 2) {// BLINN\n        // ViewDirection\n        vec3 viewDirection = normalize(u_viewPosition - position_inWorld.xyz);\n        vec3 halfVector = normalize(lightDirection + viewDirection);\n        specular += pow(max(0.0, dot(halfVector, normal_inWorld)), u_shininess);\n      } else if (u_shadingModel == 3) { // PHONG\n        vec3 viewDirection = normalize(u_viewPosition - position_inWorld.xyz);\n        vec3 R = reflect(lightDirection, normal_inWorld);\n        specular += pow(max(0.0, dot(R, viewDirection)), u_shininess);\n      }\n\n    }\n\n    outColor = diffuse + specular;\n  } else {\n    outColor = diffuseColor;\n  }\n}\n\n    ")}},{key:"pixelShaderBody",get:function(){return""}},{key:"attributeNames",get:function(){return[]}},{key:"attributeSemantics",get:function(){return[]}},{key:"attributeCompositions",get:function(){return[]}}])&&v(t.prototype,n),a}(f.m);g.materialElement=m.Z.PBRShading;var x=n(3389),I=n(6114),E=n(6080),w=n(2489),S=n(4200),T=n(2850),C=n(4436);function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__canvas=t,this.__gpuAdapter=n,this.__gpuDevice=r}var t,n;return t=e,(n=[{key:"canvas",get:function(){return this.__canvas}},{key:"gpuAdapter",get:function(){return this.__gpuAdapter}},{key:"gpuDevice",get:function(){return this.__gpuDevice}}])&&P(t.prototype,n),e}(),D=n(4021);function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}function B(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e,t){return N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},N(e,t)}var O=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=M(t);if(n){var o=M(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return B(this,e)});function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this)).__webGpuResources=new Map,t.__resourceCounter=D.F.InvalidCGAPIResourceUid,t.__webGpuDeviceWrapper=e,t}var i=o.prototype;return i.getResourceNumber=function(){return++this.__resourceCounter},i.__registerResource=function(e){var t=this.getResourceNumber();return e._resourceUid=t,this.__webGpuResources.set(t,e),t},i.createTextureFromImageBitmapData=function(e,t){t.level,t.internalFormat;var n=t.width,r=t.height,o=(t.border,t.format,t.type,t.magFilter,t.minFilter,t.wrapS,t.wrapT,t.generateMipmap,t.anisotropy,t.isPremultipliedAlpha,this.__webGpuDeviceWrapper.gpuDevice),i=o.createTexture({size:[n,r,1],format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT});o.queue.copyExternalImageToTexture({source:e},{texture:i},[n,r]);var a=this.__registerResource(i),s=o.createSampler({magFilter:"linear",minFilter:"linear"});return{textureHandle:a,samplerHandle:this.__registerResource(s)}},o}(D.F),F=n(2142),G=n(5241),V=n(6968),z=n(875),k=n(178);function U(){return k.x.getInstance().getModule("xr").WebXRSystem.getInstance()}n(6265);var Q=n(5337).Z;const j=r},5737:(e,t,n)=>{n.d(t,{D:()=>I});var r=n(1410),o=n(2342),i=n(429),a=n(6815),s=n(1417),c=n(3279),l=n(6383),u=n(6174),f=n(4021),_=n(9977),h=n(8289),d=n(9197);function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function A(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}var g=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}var I=function(e){y(n,e);var t=x(n);function n(e,r,o){var i;return m(this,n),(i=t.call(this,e,r,o)).type="efk",i.playJustAfterLoaded=!1,i.isLoop=!1,i.isPause=!1,i.randomSeed=-1,i.isImageLoadWithCredential=!1,i.__speed=1,i.__isInitialized=!1,i.isLoadEffect=!1,_.D.noWebGLTex2DStateCache=!0,i}var r,h,p,A=n.prototype;return A.cancelLoop=function(){clearInterval(this.__timer)},A.isPlay=function(){return!!d.Is.exist(this.__handle)&&!!this.__handle.exists&&!this.isPause},A.play=function(){return d.Is.not.exist(this.__context)?(console.warn("No Effekseer context yet"),!1):d.Is.not.exist(this.__effect)?(console.warn("No Effekseer effect yet"),!1):(this.stop(),this.isPause=!1,this.__handle=this.__context.play(this.__effect,0,0,0),d.Is.exist(this.__handle)&&d.Is.exist(this.__handle.setRandomSeed)&&this.randomSeed>0&&this.__handle.setRandomSeed(this.randomSeed),!0)},A.continue=function(){this.isPause=!1},A.pause=function(){d.Is.exist(this.__handle)&&(this.isPause=!0,clearInterval(this.__timer))},A.stop=function(){d.Is.exist(this.__handle)&&(this.__handle.stop(),this.isPause=!0,clearInterval(this.__timer))},A.setTime=function(e){if(!this.play())return!1;if(d.Is.not.exist(this.__context))return!1;var t=0,n=.0166;for(t=n;t<=e;)if(this.__context.update(t/n),e<(t+=n)){var r=n-(e-t);this.__context.update(r/n);break}return this.pause(),!0},A.$create=function(){this.__sceneGraphComponent=o.g.getComponentOfEntity(this.__entityUid,i.a),this.__transformComponent=o.g.getComponentOfEntity(this.__entityUid,s.U),this.moveStageTo(a.I.Load)},A.__createEffekseerContext=function(){var e=this;if(d.Is.not.exist(this.uri)&&d.Is.not.exist(this.arrayBuffer))return!1;if(effekseer.setImageCrossOrigin(this.isImageLoadWithCredential?"use-credentials":""),this.__context=effekseer.createContext(),d.Is.not.exist(this.__context))return console.error("Effekseer context creation fails"),!1;var t=f.F.getWebGLResourceRepository().currentWebGLContextWrapper;this.__isInitialized=!0;var r=t.getRawContext(),o=d.Is.exist(this.uri)?this.uri:this.arrayBuffer;this.__context.init(r,{enablePremultipliedAlpha:!0});var i=function(){e.playJustAfterLoaded&&(e.play(),e.moveStageTo(a.I.Logic))},s=function(e,t){console.error(e,t)};if("efkpkg"===this.type){if(d.Is.not.exist(n.Unzip))return console.error("Please Set an Unzip object to EffekseerComponent.Unzip"),!1;this.__effect=this.__context.loadEffectPackage(o,n.Unzip,1,i.bind(this),s.bind(this))}else this.__effect=this.__context.loadEffect(o,1,i.bind(this),s.bind(this));return!0},A.$load=function(){var e=this;this.__isInitialized||d.Is.not.exist(this.__context)&&d.Is.not.exist(this.__effect)&&(d.Is.exist(n.wasmModuleUri)?effekseer.initRuntime(n.wasmModuleUri,(function(){e.__createEffekseerContext()&&e.moveStageTo(a.I.Logic)}),(function(){console.error("Failed to initialize Effekseer")})):this.__createEffekseerContext()&&this.moveStageTo(a.I.Logic))},A.$logic=function(){if(this.isPause||d.Is.exist(this.__context)&&d.Is.false(this.isPause)&&this.__context.update(),null!=this.__handle){var e=n.__tmp_identityMatrix_0.copyComponents(this.__sceneGraphComponent.matrixInner);this.__handle.setMatrix(e._v),this.__handle.setSpeed(this.__speed)}this.isPause||this.isLoop&&(this.isPlay()||this.play()),this.moveStageTo(a.I.Render)},A._destroy=function(){d.Is.exist(this.__context)&&(this.__context.releaseEffect(!this.__effect),effekseer.releaseContext(this.__context),this.__context=void 0),d.Is.exist(this.__handle)&&(this.__handle=void 0),this.__effect=void 0},A.$render=function(){if(d.Is.not.exist(this.__effect))this.moveStageTo(a.I.Load);else{var e=l.C.getComponent(c.M,c.M.current),t=n.__tmp_identityMatrix_0,r=n.__tmp_identityMatrix_1;e?(t.copyComponents(e.viewMatrix),r.copyComponents(e.projectionMatrix)):(t.identity(),r.identity()),d.Is.exist(this.__context)&&(this.__context.setProjectionMatrix(r._v),this.__context.setCameraMatrix(t._v),this.__context.draw()),this.moveStageTo(a.I.Logic)}},A.addThisComponentToEntity=function(e,t){var r=function(e){y(r,e);var t=x(r);function r(e,n,o){return m(this,r),t.call(this,e,n,o)}return r.prototype.getEffekseer=function(){return this.getComponentByComponentTID(n.componentTID)},r}(e.constructor);return(0,o.e)(e,r),e},n.sort_$render=function(e){return d.Is.false(e.toRenderEffekseerEffects)?[]:l.C.getComponentsWithType(n).map((function(e){return e.componentSID}))},r=n,p=[{key:"componentTID",get:function(){return u.z.EffekseerComponentTID}}],(h=[{key:"playSpeed",get:function(){return this.__speed},set:function(e){this.__handle&&this.__handle.setSpeed(e),this.__speed=e}},{key:"translate",get:function(){return this.__transformComponent.localPosition},set:function(e){this.__handle&&this.__handle.setLocation(e.x,e.y,e.z),this.__transformComponent.localPosition=e}},{key:"rotate",get:function(){return this.__transformComponent.localEulerAngles},set:function(e){this.__handle&&this.__handle.setRotation(e.x,e.y,e.z),this.__transformComponent.localEulerAngles=e}},{key:"scale",get:function(){return this.__transformComponent.localScale},set:function(e){this.__handle&&this.__handle.setScale(e.x,e.y,e.z),this.__transformComponent.localScale=e}}])&&v(r.prototype,h),p&&v(r,p),n}(r.w);I.ANIMATION_EVENT_PLAY=0,I.ANIMATION_EVENT_PAUSE=1,I.ANIMATION_EVENT_END=2,I.wasmModuleUri=void 0,I.__tmp_identityMatrix_0=h.e.identity(),I.__tmp_identityMatrix_1=h.e.identity(),l.C.registerComponentClass(I)},5241:(e,t,n)=>{n.d(t,{A:()=>r.Effekseer,D:()=>o.D});var r=n(3479),o=n(5737)},3479:(e,t,n)=>{n.r(t),n.d(t,{Effekseer:()=>s});var r=n(5737),o=n(2342),i=n(1417),a=n(429),s=Object.freeze({EffekseerComponent:r.D,createEffekseerEntity:function(){var e=o.g.createEntity(),t=o.g.addComponentToEntity(i.U,e),n=o.g.addComponentToEntity(a.a,t);return o.g.addComponentToEntity(r.D,n)}})},4275:(e,t,n)=>{n.d(t,{m:()=>i});var r=n(6860),o=n(9197),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.zNearMax=.1,this.zFarScalingFactor=1e5,this.autoCalculateZNearAndZFar=!0}var t=e.prototype;return t._calcZNearInner=function(e,t,n){if(this.autoCalculateZNearAndZFar&&o.Is.exist(this.__targetEntity)){var i=this.__targetEntity.getSceneGraph().worldAABB,a=r.P.lengthBtw(t,i.centerPoint),s=i.centerPoint.x-t.x,c=i.centerPoint.y-t.y,l=i.centerPoint.z-t.z,u=(s*n.x+c*n.y+l*n.z)/(Math.hypot(s,c,l)*n.length());e.zNearInner=Math.max(Math.min(a*u-i.lengthCenterToCorner,this.zNearMax),.01)}else e.zNearInner=e.zNear},t._calcZFarInner=function(e){this.autoCalculateZNearAndZFar?e.zFarInner=e.zNearInner*this.zFarScalingFactor:e.zNearInner=e.zFar},e}()},7576:(e,t,n)=>{n.d(t,{j:()=>A});var r=n(6860),o=n(988),i=n(4969),a=n(2863),s=n(7468),c=n(8289),l=n(4275),u=n(9197),f=n(5511),_=n(9977);function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function v(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?h(e):t}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}var y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,c=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=m(t);if(n){var o=m(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return v(this,e)});function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=c.call(this)).dollyScale=2,e.scaleOfLengthCenterToCamera=1,e.moveSpeed=1,e.followTargetAABB=!1,e.autoUpdate=!0,e.__updated=!1,e.__fixedDolly=!1,e.__fixedLengthOfCenterToEye=1,e.__isMouseDown=!1,e.__lastMouseDownTimeStamp=0,e.__lastMouseUpTimeStamp=0,e.__originalY=-1,e.__originalX=-1,e.__buttonNumber=0,e.__mouse_translate_y=0,e.__mouse_translate_x=0,e.__efficiency=1,e.__lengthOfCenterToEye=1,e.__fovyBias=1,e.__scaleOfTranslation=2.8,e.__mouseTranslateVec=o.d6.zero(),e.__newEyeVec=o.d6.zero(),e.__newCenterVec=o.d6.zero(),e.__newUpVec=o.d6.zero(),e.__newTangentVec=o.d6.zero(),e.__isSymmetryMode=!0,e.__rot_bgn_x=0,e.__rot_bgn_y=0,e.__rot_x=0,e.__rot_y=0,e.__dolly=.5,e.__eyeVec=o.d6.zero(),e.__centerVec=o.d6.zero(),e.__upVec=o.d6.zero(),e.__scaleOfZNearAndZFar=5e3,e.__doPreventDefault=!1,e.__isPressingShift=!1,e.__isPressingCtrl=!1,e.__pinchInOutControl=!1,e.__pinchInOutOriginalDistance=null,e.__resetDollyTouchTime=0,e.__mouseDownFunc=e.__mouseDown.bind(h(e)),e.__mouseUpFunc=e.__mouseUp.bind(h(e)),e.__mouseMoveFunc=e.__mouseMove.bind(h(e)),e.__touchDownFunc=e.__touchDown.bind(h(e)),e.__touchUpFunc=e.__touchUp.bind(h(e)),e.__touchMoveFunc=e.__touchMove.bind(h(e)),e.__pinchInOutFunc=e.__pinchInOut.bind(h(e)),e.__pinchInOutEndFunc=e.__pinchInOutEnd.bind(h(e)),e.__mouseWheelFunc=e.__mouseWheel.bind(h(e)),e.__mouseDblClickFunc=e.__mouseDblClick.bind(h(e)),e.__contextMenuFunc=e.__contextMenu.bind(h(e)),e.__pressShiftFunc=e.__pressShift.bind(h(e)),e.__releaseShiftFunc=e.__releaseShift.bind(h(e)),e.__pressCtrlFunc=e.__pressCtrl.bind(h(e)),e.__releaseCtrlFunc=e.__releaseCtrl.bind(h(e)),e.__resetDollyAndPositionFunc=e.__resetDollyAndPosition.bind(h(e)),e.registerEventListeners(),e}var y,A,b=l.prototype;return b.resetDollyAndTranslation=function(){this.__dolly=.5,this.__mouse_translate_x=0,this.__mouse_translate_y=0,this.__mouseTranslateVec=o.d6.zero()},b.setTarget=function(e){this.__targetEntity=e,this.__originalTargetAABB=void 0,this.__updated=!1},b.getTarget=function(){return this.__targetEntity},b.__mouseDown=function(e){this.__tryToPreventDefault(e),this.__isPressingCtrl||(this.__originalX=e.clientX,this.__originalY=e.clientY,this.__rot_bgn_x=this.__rot_x,this.__rot_bgn_y=this.__rot_y,this.__isMouseDown=!0,this.__lastMouseDownTimeStamp=e.timeStamp,console.log("original",this.__originalX,this.__originalY),this.__updated=!1)},b.__mouseMove=function(e){if(this.__tryToPreventDefault(e),!u.Is.false(this.isMouseDown)&&!this.__isPressingCtrl){0===this.__buttonNumber&&(this.__buttonNumber=e.buttons);var t=e.clientX,n=e.clientY;switch(this.__buttonNumber){case 1:this.__isPressingShift?this.__parallelTranslateControl(this.__originalX,this.__originalY,t,n):(this.__rotateControl(this.__originalX,this.__originalY,t,n),this.__rot_bgn_x=this.__rot_x,this.__rot_bgn_y=this.__rot_y);break;case 2:this.__zoomControl(this.__originalX,t);break;case 4:this.__parallelTranslateControl(this.__originalX,this.__originalY,t,n);break;default:return}this.__originalX=t,this.__originalY=n,this.__updated=!1}},b.__mouseUp=function(e){this.__buttonNumber=0,this.__originalX=-1,this.__originalY=-1,this.__isMouseDown=!1,this.__lastMouseUpTimeStamp=e.timeStamp,this.__updated=!1},b.__touchDown=function(e){this.__tryToPreventDefault(e),1===e.touches.length?(this.__originalX=e.touches[0].clientX,this.__originalY=e.touches[0].clientY,this.__rot_bgn_x=this.__rot_x,this.__rot_bgn_y=this.__rot_y):(this.__originalX=.5*(e.touches[0].clientX+e.touches[1].clientX),this.__originalY=.5*(e.touches[0].clientY+e.touches[1].clientY)),this.__isMouseDown=!0,this.__lastMouseDownTimeStamp=e.timeStamp},b.__touchMove=function(e){if(this.__tryToPreventDefault(e),!u.Is.false(this.isMouseDown)){var t=e.touches[0].clientX,n=e.touches[0].clientY;1===e.touches.length?(t=e.touches[0].clientX,n=e.touches[0].clientY,this.__rotateControl(this.__originalX,this.__originalY,t,n),this.__rot_bgn_x=this.__rot_x,this.__rot_bgn_y=this.__rot_y):(t=.5*(e.touches[0].clientX+e.touches[1].clientX),n=.5*(e.touches[0].clientY+e.touches[1].clientY),this.__parallelTranslateControl(this.__originalX,this.__originalY,t,n)),this.__originalX=t,this.__originalY=n}},b.__touchUp=function(e){var t=e.touches.length;0===t?(this.__originalX=-1,this.__originalY=-1):1===t?(this.__originalX=e.touches[0].clientX,this.__originalY=e.touches[0].clientY,this.__rot_bgn_x=this.__rot_x,this.__rot_bgn_y=this.__rot_y):(this.__originalX=.5*(e.touches[0].clientX+e.touches[1].clientX),this.__originalY=.5*(e.touches[0].clientY+e.touches[1].clientY)),this.__isMouseDown=!1,this.__lastMouseUpTimeStamp=e.timeStamp},b.__rotateControl=function(e,t,n,r){var o=(n-e)*this.__efficiency*.3,i=(r-t)*this.__efficiency*.3;this.__rot_x=this.__rot_bgn_x-o,this.__rot_y=this.__rot_bgn_y-i,null!=this.__maximum_y&&this.__rot_y>this.__maximum_y&&(this.__rot_y=this.__maximum_y),null!=this.__minimum_y&&this.__rot_y<this.__minimum_y&&(this.__rot_y=this.__minimum_y)},b.__zoomControl=function(e,t){this.dolly-=(t-e)/1e3*this.__efficiency},b.__parallelTranslateControl=function(e,t,n,r){this.__mouse_translate_y=(r-t)/1e3*this.__efficiency,this.__mouse_translate_x=(n-e)/1e3*this.__efficiency;var o=this.__fixedDolly?1:this.__lengthOfCenterToEye*this.__fovyBias*this.__scaleOfTranslation,i=l.__tmpVec3_0;i.copyComponents(this.__newUpVec).normalize().multiply(this.__mouse_translate_y).multiply(o);var a=l.__tmpVec3_1;a.copyComponents(this.__newTangentVec).normalize().multiply(this.__mouse_translate_x).multiply(o),this.__mouseTranslateVec.add(i).add(a)},b.__getTouchesDistance=function(e){var t=e.touches,n=t[1].clientX-t[0].clientX,r=t[1].clientY-t[0].clientY;return Math.hypot(n,r)},b.__pinchInOut=function(e){if(!(e.touches.length<2))if(null!=this.__pinchInOutOriginalDistance){var t=this.__getTouchesDistance(e),n=this.__pinchInOutOriginalDistance;if(this.__pinchInOutControl){var r=n/t;this.dolly*=Math.pow(r*this.__efficiency,2.2/15),this.__pinchInOutOriginalDistance=t}else Math.abs(t-n)>35&&(this.__pinchInOutOriginalDistance=t,this.__pinchInOutControl=!0)}else this.__pinchInOutOriginalDistance=this.__getTouchesDistance(e)},b.__pinchInOutEnd=function(e){e.touches.length<2&&(this.__pinchInOutControl=!1,this.__pinchInOutOriginalDistance=null)},b.__tryToPreventDefault=function(e){this.__doPreventDefault&&e.preventDefault()},b.__mouseWheel=function(e){this.__tryToPreventDefault(e),this.dolly+=Math.sign(e.deltaY)/200},b.__contextMenu=function(e){this.__tryToPreventDefault(e)},b.__mouseDblClick=function(e){e.shiftKey?this.__mouseTranslateVec.zero():e.ctrlKey&&(this.__rot_y=0,this.__rot_x=0,this.__rot_bgn_y=0,this.__rot_bgn_x=0)},b.__resetDollyAndPosition=function(e){if(!(e.touches.length>1)){var t=(new Date).getTime();t-this.__resetDollyTouchTime<300?(this.dolly=Math.pow(.5,1/2.2),this.__mouseTranslateVec.zero(),this.__rot_x=0,this.__rot_y=0):this.__resetDollyTouchTime=t}},b.__pressShift=function(e){!0===e.shiftKey&&(this.__isPressingShift=!0)},b.__releaseShift=function(e){!1===e.shiftKey&&(this.__isPressingShift=!1)},b.__pressCtrl=function(e){!0===e.ctrlKey&&(this.__isPressingCtrl=!0)},b.__releaseCtrl=function(e){!1===e.ctrlKey&&(this.__isPressingCtrl=!1)},b.registerEventListeners=function(){var e=window;u.Is.exist(_.D.eventTargetDom)&&(e=_.D.eventTargetDom),"ontouchend"in document?f.$t.register(f.jO,[{eventName:"touchstart",handler:this.__touchDownFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"touchmove",handler:this.__touchMoveFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"touchend",handler:this.__touchUpFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"touchmove",handler:this.__pinchInOutFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"touchend",handler:this.__pinchInOutEndFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"touchstart",handler:this.__resetDollyAndPositionFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"contextmenu",handler:this.__contextMenuFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"dblclick",handler:this.__mouseDblClickFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e}]):f.$t.register(f.jO,[{eventName:"mousedown",handler:this.__mouseDownFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"mouseup",handler:this.__mouseUpFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"mouseleave",handler:this.__mouseUpFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"mousemove",handler:this.__mouseMoveFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"keydown",handler:this.__pressShiftFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"keyup",handler:this.__releaseShiftFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"keydown",handler:this.__pressCtrlFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"keyup",handler:this.__releaseCtrlFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"contextmenu",handler:this.__contextMenuFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"wheel",handler:this.__mouseWheelFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"dblclick",handler:this.__mouseDblClickFunc,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e}])},b.unregisterEventListeners=function(){f.$t.unregister(f.jO)},b.__getFovyFromCamera=function(e){return e.fovy?e.fovy:i.k.radianToDegree(2*Math.atan(Math.abs(e.top-e.bottom)/(2*e.zNear)))},b.logic=function(e){this.__updated&&!this.autoUpdate||(this.__updateTargeting(e),this.__calculateInfluenceOfController(),this.__updateCameraComponent(e),this.__updated=!0)},b.__updateTargeting=function(e){var t=e.eye,n=e._direction,r=e._up,a=this.__eyeVec,c=this.__centerVec,u=this.__upVec.copyComponents(r);if(null==this.__targetEntity)a.copyComponents(t),c.copyComponents(n);else{if(null==this.__originalTargetAABB){var f=this.__targetEntity.tryToGetSceneGraph().worldAABB;this.__originalTargetAABB=f.clone()}if(this.followTargetAABB){var _=this.__targetEntity.tryToGetSceneGraph().worldAABB;c.copyComponents(_.centerPoint)}else c.copyComponents(this.__originalTargetAABB.centerPoint);var h=o.d6.subtractTo(t,n,a).normalize(),d=this.__fixedDolly?this.__fixedLengthOfCenterToEye:this.__originalTargetAABB.lengthCenterToCorner*(1+1/Math.tan(i.k.degreeToRadian(e.fovy/2)))*this.scaleOfLengthCenterToCamera;Math.abs(d)<1e-5&&(d=1),h.multiply(d).add(c);var m=e.entity.tryToGetSceneGraph();if(null!=m){var v=s.J.invertTo(m.matrixInner,l.__tmpMat44_0);v.multiplyVector3To(c,c),v.multiplyVector3To(a,a),v.multiplyVector3To(u,u)}}},b.__calculateInfluenceOfController=function(){var e=o.d6.subtractTo(this.__eyeVec,this.__centerVec,l.__tmpVec3_0);this.__fixedDolly?this.__lengthOfCenterToEye=this.__fixedLengthOfCenterToEye:(e.multiply(this.__dolly*this.dollyScale),this.__lengthOfCenterToEye=e.length());var t=this.__newUpVec,n=this.__newEyeVec,s=this.__newCenterVec,c=this.__newTangentVec;if(this.__isSymmetryMode){var u=l.__tmpVec3_1;u.setComponents(e.x,0,e.z);var f=r.P.angleOfVectors(u,l.__tmp_up);f*=Math.sign(u.cross(l.__tmp_up).y);var _=l.__tmp_rotateM_X,h=l.__tmp_rotateM_Y,d=l.__tmp_rotateM_Reset,m=l.__tmp_rotateM_Revert;_.rotateX(i.k.degreeToRadian(this.__rot_y)),h.rotateY(i.k.degreeToRadian(this.__rot_x)),d.rotateY(i.k.degreeToRadian(f)),m.rotateY(i.k.degreeToRadian(-f));var v=l.__tmp_rotateM;a.x.multiplyTo(_,d,v),v.multiplyByLeft(h),v.multiplyByLeft(m),v.multiplyVectorTo(this.__upVec,t),v.multiplyVectorTo(e,n).add(this.__centerVec),s.copyComponents(this.__centerVec);var p=l.__tmpVec3_2;o.d6.subtractTo(s,n,p),o.d6.crossTo(t,p,c),n.add(this.__mouseTranslateVec),s.add(this.__mouseTranslateVec)}else{var y=l.__tmp_rotateM_X,A=l.__tmp_rotateM_Y;y.rotateX(i.k.degreeToRadian(this.__rot_y)),A.rotateY(i.k.degreeToRadian(this.__rot_x));var b=a.x.multiplyTo(A,y,l.__tmp_rotateM);b.multiplyVectorTo(this.__upVec,t),b.multiplyVectorTo(e,n).add(this.__centerVec),s.copyComponents(this.__centerVec);var g=l.__tmpVec3_1;o.d6.subtractTo(s,n,g),o.d6.crossTo(t,g,c),n.add(this.__mouseTranslateVec),s.add(this.__mouseTranslateVec)}},b.__updateCameraComponent=function(e){var t=l.__tmpVec3_0.copyComponents(this.__newCenterVec);t.subtract(this.__newEyeVec).normalize(),this._calcZNearInner(e,this.__newEyeVec,t),this._calcZFarInner(e);var n=e.zFar/e.zNear/this.__scaleOfZNearAndZFar,r=e.left+n,o=e.right+n,a=e.top+n,s=e.bottom+n,c=this.__getFovyFromCamera(e);this.__fovyBias=Math.tan(i.k.degreeToRadian(c/2)),e.eyeInner=this.__newEyeVec,e.directionInner=this.__newCenterVec,e.upInner=this.__newUpVec,e.leftInner=r,e.rightInner=o,e.topInner=a,e.bottomInner=s,e.fovyInner=c},b.setFixedDollyTrue=function(e){this.__fixedLengthOfCenterToEye=e,this.__fixedDolly=!0},b.unsetFixedDolly=function(){this.__fixedDolly=!1},y=l,(A=[{key:"doPreventDefault",get:function(){return this.__doPreventDefault},set:function(e){this.__doPreventDefault=e}},{key:"rotX",get:function(){return this.__rot_x},set:function(e){this.__rot_x=e}},{key:"rotY",get:function(){return this.__rot_y},set:function(e){this.__rot_y=e}},{key:"maximumY",set:function(e){this.__maximum_y=e}},{key:"minimumY",set:function(e){this.__minimum_y=e}},{key:"dolly",get:function(){return Math.pow(this.__dolly,.2)},set:function(e){e=Math.min(e,1),e=Math.max(e,1e-4);var t=Math.pow(e,5);t=Math.max(t,1e-4),this.__dolly=t}},{key:"scaleOfZNearAndZFar",get:function(){return this.__scaleOfZNearAndZFar},set:function(e){this.__scaleOfZNearAndZFar=e}},{key:"isMouseDown",get:function(){return this.__isMouseDown}},{key:"lastMouseDownTimeStamp",get:function(){return this.__lastMouseDownTimeStamp}},{key:"lastMouseUpTimeStamp",get:function(){return this.__lastMouseUpTimeStamp}}])&&d(y.prototype,A),l}(l.m);A.__tmp_up=r.P.fromCopyArray([0,0,1]),A.__tmpVec3_0=o.d6.zero(),A.__tmpVec3_1=o.d6.zero(),A.__tmpVec3_2=o.d6.zero(),A.__tmp_rotateM_X=a.x.identity(),A.__tmp_rotateM_Y=a.x.identity(),A.__tmp_rotateM=a.x.identity(),A.__tmp_rotateM_Reset=a.x.identity(),A.__tmp_rotateM_Revert=a.x.identity(),A.__tmpMat44_0=c.e.identity()},8430:(e,t,n)=>{n.d(t,{I:()=>A});var r=n(7468),o=n(9409),i=n(988),a=n(2863),s=n(8289),c=n(4275),l=n(4969),u=n(9197),f=n(5511);function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function v(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?_(e):t}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}var y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(s,e);var t,n,a=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=m(t);if(n){var o=m(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return v(this,e)});function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{eventTargetDom:document,verticalSpeed:1,horizontalSpeed:1,turnSpeed:.25,mouseWheelSpeedScale:1,inverseVerticalRotating:!1,inverseHorizontalRotating:!1};h(this,s),(e=a.call(this))._isKeyDown=!1,e._isMouseDrag=!1,e._lastKeyCode=-1,e._currentDir=i.d6.fromCopyArray([0,0,-1]),e._currentPos=i.d6.fromCopyArray([0,0,0]),e._currentCenter=i.d6.fromCopyArray([0,0,-1]),e._currentHorizontalDir=i.d6.fromCopyArray([0,0,-1]),e._newDir=i.d6.fromCopyArray([0,0,-1]),e._isMouseDown=!1,e._clickedMouseXOnCanvas=-1,e._clickedMouseYOnCanvas=-1,e._draggedMouseXOnCanvas=-1,e._draggedMouseYOnCanvas=-1,e._deltaMouseXOnCanvas=-1,e._deltaMouseYOnCanvas=-1,e._mouseXAdjustScale=1,e._mouseYAdjustScale=1,e._deltaY=-1,e._deltaX=-1,e._mouseUpBind=e._mouseUp.bind(_(e)),e._mouseDownBind=e._mouseDown.bind(_(e)),e._mouseMoveBind=e._mouseMove.bind(_(e)),e._mouseWheelBind=e._mouseWheel.bind(_(e)),e.__doPreventDefault=!1,e._needInitialize=!0,e._horizontalSpeed=t.horizontalSpeed,e._verticalSpeed=t.verticalSpeed,e._turnSpeed=t.turnSpeed,e._mouseXAdjustScale=e._turnSpeed,e._mouseYAdjustScale=e._turnSpeed,e._mouseWheelSpeedScale=t.mouseWheelSpeedScale,e._inverseVerticalRotating=t.inverseVerticalRotating,e._inverseHorizontalRotating=t.inverseHorizontalRotating,e.reset(),e._onKeydown=function(t){e._isKeyDown=!0,e._lastKeyCode=t.keyCode},e._onKeyup=function(t){e._isKeyDown=!1,e._lastKeyCode=-1};var n=t.eventTargetDom;return e.registerEventListeners(n),e}var c,y,A=s.prototype;return A.registerEventListeners=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;this._eventTargetDom=e;var t=[{eventName:"keydown",handler:this._onKeydown,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"keyup",handler:this._onKeyup,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e}];"ontouchend"in document&&t.push({eventName:"touchstart",handler:this._mouseDownBind,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"touchend",handler:this._mouseUpBind,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"touchmove",handler:this._mouseMoveBind,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e}),"onmouseup"in document&&t.push({eventName:"mousedown",handler:this._mouseDownBind,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"mouseup",handler:this._mouseUpBind,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"mouseleave",handler:this._mouseUpBind,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e},{eventName:"mousemove",handler:this._mouseMoveBind,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e}),"onwheel"in document&&t.push({eventName:"wheel",handler:this._mouseWheelBind,options:{passive:!this.__doPreventDefault},classInstance:this,eventTargetDom:e}),f.$t.register(f.jO,t)},A.unregisterEventListeners=function(){f.$t.unregister(f.jO)},A.__tryToPreventDefault=function(e){this.__doPreventDefault&&e.preventDefault()},A._mouseWheel=function(e){if(null!==this._currentDir){var t=-1*Math.sign(e.deltaY)*this._mouseWheelSpeedScale*this._horizontalSpeed,n=s.__tmp_Vec3_0;n.setComponents(this._currentDir.x,0,this._currentDir.z).normalize();var r=i.d6.multiplyTo(n,t,s.__tmp_Vec3_1);this._currentPos.add(r),this._currentCenter.add(r)}},A._mouseDown=function(e){this.__tryToPreventDefault(e),this._isMouseDown=!0;var t=e.target.getBoundingClientRect();return this._clickedMouseXOnCanvas=e.clientX-t.left,this._clickedMouseYOnCanvas=e.clientY-t.top,!1},A._mouseMove=function(e){if(this.__tryToPreventDefault(e),this._isMouseDown){var t=e.target.getBoundingClientRect();this._draggedMouseXOnCanvas=e.clientX-t.left,this._draggedMouseYOnCanvas=e.clientY-t.top,this._deltaMouseXOnCanvas=this._draggedMouseXOnCanvas-this._clickedMouseXOnCanvas,this._deltaMouseYOnCanvas=this._draggedMouseYOnCanvas-this._clickedMouseYOnCanvas,this._isMouseDrag=!0}},A._mouseUp=function(e){this._isMouseDown=!1,this._isMouseDrag=!1;var t=e.target;if(null!=(null==t?void 0:t.getBoundingClientRect)){var n=t.getBoundingClientRect();this._clickedMouseXOnCanvas=e.clientX-n.left,this._clickedMouseYOnCanvas=e.clientY-n.top}},A.tryReset=function(){},A.reset=function(){this._isKeyDown=!1,this._lastKeyCode=-1,this._currentPos.zero(),this._currentCenter.setComponents(0,0,-1),this._currentDir.setComponents(0,0,-1),this._currentHorizontalDir.setComponents(0,0,-1),this._isMouseDown=!1,this._isMouseDrag=!1,this._draggedMouseXOnCanvas=-1,this._draggedMouseYOnCanvas=-1,this._deltaMouseXOnCanvas=-1,this._deltaMouseYOnCanvas=-1,this._mouseXAdjustScale=this._turnSpeed,this._mouseYAdjustScale=this._turnSpeed,this._deltaY=0,this._deltaX=0,this._newDir.setComponents(0,0,-1)},A.logic=function(e){this.__updateCameraComponent(e)},A.__updateCameraComponent=function(e){var t=this.__targetEntity.getSceneGraph().worldAABB;if(this._needInitialize&&null!=t){var n=t.lengthCenterToCorner*(1+1/Math.tan(l.k.degreeToRadian(e.fovy/2)));this._currentPos.copyComponents(t.centerPoint),this._currentPos.z+=n,this._currentCenter.copyComponents(t.centerPoint),this._currentDir.setComponents(0,0,-1);var o=e.entity.tryToGetSceneGraph();if(u.Is.exist(o)){var a=r.J.invertTo(o.matrixInner,s.__tmpInvMat);a.multiplyVector3To(this._currentPos,this._currentPos),a.multiplyVector3To(this._currentCenter,this._currentCenter)}this._needInitialize=!1}var c=this._deltaY/90;this._newDir.x=this._currentDir.x*(1-c),this._newDir.y=c,this._newDir.z=this._currentDir.z*(1-c),this._newDir.normalize(),this._currentHorizontalDir.x=this._currentDir.x,this._currentHorizontalDir.y=0,this._currentHorizontalDir.z=this._currentDir.z,this._currentHorizontalDir.normalize();var f=s.__tmp_Vec3_0.zero();switch(this._lastKeyCode){case 87:case 38:f.x=this._currentHorizontalDir.x*this._horizontalSpeed,f.z=this._currentHorizontalDir.z*this._horizontalSpeed;break;case 65:case 37:f.x=this._currentHorizontalDir.z*this._horizontalSpeed,f.z=-this._currentHorizontalDir.x*this._horizontalSpeed;break;case 83:case 40:f.x=-this._currentHorizontalDir.x*this._horizontalSpeed,f.z=-this._currentHorizontalDir.z*this._horizontalSpeed;break;case 68:case 39:f.x=-this._currentHorizontalDir.z*this._horizontalSpeed,f.z=this._currentHorizontalDir.x*this._horizontalSpeed;break;case 81:f.x=-this._newDir.x*this._horizontalSpeed,f.y=-this._newDir.y*this._horizontalSpeed,f.z=-this._newDir.z*this._horizontalSpeed;break;case 69:f.x=this._newDir.x*this._horizontalSpeed,f.y=this._newDir.y*this._horizontalSpeed,f.z=this._newDir.z*this._horizontalSpeed;break;case 82:f.y=this._verticalSpeed;break;case 70:f.y=-this._verticalSpeed}if(this._currentPos.add(f),this._currentCenter.add(f),this._isMouseDrag){this._inverseHorizontalRotating?this._deltaX=this._deltaMouseXOnCanvas*this._mouseXAdjustScale:this._deltaX=-this._deltaMouseXOnCanvas*this._mouseXAdjustScale,this._inverseVerticalRotating?this._deltaY+=this._deltaMouseYOnCanvas*this._mouseYAdjustScale:this._deltaY+=-this._deltaMouseYOnCanvas*this._mouseYAdjustScale,this._deltaY=Math.max(-120,Math.min(50,this._deltaY));var _=s.__tmpRotateMat.rotateY(l.k.degreeToRadian(this._deltaX));_.multiplyVectorTo(this._currentDir,this._currentDir);var h=i.d6.subtractTo(this._currentCenter,this._currentPos,s.__tmp_Vec3_1);_.multiplyVectorTo(h,h),h.x=h.x*(1-c),h.y=c,h.z=h.z*(1-c),h.normalize(),this._currentCenter.copyComponents(this._currentPos),this._currentCenter.add(h),this._clickedMouseXOnCanvas=this._draggedMouseXOnCanvas,this._clickedMouseYOnCanvas=this._draggedMouseYOnCanvas,this._deltaMouseXOnCanvas=0,this._deltaMouseYOnCanvas=0}e.eyeInner=this._currentPos,e.directionInner=this._currentCenter,e.upInner=e._up,e.leftInner=e.left,e.rightInner=e.right,e.topInner=e.top,e.bottomInner=e.bottom,e.fovyInner=e.fovy,this._calcZNearInner(e,this._currentPos,this._newDir),this._calcZFarInner(e)},A.getDirection=function(){return null!==this._currentCenter?this._newDir.clone():null},A.setTarget=function(e){var t=e.tryToGetSceneGraph().worldAABB.lengthCenterToCorner/10;this.verticalSpeed=t,this.horizontalSpeed=t,this.__targetEntity=e,this._needInitialize=!0},A.getTarget=function(){return this.__targetEntity},c=s,(y=[{key:"horizontalSpeed",get:function(){return this._horizontalSpeed},set:function(e){this._horizontalSpeed=e}},{key:"verticalSpeed",get:function(){return this._verticalSpeed},set:function(e){this._verticalSpeed=e}},{key:"mouseWheelSpeed",get:function(){return this._mouseWheelSpeedScale},set:function(e){this._mouseWheelSpeedScale=e}},{key:"allInfo",get:function(){var e={};return e.verticalSpeed=this.verticalSpeed,e.horizontalSpeed=this.horizontalSpeed,e._turnSpeed=this._turnSpeed,this._currentPos&&(e._currentPos=this._currentPos.clone()),this._currentCenter&&(e._currentCenter=this._currentCenter.clone()),this._currentDir&&(e._currentDir=this._currentDir.clone()),e._deltaY=this._deltaY,e._newDir=this._newDir.clone(),e},set:function(e){var t=e;for(var n in"string"==typeof e&&(t=JSON.parse(e)),t)t.hasOwnProperty(n)&&n in this&&(this[n]="quaternion"===n?o.D.cloneOfMathObjects(o.D.arrayToQuaternion(t[n])):o.D.cloneOfMathObjects(o.D.arrayToVectorOrMatrix(t[n])))}}])&&d(c.prototype,y),s}(c.m);A.__tmpInvMat=s.e.identity(),A.__tmpRotateMat=a.x.identity(),A.__tmp_Vec3_0=i.d6.zero(),A.__tmp_Vec3_1=i.d6.zero()},5054:(e,t,n)=>{n.d(t,{c:()=>O});var r=n(1410),o=n(6383),i=n(2342),a=n(6174),s=n(9611),c=n(166),l=n(1417),u=n(6815),f=n(1274),_=n(7906),h=n(5233),d=n(7058),m=n(6860),v=n(9197),p=n(5241),y=n(1855),A=n(9958);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function w(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function R(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}var M={name:"",maxStartInputTime:0,maxEndInputTime:0},B=Symbol("AnimationComponentEventChangeAnimationInfo"),N=Symbol("AnimationComponentEventPlayEnd"),O=function(e){E(n,e);var t=D(n);function n(e,r,o){var i;return g(this,n),(i=t.call(this,e,r,o)).__animationTracks=new Map,i.__isEffekseerState=-1,i.__isAnimating=!0,i.__currentProcessStage=u.I.Create,i}var r,_,b,I=n.prototype;return I.$create=function(){this.__transformComponent=i.g.getComponentOfEntity(this.__entityUid,l.U),this.__blendShapeComponent=i.g.getComponentOfEntity(this.__entityUid,A.x),this.__effekseerComponent=i.g.getComponentOfEntity(this.__entityUid,p.D),this.moveStageTo(u.I.Logic)},I.$logic=function(){if(n.isAnimating&&this.isAnimating){var e=this._animationRetarget;v.Is.exist(e)?(this.__transformComponent.localRotation=e.retargetQuaternion(this.entity),this.__transformComponent.localPosition=e.retargetTranslate(this.entity),this.__transformComponent.localScale=e.retargetScale(this.entity)):this.__applyAnimation()}},I.__applyAnimation=function(){if(void 0!==this.__currentActiveAnimationTrackName){var e=this.__animationTracks.get(this.__currentActiveAnimationTrackName);if(void 0!==e){var t=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=T(i.value,2),l=s[0],u=s[1],f=c.s.fromString(l).index,_=n.__interpolate(u,n.globalTime,f);if(f===c.s.Quaternion.index)this.__transformComponent.localRotation=h._.fromCopyArray4(_);else if(f===c.s.Translate.index)this.__transformComponent.localPosition=m.P.fromCopyArray3(_);else if(f===c.s.Scale.index)this.__transformComponent.localScale=m.P.fromCopyArray3(_);else if(f===c.s.Weights.index)this.__blendShapeComponent.weights=_;else if(f===c.s.Effekseer.index){var d,v;_[0]>.5?0===this.__isEffekseerState&&(null===(d=this.__effekseerComponent)||void 0===d||d.play()):1===this.__isEffekseerState&&(null===(v=this.__effekseerComponent)||void 0===v||v.pause()),this.__isEffekseerState=_[0]}}}catch(e){r=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}}}},I.setIsAnimating=function(e){this.__isAnimating=e},I.setActiveAnimationTrack=function(e){return!!this.__animationTracks.has(e)&&(this.__currentActiveAnimationTrackName=e,!0)},I.getActiveAnimationTrack=function(){return this.__currentActiveAnimationTrackName},I.hasAnimation=function(e,t){var n=this.__animationTracks.get(e);return!v.Is.not.exist(n)&&n.has(t)},I.setAnimation=function(e,t,r,o,a,s){var c,u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];this.__currentActiveAnimationTrackName=u?e:(0,f.kS)({value:this.__currentActiveAnimationTrackName,defaultValue:e});var _={sampler:{input:r,output:o,outputComponentN:a,interpolationMethod:s},target:{pathName:t,entity:this.entity},belongTrackName:e},h=this.__animationTracks.get(e);v.Is.not.exist(h)&&(h=new Map,this.__animationTracks.set(e,h)),h.set(t,_);var d=r[0],m=r[r.length-1],p=(0,f.kS)({value:n.__animationGlobalInfo.get(e),defaultValue:M}),y=p.maxStartInputTime,A=p.maxEndInputTime,b=(0,f.Qj)(y,d),g=(0,f.tS)(m,A);if(b.result||g.result){var x={name:e,maxStartInputTime:b.less,maxEndInputTime:g.greater};n.__animationGlobalInfo.set(e,x),n.__pubsub.publishAsync(n.Event.ChangeAnimationInfo,{infoMap:new Map(n.__animationGlobalInfo)})}this.__transformComponent=i.g.getComponentOfEntity(this.__entityUid,l.U),null===(c=this.__transformComponent)||void 0===c||c._backupTransformAsRest()},I.getStartInputValueOfAnimation=function(e){var t=null!=e?e:this.__currentActiveAnimationTrackName;if(void 0===t){var r=Array.from(n.__animationGlobalInfo.values());return 0===r.length?0:r[0].maxEndInputTime}return(0,f.kS)({value:n.__animationGlobalInfo.get(t),defaultValue:M}).maxStartInputTime},I.getEndInputValueOfAnimation=function(e){var t=null!=e?e:this.__currentActiveAnimationTrackName;if(void 0===t){var r=Array.from(n.__animationGlobalInfo.values());return 0===r.length?0:r[0].maxEndInputTime}return(0,f.kS)({value:n.__animationGlobalInfo.get(t),defaultValue:M}).maxEndInputTime},I.getAnimationTrackNames=function(){return Array.from(this.__animationTracks.keys())},I.getAnimationChannelsOfTrack=function(e){return this.__animationTracks.get(e)},I.addThisComponentToEntity=function(e,t){var n=function(e){E(n,e);var t=D(n);function n(e,r,o){return g(this,n),t.call(this,e,r,o)}return n.prototype.getAnimation=function(){return this.getComponentByComponentTID(a.z.AnimationComponentTID)},n}(e.constructor);return(0,i.e)(e,n),e},I.addKeyFrame=function(e,t,r,o){var i=r/o,a=i,s=(r+1)/o,l=this.__animationTracks.get(e);if(v.Is.not.exist(l))return!1;var u=l.get(t);if(v.Is.not.exist(u))return!1;ArrayBuffer.isView(u.sampler.input)&&(u.sampler.input=Array.from(u.sampler.input)),ArrayBuffer.isView(u.sampler.output)&&(u.sampler.output=Array.from(u.sampler.output));var f,_=c.s.fromString(t).index,h=n.__interpolate(u,n.globalTime,_);if(0===u.sampler.input.length)u.sampler.input.push(a),(f=u.sampler.output).push.apply(f,C(h));else if(1===u.sampler.input.length){var d,m=u.sampler.input[0];if(s<m)u.sampler.input.unshift(a),(d=u.sampler.output).unshift.apply(d,C(h));else if(m<i){var p;u.sampler.input.push(a),(p=u.sampler.output).push.apply(p,C(h))}else{var y;u.sampler.input.splice(0,0,a),(y=u.sampler.output).splice.apply(y,[0,0].concat(C(h)))}}else for(var A=0;A<u.sampler.input.length;A++){var b=u.sampler.input[A];if(i<=b){if(i<=b&&b<=s){u.sampler.input[A]=a;for(var g=0;g<u.sampler.outputComponentN;g++)u.sampler.output[A*u.sampler.outputComponentN+g]=h[g]}else{var x;u.sampler.input.splice(A,0,a),(x=u.sampler.output).splice.apply(x,[A*u.sampler.outputComponentN,0].concat(C(h)))}break}}return!0},I.addKeyFrameWithValue=function(e,t,n,r,o){var i=n/o,a=i,s=(n+1)/o,c=this.__animationTracks.get(e);if(v.Is.not.exist(c))return!1;var l,u=c.get(t);if(v.Is.not.exist(u))return!1;if(ArrayBuffer.isView(u.sampler.input)&&(u.sampler.input=Array.from(u.sampler.input)),ArrayBuffer.isView(u.sampler.output)&&(u.sampler.output=Array.from(u.sampler.output)),0===u.sampler.input.length)u.sampler.input.push(a),(l=u.sampler.output).push.apply(l,C(r));else if(1===u.sampler.input.length){var f,_=u.sampler.input[0];if(s<_)u.sampler.input.unshift(a),(f=u.sampler.output).unshift.apply(f,C(r));else if(_<i){var h;u.sampler.input.push(a),(h=u.sampler.output).push.apply(h,C(r))}else{var d;u.sampler.input.splice(0,0,a),(d=u.sampler.output).splice.apply(d,[0,0].concat(C(r)))}}else for(var m=0;m<u.sampler.input.length;m++){var p=u.sampler.input[m];if(i<=p){if(i<=p&&p<=s){u.sampler.input[m]=a;for(var y=0;y<u.sampler.outputComponentN;y++)u.sampler.output[m*u.sampler.outputComponentN+y]=r[y]}else{var A;u.sampler.input.splice(m,0,a),(A=u.sampler.output).splice.apply(A,[m*u.sampler.outputComponentN,0].concat(C(r)))}break}}return!0},I.deleteKeysAtFrame=function(e,t,n,r){var o=n/r,i=(n+1)/r,a=this.__animationTracks.get(e);if(v.Is.not.exist(a))return!1;var s=a.get(t);if(v.Is.not.exist(s))return!1;ArrayBuffer.isView(s.sampler.input)&&(s.sampler.input=Array.from(s.sampler.input)),ArrayBuffer.isView(s.sampler.output)&&(s.sampler.output=Array.from(s.sampler.output));for(var c=0;c<s.sampler.input.length;c++){var l=s.sampler.input[c];o<=l&&l<i&&(s.sampler.input.splice(c,1),s.sampler.output.splice(c*s.sampler.outputComponentN,s.sampler.outputComponentN))}return!0},I.hasKeyFramesAtFrame=function(e,t,n,r){var o=n/r,i=(n+1)/r,a=this.__animationTracks.get(e);if(v.Is.not.exist(a))return!1;var s=a.get(t);if(v.Is.not.exist(s))return!1;for(var c=0;c<s.sampler.input.length;c++){var l=s.sampler.input[c];if(o<=l&&l<i)return!0}return!1},I.__calcGlobalInverseBindMatrix=function(e){var t=e.parent,n=v.Is.exist(this.inverseBindMatrix)?this.inverseBindMatrix:y.Je.identity();return v.Is.exist(t)?y.Je.multiply(n,this.__calcGlobalInverseBindMatrix(t)):n},I._shallowCopyFrom=function(e){var t=e;this.__currentActiveAnimationTrackName=t.__currentActiveAnimationTrackName,this.__animationTracks=new Map(t.__animationTracks),this.__isEffekseerState=t.__isEffekseerState,this.__isAnimating=t.__isAnimating,this._animationRetarget=t._animationRetarget},n.subscribe=function(e,t){n.__pubsub.subscribe(e,t)},n.cubicSpline=function(e,t,n,r,o){for(var i=new Array(e.length),a=0;a<e.length;a++)i[a]=(2*Math.pow(o,3)-3*Math.pow(o,2)+1)*e[a]+(Math.pow(o,3)-2*Math.pow(o,2)+o)*n[a]+(-2*Math.pow(o,3)+3*Math.pow(o,2))*t[a]+(Math.pow(o,3)-Math.pow(o,2))*r[a];return i},n.binarySearch=function(e,t){for(var n=0,r=e.length-1,o=0,i=0;n<=r;)if(e[o=n+(r-n>>1)]<t)n=o+1,i=o;else{if(!(t<e[o]))return o;i=r=o-1}return i},n.interpolationSearch=function(e,t){for(var n=0,r=0,o=e.length-1,i=0;r<=o&&t>=e[r]&&t<=e[o];)if(e[n=Math.floor(r+(t-e[r])*(o-r)/(e[o]-e[r]))]<t)r=n+1,i=n;else{if(!(t<e[n]))return n;i=o=n-1}return i},n.bruteForceSearch=function(e,t){for(var n=0;n<e.length;n++)if(e[n]<=t&&t<e[n+1])return n;return e.length-1},n.setIsAnimatingForAll=function(e){var t=o.C._getComponents(n),r=!0,i=!1,a=void 0;try{for(var s,c=t[Symbol.iterator]();!(r=(s=c.next()).done);r=!0)s.value.setIsAnimating(e)}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}},n.setActiveAnimationForAll=function(e){var t=o.C.getComponentsWithType(n),r=!0,i=!1,a=void 0;try{for(var s,c=t[Symbol.iterator]();!(r=(s=c.next()).done);r=!0)s.value.setActiveAnimationTrack(e)}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}},n.getAnimationList=function(){return Array.from(this.__animationGlobalInfo.keys())},n.getAnimationInfo=function(){return new Map(this.__animationGlobalInfo)},n.__prepareVariablesForCubicSpline=function(e,t,n,r){var o=e;return 4===n?{p_0:o[d.hx](3*n*t+n),p_1:o[d.hx](3*n*(t+1)+n),m_0:o[d.p8](3*n*t+2*n,r),m_1:o[d.p8](3*n*(t+1),r)}:3===n?{p_0:o[d.Up](3*n*t+n),p_1:o[d.Up](3*n*(t+1)+n),m_0:o[d.ns](3*n*t+2*n,r),m_1:o[d.ns](3*n*(t+1),r)}:{p_0:o[d.fK](3*n*t+n,n),p_1:o[d.fK](3*n*(t+1)+n,n),m_0:o[d.n5](3*n*t+2*n,n,r),m_1:o[d.n5](3*n*(t+1),n,r)}},n.__getOutputValue=function(e,t,n){var r=n;return t.sampler.interpolationMethod===s.k.CubicSpline?4===t.sampler.outputComponentN?r[d.hx](3*t.sampler.outputComponentN*e+t.sampler.outputComponentN):3===t.sampler.outputComponentN?r[d.Up](3*t.sampler.outputComponentN*e+t.sampler.outputComponentN):1===t.sampler.outputComponentN?r[d.w0](3*t.sampler.outputComponentN*e+t.sampler.outputComponentN):r[d.fK](3*t.sampler.outputComponentN*e+t.sampler.outputComponentN,t.sampler.outputComponentN):4===t.sampler.outputComponentN?r[d.JI](e):3===t.sampler.outputComponentN?r[d.Dq](e):1===t.sampler.outputComponentN?r[d.GW](e):r[d.lx](e,t.sampler.outputComponentN)},n.__lerp=function(e,t,n,r,o){var i=e;return n===c.s.Quaternion.index?i[d.Rl](i,t,r,r+1):n===c.s.Weights.index?i[d.wr](i,o,t,r,r+1):i[d.to](i,t,r,r+1)},n.__interpolate=function(e,t,n){var r,o=e.sampler.input,i=e.sampler.output,a=null!==(r=e.sampler.interpolationMethod)&&void 0!==r?r:s.k.Linear;if(t<=o[0])return this.__getOutputValue(0,e,i);if(o[o.length-1]<=t)return this.__getOutputValue(o.length-1,e,i);if(a===s.k.CubicSpline){var l=this.interpolationSearch(o,t),u=o[l+1]-o[l],f=(t-o[l])/u,_=this.__prepareVariablesForCubicSpline(i,l,e.sampler.outputComponentN,u),h=_.p_0,m=_.p_1,v=_.m_0,p=_.m_1,y=this.cubicSpline(h,m,v,p,f);return n===c.s.Quaternion.index&&y[d.Xg](),y}if(a===s.k.Linear){var A=this.interpolationSearch(o,t),b=(t-o[A])/(o[A+1]-o[A]);return this.__lerp(i,b,n,A,e.sampler.outputComponentN)}if(a===s.k.Step){for(var g=0;g<o.length-1;g++)if(o[g]<=t&&t<o[g+1])return this.__getOutputValue(g,e,i);return this.__getOutputValue(o.length-1,e,i)}return[]},n.setIsAnimating=function(e){this.isAnimating=e},r=n,b=[{key:"startInputValue",get:function(){if(0===o.C.getComponentsWithType(n).length)return 0;var e=Array.from(this.__animationGlobalInfo.values());return e[e.length-1].maxStartInputTime}},{key:"endInputValue",get:function(){if(0===o.C.getComponentsWithType(n).length)return 0;var e=Array.from(this.__animationGlobalInfo.values());return e[e.length-1].maxEndInputTime}},{key:"componentTID",get:function(){return a.z.AnimationComponentTID}}],(_=[{key:"isAnimating",get:function(){return this.__isAnimating}},{key:"entity",get:function(){return i.g.getEntity(this.__entityUid)}},{key:"inverseBindMatrix",get:function(){var e;return null===(e=this.__skeletalComponent)||void 0===e?void 0:e._getInverseBindMatrices(this.entity.getSceneGraph())}},{key:"globalInverseBindMatrix",get:function(){return this.__calcGlobalInverseBindMatrix(this.entity.getSceneGraph())}}])&&x(r.prototype,_),b&&x(r,b),n}(r.w);O.isAnimating=!0,O.globalTime=0,O.Event={ChangeAnimationInfo:B,PlayEnd:N},O.__animationGlobalInfo=new Map,O.__pubsub=new _.U,o.C.registerComponentClass(O)},9958:(e,t,n)=>{n.d(t,{x:()=>v});var r=n(1410),o=n(6383),i=n(2342),a=n(6174),s=n(6815);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function _(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var d=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}var v=function(e){f(n,e);var t=m(n);function n(e,r,o){var i;return c(this,n),(i=t.call(this,e,r,o)).__weights=[],i.__targetNames=[],i.moveStageTo(s.I.Logic),i}var r,o,u,_=n.prototype;return _.setWeightByIndex=function(e,t){this.__weights[e]=t},_.$logic=function(){},_.addThisComponentToEntity=function(e,t){var n=function(e){f(n,e);var t=m(n);function n(e,r,o){return c(this,n),t.call(this,e,r,o)}return n.prototype.getBlendShape=function(){return this.getComponentByComponentTID(a.z.BlendShapeComponentTID)},n}(e.constructor);return(0,i.e)(e,n),e},r=n,u=[{key:"componentTID",get:function(){return a.z.BlendShapeComponentTID}}],(o=[{key:"weights",get:function(){return this.__weights},set:function(e){this.__weights=e}},{key:"targetNames",get:function(){return this.__targetNames},set:function(e){this.__targetNames=e}}])&&l(r.prototype,o),u&&l(r,u),n}(r.w);o.C.registerComponentClass(v)},3279:(e,t,n)=>{n.d(t,{M:()=>N});var r=n(6383),o=n(1410),i=n(2342),a=n(6174),s=n(6860),c=n(6264),l=n(2637),u=n(7468),f=n(429),_=n(5171),h=n(2535),d=n(8289),m=n(6815),v=n(2328),p=n(988),y=n(1560),A=n(9977),b=n(9481),g=n(7416),x=n(4969),I=n(178),E=n(9197),w=n(9805);function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}function R(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e,t){return D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},D(e,t)}var M=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}var N=function(e){P(n,e);var t=B(n);function n(e,r,o){var i;S(this,n),(i=t.call(this,e,r,o))._eyeInner=p.d6.dummy(),i._direction=p.d6.dummy(),i._directionInner=p.d6.dummy(),i._up=p.d6.dummy(),i._upInner=p.d6.dummy(),i._filmWidth=36,i._filmHeight=24,i._focalLength=20,i.primitiveMode=!1,i._corner=v.xQ.dummy(),i._cornerInner=v.xQ.dummy(),i._parameters=v.xQ.dummy(),i._parametersInner=v.xQ.dummy(),i.__type=l.i.Perspective,i._projectionMatrix=d.e.dummy(),i.__isProjectionMatrixUpToDate=!1,i._viewMatrix=d.e.dummy(),i.__isViewMatrixUpToDate=!1,i._xrLeft=!1,i._xrRight=!1,i.isSyncToLight=!1,i.__frustum=new y.i,i._setMaxNumberOfComponent(Math.max(10,Math.floor(A.D.maxEntityNumber/100))),i.registerMember(_.$.CPUGeneric,"eyeInner",p.d6,h.r.Float,[0,0,0]),i.registerMember(_.$.CPUGeneric,"direction",p.d6,h.r.Float,[0,0,-1]),i.registerMember(_.$.CPUGeneric,"up",p.d6,h.r.Float,[0,1,0]),i.registerMember(_.$.CPUGeneric,"directionInner",p.d6,h.r.Float,[0,0,-1]),i.registerMember(_.$.CPUGeneric,"upInner",p.d6,h.r.Float,[0,1,0]),i.registerMember(_.$.CPUGeneric,"corner",v.xQ,h.r.Float,[-1,1,1,-1]),i.registerMember(_.$.CPUGeneric,"cornerInner",v.xQ,h.r.Float,[-1,1,1,-1]),i.registerMember(_.$.CPUGeneric,"parameters",v.xQ,h.r.Float,[.1,1e4,90,1]),i.registerMember(_.$.CPUGeneric,"parametersInner",v.xQ,h.r.Float,[.1,1e4,90,1]),i.registerMember(_.$.CPUGeneric,"projectionMatrix",d.e,h.r.Float,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),i.registerMember(_.$.CPUGeneric,"viewMatrix",d.e,h.r.Float,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),i.submitToAllocation(A.D.maxCameraNumber);var a=b.$.getInstance();return a.takeOne(g.f5.ViewMatrix),a.takeOne(g.f5.ProjectionMatrix),a.takeOne(g.f5.ViewPosition),i.setFovyAndChangeFocalLength(90),-1===n.current&&(n.current=r),i}var o,u,C,R=n.prototype;return R.setFovyAndChangeFilmSize=function(e){this._parameters.z=e,this._filmHeight=2*this.focalLength*Math.tan(x.k.degreeToRadian(e)/2),this._filmWidth=this._filmHeight*this.aspect},R.setFovyAndChangeFocalLength=function(e){this._parameters.z=e,this._focalLength=this._filmHeight/2/Math.tan(x.k.degreeToRadian(e)/2)},R.calcProjectionMatrix=function(){var e=this._parametersInner.x,t=this._parametersInner.y;if(this.type===l.i.Perspective){var n=this._parametersInner.z,r=this._parametersInner.w,o=1/Math.tan(.5*n*Math.PI/180),i=o/r;this._projectionMatrix.setComponents(i,0,0,0,0,o,0,0,0,0,-(t+e)/(t-e),-2*t*e/(t-e),0,0,-1,0)}else if(this.type===l.i.Orthographic){var a=this._parametersInner.z,s=this._parametersInner.w;this._projectionMatrix.setComponents(1/a,0,0,0,0,1/s,0,0,0,0,-2/(t-e),-(t+e)/(t-e),0,0,0,1)}else{var c=this._cornerInner.x,u=this._cornerInner.y,f=this._cornerInner.z,_=this._cornerInner.w;this._projectionMatrix.setComponents(2*e/(u-c),0,(u+c)/(u-c),0,0,2*e/(f-_),(f+_)/(f-_),0,0,0,-(t+e)/(t-e),-2*t*e/(t-e),0,0,-1,0)}return this._projectionMatrix},R.calcViewMatrix=function(){var e=this.eyeInner,t=p.d6.subtractTo(this._directionInner,e,n.__tmpVector3_0).normalize(),r=p.d6.crossTo(t,this._upInner,n.__tmpVector3_1).normalize(),o=p.d6.crossTo(r,t,n.__tmpVector3_2);if(this._viewMatrix.setComponents(r.x,r.y,r.z,-s.P.dot(r,e),o.x,o.y,o.z,-s.P.dot(o,e),-t.x,-t.y,-t.z,s.P.dot(t,e),0,0,0,1),!this.primitiveMode){var i=d.e.invertTo(this.__sceneGraphComponent.matrixInner,n.__tmpMatrix44_0);this._viewMatrix.multiply(i)}return this._viewMatrix},R.setValuesToGlobalDataRepositoryOnlyMatrices=function(){n.__globalDataRepository.setValue(g.f5.ViewMatrix,this.componentSID,this.viewMatrix),n.__globalDataRepository.setValue(g.f5.ProjectionMatrix,this.componentSID,this.projectionMatrix)},R.setValuesToGlobalDataRepository=function(){n.__globalDataRepository.setValue(g.f5.ViewMatrix,this.componentSID,this.viewMatrix),n.__globalDataRepository.setValue(g.f5.ProjectionMatrix,this.componentSID,this.projectionMatrix),n.__globalDataRepository.setValue(g.f5.ViewPosition,this.componentSID,this.worldPosition)},R.updateFrustum=function(){this.__frustum.update(this.viewMatrix,this.projectionMatrix)},R.$create=function(){this.__sceneGraphComponent=i.g.getComponentOfEntity(this.__entityUid,f.a),this.moveStageTo(m.I.Logic)},R.$logic=function(e){e.renderPass;var t=this.entity.tryToGetLight();if(this.isSyncToLight&&E.Is.exist(t)){if(this._eyeInner.copyComponents(n._eye),this._directionInner.copyComponents(this._direction),this._upInner.copyComponents(this._up),t.type===w.v.Spot)this.type=l.i.Perspective,this.setFovyAndChangeFilmSize(x.k.radianToDegree(t.outerConeAngle)),this._cornerInner.copyComponents(this._corner),this.aspect=1,this.zNear=.1,this.zFar=-1!==t.range?t.range:1e4,this._parametersInner.copyComponents(this._parameters);else if(t.type===w.v.Directional){this.type=l.i.Orthographic;var r=t.shadowAreaSizeForDirectionalLight;this._cornerInner.copyComponents(c.Lt.fromCopy4(-r,r,r,-r)),this.aspect=1,this.zNear=.1,this.zFar=-1!==t.range?t.range:100,this._parametersInner.copyComponents(this._parameters)}}else{var o=this.entity.tryToGetCameraController();E.Is.exist(o)?this._parametersInner.w=this._parameters.w:this.primitiveMode||(this._eyeInner.copyComponents(n._eye),this._directionInner.copyComponents(this._direction),this._upInner.copyComponents(this._up),this._cornerInner.copyComponents(this._corner),this._parametersInner.copyComponents(this._parameters))}this.calcViewMatrix(),this._xrLeft||this._xrRight||this.calcProjectionMatrix(),this.setValuesToGlobalDataRepository()},R.addThisComponentToEntity=function(e,t){var n=function(e){P(n,e);var t=B(n);function n(e,r,o){return S(this,n),t.call(this,e,r,o)}return n.prototype.getCamera=function(){return this.getComponentByComponentTID(a.z.CameraComponentTID)},n}(e.constructor);return(0,i.e)(e,n),e},n.getCurrentCameraEntity=function(){return r.C.getComponent(this,this.current).entity},o=n,C=[{key:"current",get:function(){return this.__current},set:function(e){this.__current=e}},{key:"componentTID",get:function(){return a.z.CameraComponentTID}}],(u=[{key:"type",get:function(){return this.__type},set:function(e){this.__type=e,e===l.i.Orthographic?(this._parameters.z=1,this._parameters.w=1,this._parametersInner.z=1,this._parametersInner.w=1):(this.setFovyAndChangeFocalLength(90),this._parameters.w=1,this._parametersInner.z=90,this._parametersInner.w=1)}},{key:"eye",get:function(){return n._eye},set:function(e){throw Error("In Rhodonite, eye is always (0,0,0). Use TransformComponent for Camera positioning.")}},{key:"eyeInner",get:function(){return this._eyeInner},set:function(e){this._eyeInner.copyComponents(e)}},{key:"upInner",get:function(){return this._upInner},set:function(e){this._upInner.copyComponents(e)}},{key:"up",get:function(){return this._up.clone()},set:function(e){this._up.copyComponents(e)}},{key:"direction",get:function(){return this._direction.clone()},set:function(e){var t,r=this._direction,o=e,i=this._up;if(0===p.d6.crossTo(o,i,n.__tmpVector3_0).length()){var a=p.d6.crossTo(r,i,n.__tmpVector3_1);t=p.d6.crossTo(a,o,n.__tmpVector3_2)}else{var s=p.d6.multiplyTo(o,o.dot(i),n.__tmpVector3_1);t=p.d6.subtractTo(i,s,n.__tmpVector3_2)}this._up.copyComponents(t).normalize(),this._direction.copyComponents(o)}},{key:"directionInner",get:function(){return this._directionInner},set:function(e){this._directionInner.copyComponents(e)}},{key:"corner",get:function(){return this._corner.clone()},set:function(e){this._corner.copyComponents(e)}},{key:"left",get:function(){return this._corner.x},set:function(e){this._corner.x=e}},{key:"leftInner",set:function(e){this._cornerInner.x=e}},{key:"right",get:function(){return this._corner.y},set:function(e){this._corner.y=e}},{key:"rightInner",set:function(e){this._cornerInner.y=e}},{key:"top",get:function(){return this._corner.z},set:function(e){this._corner.z=e}},{key:"topInner",set:function(e){this._cornerInner.z=e}},{key:"bottom",get:function(){return this._corner.w},set:function(e){this._corner.w=e}},{key:"bottomInner",set:function(e){this._cornerInner.w=e}},{key:"cornerInner",get:function(){return this._cornerInner},set:function(e){this._cornerInner.copyComponents(e)}},{key:"parametersInner",get:function(){return this._parametersInner},set:function(e){this._parametersInner.copyComponents(e)}},{key:"parameters",get:function(){return this._parameters.clone()}},{key:"zNear",get:function(){return this._parameters.x},set:function(e){this._parameters.x=e}},{key:"zNearInner",get:function(){return this._parametersInner.x},set:function(e){this._parametersInner.x=e}},{key:"focalLength",get:function(){return this._focalLength},set:function(e){this._focalLength=e,this._parameters.z=2*x.k.radianToDegree(Math.atan(this._filmHeight/(2*e)))}},{key:"zFar",get:function(){return this._parameters.y},set:function(e){this._parameters.y=e}},{key:"zFarInner",get:function(){return this._parametersInner.y},set:function(e){this._parametersInner.y=e}},{key:"fovy",get:function(){return this._parameters.z}},{key:"fovyInner",set:function(e){this._parametersInner.z=e}},{key:"aspect",get:function(){return this._parameters.w},set:function(e){this._parameters.w=e,this._filmWidth=this._filmHeight*e}},{key:"aspectInner",get:function(){return this._parametersInner.w},set:function(e){this._parametersInner.w=e}},{key:"xMag",get:function(){return this._parameters.z},set:function(e){this._parameters.z=e}},{key:"yMag",get:function(){return this._parameters.w},set:function(e){this._parameters.w=e}},{key:"viewMatrix",get:function(){return this._viewMatrix},set:function(e){this._viewMatrix.copyComponents(e)}},{key:"projectionMatrix",get:function(){if(this._xrLeft||this._xrRight){var e=I.x.getInstance().getModule("xr");if(null==e?void 0:e.WebXRSystem.getInstance().isWebXRMode){var t=e.WebXRSystem.getInstance();if(this._xrLeft)return t.leftProjectionMatrix;if(this._xrRight)return t.rightProjectionMatrix}}return this._projectionMatrix},set:function(e){this._projectionMatrix.copyComponents(e)}},{key:"viewProjectionMatrix",get:function(){return d.e.multiplyTo(this._projectionMatrix,this._viewMatrix,n.__tmpMatrix44_0)}},{key:"biasViewProjectionMatrix",get:function(){return d.e.multiplyTo(this._projectionMatrix,this._viewMatrix,n.__tmpMatrix44_0),d.e.multiplyTo(n.__biasMatrix,n.__tmpMatrix44_0,n.__tmpMatrix44_1)}},{key:"worldPosition",get:function(){var e;return null===(e=this.__sceneGraphComponent)||void 0===e||e.matrixInner.multiplyVector3To(this.eyeInner,n.returnVector3),n.returnVector3}},{key:"frustum",get:function(){return this.__frustum}},{key:"entity",get:function(){return i.g.getEntity(this.__entityUid)}}])&&T(o.prototype,u),C&&T(o,C),n}(o.w);N._eye=s.P.zero(),N.__current=-1,N.returnVector3=p.d6.zero(),N.__globalDataRepository=b.$.getInstance(),N.__tmpVector3_0=p.d6.zero(),N.__tmpVector3_1=p.d6.zero(),N.__tmpVector3_2=p.d6.zero(),N.__tmpMatrix44_0=d.e.zero(),N.__tmpMatrix44_1=d.e.zero(),N.__biasMatrix=u.J.fromCopy16ColumnMajor(.5,0,0,0,0,.5,0,0,0,0,.5,0,.5,.5,.5,1),r.C.registerComponentClass(N)},6696:(e,t,n)=>{n.d(t,{S:()=>b});var r=n(1410),o=n(2342),i=n(3279),a=n(6815),s=n(6383),c=n(6174),l=n(7576),u=n(8430),f=n(5674);function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function v(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}var y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}var b=function(e){m(n,e);var t=A(n);function n(e,r,o){var i;return _(this,n),(i=t.call(this,e,r,o)).__cameraController=new l.j,i}var r,s,d,v=n.prototype;return v.$create=function(){this.__cameraComponent=o.g.getComponentOfEntity(this.__entityUid,i.M),this.moveStageTo(a.I.Logic)},v.$logic=function(){this.__cameraController&&this.__cameraController.logic(this.__cameraComponent)},v.addThisComponentToEntity=function(e,t){var n=function(e){m(n,e);var t=A(n);function n(e,r,o){return _(this,n),t.call(this,e,r,o)}return n.prototype.getCameraController=function(){return this.getComponentByComponentTID(c.z.CameraControllerComponentTID)},n}(e.constructor);return(0,o.e)(e,n),e},r=n,d=[{key:"componentTID",get:function(){return c.z.CameraControllerComponentTID}}],(s=[{key:"type",get:function(){return e=this.__cameraController,(null!=(t=l.j)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t)?f.M.Orbit:f.M.WalkThrough;var e,t},set:function(e){this.__cameraController.unregisterEventListeners(),e===f.M.Orbit?this.__cameraController=new l.j:e===f.M.WalkThrough?this.__cameraController=new u.I:console.warn("Not support type!")}},{key:"controller",get:function(){return this.__cameraController}}])&&h(r.prototype,s),d&&h(r,d),n}(r.w);s.C.registerComponentClass(b)},4654:(e,t,n)=>{n.d(t,{r:()=>E});var r=n(6383),o=n(1410),i=n(2342),a=n(6174),s=n(9805),c=n(6860),l=n(429),u=n(6815),f=n(9977),_=n(9481),h=n(7416),d=n(2328),m=n(2175);function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function b(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}var x=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}var E=function(e){A(n,e);var t=I(n);function n(e,r,o){var i;return v(this,n),(i=t.call(this,e,r,o)).type=s.v.Point,i.__intensity=c.P.fromCopyArray([1,1,1]),i.__initialdirection=c.P.fromCopyArray([0,0,-1]),i.__direction=c.P.fromCopyArray([0,0,-1]),i.innerConeAngle=0,i.outerConeAngle=Math.PI/4,i.range=-1,i.enable=!0,i.shadowAreaSizeForDirectionalLight=10,i._setMaxNumberOfComponent(Math.max(10,Math.floor(f.D.maxEntityNumber/100))),i}var o,_,d,m=n.prototype;return m.$create=function(){this.__sceneGraphComponent=i.g.getComponentOfEntity(this.__entityUid,l.a),this.moveStageTo(u.I.Load)},m.$load=function(){var e=r.C.getComponentsWithType(n);n.__globalDataRepository.getValue(h.f5.CurrentComponentSIDs,0)._v[a.z.LightComponentTID]=e.length,n.__lightPositions=n.__globalDataRepository.getValue(h.f5.LightPosition,0),n.__lightDirections=n.__globalDataRepository.getValue(h.f5.LightDirection,0),n.__lightIntensities=n.__globalDataRepository.getValue(h.f5.LightIntensity,0),n.__lightProperties=n.__globalDataRepository.getValue(h.f5.LightProperty,0),this.moveStageTo(u.I.Logic)},m.$logic=function(){this.__direction=this.__sceneGraphComponent.normalMatrixInner.multiplyVector(this.__initialdirection);var e=1/Math.max(.001,Math.cos(this.innerConeAngle)-Math.cos(this.outerConeAngle)),t=-Math.cos(this.outerConeAngle)*e;n.__lightDirections._v[3*this.componentSID+0]=this.__direction.x,n.__lightDirections._v[3*this.componentSID+1]=this.__direction.y,n.__lightDirections._v[3*this.componentSID+2]=this.__direction.z;var r=this.__sceneGraphComponent.worldPosition;n.__lightPositions._v[3*this.componentSID+0]=r.x,n.__lightPositions._v[3*this.componentSID+1]=r.y,n.__lightPositions._v[3*this.componentSID+2]=r.z,n.__lightIntensities._v[3*this.componentSID+0]=this.__intensity.x,n.__lightIntensities._v[3*this.componentSID+1]=this.__intensity.y,n.__lightIntensities._v[3*this.componentSID+2]=this.__intensity.z,n.__lightProperties._v[4*this.componentSID+0]=this.enable?this.type.index:-1,n.__lightProperties._v[4*this.componentSID+1]=this.range,n.__lightProperties._v[4*this.componentSID+2]=e,n.__lightProperties._v[4*this.componentSID+3]=t},m.addThisComponentToEntity=function(e,t){var n=function(e){A(n,e);var t=I(n);function n(e,r,o){return v(this,n),t.call(this,e,r,o)}return n.prototype.getLight=function(){return this.getComponentByComponentTID(a.z.LightComponentTID)},n}(e.constructor);return(0,i.e)(e,n),e},o=n,d=[{key:"componentTID",get:function(){return a.z.LightComponentTID}}],(_=[{key:"direction",get:function(){return this.__direction}},{key:"intensity",get:function(){return this.__intensity},set:function(e){this.__intensity=e}},{key:"_up",get:function(){return c.P.fromCopy3(0,1,0)}},{key:"entity",get:function(){return i.g.getEntity(this.__entityUid)}}])&&p(o.prototype,_),d&&p(o,d),n}(o.w);E.__globalDataRepository=_.$.getInstance(),E.__tmp_vec4=d.xQ.zero(),E.__lightPositions=new m.j(new Float32Array(0)),E.__lightDirections=new m.j(new Float32Array(0)),E.__lightIntensities=new m.j(new Float32Array(0)),E.__lightProperties=new m.j(new Float32Array(0)),r.C.registerComponentClass(E)},9856:(e,t,n)=>{n.d(t,{$:()=>S});var r=n(6383),o=n(1410),i=n(2342),a=n(6174),s=n(6815),c=n(6860),l=n(6264),u=n(429),f=n(7468),_=n(8289),h=n(9409),d=n(988),m=n(9197),v=n(9958),p=n(1274);function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}function x(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e,t){return I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},I(e,t)}var E=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}var S=function(e){g(n,e);var t=w(n);function n(e,r,o){var i;return y(this,n),(i=t.call(this,e,r,o)).__viewDepth=-Number.MAX_VALUE,i.isPickable=!0,i.moveStageTo(s.I.Create),i}var o,b,x,I=n.prototype;return I.setMesh=function(e){this.__mesh=e,e._belongToMeshComponent(this)},I.unsetMesh=function(){return null!=this.__mesh&&(this.__mesh=void 0,!0)},I.calcViewDepth=function(e){var t=this.__mesh.AABB.centerPoint,r=this.entity.tryToGetSkeletal();m.Is.exist(r)&&m.Is.exist(r._bindShapeMatrix)&&r._bindShapeMatrix.multiplyVector3To(this.__mesh.AABB.centerPoint,t);var o=this.entity.getSceneGraph().matrixInner.multiplyVector3To(t,n.__tmpVector3_0),i=e.viewMatrix.multiplyVector3To(o,n.__tmpVector3_1);return this.__viewDepth=i.z,this.__viewDepth},I.castRay=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.__mesh){var r=e,o=t;if(this.__sceneGraphComponent){var i=f.J.invert(this.__sceneGraphComponent.matrixInner);r=c.P.fromCopyVector4(i.multiplyVector(l.Lt.fromCopyVector3(e)));var a=c.P.add(e,t),s=c.P.fromCopyVector4(i.multiplyVector(l.Lt.fromCopyVector3(a)));o=c.P.normalize(c.P.subtract(s,r));var u=this.__mesh.castRay(r,o,n),_=null;if(m.Is.defined(u.data)&&u.data.t>=0)return _=c.P.fromCopyVector4(this.__sceneGraphComponent.matrixInner.multiplyVector(l.Lt.fromCopyVector3(u.data.position))),{result:!0,data:{t:u.data.t,u:u.data.u,v:u.data.v,position:_}}}}return{result:!1}},I.castRayFromScreenInLocal=function(e,t,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(this.__mesh&&this.__sceneGraphComponent){var a=_.e.multiplyTo(r.projectionMatrix,r.viewMatrix,n.__tmpMatrix44_0).multiply(this.__sceneGraphComponent.matrixInner).invert(),s=h.D.unProjectTo(e,t,0,a,o,n.__tmpVector3_0),c=h.D.unProjectTo(e,t,1,a,o,n.__tmpVector3_1),l=d.d6.subtractTo(c,s,n.__tmpVector3_2).normalize(),u=this.__mesh.castRay(s,l,i);if(m.Is.defined(u.data)&&u.data.t>=0)return{result:!0,data:{t:u.data.t,u:u.data.u,v:u.data.v,position:u.data.position}}}return{result:!1}},I.castRayFromScreenInWorld=function(e,t,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=this.castRayFromScreenInLocal(e,t,r,o,i);if(this.__mesh&&this.__sceneGraphComponent&&a.result){(0,p.dK)(a.data);var s=this.__sceneGraphComponent.matrixInner.multiplyVector3To(a.data.position,n.__returnVector3);return{result:!0,data:{t:a.data.t,u:a.data.u,v:a.data.v,position:s}}}return a},I.$create=function(){this.__blendShapeComponent=i.g.getComponentOfEntity(this.__entityUid,v.x),this.__sceneGraphComponent=i.g.getComponentOfEntity(this.__entityUid,u.a),this.moveStageTo(s.I.Load)},I.$load=function(){null!=this.__mesh&&(this.__mesh._calcTangents(),this.__mesh._calcFaceNormalsIfNonNormal(),this.__blendShapeComponent&&this.__blendShapeComponent.weights.length>0&&this.__mesh._calcBaryCentricCoord(),this.moveStageTo(s.I.Logic))},I.$logic=function(){},I._shallowCopyFrom=function(e){var t=e;this.__viewDepth=t.__viewDepth,m.Is.exist(t.__mesh)&&this.setMesh(t.__mesh),this.isPickable=t.isPickable},I.addThisComponentToEntity=function(e,t){var n=function(e){g(n,e);var t=w(n);function n(e,r,o){return y(this,n),t.call(this,e,r,o)}return n.prototype.getMesh=function(){return this.getComponentByComponentTID(a.z.MeshComponentTID)},n}(e.constructor);return(0,i.e)(e,n),e},n.alertNoMeshSet=function(e){console.debug("No mesh is set on this MeshComponent:"+e.componentSID)},n.common_$load=function(e){e.processApproach;var t=r.C.getComponentsWithType(n),o=!0,i=!1,a=void 0;try{for(var c,l=t[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value,f=u.mesh;if(m.Is.exist(f))for(var _=f.getPrimitiveNumber(),h=0;h<_;h++){var d=f.getPrimitiveAt(h);if(d.positionAccessorVersion!==n.__latestPrimitivePositionAccessorVersion){var v=u.entity.tryToGetMeshRenderer();null==v||v.moveStageTo(s.I.Load),n.__latestPrimitivePositionAccessorVersion=d.positionAccessorVersion}}}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}},o=n,x=[{key:"componentTID",get:function(){return a.z.MeshComponentTID}}],(b=[{key:"mesh",get:function(){return this.__mesh}},{key:"viewDepth",get:function(){return this.__viewDepth}},{key:"entity",get:function(){return i.g.getEntity(this.__entityUid)}}])&&A(o.prototype,b),x&&A(o,x),n}(o.w);S.__tmpVector3_0=d.d6.zero(),S.__tmpVector3_1=d.d6.zero(),S.__tmpVector3_2=d.d6.zero(),S.__returnVector3=d.d6.zero(),S.__tmpMatrix44_0=_.e.zero(),S.__latestPrimitivePositionAccessorVersion=0,r.C.registerComponentClass(S)},6807:(e,t,n)=>{n.d(t,{Y:()=>g});var r=n(6383),o=n(1410),i=n(9856),a=n(6815),s=n(2342),c=n(6174),l=n(3279),u=n(178),f=n(5653),_=n(9807);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function p(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}var A=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}var g=function(e){v(n,e);var t=b(n);function n(e,r,o){var i;return h(this,n),(i=t.call(this,e,r,o)).diffuseCubeMapContribution=1,i.specularCubeMapContribution=1,i.rotationOfCubeMap=0,i._readyForRendering=!1,i}var m,p,y=n.prototype;return y.$create=function(){this.__meshComponent=s.g.getComponentOfEntity(this.__entityUid,i.$),this.moveStageTo(a.I.Load)},y.$load=function(){n.__webglRenderingStrategy.$load(this.__meshComponent),this.diffuseCubeMap&&!this.diffuseCubeMap.startedToLoad&&this.diffuseCubeMap.loadTextureImagesAsync(),this.specularCubeMap&&!this.specularCubeMap.startedToLoad&&this.specularCubeMap.loadTextureImagesAsync()},y.$render=function(e){e.i,e.renderPass,e.renderPassTickCount},y._shallowCopyFrom=function(e){var t=e;this.diffuseCubeMap=t.diffuseCubeMap,this.specularCubeMap=t.specularCubeMap,this.diffuseCubeMapContribution=t.diffuseCubeMapContribution,this.specularCubeMapContribution=t.specularCubeMapContribution,this.rotationOfCubeMap=t.rotationOfCubeMap,this._readyForRendering=t._readyForRendering},y.addThisComponentToEntity=function(e,t){var n=function(e){v(n,e);var t=b(n);function n(e,r,o){return h(this,n),t.call(this,e,r,o)}return n.prototype.getMeshRenderer=function(){return this.getComponentByComponentTID(c.z.MeshRendererComponentTID)},n}(e.constructor);return(0,s.e)(e,n),e},n.common_$load=function(e){var t=e.processApproach,r=u.x.getInstance().getModule("webgl");n.__webglRenderingStrategy=r.getRenderingStrategy(t)},n.common_$prerender=function(){n.__webglRenderingStrategy.common_$prerender()},n.sort_$render=function(e){return n.sort_$render_inner(e)},n.sort_$render_inner=function(e){var t=e.cameraComponent;null==t&&(t=r.C.getComponent(l.M,l.M.current));var o=[],i=e.meshComponents;o=n.__cullingWithViewFrustum(t,i,e),(o=Array.from(new Set(o))).sort((function(e,t){var n=e._sortkey-t._sortkey;return 0===n?e._viewDepth-t._viewDepth:n}));var a=o.map((function(e){return e.primitiveUid}));a.push(-1),n._lastOpaqueIndex=-1,n._lastTransparentIndex=-1,n._firstTransparentSortKey=-1,n._lastTransparentSortKey=-1;for(var s=0;s<o.length;s++){var c=o[s],u=f.Yx+1;if(c._sortkey>>u&1){n._lastOpaqueIndex=s-1,n._firstTransparentSortKey=c._sortkey;break}}return-1===n._lastOpaqueIndex&&(n._lastOpaqueIndex=o.length-1),o.length>0&&(n._lastTransparentIndex=o.length-1,n._lastTransparentSortKey=o[o.length-1]._sortkey),a},n.__cullingWithViewFrustum=function(e,t,r){var o=[];if(e&&n.isViewFrustumCullingEnabled){e.updateFrustum();var i=e.frustum,a=function(e,t){if("background-assets"===e.entity.getTagValue("type")||i.culling(e)){t.push(e),e.entity.getSceneGraph()._isCulled=!1;var n=e.entity.tryToGetSkeletal();void 0!==n&&(n._isCulled=!1)}else{e.entity.getSceneGraph()._isCulled=!0;var r=e.entity.tryToGetSkeletal();void 0!==r&&(r._isCulled=!0)}},s=!0,c=!1,l=void 0;try{for(var u,f=t[Symbol.iterator]();!(s=(u=f.next()).done);s=!0)a(u.value,o)}catch(e){c=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw l}}}else o=r.meshComponents;for(var h=[],d=0;d<o.length;d++){var m=o[d],v=m.calcViewDepth(e),p=m.mesh;if(void 0!==p)for(var y=p.primitives,A=0;A<y.length;A++){var b=y[A];_.Z.isSkipDrawing(b.material),b._viewDepth=v,h.push(b)}}return h},n.common_$render=function(e){var t=e.renderPass,r=e.processStage,i=e.renderPassTickCount,a=o.w.__componentsOfProcessStages.get(r);n.__webglRenderingStrategy.common_$render(a,t,i)},m=n,p=[{key:"componentTID",get:function(){return c.z.MeshRendererComponentTID}}],null&&d(m.prototype,null),p&&d(m,p),n}(o.w);g._lastOpaqueIndex=-1,g._lastTransparentIndex=-1,g._firstTransparentSortKey=-1,g._lastTransparentSortKey=-1,g.isViewFrustumCullingEnabled=!0,g.isDepthMaskTrueForTransparencies=!1,g.__shaderProgramHandleOfPrimitiveObjectUids=new Map,r.C.registerComponentClass(g)},2670:(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(1410),o=n(6383),i=n(2342),a=n(6174),s=n(6815),c=n(3022);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function h(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}var m=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}var p=function(e){_(n,e);var t=v(n);function n(e,r,o){var i;return l(this,n),(i=t.call(this,e,r,o)).__strategy=new c.t,i.moveStageTo(s.I.Logic),i}var r,o,f,h=n.prototype;return h.$logic=function(){},h.addThisComponentToEntity=function(e,t){var n=function(e){_(n,e);var t=v(n);function n(e,r,o){return l(this,n),t.call(this,e,r,o)}return n.prototype.getPhysics=function(){return this.getComponentByComponentTID(a.z.PhysicsComponentTID)},n}(e.constructor);return(0,i.e)(e,n),e},n.common_$logic=function(){c.t.update()},r=n,f=[{key:"componentTID",get:function(){return a.z.PhysicsComponentTID}}],(o=[{key:"strategy",get:function(){return this.__strategy}}])&&u(r.prototype,o),f&&u(r,f),n}(r.w);o.C.registerComponentClass(p)},429:(e,t,n)=>{n.d(t,{a:()=>M});var r=n(6383),o=n(1410),i=n(7468),a=n(2342),s=n(2535),c=n(6174),l=n(5171),u=n(6815),f=n(8289),_=n(2863),h=n(6860),d=n(6631),m=n(988),v=n(706),p=n(139),y=n(9197),A=n(3206),b=n(5914),g=n(1855);function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function C(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?x(e):t}function P(e,t){return P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},P(e,t)}var R=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}var M=function(e){T(n,e);var t=D(n);function n(e,r,o){var i;return I(this,n),(i=t.call(this,e,r,o)).__children=[],i.__gizmoChildren=[],i._worldMatrix=f.e.dummy(),i._worldMatrixRest=f.e.dummy(),i._normalMatrix=_.x.dummy(),i.__isWorldMatrixUpToDate=!1,i.__isWorldMatrixRestUpToDate=!1,i.__isNormalMatrixUpToDate=!1,i.__tmpMatrix=f.e.identity(),i.__worldAABB=new d.m,i.__isWorldAABBDirty=!0,i._isVisible=g.DU.dummy(),i._isBillboard=g.DU.dummy(),i.__transformGizmoSpace="world",i.__latestPrimitivePositionAccessorVersion=0,i.toMakeWorldMatrixTheSameAsLocalMatrix=!1,i.isRootJoint=!1,i.jointIndex=-1,i._isCulled=!1,n.__sceneGraphs.push(x(i)),i.registerMember(l.$.GPUInstanceData,"worldMatrix",f.e,s.r.Float,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),i.registerMember(l.$.GPUInstanceData,"normalMatrix",_.x,s.r.Float,[1,0,0,0,1,0,0,0,1]),i.registerMember(l.$.GPUInstanceData,"isVisible",g.DU,s.r.Float,[1]),i.registerMember(l.$.GPUInstanceData,"isBillboard",g.DU,s.r.Float,[0]),i.submitToAllocation(i.maxNumberOfComponent),i}var r=n.prototype;return r.setVisibilityRecursively=function(e){this.isVisible=e;var t=!0,n=!1,r=void 0;try{for(var o,i=this.__children[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)o.value.setVisibilityRecursively(e)}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},r.setIsBillboardRecursively=function(e){this._isBillboard.setValue(e?1:0);var t=!0,n=!1,r=void 0;try{for(var o,i=this.__children[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)o.value.isBillboard=e}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},r.isJoint=function(){return this.jointIndex>=0},r.setWorldMatrixRestDirty=function(){this.matrixRestInner,this.setWorldMatrixRestDirtyRecursively()},r.setWorldMatrixRestDirtyRecursively=function(){this.__isWorldMatrixRestUpToDate=!1,this.children.forEach((function(e){e.setWorldMatrixRestDirtyRecursively()}))},r.setWorldMatrixDirty=function(){var e;this.setWorldMatrixDirtyRecursively(),null===(e=this.parent)||void 0===e||e.setWorldAABBDirtyParentRecursively()},r.setWorldMatrixDirtyRecursively=function(){this.__isWorldMatrixUpToDate=!1,this.__isNormalMatrixUpToDate=!1,this.__isWorldAABBDirty=!0,this.children.forEach((function(e){e.setWorldMatrixDirtyRecursively()}))},r.setWorldAABBDirtyParentRecursively=function(){var e;this.__isWorldAABBDirty=!0,null===(e=this.parent)||void 0===e||e.setWorldAABBDirtyParentRecursively()},r.addChild=function(e){y.Is.exist(e.__parent)&&e.__parent.removeChild(e),e.__parent=this,this.__children.push(e)},r.removeChild=function(e){var t=this.__children.indexOf(e);t>=0&&this.__children.splice(t,1),e.__parent=void 0},r._addGizmoChild=function(e){e.__parent=this,this.__gizmoChildren.push(e)},r.isWorldMatrixUpToDateRecursively=function(){return!!this.__isWorldMatrixUpToDate&&(!this.__parent||this.__parent.isWorldMatrixUpToDateRecursively())},r.__calcWorldMatrixRecursively=function(){if(this.__isWorldMatrixUpToDate)return this._worldMatrix;var e=a.g.getEntity(this.__entityUid).getTransform();if(null==this.__parent||this.toMakeWorldMatrixTheSameAsLocalMatrix)return e.localMatrixInner;var t=this.__parent.__calcWorldMatrixRecursively();return f.e.multiplyTo(t,e.localMatrixInner,this.__tmpMatrix)},r.__calcWorldMatrixRestRecursively=function(){if(this.__isWorldMatrixRestUpToDate)return this._worldMatrixRest;var e=a.g.getEntity(this.__entityUid).getTransform();if(null==this.__parent||this.toMakeWorldMatrixTheSameAsLocalMatrix)return e.localMatrixRestInner;var t=this.__parent.__calcWorldMatrixRestRecursively();return f.e.multiplyTo(t,e.localMatrixRestInner,this.__tmpMatrix)},r.getQuaternionRecursively=function(){if(y.Is.not.exist(this.parent))return this.entity.getTransform().localRotation;var e=this.parent.getQuaternionRecursively();return g._f.multiply(e,this.entity.getTransform().localRotation)},r.getWorldPositionOf=function(e){return this.matrixInner.multiplyVector3(e)},r.getLocalPositionOf=function(e){return i.J.invert(this.matrixInner).multiplyVector3(e)},r.calcWorldAABB=function(){return this.__worldAABB.initialize(),function e(t){var n=t.entity.tryToGetMesh();y.Is.exist(n)&&y.Is.exist(n.mesh)&&d.m.multiplyMatrixTo(t.entityWorldMatrixInner,n.mesh.AABB,t.__worldAABB);for(var r=t.children,o=0;o<r.length;o++){var i=e(r[o]);t.__worldAABB.mergeAABB(i)}return t.__worldAABB}(this)},r.castRay=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=n.flattenHierarchy(this,!1),a=[],s=!0,c=!1,l=void 0;try{for(var u,f=i[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var _=u.value,h=_.entity.tryToGetMesh();h&&a.push(h)}}catch(e){c=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw l}}var d=Number.MAX_VALUE,m=void 0,v=void 0,p=0,A=0,b=!0,g=!1,x=void 0;try{for(var I,E=a[Symbol.iterator]();!(b=(I=E.next()).done);b=!0){var w=I.value;if(w.entity.getSceneGraph().isVisible&&w.isPickable&&-1===o.indexOf(w)){var S=w.castRay(e,t,r);y.Is.defined(S.data)&&S.data.t<d&&(d=S.data.t,m=S.data.position,v=w,p=S.data.u,A=S.data.v)}}}catch(e){g=!0,x=e}finally{try{b||null==E.return||E.return()}finally{if(g)throw x}}return y.Is.exist(v)&&y.Is.exist(m)?{result:!0,data:{t:d,u:p,v:A,position:m,selectedMeshComponent:v}}:{result:!1}},r.castRayFromScreen=function(e,t,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=n.flattenHierarchy(this,!1),c=[],l=!0,u=!1,f=void 0;try{for(var _,h=s[Symbol.iterator]();!(l=(_=h.next()).done);l=!0){var d=_.value,m=d.entity.tryToGetMesh();m&&c.push(m)}}catch(e){u=!0,f=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw f}}var v=Number.MAX_VALUE,p=void 0,A=void 0,b=0,g=0,x=!0,I=!1,E=void 0;try{for(var w,S=c[Symbol.iterator]();!(x=(w=S.next()).done);x=!0){var T=w.value;if(T.entity.getSceneGraph().isVisible&&T.isPickable&&-1===a.indexOf(T)){var C=T.castRayFromScreenInWorld(e,t,r,o,i);y.Is.defined(C.data)&&C.data.t<v&&(v=C.data.t,p=C.data.position,A=T,b=C.data.u,g=C.data.v)}}}catch(e){I=!0,E=e}finally{try{x||null==S.return||S.return()}finally{if(I)throw E}}return y.Is.exist(A)&&y.Is.exist(p)?{result:!0,data:{t:v,u:b,v:g,position:p,selectedMeshComponent:A}}:{result:!1}},r.$create=function(){this.moveStageTo(u.I.Logic)},r.$logic=function(){this.matrixInner,this.__updateGizmos();var e=this.entity.tryToGetMesh();if(y.Is.exist(e)){var t=e.mesh;if(y.Is.exist(t))for(var n=t.getPrimitiveNumber(),r=0;r<n;r++){var o=t.getPrimitiveAt(r);if(o.positionAccessorVersion!==this.__latestPrimitivePositionAccessorVersion){this.setWorldAABBDirtyParentRecursively(),this.__latestPrimitivePositionAccessorVersion=o.positionAccessorVersion;break}}}},r.__updateGizmos=function(){y.Is.exist(this.__aabbGizmo)&&this.__aabbGizmo.isSetup&&this.__aabbGizmo.isVisible&&this.__aabbGizmo._update(),y.Is.exist(this.__locatorGizmo)&&this.__locatorGizmo.isSetup&&this.__locatorGizmo.isVisible&&this.__locatorGizmo._update(),y.Is.exist(this.__translationGizmo)&&this.__translationGizmo.isSetup&&this.__translationGizmo.isVisible&&this.__translationGizmo._update(),y.Is.exist(this.__scaleGizmo)&&this.__scaleGizmo.isSetup&&this.__scaleGizmo.isVisible&&this.__scaleGizmo._update()},r.__copyChild=function(e){var t=a.g._shallowCopyEntityInner(e.entity);return t.getSceneGraph().__parent=this,t},r._shallowCopyFrom=function(e){var t=e;this.__parent=t.__parent,this.__children=[];for(var n=0;n<t.__children.length;n++){var r=this.__copyChild(t.__children[n]).getSceneGraph();this.__children.push(r)}this.__gizmoChildren=t.__gizmoChildren.concat(),this._worldMatrix.copyComponents(t._worldMatrix),this._worldMatrixRest.copyComponents(t._worldMatrixRest),this._normalMatrix.copyComponents(t._normalMatrix),this.__isWorldMatrixUpToDate=!1,this.__isWorldMatrixRestUpToDate=!1,this.__isNormalMatrixUpToDate=!1,this.__tmpMatrix.copyComponents(t.__tmpMatrix),this.__worldAABB=t.__worldAABB.clone(),this.__isWorldAABBDirty=!0,this._isVisible.copyComponents(t._isVisible),this._isBillboard.copyComponents(t._isBillboard),this.__transformGizmoSpace=t.__transformGizmoSpace,this.__latestPrimitivePositionAccessorVersion=t.__latestPrimitivePositionAccessorVersion,this.toMakeWorldMatrixTheSameAsLocalMatrix=t.toMakeWorldMatrixTheSameAsLocalMatrix,this.isRootJoint=t.isRootJoint,this.jointIndex=t.jointIndex},r.setTransformGizmoSpace=function(e){var t,n;this.__transformGizmoSpace=e,null===(t=this.__translationGizmo)||void 0===t||t.setSpace(e),null===(n=this.__scaleGizmo)||void 0===n||n.setSpace(e)},r._destroy=function(){var e;null===(e=this.parent)||void 0===e||e.removeChild(this),this.children.forEach((function(e){var t;return null===(t=e.parent)||void 0===t?void 0:t.removeChild(e)}))},r.addThisComponentToEntity=function(e,t){var n=function(e){T(n,e);var t=D(n);function n(e,r,o){return I(this,n),t.call(this,e,r,o)}var r=n.prototype;return r.getSceneGraph=function(){return void 0===this.__sceneGraphComponent&&(this.__sceneGraphComponent=this.getComponentByComponentTID(c.z.SceneGraphComponentTID)),this.__sceneGraphComponent},r.addChild=function(e){this.getSceneGraph().addChild(e)},r.removeChild=function(e){this.getSceneGraph().removeChild(e)},w(n,[{key:"matrix",get:function(){return this.getSceneGraph().matrix}},{key:"matrixInner",get:function(){return this.getSceneGraph().matrixInner}},{key:"position",get:function(){return this.getSceneGraph().position},set:function(e){this.getSceneGraph().position=e}},{key:"positionRest",get:function(){return this.getSceneGraph().positionRest}},{key:"scale",get:function(){return this.getSceneGraph().scale},set:function(e){this.getSceneGraph().scale=e}},{key:"eulerAngles",get:function(){return this.getSceneGraph().eulerAngles},set:function(e){this.getSceneGraph().eulerAngles=e}},{key:"rotation",get:function(){return this.getSceneGraph().rotation},set:function(e){this.getSceneGraph().rotation=e}},{key:"rotationRest",get:function(){return this.getSceneGraph().rotationRest}},{key:"children",get:function(){return this.getSceneGraph().children}}]),n}(e.constructor);return(0,a.e)(e,n),e},n.getTopLevelComponents=function(){return n.__sceneGraphs.filter((function(e){return e.isTopLevel}))},n.flattenHierarchy=function(e,t){var n=[];t&&!e.isJoint()||n.push(e);for(var r=e.children,o=0;o<r.length;o++){var i=this.flattenHierarchy(r[o],t);Array.prototype.push.apply(n,i)}return n},w(n,[{key:"isVisible",get:function(){return 1===this._isVisible.getValue()},set:function(e){this._isVisible.setValue(e?1:0)}},{key:"isBillboard",get:function(){return 1===this._isBillboard.getValue()},set:function(e){this._isBillboard.setValue(e?1:0)}},{key:"isAABBGizmoVisible",get:function(){return!!y.Is.exist(this.__aabbGizmo)&&this.__aabbGizmo.isVisible},set:function(e){e?(y.Is.not.defined(this.__aabbGizmo)&&(this.__aabbGizmo=new v.q(this.entity),this.__aabbGizmo._setup()),this.__aabbGizmo.isVisible=!0):y.Is.exist(this.__aabbGizmo)&&(this.__aabbGizmo.isVisible=!1)}},{key:"isLocatorGizmoVisible",get:function(){return!!y.Is.exist(this.__locatorGizmo)&&this.__locatorGizmo.isVisible},set:function(e){e?(y.Is.not.defined(this.__locatorGizmo)&&(this.__locatorGizmo=new p.k(this.entity),this.__locatorGizmo._setup()),this.__locatorGizmo.isVisible=!0):y.Is.exist(this.__locatorGizmo)&&(this.__locatorGizmo.isVisible=!1)}},{key:"isTranslationGizmoVisible",get:function(){return!!y.Is.exist(this.__translationGizmo)&&this.__translationGizmo.isVisible},set:function(e){e?(y.Is.not.defined(this.__translationGizmo)&&(this.__translationGizmo=new A.u(this.entity),this.__translationGizmo._setup()),this.__translationGizmo.isVisible=!0):y.Is.exist(this.__translationGizmo)&&(this.__translationGizmo.isVisible=!1)}},{key:"isScaleGizmoVisible",get:function(){return!!y.Is.exist(this.__scaleGizmo)&&this.__scaleGizmo.isVisible},set:function(e){e?(y.Is.not.defined(this.__scaleGizmo)&&(this.__scaleGizmo=new b.q(this.entity),this.__scaleGizmo._setup()),this.__scaleGizmo.isVisible=!0):y.Is.exist(this.__scaleGizmo)&&(this.__scaleGizmo.isVisible=!1)}},{key:"isTopLevel",get:function(){return null==this.__parent}},{key:"children",get:function(){return this.__children}},{key:"parent",get:function(){return this.__parent}},{key:"matrixInner",get:function(){return this.__isWorldMatrixUpToDate||(this._worldMatrix.copyComponents(this.__calcWorldMatrixRecursively()),this.__isWorldMatrixUpToDate=!0),this._worldMatrix}},{key:"matrix",get:function(){return this.matrixInner.clone()}},{key:"matrixRestInner",get:function(){return this.__isWorldMatrixRestUpToDate||(this._worldMatrixRest.copyComponents(this.__calcWorldMatrixRestRecursively()),this.__isWorldMatrixRestUpToDate=!0),this._worldMatrix}},{key:"matrixRest",get:function(){return this.matrixRestInner.clone()}},{key:"normalMatrixInner",get:function(){return this.__isNormalMatrixUpToDate||(i.J.invertTo(this.matrixInner,n.invertedMatrix44),this._normalMatrix.copyComponents(n.invertedMatrix44.transpose()),this.__isNormalMatrixUpToDate=!0),this._normalMatrix}},{key:"entityWorldMatrix",get:function(){return this.entityWorldMatrixInner.clone()}},{key:"entityWorldMatrixInner",get:function(){var e=this.entity.tryToGetSkeletal();return y.Is.exist(e)&&e.isWorldMatrixUpdated?e.worldMatrixInner:this.entity.getSceneGraph().matrixInner}},{key:"normalMatrix",get:function(){return this.normalMatrixInner.clone()}},{key:"worldPosition",get:function(){var e=n.__originVector3;return this.matrixInner.multiplyVector3To(e,n.returnVector3),n.returnVector3}},{key:"__shouldJointWorldAabbBeCalculated",get:function(){return!n.isJointAABBShouldBeCalculated&&this.isJoint()}},{key:"worldAABB",get:function(){return this.__shouldJointWorldAabbBeCalculated||this.__isWorldAABBDirty&&(this.calcWorldAABB(),this.__isWorldAABBDirty=!1),this.__worldAABB}},{key:"position",get:function(){return this.matrixInner.getTranslate()},set:function(e){y.Is.not.exist(this.__parent)?this.entity.getTransform().localPosition=e:(f.e.invertTo(this.__parent.entity.getSceneGraph().matrixInner,this.__tmpMatrix),this.entity.getTransform().localPosition=this.__tmpMatrix.multiplyVector3(e))}},{key:"positionRest",get:function(){return this.matrixRestInner.getTranslate()}},{key:"eulerAngles",get:function(){return this.matrixInner.toEulerAngles()},set:function(e){if(y.Is.not.exist(this.__parent))this.entity.getTransform().localEulerAngles=e;else{var t=g._f.fromMatrix(this.__parent.entity.getSceneGraph().matrixInner),n=g._f.invert(t),r=g._f.fromMatrix(i.J.rotate(e)),o=g._f.multiply(r,n);this.entity.getTransform().localEulerAngles=o.toEulerAngles()}}},{key:"rotation",get:function(){var e=this.parent;return null!=e?g._f.multiply(e.rotation,this.entity.getTransform().localRotationInner):this.entity.getTransform().localRotationInner},set:function(e){if(y.Is.not.exist(this.__parent))this.entity.getTransform().localRotation=e;else{var t=g._f.fromMatrix(this.__parent.entity.getSceneGraph().matrixInner),n=g._f.invert(t);this.entity.getTransform().localRotation=g._f.multiply(e,n)}}},{key:"rotationRest",get:function(){var e=this.parent;return null!=e?g._f.multiply(e.rotationRest,this.entity.getTransform().localRotationRestInner):this.entity.getTransform().localRotationRestInner}},{key:"scale",get:function(){return this.matrixInner.getScale()},set:function(e){if(y.Is.not.exist(this.__parent))this.entity.getTransform().localScale=e;else{var t=this.__parent.entity.getSceneGraph().matrix;t._v[12]=0,t._v[13]=0,t._v[14]=0;var n=f.e.invert(t);this.entity.getTransform().localScale=n.multiplyVector3(e)}}},{key:"entity",get:function(){return a.g.getEntity(this.__entityUid)}}],[{key:"componentTID",get:function(){return c.z.SceneGraphComponentTID}}]),n}(o.w);M.__originVector3=h.P.zero(),M.returnVector3=m.d6.zero(),M.__sceneGraphs=[],M.isJointAABBShouldBeCalculated=!1,M.invertedMatrix44=f.e.fromCopyArray16ColumnMajor([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),M.__tmpAABB=new d.m,r.C.registerComponentClass(M)},1625:(e,t,n)=>{n.d(t,{Y:()=>T});var r=n(6383),o=n(1410),i=n(2342),a=n(6174),s=n(7468),c=n(6815),l=n(988),u=n(8776),f=n(4969),_=n(2328),h=n(8289),d=n(7416),m=n(9481),v=n(9977),p=n(8468),y=n(7690);function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function I(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}var w=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}var T=function(e){x(n,e);var t=S(n);function n(e,r,o){var i;return A(this,n),(i=t.call(this,e,r,o))._jointIndices=[],i.__joints=[],i.isSkinning=!0,i.__qArray=new Float32Array(0),i.__tsArray=new Float32Array(0),i.__tqArray=new Float32Array(0),i.__sqArray=new Float32Array(0),i.__qtsArray=new Float32Array(0),i.__qtsInfo=_.xQ.dummy(),i.__matArray=new Float32Array(0),i.__worldMatrix=h.e.identity(),i.__isWorldMatrixVanilla=!0,i._isCulled=!1,n.__tookGlobalDataNum<v.D.maxSkeletonNumber?(v.D.boneDataType===p.N.Mat44x1?n.__globalDataRepository.takeOne(d.f5.BoneMatrix):v.D.boneDataType===p.N.Vec4x2?(n.__globalDataRepository.takeOne(d.f5.BoneTranslatePackedQuat),n.__globalDataRepository.takeOne(d.f5.BoneScalePackedQuat)):v.D.boneDataType===p.N.Vec4x2Old?(n.__globalDataRepository.takeOne(d.f5.BoneQuaternion),n.__globalDataRepository.takeOne(d.f5.BoneTranslateScale)):v.D.boneDataType===p.N.Vec4x1&&(n.__globalDataRepository.takeOne(d.f5.BoneTranslateScale),n.__globalDataRepository.takeOne(d.f5.BoneCompressedChunk)),n.__tookGlobalDataNum++):console.warn("The actual number of Skeleton generated exceeds Config.maxSkeletonNumber."),i.moveStageTo(c.I.Logic),i}var r,o,l,u=n.prototype;return u.setInverseBindMatricesAccessor=function(e){this.__inverseBindMatricesAccessor=e},u.setJoints=function(e){this.__joints=e;var t=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value.entity.tryToGetAnimation();y.Is.exist(s)&&(s.__skeletalComponent=this)}}catch(e){r=!0,o=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}var c=0;this.componentSID<v.D.maxSkeletonNumber&&(c=this.componentSID),v.D.boneDataType===p.N.Mat44x1?this.__matArray=n.__globalDataRepository.getValue(d.f5.BoneMatrix,c)._v:v.D.boneDataType===p.N.Vec4x2?(this.__tqArray=n.__globalDataRepository.getValue(d.f5.BoneTranslatePackedQuat,c)._v,this.__sqArray=n.__globalDataRepository.getValue(d.f5.BoneScalePackedQuat,c)._v):v.D.boneDataType===p.N.Vec4x2Old?(this.__qArray=n.__globalDataRepository.getValue(d.f5.BoneQuaternion,c)._v,this.__tsArray=n.__globalDataRepository.getValue(d.f5.BoneTranslateScale,c)._v):v.D.boneDataType===p.N.Vec4x1&&(this.__tsArray=n.__globalDataRepository.getValue(d.f5.BoneTranslateScale,c)._v,this.__qtsArray=n.__globalDataRepository.getValue(d.f5.BoneCompressedChunk,c)._v,this.__qtsInfo=n.__globalDataRepository.getValue(d.f5.BoneCompressedInfo,0))},u.getJoints=function(){return this.__joints.concat()},u.$logic=function(){if(this.isSkinning&&!this._isCulled){for(var e=0;e<this.__joints.length;e++){var t=this.__joints[e],r=void 0;if(t.isVisible){var o=t.matrixInner;h.e.multiplyTypedArrayTo(o,this.__inverseBindMatricesAccessor.getTypedArray(),n.__tmp_mat4,e),this._bindShapeMatrix&&n.__tmp_mat4.multiply(this._bindShapeMatrix),r=n.__tmp_mat4}else r=n.__identityMat;if(0===e&&this.__worldMatrix.copyComponents(r),this.__isWorldMatrixVanilla=!1,v.D.boneDataType!==p.N.Mat44x1&&v.D.boneDataType!==p.N.Vec4x1||this.__copyToMatArray(r,e),v.D.boneDataType!==p.N.Mat44x1){var i=n.__tmpVec3_0.setComponents(Math.hypot(r.m00,r.m01,r.m02),Math.hypot(r.m10,r.m11,r.m12),Math.hypot(r.m20,r.m21,r.m22));r.m00/=i.x,r.m01/=i.x,r.m02/=i.x,r.m10/=i.y,r.m11/=i.y,r.m12/=i.y,r.m20/=i.z,r.m21/=i.z,r.m22/=i.z;var a=n.__tmp_q.fromMatrix(r);if(v.D.boneDataType===p.N.Vec4x2Old||v.D.boneDataType===p.N.Vec4x1){var s;s=Math.abs(i.x)>Math.abs(i.y)?Math.abs(i.x)>Math.abs(i.z)?i.x:i.z:Math.abs(i.y)>Math.abs(i.z)?i.y:i.z,this.__tsArray[4*e+3]=s}if(v.D.boneDataType===p.N.Vec4x2){var c=f.k.packNormalizedVec4ToVec2(a.x,a.y,a.z,a.w,Math.pow(2,12));this.__tqArray[4*e+0]=r.m03,this.__tqArray[4*e+1]=r.m13,this.__tqArray[4*e+2]=r.m23,this.__sqArray[4*e+0]=i.x,this.__sqArray[4*e+1]=i.y,this.__sqArray[4*e+2]=i.z,this.__tqArray[4*e+3]=c[0],this.__sqArray[4*e+3]=c[1]}else v.D.boneDataType===p.N.Vec4x2Old&&(this.__tsArray[4*e+0]=r.m03,this.__tsArray[4*e+1]=r.m13,this.__tsArray[4*e+2]=r.m23,this.__qArray[4*e+0]=a.x,this.__qArray[4*e+1]=a.y,this.__qArray[4*e+2]=a.z,this.__qArray[4*e+3]=a.w);if(v.D.boneDataType===p.N.Vec4x1){this.__tsArray[4*e+0]=r.m03,this.__tsArray[4*e+1]=r.m13,this.__tsArray[4*e+2]=r.m23;var l=f.k.packNormalizedVec4ToVec2(a.x,a.y,a.z,a.w,Math.pow(2,12));this.__qtsArray[4*e+0]=l[0],this.__qtsArray[4*e+1]=l[1]}}}if(v.D.boneDataType===p.N.Vec4x1){for(var u=1,_=1,d=1,m=0;m<this.__joints.length;m++){var y=Math.abs(this.__tsArray[4*m+0]);y>u&&(u=y);var A=Math.abs(this.__tsArray[4*m+1]);A>_&&(_=A);var b=Math.abs(this.__tsArray[4*m+2]);b>d&&(d=b)}this.__qtsInfo.x=u,this.__qtsInfo.y=_,this.__qtsInfo.z=d,this.__qtsInfo.w=1;for(var g=0;g<this.__joints.length;g++){var x=this.__tsArray[4*g+0]/u,I=this.__tsArray[4*g+1]/_,E=this.__tsArray[4*g+2]/d,w=this.__tsArray[4*g+3],S=f.k.packNormalizedVec4ToVec2(x,I,E,w,Math.pow(2,12));this.__qtsArray[4*g+2]=S[0],this.__qtsArray[4*g+3]=S[1]}}}},u.__copyToMatArray=function(e,t){this.__matArray[16*t+0]=e._v[0],this.__matArray[16*t+1]=e._v[1],this.__matArray[16*t+2]=e._v[2],this.__matArray[16*t+3]=e._v[3],this.__matArray[16*t+4]=e._v[4],this.__matArray[16*t+5]=e._v[5],this.__matArray[16*t+6]=e._v[6],this.__matArray[16*t+7]=e._v[7],this.__matArray[16*t+8]=e._v[8],this.__matArray[16*t+9]=e._v[9],this.__matArray[16*t+10]=e._v[10],this.__matArray[16*t+11]=e._v[11],this.__matArray[16*t+12]=e._v[12],this.__matArray[16*t+13]=e._v[13],this.__matArray[16*t+14]=e._v[14],this.__matArray[16*t+15]=e._v[15]},u.getInverseBindMatricesAccessor=function(){return this.__inverseBindMatricesAccessor},u._shallowCopyFrom=function(e){var t=e;this._jointIndices=t._jointIndices.concat(),this.setJoints(t.__joints.concat()),this.setJoints([]),this.__inverseBindMatricesAccessor=t.__inverseBindMatricesAccessor,y.Is.exist(t._bindShapeMatrix)&&(this._bindShapeMatrix=t._bindShapeMatrix.clone()),y.Is.exist(t.__jointMatrices)&&(this.__jointMatrices=t.__jointMatrices.concat()),this.topOfJointsHierarchy=t.topOfJointsHierarchy,this.isSkinning=t.isSkinning,this.__qArray.set(t.__qArray),this.__tsArray.set(t.__tsArray),this.__tqArray.set(t.__tqArray),this.__sqArray.set(t.__sqArray),this.__qtsArray.set(t.__qtsArray),this.__qtsInfo.copyComponents(t.__qtsInfo),this.__matArray.set(t.__matArray),this.__worldMatrix.copyComponents(t.__worldMatrix),this.__isWorldMatrixVanilla=t.__isWorldMatrixVanilla,this._animationRetarget=t._animationRetarget},u.addThisComponentToEntity=function(e,t){var n=function(e){x(n,e);var t=S(n);function n(e,r,o){return A(this,n),t.call(this,e,r,o)}return n.prototype.getSkeletal=function(){return this.getComponentByComponentTID(a.z.SkeletalComponentTID)},n}(e.constructor);return(0,i.e)(e,n),e},u._getInverseBindMatrices=function(e){var t=this.__joints.indexOf(e),n=this.__inverseBindMatricesAccessor.getTypedArray();return new s.J(n.slice(16*t,16*t+16))},r=n,l=[{key:"componentTID",get:function(){return a.z.SkeletalComponentTID}}],(o=[{key:"rootJointWorldMatrixInner",get:function(){var e;return null===(e=this.topOfJointsHierarchy)||void 0===e?void 0:e.matrixInner}},{key:"jointMatrices",get:function(){return this.__jointMatrices}},{key:"jointQuaternionArray",get:function(){return this.__qArray}},{key:"jointTranslateScaleArray",get:function(){return this.__tsArray}},{key:"jointTranslatePackedQuat",get:function(){return this.__tqArray}},{key:"jointScalePackedQuat",get:function(){return this.__sqArray}},{key:"jointMatricesArray",get:function(){return this.__matArray}},{key:"jointCompressedChunk",get:function(){return this.__qtsArray}},{key:"jointCompressedInfo",get:function(){return this.__qtsInfo}},{key:"worldMatrix",get:function(){return this.__worldMatrix.clone()}},{key:"worldMatrixInner",get:function(){return this.__worldMatrix}},{key:"isWorldMatrixUpdated",get:function(){return!this.__isWorldMatrixVanilla}},{key:"entity",get:function(){return i.g.getEntity(this.__entityUid)}}])&&b(r.prototype,o),l&&b(r,l),n}(o.w);T.__globalDataRepository=m.$.getInstance(),T.__tookGlobalDataNum=0,T.__tmpVec3_0=l.d6.zero(),T.__tmp_mat4=h.e.identity(),T.__tmp_q=u.y.fromCopy4(0,0,0,1),T.__identityMat=h.e.identity(),r.C.registerComponentClass(T)},1417:(e,t,n)=>{n.d(t,{U:()=>b});var r=n(1410),o=n(6383),i=n(2342),a=n(6174),s=n(6815),c=n(988),l=n(1855),u=n(7690);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function v(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}var y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}var b=function(e){m(n,e);var t=A(n);function n(e,r,o){var i;return f(this,n),(i=t.call(this,e,r,o)).__pose=new l.WQ,i.__updateCountAtLastLogic=0,i.moveStageTo(s.I.Create),i}var r=n.prototype;return r.$create=function(){this.__sceneGraphComponent=this.entity.tryToGetSceneGraph(),this.moveStageTo(s.I.Logic)},r._backupTransformAsRest=function(){this.__rest=this.__pose.clone(),this.entity.tryToGetSceneGraph().setWorldMatrixRestDirty()},r._restoreTransformFromRest=function(){void 0!==this.__rest&&this.__pose.setTransform(this.__rest.positionInner,c.d6.fromCopyVector3(this.__rest.eulerAnglesInner),this.__rest.scaleInner,l.yG.fromCopyQuaternion(this.__rest.rotationInner),this.__rest.matrixInner)},r.$logic=function(){this.__updateCountAtLastLogic!==this.__pose.updateCount&&(this.__sceneGraphComponent.setWorldMatrixDirty(),this.__updateCountAtLastLogic=this.__pose.updateCount)},r._shallowCopyFrom=function(e){var t=e;this.__pose=t.__pose.clone(),null!=t.__rest&&(this.__rest=t.__rest.clone()),this.__updateCountAtLastLogic=t.__updateCountAtLastLogic},r.addThisComponentToEntity=function(e,t){var n=function(e){m(n,e);var t=A(n);function n(e,r,o){return f(this,n),t.call(this,e,r,o)}return n.prototype.getTransform=function(){return void 0===this.__transformComponent&&(this.__transformComponent=this.getComponentByComponentTID(a.z.TransformComponentTID)),this.__transformComponent},h(n,[{key:"localPosition",get:function(){return this.localPositionInner.clone()},set:function(e){this.getTransform().localPosition=e}},{key:"localPositionInner",get:function(){return this.getTransform().localPositionInner}},{key:"localPositionRest",get:function(){return this.getTransform().localPositionRest}},{key:"localPositionRestInner",get:function(){return this.getTransform().localPositionRestInner}},{key:"localScale",get:function(){return this.localScaleInner.clone()},set:function(e){this.getTransform().localScale=e}},{key:"localScaleInner",get:function(){return this.getTransform().localScaleInner}},{key:"localScaleRest",get:function(){return this.getTransform().localScaleRest}},{key:"localScaleRestInner",get:function(){return this.getTransform().scaleRestInner}},{key:"localEulerAngles",get:function(){return this.localEulerAnglesInner.clone()},set:function(e){this.getTransform().localEulerAngles=e}},{key:"localEulerAnglesInner",get:function(){return this.getTransform().localEulerAnglesInner}},{key:"localEulerAnglesRest",get:function(){return this.localEulerAnglesRestInner.clone()}},{key:"localEulerAnglesRestInner",get:function(){return this.getTransform().localEulerAnglesRestInner}},{key:"localRotation",get:function(){return this.localRotationInner.clone()},set:function(e){this.getTransform().localRotation=e}},{key:"localRotationInner",get:function(){return this.getTransform().localRotationInner}},{key:"localRotationRest",get:function(){return this.localQuaternionRestInner.clone()}},{key:"localQuaternionRestInner",get:function(){return this.getTransform().localRotationRestInner}},{key:"localMatrix",get:function(){return this.localMatrixInner.clone()},set:function(e){this.getTransform().localMatrix=e}},{key:"localMatrixInner",get:function(){return this.getTransform().localMatrixInner}},{key:"localMatrixRest",get:function(){return this.localMatrixRestInner.clone()}},{key:"localMatrixRestInner",get:function(){return this.getTransform().localMatrixRestInner}}]),n}(e.constructor);return(0,i.e)(e,n),e},h(n,[{key:"restOrPose",get:function(){return void 0!==this.__rest?this.__rest:this.__pose}},{key:"localTransform",get:function(){return this.__pose},set:function(e){this.__pose.setTransform(e.positionInner,c.d6.fromCopyVector3(e.eulerAnglesInner),e.scaleInner,l.yG.fromCopyQuaternion(e.rotationInner),e.matrixInner)}},{key:"localTransformRest",get:function(){return this.restOrPose},set:function(e){u.Is.undefined(this.__rest)&&(this.__rest=new l.WQ),this.__rest.setTransform(e.positionInner,c.d6.fromCopyVector3(e.eulerAnglesInner),e.scaleInner,l.yG.fromCopyQuaternion(e.rotationInner),e.matrixInner)}},{key:"localPosition",get:function(){return this.__pose.position},set:function(e){this.__pose.position=e}},{key:"localPositionInner",get:function(){return this.__pose.positionInner}},{key:"localPositionRest",get:function(){return this.restOrPose.position}},{key:"localPositionRestInner",get:function(){return this.restOrPose.positionInner}},{key:"localEulerAngles",get:function(){return this.__pose.eulerAngles},set:function(e){this.__pose.eulerAngles=e}},{key:"localEulerAnglesInner",get:function(){return this.__pose.eulerAnglesInner}},{key:"localEulerAnglesRest",get:function(){return this.restOrPose.eulerAngles}},{key:"localEulerAnglesRestInner",get:function(){return this.restOrPose.eulerAnglesInner}},{key:"localScale",get:function(){return this.__pose.scale},set:function(e){this.__pose.scale=e}},{key:"localScaleInner",get:function(){return this.__pose.scaleInner}},{key:"localScaleRest",get:function(){return this.restOrPose.scale}},{key:"scaleRestInner",get:function(){return this.restOrPose.scaleInner}},{key:"localRotation",get:function(){return this.__pose.rotation},set:function(e){this.__pose.rotation=e}},{key:"localRotationInner",get:function(){return this.__pose.rotationInner}},{key:"localRotationRest",get:function(){return this.restOrPose.rotation}},{key:"localRotationRestInner",get:function(){return this.restOrPose.rotationInner}},{key:"localMatrix",get:function(){return this.__pose.matrix},set:function(e){this.__pose.matrix=e}},{key:"localMatrixInner",get:function(){return this.__pose.matrixInner}},{key:"localMatrixRest",get:function(){return this.restOrPose.matrix}},{key:"localMatrixRestInner",get:function(){return this.restOrPose.matrixInner}},{key:"entity",get:function(){return i.g.getEntity(this.__entityUid)}}],[{key:"renderedPropertyCount",get:function(){return null}},{key:"componentTID",get:function(){return a.z.TransformComponentTID}}]),n}(r.w);o.C.registerComponentClass(b)},8169:(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(1410),o=n(6383),i=n(2342),a=n(6815),s=n(7690),c=n(6174);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function h(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}var m=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}var p=function(e){_(n,e);var t=v(n);function n(e,r,o){var i;return l(this,n),(i=t.call(this,e,r,o)).__expressions=new Map,i.__weights=new Map,i.moveStageTo(a.I.Logic),i}var r,o,f=n.prototype;return f.setVrmExpressions=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;this.__expressions.set(a.name,a),this.__weights.set(a.name,0)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},f.setExpressionWeight=function(e,t){var n=this.__expressions.get(e);if(!s.Is.not.exist(n)){this.__weights.set(e,t);var r=!0,o=!1,a=void 0;try{for(var c,l=n.binds[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var u=c.value,f=i.g.getEntity(u.entityIdx).tryToGetBlendShape();s.Is.exist(f)&&f.setWeightByIndex(u.blendShapeIdx,t)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}},f.getExpressionWeight=function(e){return this.__weights.get(e)},f.getExpressionNames=function(){return Array.from(this.__expressions.keys())},f.addThisComponentToEntity=function(e,t){var n=function(e){_(n,e);var t=v(n);function n(e,r,o){return l(this,n),t.call(this,e,r,o)}return n.prototype.getVrm=function(){return void 0===this.__vrmComponent&&(this.__vrmComponent=this.getComponentByComponentTID(c.z.VrmComponentTID)),this.__vrmComponent},n}(e.constructor);return(0,i.e)(e,n),e},r=n,o=[{key:"componentTID",get:function(){return c.z.VrmComponentTID}}],null&&u(r.prototype,null),o&&u(r,o),n}(r.w);o.C.registerComponentClass(p)},6174:(e,t,n)=>{n.d(t,{z:()=>r});var r=Object.freeze({AnimationComponentTID:1,TransformComponentTID:2,SceneGraphComponentTID:3,MeshComponentTID:4,MeshRendererComponentTID:5,LightComponentTID:6,CameraControllerComponentTID:7,CameraComponentTID:8,SkeletalComponentTID:9,BlendShapeComponentTID:10,PhysicsComponentTID:11,EffekseerComponentTID:12,VrmComponentTID:13,maxWellKnownTidNumber:13})},1905:(e,t,n)=>{n.d(t,{l:()=>p,cw:()=>r.c,xT:()=>i.x,My:()=>a.M,SP:()=>s.S,B5:()=>m,xz:()=>v,r0:()=>c.r,$t:()=>l.$,YZ:()=>u.Y,Ze:()=>f.Z,aj:()=>_.a,Yb:()=>y.Y,Uv:()=>A.U,ZA:()=>b.Z,zz:()=>g.z,vA:()=>o});var r=n(5054),o="Default",i=n(9958),a=n(3279),s=n(6696),c=n(4654),l=n(9856),u=n(6807),f=n(2670),_=n(429),h=n(1855),d=n(9197),m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__srcEntity=t}var t=e.prototype;return t.getSrcPGRestQ=function(e){var t=e.getSceneGraph().parent;return d.Is.exist(t)?t.rotationRest:h._f.identity()},t.getDstPGRestQ=function(e){var t=e.getSceneGraph().parent;return d.Is.exist(t)?t.rotationRest:h._f.identity()},t.retargetQuaternion=function(e){var t=this.__srcEntity,n=t.getTransform().localRotationInner,r=t.getTransform().localRotationRestInner,o=this.getSrcPGRestQ(t),i=h._f.multiply(o,h._f.multiply(n,h._f.multiply(h._f.invert(r),h._f.invert(o)))),a=e.getTransform().localRotationRestInner,s=this.getDstPGRestQ(e);return h._f.multiply(h._f.invert(s),h._f.multiply(i,h._f.multiply(s,a)))},t.retargetTranslate=function(e){var t=this.__srcEntity,n=t.getTransform().localPositionInner,r=t.getTransform().localPositionRestInner,o=this.getSrcPGRestQ(t),i=h.P.subtract(n,r),a=o.transformVector3(i),s=e.getTransform().localPositionRestInner,c=this.getDstPGRestQ(e);return h.P.add(c.transformVector3Inverse(a),s)},t.retargetScale=function(e){return this.__srcEntity.getTransform().localScaleInner},e}(),v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__srcEntity=t}var t=e.prototype;return t.retargetQuaternion=function(e){var t,n,r,o=this.__srcEntity,i=d.Is.exist(o.tryToGetAnimation())?o.tryToGetAnimation().inverseBindMatrix:h.Je.identity(),a=o.getSceneGraph().matrixInner,s=h.Je.multiply(a,i),c=d.Is.exist(null===(t=e.tryToGetAnimation())||void 0===t?void 0:t.inverseBindMatrix)?h.Je.invert(e.tryToGetAnimation().inverseBindMatrix):h.Je.identity(),l=d.Is.exist(null===(n=null===(r=e.getSceneGraph().parent)||void 0===r?void 0:r.entity.tryToGetAnimation())||void 0===n?void 0:n.inverseBindMatrix)?e.getSceneGraph().parent.entity.tryToGetAnimation().inverseBindMatrix:h.Je.identity(),u=h.Je.multiply(l,h.Je.multiply(s,c));return h._f.fromMatrix(u)},t.retargetTranslate=function(e){var t,n,r,o=this.__srcEntity,i=d.Is.exist(o.tryToGetAnimation())?o.tryToGetAnimation().inverseBindMatrix:h.Je.identity(),a=o.getSceneGraph().matrixInner,s=h.Je.multiply(a,i),c=d.Is.exist(null===(t=e.tryToGetAnimation())||void 0===t?void 0:t.inverseBindMatrix)?h.Je.invert(e.tryToGetAnimation().inverseBindMatrix):h.Je.identity(),l=d.Is.exist(null===(n=null===(r=e.getSceneGraph().parent)||void 0===r?void 0:r.entity.tryToGetAnimation())||void 0===n?void 0:n.inverseBindMatrix)?e.getSceneGraph().parent.entity.tryToGetAnimation().inverseBindMatrix:h.Je.identity();return h.Je.multiply(l,h.Je.multiply(s,c)).getTranslate()},t.retargetScale=function(e){return this.__srcEntity.getTransform().localScaleInner},e}(),p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__srcEntity=t}var t=e.prototype;return t.retargetQuaternion=function(e){return this.__srcEntity.getTransform().localRotationInner},t.retargetTranslate=function(e){return this.__srcEntity.getTransform().localPositionInner},t.retargetScale=function(e){return this.__srcEntity.getTransform().localScaleInner},e}(),y=n(1625),A=n(1417),b=n(8169),g=n(6174)},1410:(e,t,n)=>{n.d(t,{w:()=>d});var r=n(4395),o=n(2342),i=n(6815),a=n(6383),s=n(9977),c=n(9315);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function f(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}var h=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(h,e);var t,n,c=(t=h,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=u(t);if(n){var o=u(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return f(this,e)});function h(e,t,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(o=c.call(this))._isAlive=!0,o.__currentProcessStage=i.I.Create,o.__byteOffsetOfThisComponent=-1,o.__maxComponentNumber=s.D.maxEntityNumber,o.__entityUid=e,o._component_sid=t,h._processStages.forEach((function(e){o.isExistProcessStageMethod(e)&&null==h.__componentsOfProcessStages.get(e)&&(h.__componentsOfProcessStages.set(e,new Int32Array(s.D.maxEntityNumber)),h.__lengthOfArrayOfProcessStages.set(e,0))})),o.__memoryManager=r.B.getInstance(),o.__entityRepository=n,o}var d,m,v,p=h.prototype;return p.moveStageTo=function(e){this.__currentProcessStage=e},p._setMaxNumberOfComponent=function(e){this.__maxComponentNumber=e},p.isExistProcessStageMethod=function(e){return null!=this[e.methodName]},p.registerDependency=function(e,t){},p.takeOne=function(e,t,n){if(this["_"+e].isDummy()){var r=h.__accessors.get(this.constructor).get(e).takeOne();this["_"+e]=new t(r,!1,!0);for(var o=0;o<this["_"+e]._v.length;++o)this["_"+e]._v[o]=n[o];return null}},p.registerMember=function(e,t,n,r,o){h.__memberInfo.has(this.constructor)||h.__memberInfo.set(this.constructor,[]),h.__memberInfo.get(this.constructor).push({bufferUse:e,memberName:t,dataClassType:n,compositionType:n.compositionType,componentType:r,initValues:o})},p.submitToAllocation=function(e){var t=this,n=this.constructor,r=h.__memberInfo.get(n);0===this._component_sid&&function(t){h.__members.has(n)||h.__members.set(n,new Map);var o=h.__members.get(n);r.forEach((function(e){o.set(e.bufferUse,[])})),r.forEach((function(e){o.get(e.bufferUse).push(e)}));var i=!0,a=!1,s=void 0;try{for(var c,l=function(){var e=c.value,t=o.get(e);h.__byteLengthSumOfMembers.has(n)||h.__byteLengthSumOfMembers.set(n,new Map);var r=h.__byteLengthSumOfMembers.get(n);r.has(e)||r.set(e,0),t.forEach((function(t){r.set(e,r.get(e)+t.compositionType.getNumberOfComponents()*t.componentType.getSizeInBytes())})),t.length},u=o.keys()[Symbol.iterator]();!(i=(c=u.next()).done);i=!0)l()}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}var f=!0,_=!1,d=void 0;try{for(var m,v=o.keys()[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var p=m.value;o.get(p).forEach((function(r){var o=h.takeAccessor(r.bufferUse,r.memberName,n,r.compositionType,r.componentType,e);t["_byteOffsetOfAccessorInBuffer_"+r.memberName]=o.byteOffsetInBuffer,t["_byteOffsetOfAccessorInComponent_"+r.memberName]=o.byteOffsetInBufferView}))}}catch(e){_=!0,d=e}finally{try{f||null==v.return||v.return()}finally{if(_)throw d}}}(this);var o=h.__members.get(n),i=!0,a=!1,s=void 0;try{for(var c,l=o.keys()[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var u=c.value;o.get(u).forEach((function(e){t.takeOne(e.memberName,e.dataClassType,e.initValues)}))}}catch(e){a=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}},p.getDataByteInfo=function(e){return h.getDataByteInfoInner(this,e)},p.addThisComponentToEntity=function(e,t){throw"Invalid Calling"},p._destroy=function(){this._isAlive=!1},p._shallowCopyFrom=function(e){},h.doesTheProcessStageMethodExist=function(e,t){return null!=e.prototype[t.methodName]},h.process=function(e){var t=e.componentType,n=e.processStage,r=e.processApproach,o=e.strategy,i=e.renderPass,s=e.renderPassTickCount;if(h.doesTheProcessStageMethodExist(t,n))for(var c=n.methodName,l=this.__componentsOfProcessStages.get(n),u=a.C._getComponentsIncludingDead(t),f=0;f<l.length;++f){var _=l[f];if(_===h.invalidComponentSID)return;var d=u[_];void 0!==d&&d[c]({i:f,processStage:n,processApproach:r,strategy:o,renderPass:i,renderPassTickCount:s})}},h.updateComponentsOfEachProcessStage=function(e,t,n){if(h.doesTheProcessStageMethodExist(e,t)){var r=h.__componentsOfProcessStages.get(t);if(r){var o=e["sort_"+t.methodName];if(null!=o){var i;i=o(n);for(var s=0;s<i.length;s++)r[s]=i[s]}else{for(var c=0,l=a.C.getComponentsWithType(e),u=0;u<l.length;++u){var f=l[u];t===f.__currentProcessStage&&(r[c++]=f.componentSID)}r[c]=h.invalidComponentSID}}}},h.getByteLengthSumOfMembers=function(e,t){return this.__byteLengthSumOfMembers.get(t).get(e)},h.getAccessor=function(e,t){return this.__accessors.get(t).get(e)},h.takeAccessor=function(e,t,n,o,i,a){this.__accessors.has(n)||this.__accessors.set(n,new Map);var s=this.__accessors.get(n);if(!s.has(t)){var c=o.getNumberOfComponents()*i.getSizeInBytes(),l=r.B.getInstance().createOrGetBuffer(e).takeBufferView({byteLengthToNeed:c*a,byteStride:0}).unwrapForce().takeAccessor({compositionType:o,componentType:i,count:a,byteStride:c}).unwrapForce();return s.set(t,l),l}},h.getByteOffsetOfThisComponentTypeInBuffer=function(e,t){return this.__bufferViews.get(t).get(e).byteOffsetInBuffer},h.getByteOffsetOfFirstOfThisMemberInBuffer=function(e,t){return this.__accessors.get(t).get(e).byteOffsetInBuffer},h.getByteOffsetOfFirstOfThisMemberInBufferView=function(e,t){return this.__accessors.get(t).get(e).byteOffsetInBufferView},h.getDataByteInfoInner=function(e,t){var n=e["_"+t]._v,r=n.byteOffset,o=n.byteLength,i=n.length,a=r/4/4;return{byteLength:o,byteOffsetInBuffer:r,byteOffsetInThisComponent:this["_byteOffsetOfAccessorInComponent_"+t]+e.componentSID*i*4,locationOffsetInBuffer:a,locationOffsetInThisComponent:this["_byteOffsetOfAccessorInComponent_"+t]+e.componentSID*i,thisComponentByteOffsetInBuffer:e.__byteOffsetOfThisComponent,thisComponentLocationOffsetInBuffer:e.__byteOffsetOfThisComponent/4/4,componentNumber:i}},h.getDataByteInfoByComponentSID=function(e,t,n){var r=a.C.getComponent(e,t);if(r)return h.getDataByteInfoInner(r,n)},h.getDataByteInfoByEntityUID=function(e,t,n){var r=o.g.getComponentOfEntity(t,e);if(r)return h.getDataByteInfoInner(r,n)},h.getLocationOffsetOfMemberOfComponent=function(e,t){return a.C.getComponent(e,0)["_byteOffsetOfAccessorInBuffer_"+t]/4/4},h.getCompositionTypeOfMember=function(e,t){var n=this.__memberInfo.get(t).find((function(t){return t.memberName===e}));return null!=n?n.compositionType:void 0},h.getComponentTypeOfMember=function(e,t){var n=this.__memberInfo.get(t).find((function(t){return t.memberName===e}));return null!=n?n.componentType:void 0},d=h,v=[{key:"componentTID",get:function(){return 0}}],(m=[{key:"maxNumberOfComponent",get:function(){return this.__maxComponentNumber}},{key:"componentSID",get:function(){return this._component_sid}},{key:"entityUID",get:function(){return this.__entityUid}},{key:"currentProcessStage",get:function(){return this.__currentProcessStage}},{key:"entity",get:function(){return o.g.getEntity(this.__entityUid)}}])&&l(d.prototype,m),v&&l(d,v),h}(c.S);d.invalidComponentSID=-1,d.__componentsOfProcessStages=new Map,d.__lengthOfArrayOfProcessStages=new Map,d.__bufferViews=new Map,d.__accessors=new Map,d.__byteLengthSumOfMembers=new Map,d.__memberInfo=new Map,d.__members=new Map,d._processStages=[i.I.Create,i.I.Load,i.I.Logic,i.I.PreRender,i.I.Render]},6383:(e,t,n)=>{n.d(t,{C:()=>s});var r=n(1410),o=n(9197),i=n(9977),a=n(6174),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.registerComponentClass=function(t){e.__componentClasses.set(t.componentTID,t)},e.deregisterComponentClass=function(t){e.__componentClasses.delete(t)},e.getComponentClass=function(e){return this.__componentClasses.get(e)},e.createComponent=function(t,n,i){var a=e.__componentClasses.get(t);if(o.Is.exist(a)){var s=this.__component_sid_count_map.get(t);o.Is.not.exist(s)&&(this.__component_sid_count_map.set(t,0),s=r.w.invalidComponentSID),this.__component_sid_count_map.set(t,++s);var c=new a(n,s,i);return this.__components.has(t)||this.__components.set(t,[]),this.__components.get(t)[c.componentSID]=c,c}throw new Error("The Component Class object is invalid.")},e.getComponent=function(e,t){return this.getComponentFromComponentTID(e.componentTID,t)},e.getComponentFromComponentTID=function(e,t){var n=this.__components.get(e);if(null!=n)return null!=n[t]?n[t]:void 0},e._getComponents=function(e){var t=this.__components.get(e.componentTID);return null==t?void 0:t.filter((function(e){return e._isAlive}))},e._getComponentsIncludingDead=function(e){return this.__components.get(e.componentTID)},e.getMemoryBeginIndex=function(t){for(var n=0,r=0;r<t;r++){var o=e.__componentClasses.get(r);null!=o&&(n+=o.sizeOfThisComponent*i.D.maxEntityNumber)}return n},e.getComponentsWithType=function(e){var t=this.__components.get(e.componentTID);return null==t?[]:t.filter((function(e){return e._isAlive}))},e.getComponentTIDs=function(){var e=Array.from(this.__components.keys());return e.sort((function(e,t){return e-t})),e},e.getRenderingComponentTIDs=function(){var e=[];return this.__components.has(a.z.MeshRendererComponentTID)&&e.push(a.z.MeshRendererComponentTID),this.__components.has(a.z.EffekseerComponentTID)&&e.push(a.z.EffekseerComponentTID),e},e}();s.__component_sid_count_map=new Map,s.__components=new Map,s.__componentClasses=new Map},9977:(e,t,n)=>{n.d(t,{D:()=>u});var r=n(8468),o=n(7690),i=41,a=33,s=Math.pow(2,12),c=Math.pow(2,12),l=r.N.Mat44x1;"undefined"!=typeof navigator&&(o.Kf.isMobile()||o.Kf.isMobileVr())&&(i=4,a=32,s=Math.pow(2,9),c=Math.pow(2,9));var u={maxEntityNumber:5e3,maxLightNumberInShader:4,maxVertexMorphNumberInShader:i,maxMaterialInstanceForEachType:10,boneDataType:l,maxSkeletonNumber:a,maxCameraNumber:20,maxSizeLimitOfNonCompressedTexture:512,maxSkeletalBoneNumber:300,maxSkeletalBoneNumberForUniformMode:50,dataTextureWidth:s,dataTextureHeight:c,noWebGLTex2DStateCache:!1,maxMorphTargetNumber:4,totalSizeOfGPUShaderDataStorageExceptMorphData:0,isUboEnabled:!1,eventTargetDom:void 0}},3856:(e,t,n)=>{n.d(t,{J:()=>f});var r=n(9315),o=n(9197),i=n(6174);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function c(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}var u=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return c(this,e)});function u(e,t,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(i=r.call(this))._myLatestCopyEntityUID=u.invalidEntityUID,i.___entity_uid=e,i._isAlive=t,i.__components=o.Is.exist(n)?n:new Map,i}var f,_,h=u.prototype;return h._setComponent=function(e,t){this.__components.set(e.componentTID,t)},h.hasComponent=function(e){return this.__components.has(e.componentTID)},h.getComponent=function(e){return this.__components.get(e.componentTID)},h.getComponentByComponentTID=function(e){return this.__components.get(e)},h._removeComponent=function(e){this.__components.delete(e)},h.tryToGetAnimation=function(){return this.getComponentByComponentTID(i.z.AnimationComponentTID)},h.tryToGetBlendShape=function(){return this.getComponentByComponentTID(i.z.BlendShapeComponentTID)},h.tryToGetCamera=function(){return this.getComponentByComponentTID(i.z.CameraComponentTID)},h.tryToGetCameraController=function(){return this.getComponentByComponentTID(i.z.CameraControllerComponentTID)},h.tryToGetLight=function(){return this.getComponentByComponentTID(i.z.LightComponentTID)},h.tryToGetMesh=function(){return this.getComponentByComponentTID(i.z.MeshComponentTID)},h.tryToGetMeshRenderer=function(){return this.getComponentByComponentTID(i.z.MeshRendererComponentTID)},h.tryToGetPhysics=function(){return this.getComponentByComponentTID(i.z.PhysicsComponentTID)},h.tryToGetSceneGraph=function(){return this.getComponentByComponentTID(i.z.SceneGraphComponentTID)},h.tryToGetSkeletal=function(){return this.getComponentByComponentTID(i.z.SkeletalComponentTID)},h.tryToGetTransform=function(){return this.getComponentByComponentTID(i.z.TransformComponentTID)},h.tryToGetVrm=function(){return this.getComponentByComponentTID(i.z.VrmComponentTID)},h.destroy=function(){this.__components.forEach((function(e){e._destroy()})),this._isAlive=!1},f=u,(_=[{key:"entityUID",get:function(){return this.___entity_uid}}])&&a(f.prototype,_),u}(r.S);f.invalidEntityUID=-1},2342:(e,t,n)=>{n.d(t,{e:()=>l,g:()=>c});var r=n(3856),o=n(6383),i=n(1274),a=n(9197),s=n(6174),c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.createEntity=function(){var e=new r.J(++this.__entity_uid_count,!0);return this.__entities[this.__entity_uid_count]=e,e},e.shallowCopyEntity=function(t){var n=e._shallowCopyEntityInner(t);return this.__setJoints(t),this.__handleTagData(n),n},e.__setJoints=function(t){var n=e.getEntity(t._myLatestCopyEntityUID).getComponentByComponentTID(s.z.SkeletalComponentTID),r=t.getComponentByComponentTID(s.z.SkeletalComponentTID);if(a.Is.exist(n)&&a.Is.exist(r)){var o=r.getJoints().map((function(t){return e.getEntity(t.entity._myLatestCopyEntityUID).tryToGetSceneGraph()}));n.setJoints(o)}var i=t.tryToGetSceneGraph();a.Is.exist(i)&&i.children.forEach((function(t){e.__setJoints(t.entity)}))},e._shallowCopyEntityInner=function(e){var t=this.createEntity();t._tags=Object.assign({},e._tags),e._myLatestCopyEntityUID=t.entityUID;for(var n=1;n<=s.z.maxWellKnownTidNumber;n++){var r=e.getComponentByComponentTID(n);if(a.Is.exist(r)){this.tryToAddComponentToEntityByTID(n,t);var o=t.getComponentByComponentTID(n);a.Is.exist(o)&&o._shallowCopyFrom(r)}}return t},e.__handleTagData=function(t){var n=t._tags;if(a.Is.exist(n)){var r=Object.keys(n),o=!0,i=!1,s=void 0;try{for(var c,l=function(){var n=c.value;if("rnEntities"===n){var r=t.getTagValue("rnEntities").map((function(t){return e.getEntity(t._myLatestCopyEntityUID)}));t.tryToSetTag({tag:"rnEntities",value:r})}if("rnEntitiesByNames"===n){var o=t.getTagValue("rnEntitiesByNames"),i=!0,a=!1,s=void 0;try{for(var l,u=Object.keys(o)[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var f=l.value,_=o.get(f);o.set(f,e.getEntity(_._myLatestCopyEntityUID))}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}t.tryToSetTag({tag:"rnEntitiesByNames",value:o})}},u=r[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)l()}catch(e){i=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw s}}}var f=t.tryToGetSceneGraph();a.Is.exist(f)&&f.children.forEach((function(t){e.__handleTagData(t.entity)}))},e.tryToAddComponentToEntityByTID=function(e,t){var n=o.C.getComponentClass(e);return a.Is.not.exist(n)?t:this.addComponentToEntity(n,t)},e.addComponentToEntity=function(e,t){var n=this;if(t.hasComponent(e))return console.log("This entity already has the Component."),t;var r=o.C.createComponent(e.componentTID,t.entityUID,this);return(0,i.wv)({value:this._components[t.entityUID],compensation:function(){var e=new Map;return n._components[t.entityUID]=e,e}}).set(e.componentTID,r),r.addThisComponentToEntity(t,e),t._setComponent(e,r),t},e.removeComponentFromEntity=function(e,t){var n=this._components[t.entityUID];null==n&&(n=new Map,this._components[t.entityUID]=n);var r=n.get(e.componentTID);return a.Is.exist(r)&&(r._destroy(),n.delete(e.componentTID),t._removeComponent(e.componentTID)),t},e.getEntity=function(e){return this.__entities[e]},e.getComponentOfEntity=function(e,t){var n=this._components[e],r=null;return null!=n?null!=(r=n.get(t.componentTID))?r:null:r},e.searchByTags=function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,a=this.__entities[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;s.matchTags(e)&&t.push(s)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t},e.getEntityByUniqueName=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.__entities[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(a.uniqueName===e)return a}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},e._getEntities=function(){return this.__entities.filter((function(e){return e._isAlive}))},e.getEntitiesNumber=function(){return this.__entities.filter((function(e){return e._isAlive})).length},e}();function l(e,t){Object.getOwnPropertyNames(t.prototype).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))}))}c.__entity_uid_count=r.J.invalidEntityUID,c.__entities=[],c._components=[]},9481:(e,t,n)=>{n.d(t,{$:()=>I});var r=n(7416),o=n(5171),i=n(4395),a=n(3932),s=n(2535),c=n(9409),l=n(4021),u=n(5685),f=n(2175),_=n(678),h=n(9977),d=n(1811),m=n(6264),v=n(6860),p=n(8289),y=n(6174),A=n(8468),b=n(7042),g=n(3138),x=n(1855),I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__fields=new Map}var t=e.prototype;return t.initialize=function(e){var t={semantic:r.f5.CurrentComponentSIDs,compositionType:a.d.ScalarArray,componentType:s.r.Float,arrayLength:y.z.maxWellKnownTidNumber,stage:u.H.VertexAndPixelShader,min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isCustomSetting:!0,needUniformInDataTextureMode:!0,initialValue:new f.j(new Float32Array(y.z.maxWellKnownTidNumber))};this.__registerProperty(t,1),this.takeOne(r.f5.CurrentComponentSIDs);var n={semantic:r.f5.ViewMatrix,compositionType:a.d.Mat4,componentType:s.r.Float,stage:u.H.VertexAndPixelShader,min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isCustomSetting:!0,initialValue:p.e.identity()},o={semantic:r.f5.ProjectionMatrix,compositionType:a.d.Mat4,componentType:s.r.Float,stage:u.H.VertexAndPixelShader,min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isCustomSetting:!0,initialValue:p.e.identity()},i={semantic:r.f5.ViewPosition,compositionType:a.d.Vec3,componentType:s.r.Float,stage:u.H.VertexAndPixelShader,min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isCustomSetting:!0,updateInterval:_.a.FirstTimeOnly,initialValue:v.P.fromCopyArray([0,0,1])};this.__registerProperty(n,h.D.maxCameraNumber),this.__registerProperty(o,h.D.maxCameraNumber),this.__registerProperty(i,h.D.maxCameraNumber);var c=b.V.isUniformApproach(e)?h.D.maxSkeletalBoneNumberForUniformMode:h.D.maxSkeletalBoneNumber,l={semantic:r.f5.BoneMatrix,compositionType:a.d.Mat4Array,arrayLength:c,componentType:s.r.Float,stage:u.H.VertexShader,min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isCustomSetting:!0,updateInterval:_.a.FirstTimeOnly,soloDatum:!0,initialValue:new f.j(new Float32Array(0))},g={semantic:r.f5.BoneQuaternion,compositionType:a.d.Vec4Array,arrayLength:c,componentType:s.r.Float,stage:u.H.VertexShader,min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isCustomSetting:!0,updateInterval:_.a.FirstTimeOnly,soloDatum:!0,initialValue:new f.j(new Float32Array(0))},I={semantic:r.f5.BoneTranslateScale,compositionType:a.d.Vec4Array,arrayLength:c,componentType:s.r.Float,soloDatum:!0,stage:u.H.VertexShader,min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isCustomSetting:!0,updateInterval:_.a.FirstTimeOnly,initialValue:new f.j(new Float32Array(0))},E={semantic:r.f5.BoneTranslatePackedQuat,compositionType:a.d.Vec4Array,arrayLength:c,componentType:s.r.Float,stage:u.H.VertexShader,min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isCustomSetting:!0,updateInterval:_.a.FirstTimeOnly,soloDatum:!0,initialValue:new f.j(new Float32Array(0))},w={semantic:r.f5.BoneScalePackedQuat,compositionType:a.d.Vec4Array,arrayLength:c,componentType:s.r.Float,soloDatum:!0,stage:u.H.VertexShader,min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isCustomSetting:!0,updateInterval:_.a.FirstTimeOnly,initialValue:new f.j(new Float32Array(0))},S={semantic:r.f5.BoneCompressedChunk,compositionType:a.d.Vec4Array,arrayLength:c,componentType:s.r.Float,soloDatum:!0,stage:u.H.VertexShader,min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isCustomSetting:!0,updateInterval:_.a.FirstTimeOnly,initialValue:new f.j(new Float32Array(0))},T={semantic:r.f5.BoneCompressedInfo,compositionType:a.d.Vec4,componentType:s.r.Float,soloDatum:!0,stage:u.H.VertexShader,min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isCustomSetting:!0,updateInterval:_.a.FirstTimeOnly,initialValue:m.Lt.zero()},C={semantic:r.f5.SkinningMode,compositionType:a.d.Scalar,componentType:s.r.Int,stage:u.H.VertexAndPixelShader,min:0,max:1,isCustomSetting:!0,updateInterval:_.a.EveryTime,initialValue:d.Ru.fromCopyNumber(-1)};h.D.boneDataType===A.N.Mat44x1?this.__registerProperty(l,h.D.maxSkeletonNumber):h.D.boneDataType===A.N.Vec4x2?(this.__registerProperty(E,h.D.maxSkeletonNumber),this.__registerProperty(w,h.D.maxSkeletonNumber)):h.D.boneDataType===A.N.Vec4x2Old?(this.__registerProperty(g,h.D.maxSkeletonNumber),this.__registerProperty(I,h.D.maxSkeletonNumber)):h.D.boneDataType===A.N.Vec4x1&&(this.__registerProperty(I,h.D.maxSkeletonNumber),this.__registerProperty(S,h.D.maxSkeletonNumber),this.__registerProperty(T,1),this.takeOne(r.f5.BoneCompressedInfo)),this.__registerProperty(C,1),this.takeOne(r.f5.SkinningMode);var P={semantic:r.f5.LightPosition,compositionType:a.d.Vec3Array,componentType:s.r.Float,stage:u.H.PixelShader,arrayLength:h.D.maxLightNumberInShader,min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isCustomSetting:!0,updateInterval:_.a.EveryTime,initialValue:new f.j(new Float32Array(h.D.maxLightNumberInShader))},R={semantic:r.f5.LightDirection,compositionType:a.d.Vec3Array,componentType:s.r.Float,stage:u.H.PixelShader,arrayLength:h.D.maxLightNumberInShader,min:-1,max:1,isCustomSetting:!0,initialValue:new f.j(new Float32Array(h.D.maxLightNumberInShader)),updateInterval:_.a.EveryTime},D={semantic:r.f5.LightIntensity,compositionType:a.d.Vec3Array,componentType:s.r.Float,stage:u.H.PixelShader,arrayLength:h.D.maxLightNumberInShader,min:0,max:10,isCustomSetting:!0,initialValue:new f.j(new Float32Array(h.D.maxLightNumberInShader)),updateInterval:_.a.EveryTime},M={semantic:r.f5.LightProperty,compositionType:a.d.Vec4Array,componentType:s.r.Float,stage:u.H.PixelShader,arrayLength:h.D.maxLightNumberInShader,min:0,max:10,isCustomSetting:!0,initialValue:new f.j(new Float32Array(h.D.maxLightNumberInShader)),updateInterval:_.a.EveryTime};this.__registerProperty(P,1),this.__registerProperty(R,1),this.__registerProperty(D,1),this.__registerProperty(M,1),this.takeOne(r.f5.LightDirection),this.takeOne(r.f5.LightIntensity),this.takeOne(r.f5.LightPosition),this.takeOne(r.f5.LightProperty);var B={semantic:r.f5.LightNumber,compositionType:a.d.Scalar,componentType:s.r.Int,stage:u.H.VertexAndPixelShader,min:0,max:Number.MAX_SAFE_INTEGER,isCustomSetting:!0,updateInterval:_.a.FirstTimeOnly,initialValue:d.Ru.fromCopyNumber(0)};this.__registerProperty(B,1),this.takeOne(r.f5.LightNumber);var N={semantic:r.f5.BackBufferTextureSize,compositionType:a.d.Vec2,componentType:s.r.Float,stage:u.H.PixelShader,min:0,max:Number.MAX_SAFE_INTEGER,isCustomSetting:!0,needUniformInDataTextureMode:!0,updateInterval:_.a.EveryTime,initialValue:x.FM.fromCopy2(0,0)};this.__registerProperty(N,1),this.takeOne(r.f5.BackBufferTextureSize);var O={semantic:r.f5.VrState,compositionType:a.d.Vec2,componentType:s.r.Int,stage:u.H.PixelShader,min:0,max:Number.MAX_SAFE_INTEGER,isCustomSetting:!0,needUniformInDataTextureMode:!0,updateInterval:_.a.EveryTime,initialValue:x.FM.fromCopy2(0,0)};this.__registerProperty(O,1),this.takeOne(r.f5.VrState)},t.__registerProperty=function(e,t){var n=(0,g.V)(e),r=i.B.getInstance().createOrGetBuffer(o.$.GPUInstanceData),c=(0,g.K)(e),l=r.takeBufferView({byteLengthToNeed:c*t,byteStride:0}).unwrapForce(),u=e.arrayLength;a.d.isArray(e.compositionType)&&null==u&&(u=100);var f={shaderSemanticsInfo:e,values:[],maxCount:t,accessor:l.takeAccessor({compositionType:e.compositionType,componentType:s.r.Float,count:t,byteStride:c,arrayLength:u}).unwrapForce()};this.__fields.set(n,f)},t.takeOne=function(e){var t=(0,r.UL)(e),n=this.__fields.get(t);if(n){var o=n.shaderSemanticsInfo,i=n.accessor.takeOne(),a=n.values.length,s=c.D.initWithFloat32Array(o.initialValue,o.initialValue,i,o.compositionType);return n.values[a]=s,s}},t.setValue=function(e,t,n){var o=(0,r.UL)(e),i=this.__fields.get(o);if(i){var a=i.values[t];c.D._setForce(a,n)}},t.getValue=function(e,t){var n=(0,r.UL)(e),o=this.__fields.get(n);if(o)return o.values[t]},t.getGlobalPropertyStruct=function(e){return this.__fields.get(e)},t.getGlobalProperties=function(){return Array.from(this.__fields.values())},t._setUniformLocationsForUniformModeOnly=function(e){var t=l.F.getWebGLResourceRepository(),n=[];this.__fields.forEach((function(e,t){var r=e.shaderSemanticsInfo;n.push(r)})),t.setupUniformLocations(e,n,!0)},t._setUniformLocationsForDataTextureModeOnly=function(e){var t=l.F.getWebGLResourceRepository(),n=[];this.__fields.forEach((function(e,t){var r=e.shaderSemanticsInfo;r.needUniformInDataTextureMode&&n.push(r)})),t.setupUniformLocations(e,n,!0)},t.setUniformValues=function(e){var t=l.F.getWebGLResourceRepository();this.__fields.forEach((function(n,r){for(var o=n.shaderSemanticsInfo,i=n.values,a=0;a<i.length;a++)t.setUniformValue(e,o.semantic.str,!0,i[a])}))},t.getLocationOffsetOfProperty=function(e){var t=this.__fields.get(e);return t?t.accessor.byteOffsetInBuffer/4/4:-1},t.getCurrentDataNumberOfTheProperty=function(e){var t=this.__fields.get(e);return t?t.values.length:0},t._addPropertiesStr=function(e,t,n,r){return this.__fields.forEach((function(o,i){var a=o.shaderSemanticsInfo;a.stage!==u.H.VertexShader&&a.stage!==u.H.VertexAndPixelShader||(e+=n("",a,i,!0,r)),a.stage!==u.H.PixelShader&&a.stage!==u.H.VertexAndPixelShader||(t+=n("",a,i,!0,r))})),[e,t]},e.getInstance=function(){return this.__instance||(this.__instance=new e),this.__instance},e}()},4395:(e,t,n)=>{n.d(t,{B:()=>c});var r=n(5527),o=n(5171),i=n(9977),a=n(1274);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__buffers={},this.__buffersOnDemand=new Map,this.__memorySizeRatios={},this.__memorySizeRatios[o.$.CPUGeneric.str]=t,this.__memorySizeRatios[o.$.GPUInstanceData.str]=n,this.__memorySizeRatios[o.$.GPUVertexData.str]=r}var t,n,c=e.prototype;return c.__makeMultipleOf4byteSize=function(e){return e+(e%4==0?0:4-e%4)},c.__createBuffer=function(t){var n=e.bufferWidthLength*e.bufferHeightLength*4*4*this.__memorySizeRatios[t.str],i=new ArrayBuffer(this.__makeMultipleOf4byteSize(n)),a=4;t!==o.$.GPUInstanceData&&t!==o.$.GPUVertexData||(a=16);var s=new r.l({byteLength:i.byteLength,buffer:i,name:t.str,byteAlign:a});return this.__buffers[s.name]=s,s},c.getBuffer=function(e){return this.__buffers[e.toString()]},c.createOrGetBuffer=function(e){var t=this.__buffers[e.toString()];return null==t&&(t=this.__createBuffer(e)),t},c.createBufferOnDemand=function(e,t,n){var i=new ArrayBuffer(e),a=new r.l({byteLength:i.byteLength,buffer:i,name:o.$.UBOGeneric.toString(),byteAlign:n});return this.__buffersOnDemand.set(t.objectUID,a),a},c.getBufferOnDemand=function(e){return this.__buffersOnDemand.get(e.objectUID)},c.printMemoryUsage=function(){var e=this.__buffers[o.$.CPUGeneric.toString()],t=this.__buffers[o.$.GPUInstanceData.toString()],n=this.__buffers[o.$.GPUVertexData.toString()];console.log("Memory Usage in Memory Manager:"),console.log("CPUGeneric: ".concat(e.takenSizeInByte," byte of ").concat(e.byteLength," bytes. (").concat(e.takenSizeInByte/e.byteLength*100," %) ")),console.log("GPUInstanceData: ".concat(t.takenSizeInByte," byte of ").concat(t.byteLength," bytes. (").concat(t.takenSizeInByte/t.byteLength*100," %) ")),null!=n&&console.log("GPUVertexData: ".concat(n.takenSizeInByte," byte of ").concat(n.byteLength," bytes. (").concat(n.takenSizeInByte/n.byteLength*100," %) "))},c.dumpBuffer=function(e){var t=this.__buffers[e.toString()];return a.Kf.downloadArrayBuffer(e.toString(),t.getArrayBuffer()),t},e.createInstanceIfNotCreated=function(t){var n=t.cpuGeneric,r=t.gpuInstanceData,o=t.gpuVertexData;return this.__instance||(this.__instance=new e(n,r,o)),this.__instance},e.getInstance=function(){return this.__instance},t=e,n=[{key:"bufferWidthLength",get:function(){return i.D.dataTextureWidth}},{key:"bufferHeightLength",get:function(){return i.D.dataTextureHeight}}],null&&s(t.prototype,null),n&&s(t,n),e}()},9315:(e,t,n)=>{n.d(t,{S:()=>i});var r=n(1274);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__objectUid=e.currentMaxObjectCount++,this._tags={},this.__combinedTagString="",this.__uniqueName="".concat(this.constructor.name,"__uid_").concat(this.__objectUid),this.__updateInfo(this.__uniqueName)}var t,n,i=e.prototype;return i.__updateInfo=function(t){e.__objects[this.__objectUid]=this,e.__uniqueNames[this.__objectUid]=t,e.__objectsByNameMap.set(this.__uniqueName,this)},i.tryToSetUniqueName=function(t,n){if(-1!==e.__uniqueNames.indexOf(t)){if(n){var r=t+"_("+this.__objectUid+")";if(-1===e.__uniqueNames.indexOf(r))return this.__uniqueName=r,e.__uniqueNames[this.__objectUid]=this.__uniqueName,e.__objectsByNameMap.set(this.__uniqueName,this),!0}return!1}return this.__uniqueName=t,e.__uniqueNames[this.__objectUid]=this.__uniqueName,e.__objectsByNameMap.set(this.__uniqueName,this),!0},i.validateTagString=function(e){return!new RegExp(/[!"#$%&'()\*\+\-\s\.,\/:;<=>?@\[\\\]^`{|}~]/g).test(e)},i.tryToSetTag=function(e){return!!this.validateTagString(e.tag)&&(this.hasTag(e.tag)&&this.removeTag(e.tag),this._tags[e.tag]=e.value,this.__combinedTagString+="".concat(e.tag,":").concat(e.value)+" ",!0)},i.getTagValue=function(e){return this._tags[e]},i.getTag=function(e){return{tag:e,value:this._tags[e]}},i.hasTag=function(e){return null!=this._tags[e]},i.removeTag=function(e){"".concat(e,":").concat(this._tags[e]),this.__combinedTagString.replace(this.__combinedTagString,""),delete this._tags[e]},i.matchTag=function(e,t){return this._tags[e]===t},i.matchTagsAsFreeStrings=function(e){for(var t="^",n=0;n<e.length;n++)t+="(?=.*".concat(e[n],")");return!!new RegExp(t).test(this.__combinedTagString)},i.matchTags=function(e){var t="^";for(var n in e)t+="(?=.*".concat([n],":").concat(e[n],")");return!!new RegExp(t).test(this.__combinedTagString)},i._copyFrom=function(e){this._tags=(0,r.j3)(e._tags),this.__combinedTagString=e.__combinedTagString},e.searchByTag=function(t,n){var r=!0,o=!1,i=void 0;try{for(var a,s=e.__objects[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;if(c.getTagValue(t)===n)return c}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}},e.getRnObject=function(t){return e.__objects[t]},e.getRnObjectByName=function(t){return e.__objectsByNameMap.get(t)},e._reset=function(){this.currentMaxObjectCount=0,this.__uniqueNames=[],this.__objectsByNameMap=new Map,this.__objects=[]},t=e,(n=[{key:"objectUID",get:function(){return this.__objectUid}},{key:"uniqueName",get:function(){return this.__uniqueName}}])&&o(t.prototype,n),e}();i.InvalidObjectUID=-1,i.currentMaxObjectCount=0,i.__uniqueNames=[],i.__objectsByNameMap=new Map,i.__objects=[]},3650:(e,t,n)=>{n.d(t,{F:()=>d});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,{index:t,str:n})}return s.prototype.toGltfString=function(){return"TRANSLUCENT"===this.str?"BLEND":this.str},s}(r.Jx),l=new c({index:0,str:"OPAQUE"}),u=new c({index:1,str:"MASK"}),f=new c({index:2,str:"TRANSLUCENT"}),_=new c({index:3,str:"ADDITIVE"}),h=[l,u,f,_],d=Object.freeze({Opaque:l,Mask:u,Translucent:f,Additive:_,from:function(e){return(0,r.li)({typeList:h,index:e})},fromString:function(e){return(0,r.cu)({typeList:h,str:e})},fromGlTFString:function(e){return"BLEND"===e?f:(0,r.cu)({typeList:h,str:e})}})},166:(e,t,n)=>{n.d(t,{s:()=>m});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,{index:t,str:n})}return s}(r.Jx),l=new c({index:0,str:"Quaternion"}),u=new c({index:1,str:"Translate"}),f=new c({index:2,str:"Scale"}),_=new c({index:3,str:"Weights"}),h=new c({index:4,str:"Effekseer"}),d=[l,u,f,_,h],m=Object.freeze({Quaternion:l,Translate:u,Scale:f,Weights:_,Effekseer:h,from:function(e){return(0,r.li)({typeList:d,index:e})},fromString:function(e){return(0,r.cu)({typeList:d,str:e})}})},9611:(e,t,n)=>{n.d(t,{k:()=>d});var r=n(3100);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}var c=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,r,c,l=(r=u,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=i(r);if(c){var n=i(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return a(this,e)});function u(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),l.call(this,{index:t,str:n})}return t=u,(n=[{key:"GltfString",get:function(){return this.str.toUpperCase()}}])&&o(t.prototype,n),u}(r.Jx),u=new l({index:0,str:"Linear"}),f=new l({index:1,str:"Step"}),_=new l({index:2,str:"CubicSpline"}),h=[u,f,_],d=Object.freeze({Linear:u,Step:f,CubicSpline:_,from:function(e){return(0,r.li)({typeList:h,index:e})},fromString:function(e){return(0,r.cu)({typeList:h,str:e})}})},2503:(e,t,n)=>{n.d(t,{l:()=>T});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,{index:t,str:n})}return s}(r.Jx),l=new c({index:0,str:"ETC1"}),u=new c({index:1,str:"ETC2"}),f=new c({index:2,str:"BC1"}),_=new c({index:3,str:"BC3"}),h=new c({index:4,str:"BC4"}),d=new c({index:5,str:"BC5"}),m=new c({index:6,str:"BC7_M6_OPAQUE"}),v=new c({index:7,str:"BC7_M5"}),p=new c({index:8,str:"PVRTC1_RGB"}),y=new c({index:9,str:"PVRTC1_RGBA"}),A=new c({index:10,str:"ASTC"}),b=new c({index:11,str:"ATC_RGB"}),g=new c({index:12,str:"ATC_RGBA"}),x=new c({index:13,str:"RGBA32"}),I=new c({index:14,str:"RGB565"}),E=new c({index:15,str:"BGR565"}),w=new c({index:16,str:"RGBA4444"}),S=[l,u,f,_,h,d,v,m,p,y,A,b,g,x,I,E,w],T=Object.freeze({ETC1:l,ETC2:u,BC1:f,BC3:_,BC4:h,BC5:d,BC7_M5:v,BC7_M6_OPAQUE:m,PVRTC1_RGB:p,PVRTC1_RGBA:y,ASTC:A,ATC_RGB:b,ATC_RGBA:g,RGBA32:x,RGB565:I,BGR565:E,RGBA4444:w,from:function(e){return(0,r.li)({typeList:S,index:e})},fromString:function(e){return(0,r.cu)({typeList:S,str:e})}})},8468:(e,t,n)=>{n.d(t,{N:()=>d});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,{index:t,str:n})}return s}(r.Jx),l=new c({index:0,str:"Mat44x1"}),u=new c({index:1,str:"Vec4x2"}),f=new c({index:2,str:"Vec4x2Old"}),_=new c({index:3,str:"Vec4x1"}),h=[l,u,_],d=Object.freeze({Mat44x1:l,Vec4x2:u,Vec4x2Old:f,Vec4x1:_,from:function(e){return(0,r.li)({typeList:h,index:e})},fromString:function(e){return(0,r.cu)({typeList:h,str:e})}})},5171:(e,t,n)=>{n.d(t,{$:()=>d});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,{index:t,str:n})}return s}(r.Jx),l=new c({index:0,str:"GPUInstanceData"}),u=new c({index:1,str:"GPUVertexData"}),f=new c({index:2,str:"UBOGeneric"}),_=new c({index:3,str:"CPUGeneric"}),h=[l,u,f,_],d=Object.freeze({GPUInstanceData:l,GPUVertexData:u,UBOGeneric:f,CPUGeneric:_,from:function(e){return(0,r.li)({typeList:h,index:e})},fromString:function(e){return(0,r.cu)({typeList:h,str:e})}})},5674:(e,t,n)=>{n.d(t,{M:()=>_});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,{index:t,str:n})}return s}(r.Jx),l=new c({index:0,str:"Orbit"}),u=new c({index:1,str:"WalkThrough"}),f=[l,u],_=Object.freeze({Orbit:l,WalkThrough:u,from:function(e){return(0,r.li)({typeList:f,index:e})},fromString:function(e){return(0,r.cu)({typeList:f,str:e})}})},2637:(e,t,n)=>{n.d(t,{i:()=>h});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,{index:t,str:n})}return s}(r.Jx),l=new c({index:0,str:"Perspective"}),u=new c({index:1,str:"Orthographic"}),f=new c({index:2,str:"Frustum"}),_=[l,u,f],h=Object.freeze({Perspective:l,Orthographic:u,Frustum:f,from:function(e){return(0,r.li)({typeList:_,index:e})},fromString:function(e){return(0,r.cu)({typeList:_,str:e})}})},2535:(e,t,n)=>{n.d(t,{r:()=>x});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}var c=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var i=o(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return a(this,e)});function i(e){var t,n=e.index,o=e.str,a=e.sizeInBytes;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,{index:n,str:o})).__sizeInBytes=a,t}var c=i.prototype;return c.getSizeInBytes=function(){return this.__sizeInBytes},c.isFloatingPoint=function(){return 5126===this.index||5127===this.index||36193===this.index},c.isInteger=function(){return 5120===this.index||5121===this.index||5122===this.index||5123===this.index||5124===this.index||5125===this.index},i}(r.Jx),u=new l({index:5119,str:"UNKNOWN",sizeInBytes:0}),f=new l({index:5120,str:"BYTE",sizeInBytes:1}),_=new l({index:5121,str:"UNSIGNED_BYTE",sizeInBytes:1}),h=new l({index:5122,str:"SHORT",sizeInBytes:2}),d=new l({index:5123,str:"UNSIGNED_SHORT",sizeInBytes:2}),m=new l({index:5124,str:"INT",sizeInBytes:4}),v=new l({index:5125,str:"UNSIGNED_INT",sizeInBytes:4}),p=new l({index:5126,str:"FLOAT",sizeInBytes:4}),y=new l({index:5127,str:"DOUBLE",sizeInBytes:8}),A=new l({index:35670,str:"BOOL",sizeInBytes:1}),b=new l({index:5131,str:"HALF_FLOAT",sizeInBytes:2}),g=[u,f,_,h,d,m,v,p,y,b,A],x=Object.freeze({Unknown:u,Byte:f,UnsignedByte:_,Short:h,UnsignedShort:d,Int:m,UnsignedInt:v,Float:p,Double:y,Bool:A,HalfFloat:b,from:function(e){return(0,r.li)({typeList:g,index:e})},fromTypedArray:function(e){return i(e,Int8Array)?f:i(e,Uint8Array)||i(e,Uint8ClampedArray)?_:i(e,Int16Array)?h:i(e,Uint16Array)?d:i(e,Int32Array)?m:i(e,Uint32Array)?v:i(e,Float32Array)?p:i(e,Float64Array)?y:u},toTypedArray:function(e){return e===f?Int8Array:e===_?Uint8Array:e===h?Int16Array:e===d?Uint16Array:e===m?Int32Array:e===v?Uint32Array:e===p?Float32Array:e===y?Float64Array:void 0},toGltf2AccessorComponentType:function(e){return e.index},fromString:function(e){return(0,r.cu)({typeList:g,str:e})},fromGlslString:function(e){var t=e;switch(e){case"bool":t="BOOL";break;case"int":case"ivec2":case"ivec3":case"ivec4":case"sampler2D":case"sampler2DShadow":case"sampler2DRect":case"sampler3D":case"samplerCube":t="INT";break;case"float":case"vec2":case"vec3":case"vec4":case"mat2":case"mat3":case"mat4":t="FLOAT"}return(0,r.cu)({typeList:g,str:t})}})},3932:(e,t,n)=>{n.d(t,{d:()=>P});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t,n=e.index,o=e.str,i=e.glslStr,a=e.hlslStr,c=e.numberOfComponents,l=e.vec4SizeOfProperty,u=e.isArray,f=void 0!==u&&u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=r.call(this,{index:n,str:o})).__numberOfComponents=c,t.__glslStr=i,t.__hlslStr=a,t.__vec4SizeOfProperty=l,t.__isArray=f,t}var c=s.prototype;return c.getNumberOfComponents=function(){return this.__numberOfComponents},c.getGlslStr=function(e){return 5126===e.index||5127===e.index||this===P.Texture2D||this===P.Texture2DShadow||this===P.Texture2DRect||this===P.TextureCube?this.__glslStr:5120===e.index||5122===e.index||5124===e.index?this===P.Scalar||this===P.ScalarArray?"int":"i"+this.__glslStr:35670===e.index?"bool":"unknown"},c.getGlslInitialValue=function(e){if(5126===e.index||5127===e.index){if(this===P.Scalar)return"0.0";if(2===this.__numberOfComponents)return this.__glslStr+"(0.0, 0.0)";if(3===this.__numberOfComponents)return this.__glslStr+"(0.0, 0.0, 0.0)";if(4===this.__numberOfComponents)return this.__glslStr+"(0.0, 0.0, 0.0, 0.0)";if(9===this.__numberOfComponents)return this.__glslStr+"(0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0)";if(16===this.__numberOfComponents)return this.__glslStr+"(0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0)"}else if(5120===e.index||5122===e.index||5124===e.index){if(this===P.Scalar)return"0";if(2===this.__numberOfComponents)return this.__glslStr+"(0, 0)";if(3===this.__numberOfComponents)return this.__glslStr+"(0, 0, 0)";if(4===this.__numberOfComponents)return this.__glslStr+"(0, 0, 0, 0)";if(9===this.__numberOfComponents)return this.__glslStr+"(0, 0, 0, 0, 0, 0, 0, 0, 0)";if(16===this.__numberOfComponents)return this.__glslStr+"(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)"}else if(35670===e.index){if(this===P.Scalar)return"false";if(2===this.__numberOfComponents)return this.__glslStr+"(false, false)";if(3===this.__numberOfComponents)return this.__glslStr+"(false, false, false)";if(4===this.__numberOfComponents)return this.__glslStr+"(false, false, false, false)"}return"unknown"},c.getVec4SizeOfProperty=function(){return this.__vec4SizeOfProperty},s}(r.Jx),l=new c({index:-1,str:"UNKNOWN",glslStr:"unknown",hlslStr:"unknown",numberOfComponents:0,vec4SizeOfProperty:0}),u=new c({index:0,str:"SCALAR",glslStr:"float",hlslStr:"float",numberOfComponents:1,vec4SizeOfProperty:1}),f=new c({index:1,str:"VEC2",glslStr:"vec2",hlslStr:"float2",numberOfComponents:2,vec4SizeOfProperty:1}),_=new c({index:2,str:"VEC3",glslStr:"vec3",hlslStr:"float3",numberOfComponents:3,vec4SizeOfProperty:1}),h=new c({index:3,str:"VEC4",glslStr:"vec4",hlslStr:"float4",numberOfComponents:4,vec4SizeOfProperty:1}),d=new c({index:4,str:"MAT2",glslStr:"mat2",hlslStr:"float2x2",numberOfComponents:4,vec4SizeOfProperty:2}),m=new c({index:5,str:"MAT3",glslStr:"mat3",hlslStr:"float3x3",numberOfComponents:9,vec4SizeOfProperty:3}),v=new c({index:6,str:"MAT4",glslStr:"mat4",hlslStr:"float4x4",numberOfComponents:16,vec4SizeOfProperty:4}),p=new c({index:7,str:"TEXTURE_2D",glslStr:"sampler2D",hlslStr:"Texture2D",numberOfComponents:1,vec4SizeOfProperty:1}),y=new c({index:8,str:"TEXTURE_CUBE_MAP",glslStr:"samplerCube",hlslStr:"TextureCube",numberOfComponents:1,vec4SizeOfProperty:1}),A=new c({index:9,str:"SCALAR_ARRAY",glslStr:"float",hlslStr:"float",numberOfComponents:1,vec4SizeOfProperty:1,isArray:!0}),b=new c({index:10,str:"VEC2_ARRAY",glslStr:"vec2",hlslStr:"float2",numberOfComponents:2,vec4SizeOfProperty:1,isArray:!0}),g=new c({index:11,str:"VEC3_ARRAY",glslStr:"vec3",hlslStr:"float3",numberOfComponents:3,vec4SizeOfProperty:1,isArray:!0}),x=new c({index:12,str:"VEC4_ARRAY",glslStr:"vec4",hlslStr:"float4",numberOfComponents:4,vec4SizeOfProperty:1,isArray:!0}),I=new c({index:13,str:"MAT4_ARRAY",glslStr:"mat4",hlslStr:"float4x4",numberOfComponents:16,vec4SizeOfProperty:4,isArray:!0}),E=new c({index:14,str:"MAT3_ARRAY",glslStr:"mat3",hlslStr:"float3x3",numberOfComponents:9,vec4SizeOfProperty:3,isArray:!0}),w=new c({index:15,str:"MAT2_ARRAY",glslStr:"mat2",hlslStr:"float2x2",numberOfComponents:4,vec4SizeOfProperty:2,isArray:!0}),S=new c({index:16,str:"TEXTURE_2D_SHADOW",glslStr:"highp sampler2DShadow",hlslStr:"Texture2D",numberOfComponents:1,vec4SizeOfProperty:1}),T=new c({index:17,str:"TEXTURE_2D_RECT",glslStr:"sampler2DRect",hlslStr:"Texture2D",numberOfComponents:1,vec4SizeOfProperty:1}),C=[l,u,f,_,h,d,m,v,b,g,x,A,w,E,I,p,S,T,y],P=Object.freeze({Unknown:l,Scalar:u,Vec2:f,Vec3:_,Vec4:h,Mat2:d,Mat3:m,Mat4:v,ScalarArray:A,Vec2Array:b,Vec3Array:g,Vec4Array:x,Mat2Array:w,Mat3Array:E,Mat4Array:I,Texture2D:p,Texture2DShadow:S,TextureCube:y,Texture2DRect:T,from:function(e){return(0,r.li)({typeList:C,index:e})},fromString:function(e){return(0,r.cu)({typeList:C,str:e})},vectorFrom:function(e){var t="";switch(e){case 1:t="scalar";break;case 2:t="vec2";break;case 3:t="vec3";break;case 4:t="vec4";break;default:console.error("not found appropriate Vectors")}return(0,r.cu)({typeList:C,str:t})},fromGlslString:function(e){var t=e;switch(e){case"bool":case"int":case"float":t="scalar";break;case"ivec2":t="vec2";break;case"ivec3":t="vec3";break;case"ivec4":t="vec4";break;case"sampler2D":t="TEXTURE_2D";break;case"sampler2DShadow":t="TEXTURE_2D_SHADOW";break;case"sampler2DRect":t="TEXTURE_2D_RECT";break;case"samplerCube":t="TEXTURE_CUBE_MAP"}return(0,r.cu)({typeList:C,str:t})},isArray:function(e){return e===A||e===b||e===g||e===x||e===I||e===E||e===w},isTexture:function(e){return e===p||e===y||e===S||e===T},toGltf2AnimationAccessorCompositionType:function(e){switch(e){case 1:return u;case 2:return f;case 3:return _;case 4:return h;default:throw new Error("Invalid componentN")}},toGltf2AccessorCompositionTypeString:function(e){switch(e){case 1:return"SCALAR";case 2:return"VEC2";case 3:return"VEC3";case 4:return"VEC4";case 9:return"MAT3";case 16:return"MAT4";default:throw new Error("Invalid componentN")}},toGltf2AnimationAccessorCompositionTypeString:function(e){switch(e){case 1:return"SCALAR";case 2:return"VEC2";case 3:return"VEC3";case 4:return"VEC4";default:throw new Error("Invalid componentN")}},toGltf2SquareMatrixAccessorCompositionTypeString:function(e){switch(e){case 4:return"VEC4";case 9:return"MAT3";case 16:return"MAT4";default:throw new Error("Invalid componentN")}}})},1903:(e,t,n)=>{n.d(t,{b:()=>Y});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,{index:t,str:n})}return s}(r.Jx),l=new c({index:37808,str:"COMPRESSED_RGBA_ASTC_4x4_KHR"}),u=new c({index:37809,str:"COMPRESSED_RGBA_ASTC_5x4_KHR"}),f=new c({index:37810,str:"COMPRESSED_RGBA_ASTC_5x5_KHR"}),_=new c({index:37811,str:"COMPRESSED_RGBA_ASTC_6x5_KHR"}),h=new c({index:37812,str:"COMPRESSED_RGBA_ASTC_6x6_KHR"}),d=new c({index:37813,str:"COMPRESSED_RGBA_ASTC_8x5_KHR"}),m=new c({index:37814,str:"COMPRESSED_RGBA_ASTC_8x6_KHR"}),v=new c({index:37815,str:"COMPRESSED_RGBA_ASTC_8x8_KHR"}),p=new c({index:37816,str:"COMPRESSED_RGBA_ASTC_10x5_KHR"}),y=new c({index:37817,str:"COMPRESSED_RGBA_ASTC_10x6_KHR"}),A=new c({index:37818,str:"COMPRESSED_RGBA_ASTC_10x8_KHR"}),b=new c({index:37819,str:"COMPRESSED_RGBA_ASTC_10x10_KHR"}),g=new c({index:37820,str:"COMPRESSED_RGBA_ASTC_12x10_KHR"}),x=new c({index:37821,str:"COMPRESSED_RGBA_ASTC_12x12_KHR"}),I=new c({index:37840,str:"COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR"}),E=new c({index:37841,str:"COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR"}),w=new c({index:37842,str:"COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR"}),S=new c({index:37843,str:"COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR"}),T=new c({index:37844,str:"COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR"}),C=new c({index:37845,str:"COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR"}),P=new c({index:37846,str:"COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR"}),R=new c({index:37847,str:"COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR"}),D=new c({index:37848,str:"COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR"}),M=new c({index:37849,str:"COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR"}),B=new c({index:37850,str:"COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR"}),N=new c({index:37851,str:"COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR"}),O=new c({index:37852,str:"COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR"}),L=new c({index:37853,str:"COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR"}),F=new c({index:33776,str:"COMPRESSED_RGB_S3TC_DXT1_EXT"}),G=new c({index:33777,str:"COMPRESSED_RGBA_S3TC_DXT1_EXT"}),V=new c({index:33778,str:"COMPRESSED_RGBA_S3TC_DXT3_EXT"}),z=new c({index:33779,str:"COMPRESSED_RGBA_S3TC_DXT5_EXT"}),k=new c({index:36492,str:"COMPRESSED_RGBA_BPTC_UNORM_EXT"}),U=new c({index:35842,str:"COMPRESSED_RGBA_PVRTC_4BPPV1_IMG"}),Q=new c({index:35840,str:"COMPRESSED_RGB_PVRTC_4BPPV1_IMG"}),j=new c({index:37496,str:"COMPRESSED_RGBA8_ETC2_EAC"}),W=new c({index:37492,str:"COMPRESSED_RGB8_ETC2"}),X=new c({index:36196,str:"COMPRESSED_RGB_ETC1_WEBGL"}),H=new c({index:32856,str:"RGBA8_EXT"}),q=[l,u,f,_,h,d,m,v,p,y,A,b,g,x,I,E,w,S,T,C,P,R,D,M,B,N,O,L,F,G,V,z,k,U,Q,j,W,X,H],Y=Object.freeze({ASTC_RGBA_4x4:l,ASTC_RGBA_5x4:u,ASTC_RGBA_5x5:f,ASTC_RGBA_6x5:_,ASTC_RGBA_6x6:h,ASTC_RGBA_8x5:d,ASTC_RGBA_8x6:m,ASTC_RGBA_8x8:v,ASTC_RGBA_10x5:p,ASTC_RGBA_10x6:y,ASTC_RGBA_10x8:A,ASTC_RGBA_10x10:b,ASTC_RGBA_12x10:g,ASTC_RGBA_12x12:x,ASTC_SRGB_4x4:I,ASTC_SRGB_5x4:E,ASTC_SRGB_5x5:w,ASTC_SRGB_6x5:S,ASTC_SRGB_6x6:T,ASTC_SRGB_8x5:C,ASTC_SRGB_8x6:P,ASTC_SRGB_8x8:R,ASTC_SRGB_10x5:D,ASTC_SRGB_10x6:M,ASTC_SRGB_10x8:B,ASTC_SRGB_10x10:N,ASTC_SRGB_12x10:O,ASTC_SRGB_12x12:L,S3TC_RGB_DXT1:F,S3TC_RGBA_DXT1:G,S3TC_RGBA_DXT3:V,S3TC_RGBA_DXT5:z,BPTC_RGBA:k,PVRTC_RGBA_4BPPV1:U,PVRTC_RGB_4BPPV1:Q,ETC2_RGBA8_EAC:j,ETC2_RGB8:W,ETC1_RGB:X,RGBA8_EXT:H,from:function(e){return(0,r.li)({typeList:q,index:e})},fromString:function(e){return(0,r.cu)({typeList:q,str:e})}})},5274:(e,t,n)=>{n.d(t,{T:()=>v});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t,n=e.index,o=e.str,i=e.ext,a=e.brand;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=r.call(this,{index:n,str:o})).extension=i,t.brand=a,t}return s}(r.Jx),l=new c({index:-1,str:"unknown",ext:"unknown",brand:"UnKnown"}),u=new c({index:0,str:"gltf",ext:"gltf",brand:"glTF"}),f=new c({index:1,str:"glb",ext:"glb",brand:"glTF"}),_=new c({index:2,str:"vrm",ext:"vrm",brand:"VRM"}),h=new c({index:3,str:"drc",ext:"drc",brand:"Draco"}),d=new c({index:4,str:"efk",ext:"efk",brand:"EffekseerEffect"}),m=[l,u,f,_,h,d],v=Object.freeze({Unknown:l,Gltf:u,GltfBinary:f,VRM:_,Draco:h,EffekseerEffect:d,from:function(e){return(0,r.li)({typeList:m,index:e})},fromString:function(e){var t=(0,r.cu)({typeList:m,str:e});return null!=t?t:l},isGltfOrGlb:function(e){return e===u||e===f}})},6558:(e,t,n)=>{n.d(t,{c:()=>v});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,{index:t,str:n})}return s}(r.Jx),l=new c({index:0,str:".ldr_srgb"}),u=new c({index:1,str:".ldr_linear"}),f=new c({index:2,str:".hdr"}),_=new c({index:3,str:".rgbe.png"}),h=new c({index:4,str:".rgb9_e5.png"}),d=new c({index:5,str:".exr"}),m=[l,u,f,_,h,d],v=Object.freeze({LDR_SRGB:l,LDR_LINEAR:u,HDR_LINEAR:f,RGBE_PNG:_,RGB9_E5_PNG:h,OpenEXR:d,from:function(e){return(0,r.li)({typeList:m,index:e})},fromString:function(e){return(0,r.cu)({typeList:m,str:e})}})},9805:(e,t,n)=>{n.d(t,{v:()=>d});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,{index:t,str:n})}return s}(r.Jx),l=new c({index:0,str:"Directional"}),u=new c({index:1,str:"Point"}),f=new c({index:2,str:"Spot"}),_=new c({index:3,str:"Ambient"}),h=[u,l,f,_],d=Object.freeze({Point:u,Directional:l,Spot:f,Ambient:_,from:function(e){return(0,r.li)({typeList:h,index:e})},fromString:function(e){return(0,r.cu)({typeList:h,str:e})}})},4543:(e,t,n)=>{n.d(t,{V:()=>p});var r=n(2142),o=n(3100);function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}var c=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=i(t);if(n){var o=i(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)});function o(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.call(this,{index:t,str:n})}return o}(o.Jx),u=new l({index:6402,str:"DEPTH_COMPONENT"}),f=new l({index:6406,str:"ALPHA"}),_=new l({index:r.SJU,str:"RG"}),h=new l({index:6407,str:"RGB"}),d=new l({index:6408,str:"RGBA"}),m=new l({index:6409,str:"LUMINANCE"}),v=new l({index:6410,str:"LUMINANCE_ALPHA"}),p=Object.freeze({DepthComponent:u,Alpha:f,RG:_,RGB:h,RGBA:d,Luminance:m,LuminanceAlpha:v})},361:(e,t,n)=>{n.d(t,{T:()=>y});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,{index:t,str:n})}return s}(r.Jx),l=new c({index:-1,str:"UNKNOWN"}),u=new c({index:0,str:"POINTS"}),f=new c({index:1,str:"LINES"}),_=new c({index:2,str:"LINE_LOOP"}),h=new c({index:3,str:"LINE_STRIP"}),d=new c({index:4,str:"TRIANGLES"}),m=new c({index:5,str:"TRIANGLE_STRIP"}),v=new c({index:6,str:"TRIANGLE_FAN"}),p=[l,u,f,_,h,d,m,v],y=Object.freeze({Unknown:l,Points:u,Lines:f,LineLoop:_,LineStrip:h,Triangles:d,TriangleStrip:m,TriangleFan:v,from:function(e){return(0,r.li)({typeList:p,index:e})}})},7042:(e,t,n)=>{n.d(t,{V:()=>h,y:()=>l});var r=n(3100);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}var c=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,r,c,l=(r=u,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=i(r);if(c){var n=i(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return a(this,e)});function u(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),l.call(this,{index:t,str:n})}return t=u,(n=[{key:"webGLVersion",get:function(){switch(this){case f:case _:return 2;default:return 0}}}])&&o(t.prototype,n),u}(r.Jx),u=new l({index:0,str:"NONE"}),f=new l({index:1,str:"UNIFORM"}),_=new l({index:2,str:"DataTexture"}),h=Object.freeze({isDataTextureApproach:function(e){return e===_},isUniformApproach:function(e){return e===f},None:u,Uniform:f,DataTexture:_,isWebGL2Approach:function(e){switch(e){case f:case _:return!0;default:return!1}}})},6815:(e,t,n)=>{n.d(t,{I:()=>A});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t,n=e.index,o=e.str,i=e.methodName;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=r.call(this,{index:n,str:o})).methodName=i,t}return s}(r.Jx),l=new c({index:-1,str:"UNKNOWN",methodName:"$unknown"}),u=new c({index:0,str:"CREATE",methodName:"$create"}),f=new c({index:1,str:"LOAD",methodName:"$load"}),_=new c({index:2,str:"MOUNT",methodName:"$mount"}),h=new c({index:3,str:"LOGIC",methodName:"$logic"}),d=new c({index:4,str:"PRE_RENDER",methodName:"$prerender"}),m=new c({index:5,str:"RENDER",methodName:"$render"}),v=new c({index:6,str:"UNMOUNT",methodName:"$unmount"}),p=new c({index:7,str:"DISCARD",methodName:"$discard"}),y=[l,u,f,_,h,d,m,v,p],A=Object.freeze({Unknown:l,Create:u,Load:f,Mount:_,Logic:h,PreRender:d,Render:m,Unmount:v,Discard:p,from:function(e){return(0,r.li)({typeList:y,index:e})}})},7952:(e,t,n)=>{n.d(t,{G:()=>C});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,{index:t,str:n})}return s.prototype.webGLConstantValue=function(){return-2===this.index?0:-1===this.index?1029:36064+this.index},s}(r.Jx),l=new c({index:-2,str:"NONE"}),u=new c({index:-1,str:"BACK"}),f=new c({index:0,str:"COLOR_ATTACHMENT0"}),_=new c({index:1,str:"COLOR_ATTACHMENT1"}),h=new c({index:2,str:"COLOR_ATTACHMENT2"}),d=new c({index:3,str:"COLOR_ATTACHMENT3"}),m=new c({index:4,str:"COLOR_ATTACHMENT4"}),v=new c({index:5,str:"COLOR_ATTACHMENT5"}),p=new c({index:6,str:"COLOR_ATTACHMENT6"}),y=new c({index:7,str:"COLOR_ATTACHMENT7"}),A=new c({index:8,str:"COLOR_ATTACHMENT8"}),b=new c({index:9,str:"COLOR_ATTACHMENT9"}),g=new c({index:10,str:"COLOR_ATTACHMENT10"}),x=new c({index:11,str:"COLOR_ATTACHMENT11"}),I=new c({index:12,str:"COLOR_ATTACHMENT12"}),E=new c({index:13,str:"COLOR_ATTACHMENT13"}),w=new c({index:14,str:"COLOR_ATTACHMENT14"}),S=new c({index:15,str:"COLOR_ATTACHMENT15"}),T=[l,u,f,_,h,d,m,v,p,y,A,b,g,x,I,E,w,S],C=Object.freeze({None:l,Back:u,ColorAttachment0:f,ColorAttachment1:_,ColorAttachment2:h,ColorAttachment3:d,ColorAttachment4:m,ColorAttachment5:v,ColorAttachment6:p,ColorAttachment7:y,ColorAttachment8:A,ColorAttachment9:b,ColorAttachment10:g,ColorAttachment11:x,ColorAttachment12:I,ColorAttachment13:E,ColorAttachment14:w,ColorAttachment15:S,from:function(e){return(0,r.li)({typeList:T,index:e})}})},3740:(e,t,n)=>{n.d(t,{Z:()=>_});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,{index:t,str:n})}return s}(r.Jx),l=new c({index:0,str:"ClassicShading"}),u=new c({index:1,str:"PBRShading"}),f=(new c({index:2,str:"Lerp"}),new c({index:3,str:"Add"}),[l,u]),_=Object.freeze({ClassicShading:l,PBRShading:u,from:function(e){return(0,r.li)({typeList:f,index:e})},fromString:function(e){return(0,r.cu)({typeList:f,str:e})}})},7416:(e,t,n)=>{n.d(t,{UL:()=>wt,f5:()=>St,wy:()=>u});var r=n(3100),o=n(3932);function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?i(e):t}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}var l=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=a(t);if(n){var o=a(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return s(this,e)});function o(e){var t,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=r.call(this,{index:++o.__indexCount*o._scale,str:n,noCheckStrUnique:!0}),o.__classes[t.index]=i(t),t}return o.getShaderSemanticByIndex=function(e){return this.__classes[Math.abs(e)-Math.abs(e)%this._scale]},o.isNonArrayShaderSemanticIndex=function(e){return e>=this._scale},o.isArrayAndZeroIndexShaderSemanticIndex=function(e){return e<0&&Math.abs(e)%o._scale==0},o.isArrayAndNonZeroIndexShaderSemanticIndex=function(e){return e<0&&Math.abs(e)%o._scale!=0},o.getIndexCount=function(){return o.__indexCount},o}(r.Jx);u.__indexCount=-1,u._scale=1e4,u.__classes=[];var f=new u({str:"worldMatrix"}),_=new u({str:"viewMatrix"}),h=new u({str:"isBillboard"}),d=new u({str:"enableViewMatrix"}),m=new u({str:"projectionMatrix"}),v=new u({str:"normalMatrix"}),p=new u({str:"boneMatrix"}),y=new u({str:"baseColorFactor"}),A=new u({str:"baseColorTexture"}),b=new u({str:"normalTexture"}),g=new u({str:"metallicRoughnessTexture"}),x=new u({str:"occlusionTexture"}),I=new u({str:"emissiveFactor"}),E=new u({str:"emissiveTexture"}),w=new u({str:"lightNumber"}),S=new u({str:"lightPosition"}),T=new u({str:"lightDirection"}),C=new u({str:"lightIntensity"}),P=new u({str:"lightProperty"}),R=new u({str:"metallicRoughnessFactor"}),D=new u({str:"brdfLutTexture"}),M=new u({str:"diffuseEnvTexture"}),B=new u({str:"specularEnvTexture"}),N=new u({str:"inverseEnvironment"}),O=new u({str:"iblParameter"}),L=new u({str:"viewPosition"}),F=new u({str:"wireframe"}),G=new u({str:"diffuseColorFactor"}),V=new u({str:"diffuseColorTexture"}),z=new u({str:"shininess"}),k=new u({str:"shadingModel"}),U=new u({str:"skinningMode"}),Q=new u({str:"generalTexture"}),j=new u({str:"vertexAttributesExistenceArray"}),W=new u({str:"boneQuaternion"}),X=new u({str:"boneTranslateScale"}),H=new u({str:"boneTranslatePackedQuat"}),q=new u({str:"boneScalePackedQuat"}),Y=new u({str:"boneCompressedChunk"}),K=new u({str:"boneCompressedInfo"}),J=new u({str:"pointSize"}),Z=new u({str:"colorEnvTexture"}),$=new u({str:"pointDistanceAttenuation"}),ee=new u({str:"hdriFormat"}),te=new u({str:"screenInfo"}),ne=new u({str:"depthTexture"}),re=new u({str:"lightViewProjectionMatrix"}),oe=new u({str:"anisotropy"}),ie=new u({str:"clearcoatParameter"}),ae=new u({str:"sheenColorFactor"}),se=new u({str:"sheenColorTexture"}),ce=new u({str:"sheenRoughnessFactor"}),le=new u({str:"sheenRoughnessTexture"}),ue=new u({str:"sheenLutTexture"}),fe=new u({str:"specularGlossinessFactor"}),_e=new u({str:"specularGlossinessTexture"}),he=new u({str:"entityUID"}),de=new u({str:"morphTargetNumber"}),me=new u({str:"dataTextureMorphOffsetPosition"}),ve=new u({str:"morphWeights"}),pe=new u({str:"currentComponentSIDs"}),ye=new u({str:"alphaCutoff"}),Ae=new u({str:"alphaTexture"}),be=new u({str:"makeOutputSrgb"}),ge=new u({str:"framebufferWidth"}),xe=new u({str:"clearCoatFactor"}),Ie=new u({str:"clearCoatTexture"}),Ee=new u({str:"clearCoatRoughnessFactor"}),we=new u({str:"clearCoatRoughnessTexture"}),Se=new u({str:"clearCoatNormalTexture"}),Te=new u({str:"transmissionFactor"}),Ce=new u({str:"transmissionTexture"}),Pe=new u({str:"backBufferTexture"}),Re=new u({str:"backBufferTextureSize"}),De=new u({str:"thicknessFactor"}),Me=new u({str:"thicknessTexture"}),Be=new u({str:"attenuationDistance"}),Ne=new u({str:"attenuationColor"}),Oe=new u({str:"isOutputHDR"}),Le=new u({str:"baseColorTextureTransform"}),Fe=new u({str:"baseColorTextureRotation"}),Ge=new u({str:"normalTextureTransform"}),Ve=new u({str:"normalTextureRotation"}),ze=new u({str:"metallicRoughnessTextureTransform"}),ke=new u({str:"metallicRoughnessTextureRotation"}),Ue=new u({str:"normalTexcoordIndex"}),Qe=new u({str:"baseColorTexcoordIndex"}),je=new u({str:"metallicRoughnessTexcoordIndex"}),We=new u({str:"occlusionTexcoordIndex"}),Xe=new u({str:"occlusionTextureTransform"}),He=new u({str:"occlusionTextureRotation"}),qe=new u({str:"emissiveTexcoordIndex"}),Ye=new u({str:"emissiveTextureTransform"}),Ke=new u({str:"emissiveTextureRotation"}),Je=new u({str:"normalScale"}),Ze=new u({str:"occlusionStrength"}),$e=new u({str:"envRotation"}),et=new u({str:"envHdriFormat"}),tt=new u({str:"vrState"}),nt=new u({str:"enableLinearToSrgb"}),rt=new u({str:"specularFactor"}),ot=new u({str:"specularTexture"}),it=new u({str:"specularColorFactor"}),at=new u({str:"specularColorTexture"}),st=new u({str:"ior"}),ct=new u({str:"depthBiasPV"}),lt=new u({str:"clearCoatTextureTransform"}),ut=new u({str:"clearCoatTextureRotation"}),ft=new u({str:"clearCoatRoughnessTextureTransform"}),_t=new u({str:"clearCoatRoughnessTextureRotation"}),ht=new u({str:"clearCoatNormalTextureTransform"}),dt=new u({str:"clearCoatNormalTextureRotation"}),mt=new u({str:"clearCoatTexcoordIndex"}),vt=new u({str:"clearCoatRoughnessTexcoordIndex"}),pt=new u({str:"clearCoatNormalTexcoordIndex"}),yt=new u({str:"iridescenceFactor"}),At=new u({str:"iridescenceTexture"}),bt=new u({str:"iridescenceIor"}),gt=new u({str:"iridescenceThicknessMinimum"}),xt=new u({str:"iridescenceThicknessMaximum"}),It=new u({str:"iridescenceThicknessTexture"}),Et=[f,_,h,d,m,v,p,y,A,b,g,x,I,E,w,S,T,C,P,R,D,M,B,N,O,L,F,G,V,z,k,U,Q,j,W,X,H,q,Y,K,J,Z,$,ee,te,ne,re,oe,ie,ae,se,ce,le,ue,fe,_e,he,de,me,ve,pe,ye,Ae,be,ge,xe,Ie,Ee,we,Se,Te,Ce,Pe,Re,De,Me,Be,Ne,Oe,Le,Fe,Ge,Ve,ze,ke,Ue,Qe,je,We,Xe,He,qe,Ye,Ke,Je,Ze,$e,et,tt,nt,rt,ot,it,at,st,ct,lt,ut,ft,_t,ht,dt,mt,vt,pt,yt,At,bt,gt,xt,It];function wt(e){return e.index}var St=Object.freeze({from:function(e){return(0,r.li)({typeList:Et,index:e})},fromString:function(e){return(0,r.cu)({typeList:Et,str:e})},fromStringCaseSensitively:function(e){return(0,r.bm)({typeList:Et,str:e})},WorldMatrix:f,ViewMatrix:_,IsBillboard:h,EnableViewMatrix:d,ProjectionMatrix:m,NormalMatrix:v,BoneMatrix:p,BaseColorFactor:y,BaseColorTexture:A,NormalTexture:b,MetallicRoughnessTexture:g,OcclusionTexture:x,EmissiveFactor:I,EmissiveTexture:E,LightNumber:w,LightPosition:S,LightDirection:T,LightIntensity:C,LightProperty:P,MetallicRoughnessFactor:R,BrdfLutTexture:D,DiffuseEnvTexture:M,SpecularEnvTexture:B,InverseEnvironment:N,IBLParameter:O,ViewPosition:L,Wireframe:F,DiffuseColorFactor:G,DiffuseColorTexture:V,Shininess:z,ShadingModel:k,SkinningMode:U,GeneralTexture:Q,VertexAttributesExistenceArray:j,BoneQuaternion:W,BoneTranslateScale:X,BoneTranslatePackedQuat:H,BoneScalePackedQuat:q,BoneCompressedChunk:Y,BoneCompressedInfo:K,PointSize:J,ColorEnvTexture:Z,PointDistanceAttenuation:$,HDRIFormat:ee,ScreenInfo:te,DepthTexture:ne,LightViewProjectionMatrix:re,Anisotropy:oe,ClearCoatParameter:ie,SheenColorFactor:ae,SheenColorTexture:se,SheenRoughnessFactor:ce,SheenRoughnessTexture:le,SheenLutTexture:ue,SpecularGlossinessFactor:fe,SpecularGlossinessTexture:_e,ClearCoatFactor:xe,ClearCoatTexture:Ie,ClearCoatRoughnessFactor:Ee,ClearCoatRoughnessTexture:we,ClearCoatNormalTexture:Se,TransmissionFactor:Te,TransmissionTexture:Ce,BackBufferTexture:Pe,BackBufferTextureSize:Re,ThicknessFactor:De,ThicknessTexture:Me,AttenuationDistance:Be,AttenuationColor:Ne,fullSemanticStr:function(e){var t="";return null!=e.prefix&&(t=e.prefix),t+e.semantic.str},getShaderProperty:function(e,t,n,r,i){if(t.isComponentData)return"";var a=t.compositionType.getGlslStr(t.componentType),s=St.fullSemanticStr(t),c=t.compositionType.getGlslStr(t.componentType),l="";t.arrayLength&&(l="[".concat(t.arrayLength,"]"));var f="  uniform ".concat(c," u_").concat(s).concat(l,";\n"),_="";if(n<0||o.d.isArray(t.compositionType)){if(Math.abs(n)%u._scale!=0&&!o.d.isArray(t.compositionType))return"";s.match(/\[.+?\]/)?s=s.replace(/\[.+?\]/g,"[i]"):s+="[i]",_+=i?"\n        ".concat(a," val;\n          int i = index;\n          return u_").concat(s,";\n        "):"\n        ".concat(a," val;\n        for (int i=0; i<").concat(t.arrayLength,"; i++) {\n          if (i == index) {\n            val = u_").concat(s,";\n            break;\n          }\n        }\n        return val;\n        ")}else _+="return u_".concat(s,";");var h="";return o.d.isTexture(t.compositionType)||(h="\n  ".concat(a," get_").concat(t.semantic.str,"(float instanceId, int index) {\n    ").concat(_,"\n  }\n")),"".concat(f).concat(h)},EntityUID:he,MorphTargetNumber:de,DataTextureMorphOffsetPosition:me,MorphWeights:ve,CurrentComponentSIDs:pe,AlphaCutoff:ye,AlphaTexture:Ae,MakeOutputSrgb:be,FramebufferWidth:ge,IsOutputHDR:Oe,BaseColorTextureTransform:Le,BaseColorTextureRotation:Fe,NormalTextureTransform:Ge,NormalTextureRotation:Ve,MetallicRoughnessTextureTransform:ze,MetallicRoughnessTextureRotation:ke,NormalTexcoordIndex:Ue,BaseColorTexcoordIndex:Qe,MetallicRoughnessTexcoordIndex:je,OcclusionTexcoordIndex:We,OcclusionTextureTransform:Xe,OcclusionTextureRotation:He,EmissiveTexcoordIndex:qe,EmissiveTextureTransform:Ye,EmissiveTextureRotation:Ke,NormalScale:Je,OcclusionStrength:Ze,envRotation:$e,EnvHdriFormat:et,VrState:tt,EnableLinearToSrgb:nt,SpecularFactor:rt,SpecularTexture:ot,SpecularColorFactor:it,SpecularColorTexture:at,Ior:st,DepthBiasPV:ct,ClearCoatTextureTransform:lt,ClearCoatTextureRotation:ut,ClearCoatRoughnessTextureTransform:ft,ClearCoatRoughnessTextureRotation:_t,ClearCoatNormalTextureTransform:ht,ClearCoatNormalTextureRotation:dt,ClearCoatTexcoordIndex:mt,ClearCoatRoughnessTexcoordIndex:vt,ClearCoatNormalTexcoordIndex:pt,IridescenceFactor:yt,IridescenceTexture:At,IridescenceIor:bt,IridescenceThicknessMinimum:gt,IridescenceThicknessMaximum:xt,IridescenceThicknessTexture:It})},3138:(e,t,n)=>{n.d(t,{K:()=>o,V:()=>i});var r=n(3932);function o(e){var t=e.compositionType.getNumberOfComponents()*e.componentType.getSizeInBytes(),n=t;if(n%16!=0&&(n=t+16-t%16),r.d.isArray(e.compositionType)){var o=e.arrayLength;null!=o?n*=o:(console.error("semanticInfo has invalid maxIndex!"),n*=100)}return n}function i(e){return e.semantic.index}},5685:(e,t,n)=>{n.d(t,{H:()=>d});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,{index:t,str:n})}return s}(r.Jx),l=new c({index:1,str:"VertexShader"}),u=new c({index:2,str:"PixelShader"}),f=new c({index:3,str:"VertexAndPixelShader"}),_=new c({index:4,str:"ComputeShader"}),h=[l,u,f,_],d=Object.freeze({VertexShader:l,PixelShader:u,VertexAndPixelShader:f,ComputeShader:_,from:function(e){return(0,r.li)({typeList:h,index:e})},fromString:function(e){return(0,r.cu)({typeList:h,str:e})}})},678:(e,t,n)=>{n.d(t,{a:()=>h});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,{index:t,str:n})}return s}(r.Jx),l=new c({index:0,str:"FirstTimeOnly"}),u=new c({index:1,str:"EveryTime"}),f=new c({index:2,str:"RenderPass"}),_=[l,u,f],h=Object.freeze({FirstTimeOnly:l,EveryTime:u,RenderPass:f,from:function(e){return(0,r.li)({typeList:_,index:e})},fromString:function(e){return(0,r.cu)({typeList:_,str:e})}})},7364:(e,t,n)=>{n.d(t,{D:()=>m});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,{index:t,str:n})}return s}(r.Jx),l=new c({index:-1,str:"UNKNOWN"}),u=new c({index:0,str:"CONSTANT"}),f=new c({index:1,str:"LAMBERT"}),_=new c({index:2,str:"BLINN"}),h=new c({index:3,str:"PHONG"}),d=[l,u,f,_,h],m=Object.freeze({Unknown:l,Constant:u,Lambert:f,BlinnPhong:_,Phong:h,from:function(e){return(0,r.li)({typeList:d,index:e})}})},7102:(e,t,n)=>{n.d(t,{d:()=>j});var r=n(2142),o=n(3100),i=n(4543);function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}var l=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=a(t);if(n){var o=a(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return s(this,e)});function o(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.call(this,{index:t,str:n})}return o}(o.Jx),f=new u({index:9728,str:"NEAREST"}),_=new u({index:9729,str:"LINEAR"}),h=new u({index:9984,str:"NEAREST_MIPMAP_NEAREST"}),d=new u({index:9985,str:"LINEAR_MIPMAP_NEAREST"}),m=new u({index:9986,str:"NEAREST_MIPMAP_LINEAR"}),v=new u({index:9987,str:"LINEAR_MIPMAP_LINEAR"}),p=new u({index:10240,str:"TEXTURE_MAG_FILTER"}),y=new u({index:10241,str:"TEXTURE_MIN_FILTER"}),A=new u({index:10242,str:"TEXTURE_WRAP_S"}),b=new u({index:10243,str:"TEXTURE_WRAP_T"}),g=new u({index:3553,str:"TEXTURE_2D"}),x=new u({index:5890,str:"TEXTURE"}),I=new u({index:33984,str:"TEXTURE0"}),E=new u({index:33985,str:"TEXTURE1"}),w=new u({index:34016,str:"ACTIVE_TEXTURE"}),S=new u({index:10497,str:"REPEAT"}),T=new u({index:33071,str:"CLAMP_TO_EDGE"}),C=new u({index:33648,str:"MIRRORED_REPEAT"}),P=new u({index:32849,str:"RGB8"}),R=new u({index:32856,str:"RGBA8"}),D=new u({index:32857,str:"RGB10_A2"}),M=new u({index:r.uLG,str:"RG16F"}),B=new u({index:r.uM4,str:"RG32F"}),N=new u({index:34843,str:"RGB16F"}),O=new u({index:34837,str:"RGB32F"}),L=new u({index:34842,str:"RGBA16F"}),F=new u({index:34836,str:"RGBA32F"}),G=new u({index:33189,str:"DEPTH_COMPONENT16"}),V=new u({index:33190,str:"DEPTH_COMPONENT24"}),z=new u({index:36012,str:"DEPTH_COMPONENT32F"}),k=new u({index:35056,str:"DEPTH24_STENCIL8"}),U=new u({index:36013,str:"DEPTH32F_STENCIL8"}),Q=[f,_,h,d,m,v,p,y,A,b,g,x,I,E,w,S,T,C,P,R,D,M,B,N,O,L,F,G,V,z,k,U],j=Object.freeze({Nearest:f,Linear:_,NearestMipmapNearest:h,LinearMipmapNearest:d,NearestMipmapLinear:m,LinearMipmapLinear:v,TextureMagFilter:p,TextureMinFilter:y,TextureWrapS:A,TextureWrapT:b,Texture2D:g,Texture:x,Texture0:I,Texture1:E,ActiveTexture:w,Repeat:S,ClampToEdge:T,MirroredRepeat:C,RGB8:P,RGBA8:R,RGB10_A2:D,RG16F:M,RG32F:B,RGB16F:N,RGB32F:O,RGBA16F:L,RGBA32F:F,Depth16:G,Depth24:V,Depth32F:z,Depth24Stencil8:k,Depth32FStencil8:U,from:function(e){return(0,o.li)({typeList:Q,index:e})},migrateToWebGL1InternalFormat:function(e){if(e.index===R.index)return i.V.RGBA;if(e.index===P.index)return i.V.RGB;throw new Error("Unsupported texture parameter")}})},6221:(e,t,n)=>{n.d(t,{T:()=>S,x:()=>u});var r=n(3100),o=n(3116);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}var l=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,n,r=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=a(t);if(n){var o=a(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return s(this,e)});function l(e){var t,n=e.str,o=e.shaderStr,i=e.attributeSlot,a=e.gltfComponentN;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=r.call(this,{index:l.__indexCount++,str:n})).__attributeSlot=i,t.__shaderStr=o,t.__gltfComponentN=a,t}var u,f,_=l.prototype;return _.getAttributeSlot=function(){return this.__attributeSlot},_._setShaderStr=function(e){this.__shaderStr=this.__shaderStr+e},_.getVertexAttributeComponentsAsGltf=function(){if(1===this.__gltfComponentN)return this.X;if(2===this.__gltfComponentN)return this.XY;if(3===this.__gltfComponentN)return this.XYZ;if(4===this.__gltfComponentN)return this.XYZW;throw new o.Mr({message:"Invalid gltf component number",error:this.__gltfComponentN})},l.__createVertexAttributeClass=function(e){return new l(e)},u=l,(f=[{key:"shaderStr",get:function(){return this.__shaderStr}},{key:"attributeTypeName",get:function(){return this.str}},{key:"X",get:function(){return"".concat(this.attributeTypeName,".X")}},{key:"Y",get:function(){return"".concat(this.attributeTypeName,".Y")}},{key:"Z",get:function(){return"".concat(this.attributeTypeName,".Z")}},{key:"W",get:function(){return"".concat(this.attributeTypeName,".W")}},{key:"XY",get:function(){return"".concat(this.attributeTypeName,".X,").concat(this.attributeTypeName,".Y")}},{key:"XYZ",get:function(){return"".concat(this.attributeTypeName,".X,").concat(this.attributeTypeName,".Y,").concat(this.attributeTypeName,".Z")}},{key:"XYZW",get:function(){return"".concat(this.attributeTypeName,".X,").concat(this.attributeTypeName,".Y,").concat(this.attributeTypeName,".Z,").concat(this.attributeTypeName,".W")}}])&&i(u.prototype,f),l}(r.Jx);u.__indexCount=-1;var f=u.__createVertexAttributeClass({str:"UNKNOWN",shaderStr:"a_unknown",attributeSlot:-1,gltfComponentN:0}),_=u.__createVertexAttributeClass({str:"POSITION",shaderStr:"a_position",attributeSlot:0,gltfComponentN:3}),h=u.__createVertexAttributeClass({str:"NORMAL",shaderStr:"a_normal",attributeSlot:1,gltfComponentN:3}),d=u.__createVertexAttributeClass({str:"TANGENT",shaderStr:"a_tangent",attributeSlot:2,gltfComponentN:3}),m=u.__createVertexAttributeClass({str:"TEXCOORD_0",shaderStr:"a_texcoord_0",attributeSlot:3,gltfComponentN:2}),v=u.__createVertexAttributeClass({str:"TEXCOORD_1",shaderStr:"a_texcoord_1",attributeSlot:4,gltfComponentN:2}),p=u.__createVertexAttributeClass({str:"COLOR_0",shaderStr:"a_color_0",attributeSlot:5,gltfComponentN:4}),y=u.__createVertexAttributeClass({str:"JOINTS_0",shaderStr:"a_joints_0",attributeSlot:6,gltfComponentN:4}),A=u.__createVertexAttributeClass({str:"WEIGHTS_0",shaderStr:"a_weights_0",attributeSlot:7,gltfComponentN:4}),b=u.__createVertexAttributeClass({str:"INSTANCE",shaderStr:"a_instanceInfo",attributeSlot:8,gltfComponentN:4}),g=u.__createVertexAttributeClass({str:"FACE_NORMAL",shaderStr:"a_faceNormal",attributeSlot:9,gltfComponentN:3}),x=u.__createVertexAttributeClass({str:"BARY_CENTRIC_COORD",shaderStr:"a_baryCentricCoord",attributeSlot:10,gltfComponentN:3}),I=u.__createVertexAttributeClass({str:"TEXCOORD_2",shaderStr:"a_texcoord_2",attributeSlot:11,gltfComponentN:2}),E=[f,_,h,d,m,v,p,y,A,b,g,x,I],w=E.length-1,S=Object.freeze({Unknown:f,Position:_,Normal:h,Tangent:d,Texcoord0:m,Texcoord1:v,Color0:p,Joints0:y,Weights0:A,Instance:b,FaceNormal:g,BaryCentricCoord:x,AttributeTypeNumber:w,isInstanceOfVertexAttributeClass:function(e){return t=e,null!=(n=u)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](t):t instanceof n;var t,n},toVertexAttributeSemanticJoinedStringAsGltfStyle:function(e){switch(e){case _:case p:case h:case d:return e.XYZ;case m:case v:case I:return e.XY;case y:case A:case b:case g:case x:return e.XYZW;default:throw new Error("Invalied glTF VertexAttributeEnum")}},toAttributeSlotFromJoinedString:function(e){switch(e){case _.XYZ:return _.getAttributeSlot();case p.XYZ:return p.getAttributeSlot();case h.XYZ:return h.getAttributeSlot();case d.XYZ:return d.getAttributeSlot();case m.XY:return m.getAttributeSlot();case v.XY:return v.getAttributeSlot();case I.XY:return I.getAttributeSlot();case y.XYZW:return y.getAttributeSlot();case A.XYZW:return A.getAttributeSlot();case b.XYZW:return b.getAttributeSlot();case g.XYZ:return g.getAttributeSlot();case x.XYZ:return x.getAttributeSlot();default:throw new Error("Invalied glTF VertexAttributeEnum")}},toVectorComponentN:function(e){return e.split(",").length},from:function(e){return(0,r.li)({typeList:E,index:e})},fromString:function(e){var t=e;return"COLOR"===e?t="COLOR_0":"TEXCOORD"===e?t="TEXCOORD_0":"JOINTS"===e?t="JOINTS_0":"WEIGHTS"===e&&(t="WEIGHTS_0"),(0,r.cu)({typeList:E,str:t})}})},9076:(e,t,n)=>{n.d(t,{Fv:()=>r.F,sd:()=>o.s,kO:()=>i.k,l6:()=>a.l,Nh:()=>s.N,$H:()=>c.$,My:()=>l.M,iM:()=>u.i,re:()=>f.r,dh:()=>_.d,bf:()=>h.b,Tv:()=>d.T,cz:()=>m.c,vB:()=>v.v,VI:()=>p.V,Tc:()=>y.T,V7:()=>A.V,yv:()=>A.y,Iq:()=>b.I,G2:()=>g.G,Zp:()=>x.Z,f5:()=>I.f5,wy:()=>I.wy,Ho:()=>w.H,Lv:()=>O,ax:()=>L.a,DA:()=>F.D,J1:()=>X,dI:()=>H.d,T:()=>q.T,x$:()=>q.x,EE:()=>oe,Vl:()=>E.V,UL:()=>I.UL,Ky:()=>E.K});var r=n(3650),o=n(166),i=n(9611),a=n(2503),s=n(8468),c=n(5171),l=n(5674),u=n(2637),f=n(2535),_=n(3932),h=n(1903),d=n(5274),m=n(6558),v=n(9805),p=n(4543),y=n(361),A=n(7042),b=n(6815),g=n(7952),x=n(3740),I=n(7416),E=n(3138),w=n(5685),S=n(3100);function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function C(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e,t){return P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},P(e,t)}var R=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=T(t);if(n){var o=T(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return C(this,e)});function o(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.call(this,{index:t,str:n})}return o}(S.Jx),M=new D({index:1,str:"Varying"}),B=new D({index:2,str:"ReadOnlyData"}),N=[M,B],O=Object.freeze({Varying:M,ReadOnlyData:B,from:function(e){return(0,S.li)({typeList:N,index:e})},fromString:function(e){return(0,S.cu)({typeList:N,str:e})}}),L=n(678),F=n(7364);function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}function V(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e,t){return z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},z(e,t)}var k=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=G(t);if(n){var o=G(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return V(this,e)});function o(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.call(this,{index:t,str:n})}return o}(S.Jx),Q=new U({index:0,str:"Standard"}),j=new U({index:1,str:"Variance"}),W=[Q,j],X=Object.freeze({Standard:Q,Variance:j,from:function(e){return(0,S.li)({typeList:W,index:e})},fromString:function(e){return(0,S.cu)({typeList:W,str:e})}}),H=n(7102),q=n(6221);function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}function K(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e,t){return J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},J(e,t)}var Z=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Y(t);if(n){var o=Y(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return K(this,e)});function o(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.call(this,{index:t,str:n})}return o}(S.Jx),ee=new $({index:0,str:"Neutral"}),te=new $({index:1,str:"Visible"}),ne=new $({index:-1,str:"Invisible"}),re=[te,ne,ee],oe=Object.freeze({Visible:te,Invisible:ne,Neutral:ee,from:function(e){return(0,S.li)({typeList:re,index:e})},fromString:function(e){return(0,S.cu)({typeList:re,str:e})}})},1560:(e,t,n)=>{n.d(t,{i:()=>s});var r=n(6264),o=n(7468),i=n(8289),a=n(2328),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.top=a.xQ.zero(),this.bottom=a.xQ.zero(),this.right=a.xQ.zero(),this.left=a.xQ.zero(),this.zNear=a.xQ.zero(),this.zFar=a.xQ.zero(),this.__updated=!1,this.__vp=i.e.zero(),this.__invProjMat=i.e.zero(),this.__invViewMat=i.e.zero(),this.corners=[]}var t=e.prototype;return t.update=function(e,t){o.J.multiplyTo(t,e,this.__vp),this.zNear.x=this.__vp.m20+this.__vp.m30,this.zNear.y=this.__vp.m21+this.__vp.m31,this.zNear.z=this.__vp.m22+this.__vp.m32,this.zNear.w=this.__vp.m23+this.__vp.m33,this.zNear.normalize3(),this.zFar.x=-this.__vp.m20+this.__vp.m30,this.zFar.y=-this.__vp.m21+this.__vp.m31,this.zFar.z=-this.__vp.m22+this.__vp.m32,this.zFar.w=-this.__vp.m23+this.__vp.m33,this.zFar.normalize3(),this.bottom.x=this.__vp.m10+this.__vp.m30,this.bottom.y=this.__vp.m11+this.__vp.m31,this.bottom.z=this.__vp.m12+this.__vp.m32,this.bottom.w=this.__vp.m13+this.__vp.m33,this.bottom.normalize3(),this.top.x=-this.__vp.m10+this.__vp.m30,this.top.y=-this.__vp.m11+this.__vp.m31,this.top.z=-this.__vp.m12+this.__vp.m32,this.top.w=-this.__vp.m13+this.__vp.m33,this.top.normalize3(),this.left.x=this.__vp.m00+this.__vp.m30,this.left.y=this.__vp.m01+this.__vp.m31,this.left.z=this.__vp.m02+this.__vp.m32,this.left.w=this.__vp.m03+this.__vp.m33,this.left.normalize3(),this.right.x=-this.__vp.m00+this.__vp.m30,this.right.y=-this.__vp.m01+this.__vp.m31,this.right.z=-this.__vp.m02+this.__vp.m32,this.right.w=-this.__vp.m03+this.__vp.m33,this.right.normalize3();var n=[r.Lt.fromCopy4(-1,1,1,1),r.Lt.fromCopy4(1,1,1,1),r.Lt.fromCopy4(1,-1,1,1),r.Lt.fromCopy4(-1,-1,1,1),r.Lt.fromCopy4(-1,1,-1,1),r.Lt.fromCopy4(1,1,-1,1),r.Lt.fromCopy4(1,-1,-1,1),r.Lt.fromCopy4(-1,-1,-1,1)];o.J.invertTo(t,this.__invProjMat),o.J.invertTo(e,this.__invViewMat);for(var i=0;i<8;i++)n[i]=this.__invProjMat.multiplyVector(n[i]),n[i]=r.Lt.fromCopy4(n[i].x/n[i].w,n[i].y/n[i].w,n[i].z/n[i].w,1),this.corners[i]=this.__invViewMat.multiplyVector(n[i])},t.culling=function(e){for(var t=e.entity.getSceneGraph().worldAABB,n=0;n<6;n++){var r=0,o=this.getPlane(n);if(r+=o.x*t.minPoint.x+o.y*t.minPoint.y+o.z*t.minPoint.z+o.w<0?1:0,r+=o.x*t.maxPoint.x+o.y*t.minPoint.y+o.z*t.minPoint.z+o.w<0?1:0,r+=o.x*t.minPoint.x+o.y*t.maxPoint.y+o.z*t.minPoint.z+o.w<0?1:0,r+=o.x*t.maxPoint.x+o.y*t.maxPoint.y+o.z*t.minPoint.z+o.w<0?1:0,r+=o.x*t.minPoint.x+o.y*t.minPoint.y+o.z*t.maxPoint.z+o.w<0?1:0,r+=o.x*t.maxPoint.x+o.y*t.minPoint.y+o.z*t.maxPoint.z+o.w<0?1:0,r+=o.x*t.minPoint.x+o.y*t.maxPoint.y+o.z*t.maxPoint.z+o.w<0?1:0,8===(r+=o.x*t.maxPoint.x+o.y*t.maxPoint.y+o.z*t.maxPoint.z+o.w<0?1:0))return!1}var i=0;i=0;for(var a=0;a<8;a++)i+=this.corners[a].x>t.maxPoint.x?1:0;if(8===i)return!1;i=0;for(var s=0;s<8;s++)i+=this.corners[s].x<t.minPoint.x?1:0;if(8===i)return!1;i=0;for(var c=0;c<8;c++)i+=this.corners[c].y>t.maxPoint.y?1:0;if(8===i)return!1;i=0;for(var l=0;l<8;l++)i+=this.corners[l].y<t.minPoint.y?1:0;if(8===i)return!1;i=0;for(var u=0;u<8;u++)i+=this.corners[u].z>t.maxPoint.z?1:0;if(8===i)return!1;i=0;for(var f=0;f<8;f++)i+=this.corners[f].z<t.minPoint.z?1:0;return 8!==i},t.getPlane=function(e){switch(e){case 0:return this.top;case 1:return this.bottom;case 2:return this.right;case 3:return this.left;case 4:return this.zNear;case 5:return this.zFar;default:throw new Error("Invalid plane index.")}},e}()},6601:(e,t,n)=>{n.d(t,{K:()=>m});var r=n(6221),o=n(361),i=n(4395),a=n(5171),s=n(2535),c=n(3932),l=n(6860),u=n(6631),f=n(4021),_=n(988),h=n(9197);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__primitives=[],this.__opaquePrimitives=[],this.__transparentPrimitives=[],this.__morphPrimitives=[],this.__localAABB=new u.m,this.__vaoUids=[],this.__variationVBOUid=f.F.InvalidCGAPIResourceUid,this.__latestPrimitivePositionAccessorVersion=0,this.__belongToEntities=[],this.tangentCalculationMode=1,this.__hasFaceNormal=!1,this.__meshUID=++e.__mesh_uid_count}var t,n,m=e.prototype;return m.getVaoUids=function(e){return this.__vaoUids[e]},m.getVaoUidsByPrimitiveUid=function(e){var t=this.__primitives.findIndex((function(t){return t.primitiveUid===e}));return this.__vaoUids[t]},m._belongToMeshComponent=function(e){this.__belongToEntities.push(e.entity)},m.addPrimitive=function(e){e._belongToMesh(this),null!=e.material&&e.material.isBlend()?this.__transparentPrimitives.push(e):this.__opaquePrimitives.push(e),this.__setPrimitives(this.__opaquePrimitives.concat(this.__transparentPrimitives))},m.__setPrimitives=function(e){this.__primitives=e},m.isAllBlend=function(){return this.__transparentPrimitives.length>0&&0===this.__opaquePrimitives.length},m.isBlendPartially=function(){return this.__transparentPrimitives.length>0&&this.__opaquePrimitives.length>0},m.isOpaque=function(){return 0===this.__transparentPrimitives.length&&this.__opaquePrimitives.length>0},m.getPrimitiveAt=function(e){return this.__primitives[e]},m.getPrimitiveNumber=function(){return this.__primitives.length},m.updateVariationVBO=function(){var e=f.F.getWebGLResourceRepository();this.__variationVBOUid!==f.F.InvalidCGAPIResourceUid&&e.deleteVertexBuffer(this.__variationVBOUid);for(var t=this.__belongToEntities.length,n=new Float32Array(4*t),r=0;r<t;r++){n[4*r+0]=this.__belongToEntities[r].entityUID;var o=this.__belongToEntities[r].tryToGetSkeletal();n[4*r+1]=null!=o?o.componentSID:-1}return this.__variationVBOUid=e.createVertexBufferFromTypedArray(n),!0},m.deleteVariationVBO=function(){var e=f.F.getWebGLResourceRepository();return this.__variationVBOUid!==f.F.InvalidCGAPIResourceUid&&(e.deleteVertexBuffer(this.__variationVBOUid),this.__variationVBOUid=f.F.InvalidCGAPIResourceUid,!0)},m.updateVAO=function(){for(var e=f.F.getWebGLResourceRepository(),t=0;t<this.__primitives.length;t++){var n=this.__primitives[t],r=n.vertexHandles;h.Is.undefined(r)?console.warn("Need to create 3DAPIVertexData before update VAO"):((isNaN(this.__vaoUids[t])||this.__vaoUids[t]===f.F.InvalidCGAPIResourceUid||r.vaoHandle===f.F.InvalidCGAPIResourceUid)&&(this.__vaoUids[t]=e.createVertexArray(),r.vaoHandle=this.__vaoUids[t]),e.setVertexDataToPipeline(r,n,this.__variationVBOUid))}for(var o=this.__primitives.length;o<this.__vaoUids.length;o++)this.__vaoUids[o]&&(e.deleteVertexArray(this.__vaoUids[o]),this.__vaoUids[o]=f.F.InvalidCGAPIResourceUid)},m.deleteVAO=function(){for(var e=f.F.getWebGLResourceRepository(),t=0;t<this.__vaoUids.length;t++)e.deleteVertexArray(this.__vaoUids[t]),this.__vaoUids[t]=f.F.InvalidCGAPIResourceUid},m.castRay=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Number.MAX_VALUE,i=0,a=0,s=!0,c=!1,l=void 0;try{for(var u,f=this.__primitives[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var _,d=u.value,m=d.castRay(e,t,!0,!0,r,this.__hasFaceNormal);h.Is.defined(m.data)&&(null===(_=m.data)||void 0===_?void 0:_.t)<o&&(o=m.data.t,n=m.data.position,i=m.data.u,a=m.data.v)}}catch(e){c=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw l}}return h.Is.defined(n)?{result:!0,data:{t:o,u:i,v:a,position:n}}:{result:!1}},m.__calcMorphPrimitives=function(){for(var e=this,t=function(t){var n=e.__morphPrimitives[t],r=e.__primitives[t];r.targets[0].forEach((function(e,t){for(var o=n.getAttribute(t),i=o.elementCount,a=0;a<i;a++)o.setElementFromSameCompositionAccessor(a,r.getAttribute(t))}))},n=0;n<this.__primitives.length;n++)t(n)},m._calcTangents=function(){if(this.__usePreCalculatedTangent()){var e=!0,t=!1,n=void 0;try{for(var l,u=this.__primitives[Symbol.iterator]();!(e=(l=u.next()).done);e=!0){var f=l.value;if(-1===f.attributeSemantics.indexOf(r.T.Tangent.XYZ)||2!==this.tangentCalculationMode){var _=f.attributeSemantics.indexOf(r.T.Texcoord0.XY),h=f.attributeSemantics.indexOf(r.T.Normal.XYZ);if(-1!==_&&-1!==h){var d=f.attributeSemantics.indexOf(r.T.Position.XYZ),m=f.attributeAccessors[d],v=f.attributeAccessors[_],p=f.attributeAccessors[h],y=f.indicesAccessor,A=3;f.primitiveMode!==o.T.TriangleStrip&&f.primitiveMode!==o.T.TriangleFan||(A=1);for(var b=f.getVertexCountAsIndicesBased(),g=i.B.getInstance().createOrGetBuffer(a.$.CPUGeneric),x=4*m.byteLength/3,I=g.takeBufferView({byteLengthToNeed:x,byteStride:0}).unwrapForce().takeAccessor({compositionType:c.d.Vec4,componentType:s.r.Float,count:m.elementCount}).unwrapForce(),E=0;E<b-2;E+=A){var w=m.getVec3(E,{indicesAccessor:y}),S=m.getVec3(E+1,{indicesAccessor:y}),T=m.getVec3(E+2,{indicesAccessor:y}),C=v.getVec2(E,{indicesAccessor:y}),P=v.getVec2(E+1,{indicesAccessor:y}),R=v.getVec2(E+2,{indicesAccessor:y}),D=p.getVec3(E,{indicesAccessor:y});this.__calcTangentFor3Vertices(E,w,S,T,C,P,R,D,I,y)}f.setVertexAttribute(I,r.T.Tangent.XYZ)}}}}catch(e){t=!0,n=e}finally{try{e||null==u.return||u.return()}finally{if(t)throw n}}}},m.__calcTangentFor3Vertices=function(t,n,r,o,i,a,s,c,l,u){var f=this.__calcTangentPerVertex(n,r,o,i,a,s,c,e.__tmpReturnVec3_0),_=this.__calcTangentPerVertex(r,o,n,a,s,i,c,e.__tmpReturnVec3_1),h=this.__calcTangentPerVertex(o,n,r,s,i,a,c,e.__tmpReturnVec3_2);l.setVec4(t,f.x,f.y,f.z,1,{indicesAccessor:u}),l.setVec4(t+1,_.x,_.y,_.z,1,{indicesAccessor:u}),l.setVec4(t+2,h.x,h.y,h.z,1,{indicesAccessor:u})},m.__calcTangentPerVertex=function(t,n,r,o,i,a,s,c){for(var u=[e.__tmpVec3_0.setComponents(t.x,o.x,o.y),e.__tmpVec3_1.setComponents(t.y,o.x,o.y),e.__tmpVec3_2.setComponents(t.z,o.x,o.y)],f=[e.__tmpVec3_3.setComponents(n.x,i.x,i.y),e.__tmpVec3_4.setComponents(n.y,i.x,i.y),e.__tmpVec3_5.setComponents(n.z,i.x,i.y)],h=[e.__tmpVec3_6.setComponents(r.x,a.x,a.y),e.__tmpVec3_7.setComponents(r.y,a.x,a.y),e.__tmpVec3_8.setComponents(r.z,a.x,a.y)],d=[],m=[],v=0;v<3;v++){var p=_.d6.subtractTo(f[v],u[v],e.__tmpVec3_9),y=_.d6.subtractTo(h[v],f[v],e.__tmpVec3_10),A=_.d6.crossTo(p,y,e.__tmpVec3_11),b=Math.abs(A.x)<Number.EPSILON;if(b)return console.assert(b,"Polygons or polygons on UV are degenerate!"),l.P.fromCopyArray([0,0,0]);d[v]=-A.y/A.x,m[v]=-A.z/A.x}return d[0]*d[0]+d[1]*d[1]+d[2]*d[2]<Number.EPSILON?(_.d6.crossTo(s,n,c),c.normalize()):c.setComponents(d[0],d[1],d[2]).normalize()},m.__usePreCalculatedTangent=function(){return 0!==this.tangentCalculationMode&&1!==this.tangentCalculationMode&&3!==this.tangentCalculationMode},m._calcBaryCentricCoord=function(){var e=!0,t=!1,n=void 0;try{for(var o,l=this.__primitives[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var u=o.value;if(-1!==u.attributeSemantics.indexOf(r.T.BaryCentricCoord.XYZ))return;for(var f=i.B.getInstance().createOrGetBuffer(a.$.CPUGeneric),_=u.attributeSemantics.indexOf(r.T.Position.XYZ),h=u.attributeAccessors[_].elementCount,d=4*h*4,m=f.takeBufferView({byteLengthToNeed:d,byteStride:0}).unwrapForce().takeAccessor({compositionType:c.d.Vec4,componentType:s.r.Float,count:h}).unwrapForce(),v=0;v<h;v++)m.setVec4(v,v%3==0?1:0,v%3==1?1:0,v%3==2?1:0,v,{});u.setVertexAttribute(m,r.T.BaryCentricCoord.XYZ)}}catch(e){t=!0,n=e}finally{try{e||null==l.return||l.return()}finally{if(t)throw n}}},m._calcFaceNormalsIfNonNormal=function(){var e=!0,t=!1,n=void 0;try{for(var l,u=this.__primitives[Symbol.iterator]();!(e=(l=u.next()).done);e=!0){var f=l.value;if(-1!==f.attributeSemantics.indexOf(r.T.Normal.XYZ))return;this.__hasFaceNormal=!0;var _=f.attributeSemantics.indexOf(r.T.Position.XYZ),h=f.attributeAccessors[_],d=f.indicesAccessor,m=3;f.primitiveMode!==o.T.TriangleStrip&&f.primitiveMode!==o.T.TriangleFan||(m=1);for(var v=f.getVertexCountAsIndicesBased(),p=i.B.getInstance().createOrGetBuffer(a.$.CPUGeneric),y=h.byteLength,A=p.takeBufferView({byteLengthToNeed:y,byteStride:0}).unwrapForce().takeAccessor({compositionType:c.d.Vec3,componentType:s.r.Float,count:h.elementCount}).unwrapForce(),b=0;b<v-2;b+=m){var g=h.getVec3(b,{indicesAccessor:d}),x=h.getVec3(b+1,{indicesAccessor:d}),I=h.getVec3(b+2,{indicesAccessor:d});this.__calcFaceNormalFor3Vertices(b,g,x,I,A,d)}f.setVertexAttribute(A,r.T.Normal.XYZ)}}catch(e){t=!0,n=e}finally{try{e||null==u.return||u.return()}finally{if(t)throw n}}},m.__calcFaceNormalFor3Vertices=function(e,t,n,r,o,i){var a=n.x-t.x,s=n.y-t.y,c=n.z-t.z,l=r.x-t.x,u=r.y-t.y,f=r.z-t.z,_=s*f-c*u,h=c*l-a*f,d=a*u-s*l,m=Math.hypot(_,h,d);m<=1e-6&&(m=1e-4),_*=m=1/m,h*=m,d*=m,o.setVec3(e,_,h,d,{indicesAccessor:i}),o.setVec3(e+1,_,h,d,{indicesAccessor:i}),o.setVec3(e+2,_,h,d,{indicesAccessor:i})},m.getPrimitiveIndexInMesh=function(e){return this.primitives.indexOf(e)},m.applyMaterialVariant=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.primitives[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)o.value.applyMaterialVariant(e)}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},m.getVariantNames=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var o,i=this.primitives[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;Array.prototype.push.apply(e,a.getVariantNames())}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e},t=e,(n=[{key:"meshEntitiesInner",get:function(){return this.__belongToEntities}},{key:"primitives",get:function(){return Array.from(this.__primitives)}},{key:"meshUID",get:function(){return this.__meshUID}},{key:"_variationVBOUid",get:function(){return this.__variationVBOUid}},{key:"AABB",get:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.__primitives[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;if(i.positionAccessorVersion!==this.__latestPrimitivePositionAccessorVersion){this.__localAABB.initialize(),this.__latestPrimitivePositionAccessorVersion=i.positionAccessorVersion;break}}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}if(this.__localAABB.isVanilla()){var a=!0,s=!1,c=void 0;try{for(var l,u=this.__primitives[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var f=l.value;this.__localAABB.mergeAABB(f.AABB)}}catch(e){s=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw c}}}return this.__localAABB}}])&&d(t.prototype,n),e}();m.invalidateMeshUID=-1,m.__mesh_uid_count=m.invalidateMeshUID,m.__tmpVec3_0=_.d6.zero(),m.__tmpVec3_1=_.d6.zero(),m.__tmpVec3_2=_.d6.zero(),m.__tmpVec3_3=_.d6.zero(),m.__tmpVec3_4=_.d6.zero(),m.__tmpVec3_5=_.d6.zero(),m.__tmpVec3_6=_.d6.zero(),m.__tmpVec3_7=_.d6.zero(),m.__tmpVec3_8=_.d6.zero(),m.__tmpVec3_9=_.d6.zero(),m.__tmpVec3_10=_.d6.zero(),m.__tmpVec3_11=_.d6.zero(),m.__tmpReturnVec3_0=_.d6.zero(),m.__tmpReturnVec3_1=_.d6.zero(),m.__tmpReturnVec3_2=_.d6.zero()},8118:(e,t,n)=>{n.d(t,{W:()=>I});var r=n(361),o=n(6221),i=n(9315),a=n(2535),s=n(4395),c=n(3932),l=n(6631),u=n(6382),f=n(4021),_=n(6860),h=n(988),d=n(9197),m=n(5653),v=n(9425),p=n(2879);function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function b(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}var x=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(x,e);var t,n,i=(t=x,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=A(t);if(n){var o=A(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return b(this,e)});function x(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,x),(e=i.call(this)).__mode=r.T.Unknown,e.__material=u.G.createEmptyMaterial(),e.__materialVariants=new Map,e.__currentVariantName=void 0,e._prevMaterial=u.G.createEmptyMaterial(),e.__attributes=new Map,e.__oIndices=new p.Hq,e.__primitiveUid=-1,e.__aabb=new l.m,e.__targets=[],e.__latestPositionAccessorVersion=0,e.__woMesh=new v.Lq,e._sortkey=0,e._viewDepth=0,e}var I,E,w,S=x.prototype;return S.setMaterialVariant=function(e,t){this.__materialVariants.set(e,t)},S.applyMaterialVariant=function(e){var t=this.__materialVariants.get(e);t&&(this.material=t,this.__currentVariantName=e)},S.getVariantNames=function(){return Array.from(this.__materialVariants.keys())},S.getVariantMaterial=function(e){return this.__materialVariants.get(e)},S.setSortKey=function(e,t){var n=t<<e;this._sortkey|=n},S._belongToMesh=function(e){this.__woMesh=new v.Bx(this,e)},S._backupMaterial=function(){this._prevMaterial=this.__material},S._restoreMaterial=function(){this.__material=this._prevMaterial},S.setData=function(e,t,n,r){this.__oIndices=new p.Wx(r),this.__attributes=e,this.material=null!=n?n:u.G.createClassicUberMaterial({isSkinning:!0,isLighting:!0}),this.__mode=t,this.setSortKey(m.Y1,t.index),this.__primitiveUid=x.__primitiveCount++,x.__primitives[this.__primitiveUid]=this},S.copyVertexData=function(e){var t=e.attributes,n=e.attributeSemantics,r=e.primitiveMode,i=e.indices,l=e.material,u=0;t.forEach((function(e){u+=e.byteLength}));var f=u;null!=i&&(f+=i.byteLength);var _,h,d=s.B.getInstance().createBufferOnDemand(f,this,4);if(null!=i){_=a.r.fromTypedArray(i),h=d.takeBufferView({byteLengthToNeed:i.byteLength,byteStride:0}).unwrapForce().takeAccessor({compositionType:c.d.Scalar,componentType:_,count:i.byteLength/_.getSizeInBytes()}).unwrapForce();for(var m=0;m<i.byteLength/h.componentSizeInBytes;m++)h.setScalar(m,i[m],{})}var v=d.takeBufferView({byteLengthToNeed:u,byteStride:0}).unwrapForce(),p=[],y=[];t.forEach((function(e,r){var i=c.d.vectorFrom(o.T.toVectorComponentN(n[r]));y[r]=a.r.fromTypedArray(t[r]);var s=v.takeAccessor({compositionType:i,componentType:a.r.fromTypedArray(t[r]),count:e.byteLength/i.getNumberOfComponents()/y[r].getSizeInBytes()}).unwrapForce();s.copyFromTypedArray(e),p.push(s)}));for(var A=new Map,b=0;b<n.length;b++){var g=n[b];A.set(g,p[b])}this.setData(A,r,l,h)},S.getVertexCountAsIndicesBased=function(){return this.indicesAccessor?this.indicesAccessor.elementCount:this.getVertexCountAsVerticesBased()},S.getVertexCountAsVerticesBased=function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.__attributes.values()[Symbol.iterator]();!(e=(r=o.next()).done);e=!0)return r.value.elementCount}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}return 0},S.getTriangleCountAsIndicesBased=function(){if(!this.indicesAccessor)return this.getTriangleCountAsVerticesBased();switch(this.__mode){case r.T.Triangles:return this.indicesAccessor.elementCount/3;case r.T.TriangleStrip:case r.T.TriangleFan:return this.indicesAccessor.elementCount-2;default:return 0}},S.getTriangleCountAsVerticesBased=function(){var e=!0,t=!1,n=void 0;try{for(var o,i=this.__attributes.values()[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;switch(this.__mode){case r.T.Triangles:return a.elementCount/3;case r.T.TriangleStrip:case r.T.TriangleFan:return a.elementCount-2;default:return 0}}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}return 0},S.hasIndices=function(){return this.__oIndices.has()},S.getAttribute=function(e){return this.__attributes.get(e)},S.setVertexAttribute=function(e,t){this.__attributes.set(t,e)},S.removeIndices=function(){this.__oIndices=new p.Hq},S.setIndices=function(e){this.__oIndices=new p.bD(e)},S.setBlendShapeTargets=function(e){this.__targets=e},S.getBlendShapeTargets=function(){return this.__targets.concat()},S.isBlend=function(){return!(null==this.material||!this.material.isBlend())},S.isOpaque=function(){return!this.isBlend()},S.create3DAPIVertexData=function(){if(null!=this.__vertexHandles)return!1;var e=f.F.getWebGLResourceRepository();return this.__vertexHandles=e.createVertexBufferAndIndexBuffer(this),!0},S.update3DAPIVertexData=function(){var e=this.__vertexHandles;return!d.Is.not.exist(this.__vertexHandles)&&(f.F.getWebGLResourceRepository().updateVertexBufferAndIndexBuffer(this,e),!0)},S.delete3DAPIVertexData=function(){return null!=this.__vertexHandles&&(f.F.getWebGLResourceRepository().deleteVertexDataResources(this.__vertexHandles),this.__vertexHandles=void 0,!0)},S.castRay=function(e,t,n,o,i,a){var s=Number.MAX_VALUE,c=3;if(this.__mode===r.T.TriangleStrip)c=1;else if(this.__mode===r.T.Points)return{result:!1};var l=0,u=0;if(this.hasIndices())for(var f=this.__oIndices.unwrapForce(),h=0;h<f.elementCount-2;h++){var m=h*c;if(m+2>f.elementCount-1)break;var v=f.getScalar(m,{}),p=f.getScalar(m+1,{}),y=f.getScalar(m+2,{}),A=this.__castRayInnerTomasMoller(e,t,h,v,p,y,n,o,i,a);d.Is.false(A)||d.Is.not.exist(A.data)||A.data.t<s&&(s=A.data.t,l=A.data.u,u=A.data.v)}else{var b=0,g=!0,x=!1,I=void 0;try{for(var E,w=this.__attributes.values()[Symbol.iterator]();!(g=(E=w.next()).done);g=!0){b=E.value.elementCount;break}}catch(e){x=!0,I=e}finally{try{g||null==w.return||w.return()}finally{if(x)throw I}}for(var S=0;S<b;S+=c){var T=S,C=S+1,P=S+2,R=this.__castRayInnerTomasMoller(e,t,S,T,C,P,n,o,i,a);if(R.result&&d.Is.defined(R.data)){var D=R.data.t;D<s&&(s=D,l=R.data.u,u=R.data.v)}}}return s===Number.MAX_VALUE?{result:!1}:{result:!0,data:{t:s,u:l,v:u,position:_.P.fromCopy3(t.x*s+e.x,t.y*s+e.y,t.z*s+e.z)}}},S.__castRayInnerTomasMoller=function(e,t,n,r,i,a,s,c,l,u){if(u){var f=this.__attributes.get(o.T.Normal.XYZ);if(f){var d=f.getVec3(n,{});if(d.dot(t)<l&&!s)return{result:!1};if(d.dot(t)>-l&&!c)return{result:!1}}}var m=this.__attributes.get(o.T.Position.XYZ),v=m.getVec3(r,{}),p=m.getVec3(i,{}),y=m.getVec3(a,{}),A=h.d6.zero(),b=h.d6.zero(),g=h.d6.zero(),x=h.d6.zero(),I=h.d6.zero(),E=0,w=0;h.d6.subtractTo(p,v,A),h.d6.subtractTo(y,v,b),h.d6.crossTo(t,b,g);var S=_.P.dot(A,g);if(S>1e-4){if(h.d6.subtractTo(e,v,x),(E=_.P.dot(x,g))<0||E>S)return{result:!1};if(h.d6.crossTo(x,A,I),(w=_.P.dot(t,I))<0||E+w>S)return{result:!1}}else{if(!(S<-1e-4))return{result:!1};if(h.d6.subtractTo(e,v,x),(E=_.P.dot(x,g))>0||E<S)return{result:!1};if(h.d6.crossTo(x,A,I),(w=_.P.dot(t,I))>0||E+w<S)return{result:!1}}var T=1/S,C=_.P.dot(b,I);return{result:!0,data:{t:C*=T,u:E*=T,v:w*=T}}},S.__calcNormalFromUV=function(e,t,n,r,i){var a=1-r-i,s=this.__attributes.get(o.T.Position.XYZ),c=s.getVec3(e,{}),l=s.getVec3(t,{}),u=s.getVec3(n,{}),f=_.P.multiply(c,a),d=_.P.multiply(l,r),m=_.P.multiply(u,i);return h.d6.zero().add(f).add(d).add(m)},x.getPrimitive=function(e){return this.__primitives[e]},x.createPrimitive=function(e){var t=new x;return t.copyVertexData(e),t},I=x,w=[{key:"maxPrimitiveCount",get:function(){return 500}},{key:"headerAccessor",get:function(){return this.__headerAccessor}}],(E=[{key:"material",get:function(){return this.__material},set:function(e){this.__material=e,this.setSortKey(m.V_,e.materialTID),this.setSortKey(m.Yx,e.alphaMode.index),e._addBelongPrimitive(this)}},{key:"mesh",get:function(){return this.__woMesh.unwrapOrUndefined(this)}},{key:"indicesAccessor",get:function(){return this.__oIndices.unwrapOrUndefined()}},{key:"attributeAccessors",get:function(){var e=[];return this.__attributes.forEach((function(t,n){e.push(t)})),e}},{key:"attributeSemantics",get:function(){var e=[];return this.__attributes.forEach((function(t,n){e.push(n)})),e}},{key:"attributeEntries",get:function(){return this.__attributes.entries()}},{key:"attributeCompositionTypes",get:function(){var e=[];return this.__attributes.forEach((function(t,n){e.push(t.compositionType)})),e}},{key:"attributeComponentTypes",get:function(){var e=[];return this.__attributes.forEach((function(t,n){e.push(t.componentType)})),e}},{key:"primitiveMode",get:function(){return this.__mode}},{key:"primitiveUid",get:function(){return this.__primitiveUid}},{key:"positionAccessorVersion",get:function(){if(null!=this.__cachePositionAccessor)return this.__cachePositionAccessor.version;var e=this.__attributes.get(o.T.Position.XYZ);return null!=e?(this.__cachePositionAccessor=e,e.version):void 0}},{key:"AABB",get:function(){if(this.__aabb.isVanilla()||this.positionAccessorVersion!==this.__latestPositionAccessorVersion){var e=this.__attributes.get(o.T.Position.XYZ),t=e.min;this.__aabb.minPoint=x.__tmpVec3_0.setComponents(t[0],t[1],t[2]);var n=e.max;this.__aabb.maxPoint=x.__tmpVec3_0.setComponents(n[0],n[1],n[2]),this.__latestPositionAccessorVersion=e.version}return this.__aabb}},{key:"targets",get:function(){return this.__targets}},{key:"vertexHandles",get:function(){return this.__vertexHandles}}])&&y(I.prototype,E),w&&y(I,w),x}(i.S);I.__primitiveCount=0,I.__primitives=[],I.__tmpVec3_0=h.d6.zero()},189:(e,t,n)=>{n.d(t,{X:()=>h});var r=n(361),o=n(6221),i=n(6860),a=n(9197),s=n(8118);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function u(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var _=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(_,e);var t,n,s=(t=_,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=l(t);if(n){var o=l(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return u(this,e)});function _(){return c(this,_),s.apply(this,arguments)}return _.prototype.generate=function(e){var t,n={widthVector:null!==(t=e.widthVector)&&void 0!==t?t:i.P.fromCopy3(1,1,1),color:e.color,material:e.material},s=[-n.widthVector.x,n.widthVector.y,-n.widthVector.z,n.widthVector.x,n.widthVector.y,-n.widthVector.z,n.widthVector.x,n.widthVector.y,n.widthVector.z,-n.widthVector.x,n.widthVector.y,n.widthVector.z,-n.widthVector.x,-n.widthVector.y,-n.widthVector.z,n.widthVector.x,-n.widthVector.y,-n.widthVector.z,n.widthVector.x,-n.widthVector.y,n.widthVector.z,-n.widthVector.x,-n.widthVector.y,n.widthVector.z,-n.widthVector.x,-n.widthVector.y,n.widthVector.z,n.widthVector.x,-n.widthVector.y,n.widthVector.z,n.widthVector.x,n.widthVector.y,n.widthVector.z,-n.widthVector.x,n.widthVector.y,n.widthVector.z,-n.widthVector.x,-n.widthVector.y,-n.widthVector.z,n.widthVector.x,-n.widthVector.y,-n.widthVector.z,n.widthVector.x,n.widthVector.y,-n.widthVector.z,-n.widthVector.x,n.widthVector.y,-n.widthVector.z,n.widthVector.x,-n.widthVector.y,-n.widthVector.z,n.widthVector.x,-n.widthVector.y,n.widthVector.z,n.widthVector.x,n.widthVector.y,n.widthVector.z,n.widthVector.x,n.widthVector.y,-n.widthVector.z,-n.widthVector.x,-n.widthVector.y,-n.widthVector.z,-n.widthVector.x,-n.widthVector.y,n.widthVector.z,-n.widthVector.x,n.widthVector.y,n.widthVector.z,-n.widthVector.x,n.widthVector.y,-n.widthVector.z],c=a.Is.not.exist(n.color)?[]:[n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a,n.color.r,n.color.g,n.color.b,n.color.a],l=[o.T.Position.XYZ,o.T.Normal.XYZ,o.T.Texcoord0.XY],u=[new Float32Array(s),new Float32Array([0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),new Float32Array([0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1])];a.Is.exist(n.color)&&(l.push(o.T.Color0.XYZ),u.push(new Float32Array(c)));var f=r.T.Triangles;this.copyVertexData({attributes:u,attributeSemantics:l,primitiveMode:f,indices:new Uint16Array([3,1,0,2,1,3,4,5,7,7,5,6,8,9,11,11,9,10,15,13,12,14,13,15,19,17,16,18,17,19,20,21,23,23,21,22]),material:n.material})},_}(s.W)},485:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(8118);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}var c=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=i(t);if(n){var o=i(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)});function c(){return o(this,c),r.apply(this,arguments)}return c}(r.W)},3999:(e,t,n)=>{n.d(t,{J:()=>f});var r=n(6221),o=n(361),i=n(485);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function c(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}var u=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,i=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return c(this,e)});function u(){return a(this,u),i.apply(this,arguments)}return u.prototype.generate=function(e){for(var t,n,i,a,s,c,l={width:null!==(t=e.width)&&void 0!==t?t:1,height:null!==(n=e.height)&&void 0!==n?n:1,uSpan:null!==(i=e.uSpan)&&void 0!==i?i:1,vSpan:null!==(a=e.vSpan)&&void 0!==a?a:1,isUVRepeat:null!==(s=e.isUVRepeat)&&void 0!==s&&s,flipTextureCoordinateY:null!==(c=e.flipTextureCoordinateY)&&void 0!==c&&c,material:e.material},u=[],f=0;f<=l.vSpan;f++)for(var _=0;_<=l.uSpan;_++)u.push((_/l.uSpan-.5)*l.width),u.push(0),u.push((f/l.vSpan-.5)*l.height);for(var h=[],d=0;d<l.vSpan;d++){for(var m=0,v=0,p=0;p<=l.uSpan;p++)h.push(d*(l.uSpan+1)+p),h.push((d+1)*(l.uSpan+1)+p),0===p?m=(d+1)*(l.uSpan+1)+p:p===l.uSpan&&(v=(d+1)*(l.uSpan+1)+p);h.push(v),h.push(m)}for(var y=[],A=0;A<=l.vSpan;A++)for(var b=0;b<=l.uSpan;b++)y.push(0),y.push(1),y.push(0);for(var g=[],x=0;x<=l.vSpan;x++)for(var I=l.flipTextureCoordinateY?x:l.vSpan-x,E=0;E<=l.uSpan;E++)l.isUVRepeat?(g.push(E),g.push(I)):(g.push(E/l.uSpan),g.push(I/l.vSpan));var w=[r.T.Position.XYZ,r.T.Normal.XYZ,r.T.Texcoord0.XY],S=o.T.TriangleStrip,T=[new Float32Array(u),new Float32Array(y),new Float32Array(g)];this.copyVertexData({attributes:T,attributeSemantics:w,primitiveMode:S,indices:new Uint16Array(h),material:null==l?void 0:l.material})},u}(i.A)},5653:(e,t,n)=>{n.d(t,{BH:()=>l,IM:()=>i,Qo:()=>u,V_:()=>s,Y1:()=>a,Yx:()=>c,aK:()=>r,xz:()=>o});var r=3,o=10,i=2,a=0,s=r,c=r+o,l=r+o+i,u=32},706:(e,t,n)=>{n.d(t,{q:()=>m});var r=n(5478),o=n(361),i=n(6221),a=n(8118),s=n(6860),c=n(6601),l=n(524);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function _(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var d=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(d,e);var t,n,r=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f(t);if(n){var o=f(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return _(this,e)});function d(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),r.call(this,e)}var m,v,p=d.prototype;return p._setup=function(){if(!this.__toSkipSetup()){this.__topEntity=l._.createMeshEntity(),this.__topEntity.tryToSetUniqueName("AABBGizmo_of_".concat(this.__target.uniqueName),!0),this.__topEntity.getSceneGraph().toMakeWorldMatrixTheSameAsLocalMatrix=!0,this.__target.getSceneGraph()._addGizmoChild(this.__topEntity.getSceneGraph());var e=this.__topEntity.tryToGetMesh();d.__mesh=new c.K,d.__mesh.addPrimitive(d.generatePrimitive()),e.setMesh(d.__mesh),this.setGizmoTag()}},p._update=function(){if(null!=this.__topEntity){var e=this.__target.getSceneGraph().worldAABB;this.__topEntity.getTransform().localPosition=e.centerPoint,this.__topEntity.getTransform().localScale=s.P.fromCopyArray([e.sizeX/2,e.sizeY/2,e.sizeZ/2])}},d.generatePrimitive=function(){var e=new Uint32Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,3,3,7,7,4,4,0,1,2,2,6,6,5,5,1,0,1,1,5,5,4,4,0,3,2,2,6,6,7,7,3]),t=new Float32Array([-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,1,1]);return a.W.createPrimitive({indices:e,attributeSemantics:[i.T.Position.XYZ],attributes:[t],primitiveMode:o.T.Lines})},m=d,(v=[{key:"isSetup",get:function(){return null!=this.__topEntity}}])&&u(m.prototype,v),d}(r.t)},5478:(e,t,n)=>{n.d(t,{t:()=>u});var r=n(9315),o=n(429);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}var l=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,n,r=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=a(t);if(n){var o=a(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return s(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=r.call(this)).__isVisible=!1,t.__target=e,t.setGizmoTag(),t}var u,f,_=l.prototype;return _.__setVisible=function(e){this.__isVisible=e,this.__topEntity&&this.__topEntity.getSceneGraph().setVisibilityRecursively(e)},_.__toSkipSetup=function(){return!!this.isSetup||!!this.__target.matchTag("Being","gizmo")},_.setGizmoTag=function(){if(this.__topEntity){this.__topEntity.tryToSetTag({tag:"Being",value:"gizmo"}),this.__topEntity.tryToSetTag({tag:"Gizmo",value:"top"});var e=o.a.flattenHierarchy(this.__topEntity.getSceneGraph(),!1),t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)i.value.entity.tryToSetTag({tag:"Being",value:"gizmo"})}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.__topEntity.tryToSetTag({tag:"type",value:"background-assets"})}},u=l,(f=[{key:"isVisible",get:function(){return this.__isVisible},set:function(e){this.__setVisible(e)}}])&&i(u.prototype,f),l}(r.S)},139:(e,t,n)=>{n.d(t,{k:()=>m});var r=n(361),o=n(6221),i=n(6601),a=n(8118),s=n(524),c=n(6860),l=n(5478);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function _(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var d=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(d,e);var t,n,l=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f(t);if(n){var o=f(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return _(this,e)});function d(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),l.call(this,e)}var m,v,p=d.prototype;return p._setup=function(){if(!this.__toSkipSetup()){this.__topEntity=s._.createMeshEntity(),this.__topEntity.tryToSetUniqueName("LocatorGizmo_of_".concat(this.__target.uniqueName),!0),this.__topEntity.getSceneGraph().toMakeWorldMatrixTheSameAsLocalMatrix=!0,this.__target.getSceneGraph()._addGizmoChild(this.__topEntity.getSceneGraph());var e=this.__topEntity.tryToGetMesh();d.__mesh=new i.K,d.__mesh.addPrimitive(d.__generatePrimitive()),e.setMesh(d.__mesh),this.setGizmoTag()}},p._update=function(){if(null!=this.__topEntity){var e=this.__target.getSceneGraph(),t=e.worldAABB;t.isVanilla()?this.__topEntity.getTransform().localPosition=e.position:this.__topEntity.getTransform().localPosition=t.centerPoint,this.__topEntity.getTransform().localScale=c.P.fromCopyArray([Math.max(1,t.isVanilla()?1:t.sizeX/2),Math.max(1,t.isVanilla()?1:t.sizeY/2),Math.max(1,t.isVanilla()?1:t.sizeZ/2)])}},d.__generatePrimitive=function(){var e=new Float32Array([0,0,0,this.__length,0,0,0,0,0,0,this.__length,0,0,0,0,0,0,this.__length]),t=new Float32Array([1,0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0,1]);return a.W.createPrimitive({attributeSemantics:[o.T.Position.XYZ,o.T.Color0.XYZ],attributes:[e,t],primitiveMode:r.T.Lines})},m=d,(v=[{key:"isSetup",get:function(){return null!=this.__topEntity}},{key:"length",get:function(){return d.__length},set:function(e){d.__length=e}}])&&u(m.prototype,v),d}(l.t);m.__length=1},5914:(e,t,n)=>{n.d(t,{q:()=>B});var r=n(3279),o=n(6383),i=n(9977),a=n(3650),s=n(361),c=n(7416),l=n(6221),u=n(6601),f=n(8118),_=n(189),h=n(3999),d=n(524),m=n(6382),v=n(4969),p=n(6386),y=n(7468),A=n(2863),b=n(5233),g=n(6860),x=n(6264),I=n(9197),E=n(1274),w=n(5511),S=n(5478);function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function R(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?T(e):t}function D(e,t){return D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},D(e,t)}var M=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(M,e);var t,n,S=(t=M,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=P(t);if(n){var o=P(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return R(this,e)});function M(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,M),(t=S.call(this,e)).__pickStatedPoint=g.P.zero(),t.__deltaPoint=g.P.one(),t.__targetScaleBackup=g.P.one(),t.__isPointerDown=!1,t.__onPointerDownFunc=t.__onPointerDown.bind(T(t)),t.__onPointerMoveFunc=t.__onPointerMove.bind(T(t)),t.__onPointerUpFunc=t.__onPointerUp.bind(T(t)),t}var B,N,O=M.prototype;return O.setSpace=function(e){M.__space=e,this.__isVisible&&(this.isVisible=!1,this.isVisible=!0)},O._setup=function(){this.__toSkipSetup()||(this.__topEntity=d._.createGroupEntity(),this.__topEntity.tryToSetUniqueName("ScaleGizmo_of_".concat(this.__target.uniqueName),!0),this.__topEntity.getSceneGraph().toMakeWorldMatrixTheSameAsLocalMatrix=!0,this.__target.getSceneGraph()._addGizmoChild(this.__topEntity.getSceneGraph()),I.Is.not.exist(M.__xCubeEntity)&&(this.xMesh(),this.xEdgeMesh()),I.Is.not.exist(M.__yCubeEntity)&&(this.yMesh(),this.yEdgeMesh()),I.Is.not.exist(M.__zCubeEntity)&&(this.zMesh(),this.zEdgeMesh()),I.Is.not.exist(M.__xyPlaneEntity)&&this.xyPlane(),I.Is.not.exist(M.__yzPlaneEntity)&&this.yzPlane(),I.Is.not.exist(M.__zxPlaneEntity)&&this.zxPlane(),I.Is.not.exist(M.__groupEntity)&&(M.__groupEntity=d._.createGroupEntity()),this.__topEntity.getSceneGraph().addChild(M.__groupEntity.getSceneGraph()),M.__groupEntity.getSceneGraph().addChild(M.__xCubeEntity.getSceneGraph()),M.__groupEntity.getSceneGraph().addChild(M.__yCubeEntity.getSceneGraph()),M.__groupEntity.getSceneGraph().addChild(M.__zCubeEntity.getSceneGraph()),M.__groupEntity.getSceneGraph().addChild(M.__xyPlaneEntity.getSceneGraph()),M.__groupEntity.getSceneGraph().addChild(M.__yzPlaneEntity.getSceneGraph()),M.__groupEntity.getSceneGraph().addChild(M.__zxPlaneEntity.getSceneGraph()),M.__latestTargetEntity=this.__target,this.setGizmoTag())},O.zxPlane=function(){M.__zxPlaneEntity=d._.createMeshEntity(),M.__xCubeEntity.tryToSetUniqueName("ScaleGizmo_zxPlane",!0),M.__zxPlaneEntity.getSceneGraph().isVisible=!1,M.__zxPlaneMaterial=m.G.createClassicUberMaterial(),M.__zxPlaneMaterial.setParameter(c.f5.DiffuseColorFactor,x.Lt.fromCopyArray4([0,.5,0,0])),M.__zxPlaneMaterial.alphaMode=a.F.Translucent,M.__zxPlaneMesh=new u.K,M.__zxPlanePrimitive=new h.J,M.__zxPlanePrimitive.generate({width:1e5,height:1e5,uSpan:1,vSpan:1,isUVRepeat:!0,flipTextureCoordinateY:!1,material:M.__zxPlaneMaterial}),M.__zxPlaneMesh.addPrimitive(M.__zxPlanePrimitive),M.__zxPlaneEntity.getMesh().setMesh(M.__zxPlaneMesh)},O.yzPlane=function(){M.__yzPlaneEntity=d._.createMeshEntity(),M.__xCubeEntity.tryToSetUniqueName("ScaleGizmo_yzPlane",!0),M.__yzPlaneEntity.getSceneGraph().isVisible=!1,M.__yzPlaneEntity.getTransform().localEulerAngles=g.P.fromCopy3(0,0,v.k.degreeToRadian(90)),M.__yzPlaneMaterial=m.G.createClassicUberMaterial(),M.__yzPlaneMaterial.alphaMode=a.F.Translucent,M.__yzPlaneMaterial.setParameter(c.f5.DiffuseColorFactor,x.Lt.fromCopyArray4([.5,0,0,0])),M.__yzPlaneMesh=new u.K,M.__yzPlanePrimitive=new h.J,M.__yzPlanePrimitive.generate({width:1e5,height:1e5,uSpan:1,vSpan:1,isUVRepeat:!0,flipTextureCoordinateY:!1,material:M.__yzPlaneMaterial}),M.__yzPlaneMesh.addPrimitive(M.__yzPlanePrimitive),M.__yzPlaneEntity.getMesh().setMesh(M.__yzPlaneMesh)},O.xyPlane=function(){M.__xyPlaneEntity=d._.createMeshEntity(),M.__xCubeEntity.tryToSetUniqueName("ScaleGizmo_xyPlane",!0),M.__xyPlaneEntity.getSceneGraph().isVisible=!1,M.__xyPlaneEntity.getTransform().localEulerAngles=g.P.fromCopy3(v.k.degreeToRadian(90),0,0),M.__xyPlaneMaterial=m.G.createClassicUberMaterial(),M.__xyPlaneMaterial.alphaMode=a.F.Translucent,M.__xyPlaneMaterial.setParameter(c.f5.DiffuseColorFactor,x.Lt.fromCopyArray4([0,0,.5,0])),M.__xyPlaneMesh=new u.K,M.__xyPlanePrimitive=new h.J,M.__xyPlanePrimitive.generate({width:1e5,height:1e5,uSpan:1,vSpan:1,isUVRepeat:!0,flipTextureCoordinateY:!1,material:M.__xyPlaneMaterial}),M.__xyPlaneMesh.addPrimitive(M.__xyPlanePrimitive),M.__xyPlaneEntity.getMesh().setMesh(M.__xyPlaneMesh)},O.zMesh=function(){M.__zCubeEntity=d._.createMeshEntity(),M.__xCubeEntity.tryToSetUniqueName("ScaleGizmo_zCube",!0),M.__zCubeEntity.getTransform().localPosition=g.P.fromCopy3(0,0,1),M.__zCubeMesh=new u.K,M.__zCubeMaterial=m.G.createClassicUberMaterial(),M.__zCubeMaterial.setParameter(c.f5.DiffuseColorFactor,x.Lt.fromCopyArray4([0,0,1,1])),M.__zCubePrimitive=new _.X,M.__zCubePrimitive.generate({widthVector:g.P.fromCopy3(.05,.05,1),material:M.__zCubeMaterial}),M.__zCubeMesh.addPrimitive(M.__zCubePrimitive),M.__zCubeEntity.getMesh().setMesh(M.__zCubeMesh)},O.yMesh=function(){M.__yCubeEntity=d._.createMeshEntity(),M.__xCubeEntity.tryToSetUniqueName("ScaleGizmo_yCube",!0),M.__yCubeEntity.getTransform().localPosition=g.P.fromCopy3(0,1,0),M.__yCubeMesh=new u.K,M.__yCubeMaterial=m.G.createClassicUberMaterial(),M.__yCubeMaterial.setParameter(c.f5.DiffuseColorFactor,x.Lt.fromCopyArray4([0,1,0,1])),M.__yCubePrimitive=new _.X,M.__yCubePrimitive.generate({widthVector:g.P.fromCopy3(.05,1,.05),material:M.__yCubeMaterial}),M.__yCubeMesh.addPrimitive(M.__yCubePrimitive),M.__yCubeEntity.getMesh().setMesh(M.__yCubeMesh)},O.xMesh=function(){M.__xCubeEntity=d._.createMeshEntity(),M.__xCubeEntity.tryToSetUniqueName("ScaleGizmo_xCube",!0),M.__xCubeEntity.getTransform().localPosition=g.P.fromCopy3(1,0,0),M.__xCubeMesh=new u.K,M.__xCubeMaterial=m.G.createClassicUberMaterial(),M.__xCubeMaterial.setParameter(c.f5.DiffuseColorFactor,x.Lt.fromCopyArray4([1,0,0,1])),M.__xCubePrimitive=new _.X,M.__xCubePrimitive.generate({widthVector:g.P.fromCopy3(1,.05,.05),material:M.__xCubeMaterial}),M.__xCubeMesh.addPrimitive(M.__xCubePrimitive),M.__xCubeEntity.getMesh().setMesh(M.__xCubeMesh)},O.xEdgeMesh=function(){M.__xEdgeCubeEntity=d._.createMeshEntity(),M.__xEdgeCubeEntity.tryToSetUniqueName("ScaleGizmo_xEdgeCube",!0),M.__xEdgeCubeEntity.getTransform().localPosition=g.P.fromCopy3(1,0,0),M.__xEdgeCubeMesh=new u.K,M.__xEdgeCubePrimitive=new _.X,M.__xEdgeCubePrimitive.generate({widthVector:g.P.fromCopy3(.1,.1,.1),material:M.__xCubeMaterial}),M.__xEdgeCubeMesh.addPrimitive(M.__xEdgeCubePrimitive),M.__xEdgeCubeEntity.getMesh().setMesh(M.__xEdgeCubeMesh),M.__xCubeEntity.addChild(M.__xEdgeCubeEntity.getSceneGraph())},O.yEdgeMesh=function(){M.__yEdgeCubeEntity=d._.createMeshEntity(),M.__yEdgeCubeEntity.tryToSetUniqueName("ScaleGizmo_yEdgeCube",!0),M.__yEdgeCubeEntity.getTransform().localPosition=g.P.fromCopy3(0,1,0),M.__yEdgeCubeMesh=new u.K,M.__yEdgeCubePrimitive=new _.X,M.__yEdgeCubePrimitive.generate({widthVector:g.P.fromCopy3(.1,.1,.1),material:M.__yCubeMaterial}),M.__yEdgeCubeMesh.addPrimitive(M.__yEdgeCubePrimitive),M.__yEdgeCubeEntity.getMesh().setMesh(M.__yEdgeCubeMesh),M.__yCubeEntity.addChild(M.__yEdgeCubeEntity.getSceneGraph())},O.zEdgeMesh=function(){M.__zEdgeCubeEntity=d._.createMeshEntity(),M.__zEdgeCubeEntity.tryToSetUniqueName("ScaleGizmo_zEdgeCube",!0),M.__zEdgeCubeEntity.getTransform().localPosition=g.P.fromCopy3(0,0,1),M.__zEdgeCubeMesh=new u.K,M.__zEdgeCubePrimitive=new _.X,M.__zEdgeCubePrimitive.generate({widthVector:g.P.fromCopy3(.1,.1,.1),material:M.__zCubeMaterial}),M.__zEdgeCubeMesh.addPrimitive(M.__zEdgeCubePrimitive),M.__zEdgeCubeEntity.getMesh().setMesh(M.__zEdgeCubeMesh),M.__zCubeEntity.addChild(M.__zEdgeCubeEntity.getSceneGraph())},O._update=function(){if(null!=this.__topEntity){var e=this.__target.getSceneGraph(),t=e.worldAABB;t.isVanilla()?this.__topEntity.getTransform().localPosition=e.position:this.__topEntity.getTransform().localPosition=t.centerPoint;var n=Math.max(t.sizeX,t.sizeY,t.sizeZ);this.__topEntity.getTransform().localScale=g.P.fromCopyArray([Math.min(1,t.isVanilla()?1:n/2),Math.min(1,t.isVanilla()?1:n/2),Math.min(1,t.isVanilla()?1:n/2)]),this.__isPointerDown&&M.__latestTargetEntity===this.__target&&(this.__target.getTransform().localScale=this.__deltaPoint.clone())}},O.__onPointerDown=function(e){e.preventDefault(),this.__isPointerDown=!0,M.__originalX=e.clientX,M.__originalY=e.clientY;var t=this.__target.getSceneGraph().matrix.getRotate(),n=g.P.one(),r=p.h.fromCopy9RowMajor(n.x*t.m00,n.x*t.m01,n.x*t.m02,n.y*t.m10,n.y*t.m11,n.y*t.m12,n.z*t.m20,n.z*t.m21,n.z*t.m22);"local"===M.__space?r=p.h.transpose(r):"world"===M.__space&&(r=A.x.identity());var o=M.castRay(e),i=o.xResult,a=o.yResult,s=o.zResult;i.result&&((0,E.dK)(i.data),this.__pickStatedPoint=r.multiplyVector(i.data.position.clone()),console.log("Down:"+this.__pickStatedPoint.toStringApproximately()),M.__activeAxis="x"),a.result&&((0,E.dK)(a.data),this.__pickStatedPoint=r.multiplyVector(a.data.position.clone()),console.log("Down:"+this.__pickStatedPoint.toStringApproximately()),M.__activeAxis="y"),s.result&&((0,E.dK)(s.data),this.__pickStatedPoint=r.multiplyVector(s.data.position.clone()),console.log("Down:"+this.__pickStatedPoint.toStringApproximately()),M.__activeAxis="z"),M.__latestTargetEntity===this.__target&&(this.__targetScaleBackup=this.__target.getTransform().localScale)},O.__onPointerMove=function(e){if(e.preventDefault(),!I.Is.false(this.__isPointerDown)){var t=e.target.getBoundingClientRect(),n=e.target.clientWidth,i=e.target.clientHeight,a=e.clientX-t.left,s=t.height-(e.clientY-t.top),c=x.Lt.fromCopy4(0,0,n,i),l=o.C.getComponent(r.M,r.M.current),u=this.__target.getSceneGraph().matrix.getRotate(),f=g.P.one(),_=p.h.fromCopy9RowMajor(f.x*u.m00,f.x*u.m01,f.x*u.m02,f.y*u.m10,f.y*u.m11,f.y*u.m12,f.z*u.m20,f.z*u.m21,f.z*u.m22);"local"===M.__space?_=p.h.transpose(_):"world"===M.__space&&(_=A.x.identity());var h=this.__pickStatedPoint.clone();if("x"===M.__activeAxis){var d=M.__xyPlaneEntity.getMesh().castRayFromScreenInWorld(a,s,l,c,0);if(d.result){(0,E.dK)(d.data);var m=_.multiplyVector(d.data.position);h=g.P.fromCopy3(m.x,h.y,h.z),console.log("Move:"+d.data.position.toStringApproximately())}w.$t.disableCameraController()}if("y"===M.__activeAxis){var v=M.__xyPlaneEntity.getMesh().castRayFromScreenInWorld(a,s,l,c,0);if(v.result){(0,E.dK)(v.data);var b=_.multiplyVector(v.data.position);h=g.P.fromCopy3(h.x,b.y,h.z),console.log("Move:"+v.data.position.toStringApproximately())}w.$t.disableCameraController()}if("z"===M.__activeAxis){var S=M.__yzPlaneEntity.getMesh().castRayFromScreenInWorld(a,s,l,c,0);if(S.result){(0,E.dK)(S.data);var T=_.multiplyVector(S.data.position);h=g.P.fromCopy3(h.x,h.y,T.z),console.log("Move:"+S.data.position.toStringApproximately())}w.$t.disableCameraController()}var C=this.__target.getSceneGraph().worldAABB,P=g.P.multiply(g.P.subtract(h,this.__pickStatedPoint),1/C.lengthCenterToCorner);if(console.log("".concat(this.__target.uniqueName,": ")+P.toStringApproximately()),"local"===M.__space)this.__deltaPoint=g.P.add(this.__targetScaleBackup,P),this.__deltaPoint=g.P.fromCopy3(Math.max(this.__deltaPoint.x,.01),Math.max(this.__deltaPoint.y,.01),Math.max(this.__deltaPoint.z,.01));else if("world"===M.__space){var R=y.J.fromCopyQuaternion(this.__target.getSceneGraph().getQuaternionRecursively()),D=y.J.multiply(R,y.J.scale(this.__targetScaleBackup)).getScale(),B=x.Lt.add(P,D);B=x.Lt.fromCopy4(Math.max(B.x,.01),Math.max(B.y,.01),Math.max(B.z,.01),Math.max(B.w,.01)),this.__deltaPoint=y.J.multiply(y.J.invert(R),y.J.scale(B)).getScale(),this.__deltaPoint=g.P.fromCopy3(Math.max(this.__deltaPoint.x,.01),Math.max(this.__deltaPoint.y,.01),Math.max(this.__deltaPoint.z,.01))}}},O.__onPointerUp=function(e){e.preventDefault(),this.__isPointerDown=!1,M.__activeAxis="none",w.$t.enableCameraController(),M.__latestTargetEntity===this.__target&&(this.__targetScaleBackup=this.__target.getTransform().localScale)},M.__generatePrimitive=function(){var e=new Float32Array([0,0,0,this.__length,0,0,0,0,0,0,this.__length,0,0,0,0,0,0,this.__length]),t=new Float32Array([1,0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0,1]);return f.W.createPrimitive({attributeSemantics:[l.T.Position.XYZ,l.T.Color0.XYZ],attributes:[e,t],primitiveMode:s.T.Lines})},M.castRay2=function(e){var t=e.target.getBoundingClientRect(),n=e.target.clientWidth,i=e.target.clientHeight,a=e.clientX-t.left,s=t.height-(e.clientY-t.top),c=x.Lt.fromCopy4(0,0,n,i),l=o.C.getComponent(r.M,r.M.current);return M.__groupEntity.getSceneGraph().castRayFromScreen(a,s,l,c,0,[])},M.castRay=function(e){var t=e.target.getBoundingClientRect(),n=e.target.clientWidth,i=e.target.clientHeight,a=e.clientX-t.left,s=t.height-(e.clientY-t.top),c=x.Lt.fromCopy4(0,0,n,i),l=o.C.getComponent(r.M,r.M.current);return{xResult:M.__xCubeEntity.getSceneGraph().castRayFromScreen(a,s,l,c,0),yResult:M.__yCubeEntity.getSceneGraph().castRayFromScreen(a,s,l,c,0),zResult:M.__zCubeEntity.getSceneGraph().castRayFromScreen(a,s,l,c,0)}},B=M,(N=[{key:"isSetup",get:function(){return null!=this.__topEntity}},{key:"length",get:function(){return M.__length},set:function(e){M.__length=e}},{key:"isVisible",get:function(){return this.__isVisible},set:function(e){if(!1===this.__isVisible&&!0===e){var t=window;if(I.Is.exist(i.D.eventTargetDom)&&(t=i.D.eventTargetDom),w.$t.register(w.K2,[{eventName:(0,w.EY)("start"),handler:this.__onPointerDownFunc,options:{},classInstance:this,eventTargetDom:t},{eventName:(0,w.EY)("move"),handler:this.__onPointerMoveFunc,options:{},classInstance:this,eventTargetDom:t},{eventName:(0,w.EY)("end"),handler:this.__onPointerUpFunc,options:{},classInstance:this,eventTargetDom:t},{eventName:"pointerleave",handler:this.__onPointerUpFunc,options:{},classInstance:this,eventTargetDom:t}]),this.__topEntity.getSceneGraph().addChild(M.__groupEntity.getSceneGraph()),M.__latestTargetEntity=this.__target,"local"===M.__space){var n=this.__target.getSceneGraph(),r=b._.identity();I.Is.exist(n)&&(r=n.getQuaternionRecursively()),M.__groupEntity.getTransform().localRotation=r}else"world"===M.__space&&(M.__groupEntity.getTransform().localRotation=b._.fromCopy4(0,0,0,1))}!0===this.__isVisible&&!1===e&&(w.$t.unregister(w.K2),this.__deltaPoint=this.__target.getTransform().localScale,this.__pickStatedPoint=g.P.zero(),this.__isPointerDown=!1,this.__targetScaleBackup=this.__target.getTransform().localScale,M.__activeAxis="none"),w.$t.setActive(w.K2,e),this.__setVisible(e),M.__xyPlaneEntity.getSceneGraph().isVisible=!1,M.__yzPlaneEntity.getSceneGraph().isVisible=!1,M.__zxPlaneEntity.getSceneGraph().isVisible=!1}}])&&C(B.prototype,N),M}(S.t);B.__originalX=0,B.__originalY=0,B.__activeAxis="none",B.__space="world",B.__length=1},3206:(e,t,n)=>{n.d(t,{u:()=>B});var r=n(3279),o=n(6383),i=n(9977),a=n(3650),s=n(361),c=n(7416),l=n(6221),u=n(6601),f=n(8118),_=n(189),h=n(3999),d=n(524),m=n(6382),v=n(7468),p=n(4969),y=n(6386),A=n(2863),b=n(5233),g=n(6860),x=n(6264),I=n(9197),E=n(1274),w=n(5511),S=n(5478);function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function R(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?T(e):t}function D(e,t){return D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},D(e,t)}var M=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(M,e);var t,n,S=(t=M,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=P(t);if(n){var o=P(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return R(this,e)});function M(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,M),(t=S.call(this,e)).__pickStatedPoint=g.P.zero(),t.__deltaPoint=g.P.zero(),t.__targetPointBackup=g.P.zero(),t.__isPointerDown=!1,t.__onPointerDownFunc=t.__onPointerDown.bind(T(t)),t.__onPointerMoveFunc=t.__onPointerMove.bind(T(t)),t.__onPointerUpFunc=t.__onPointerUp.bind(T(t)),t}var B,N,O=M.prototype;return O.setSpace=function(e){M.__space=e,this.__isVisible&&(this.isVisible=!1,this.isVisible=!0)},O._setup=function(){this.__toSkipSetup()||(this.__topEntity=d._.createGroupEntity(),this.__topEntity.tryToSetUniqueName("TranslationGizmo_of_".concat(this.__target.uniqueName),!0),this.__topEntity.getSceneGraph().toMakeWorldMatrixTheSameAsLocalMatrix=!0,this.__target.getSceneGraph()._addGizmoChild(this.__topEntity.getSceneGraph()),I.Is.not.exist(M.__xCubeEntity)&&(M.__xCubeEntity=d._.createMeshEntity(),M.__xCubeEntity.tryToSetUniqueName("TranslationGizmo_xCube",!0),M.__xCubeEntity.getTransform().localPosition=g.P.fromCopy3(1,0,0),M.__xCubeMesh=new u.K,M.__xCubeMaterial=m.G.createClassicUberMaterial(),M.__xCubeMaterial.setParameter(c.f5.DiffuseColorFactor,x.Lt.fromCopyArray4([1,0,0,1])),M.__xCubePrimitive=new _.X,M.__xCubePrimitive.generate({widthVector:g.P.fromCopy3(1,.05,.05),material:M.__xCubeMaterial}),M.__xCubeMesh.addPrimitive(M.__xCubePrimitive),M.__xCubeEntity.getMesh().setMesh(M.__xCubeMesh)),I.Is.not.exist(M.__yCubeEntity)&&(M.__yCubeEntity=d._.createMeshEntity(),M.__xCubeEntity.tryToSetUniqueName("TranslationGizmo_yCube",!0),M.__yCubeEntity.getTransform().localPosition=g.P.fromCopy3(0,1,0),M.__yCubeMesh=new u.K,M.__yCubeMaterial=m.G.createClassicUberMaterial(),M.__yCubeMaterial.setParameter(c.f5.DiffuseColorFactor,x.Lt.fromCopyArray4([0,1,0,1])),M.__yCubePrimitive=new _.X,M.__yCubePrimitive.generate({widthVector:g.P.fromCopy3(.05,1,.05),material:M.__yCubeMaterial}),M.__yCubeMesh.addPrimitive(M.__yCubePrimitive),M.__yCubeEntity.getMesh().setMesh(M.__yCubeMesh)),I.Is.not.exist(M.__zCubeEntity)&&(M.__zCubeEntity=d._.createMeshEntity(),M.__xCubeEntity.tryToSetUniqueName("TranslationGizmo_zCube",!0),M.__zCubeEntity.getTransform().localPosition=g.P.fromCopy3(0,0,1),M.__zCubeMesh=new u.K,M.__zCubeMaterial=m.G.createClassicUberMaterial(),M.__zCubeMaterial.setParameter(c.f5.DiffuseColorFactor,x.Lt.fromCopyArray4([0,0,1,1])),M.__zCubePrimitive=new _.X,M.__zCubePrimitive.generate({widthVector:g.P.fromCopy3(.05,.05,1),material:M.__zCubeMaterial}),M.__zCubeMesh.addPrimitive(M.__zCubePrimitive),M.__zCubeEntity.getMesh().setMesh(M.__zCubeMesh)),I.Is.not.exist(M.__xyPlaneEntity)&&(M.__xyPlaneEntity=d._.createMeshEntity(),M.__xCubeEntity.tryToSetUniqueName("TranslationGizmo_xyPlane",!0),M.__xyPlaneEntity.getSceneGraph().isVisible=!1,M.__xyPlaneEntity.getTransform().localEulerAngles=g.P.fromCopy3(p.k.degreeToRadian(90),0,0),M.__xyPlaneMaterial=m.G.createClassicUberMaterial(),M.__xyPlaneMaterial.alphaMode=a.F.Translucent,M.__xyPlaneMaterial.setParameter(c.f5.DiffuseColorFactor,x.Lt.fromCopyArray4([0,0,.5,0])),M.__xyPlaneMesh=new u.K,M.__xyPlanePrimitive=new h.J,M.__xyPlanePrimitive.generate({width:1e5,height:1e5,uSpan:1,vSpan:1,isUVRepeat:!0,flipTextureCoordinateY:!1,material:M.__xyPlaneMaterial}),M.__xyPlaneMesh.addPrimitive(M.__xyPlanePrimitive),M.__xyPlaneEntity.getMesh().setMesh(M.__xyPlaneMesh)),I.Is.not.exist(M.__yzPlaneEntity)&&(M.__yzPlaneEntity=d._.createMeshEntity(),M.__xCubeEntity.tryToSetUniqueName("TranslationGizmo_yzPlane",!0),M.__yzPlaneEntity.getSceneGraph().isVisible=!1,M.__yzPlaneEntity.getTransform().localEulerAngles=g.P.fromCopy3(0,0,p.k.degreeToRadian(90)),M.__yzPlaneMaterial=m.G.createClassicUberMaterial(),M.__yzPlaneMaterial.alphaMode=a.F.Translucent,M.__yzPlaneMaterial.setParameter(c.f5.DiffuseColorFactor,x.Lt.fromCopyArray4([.5,0,0,0])),M.__yzPlaneMesh=new u.K,M.__yzPlanePrimitive=new h.J,M.__yzPlanePrimitive.generate({width:1e5,height:1e5,uSpan:1,vSpan:1,isUVRepeat:!0,flipTextureCoordinateY:!1,material:M.__yzPlaneMaterial}),M.__yzPlaneMesh.addPrimitive(M.__yzPlanePrimitive),M.__yzPlaneEntity.getMesh().setMesh(M.__yzPlaneMesh)),I.Is.not.exist(M.__zxPlaneEntity)&&(M.__zxPlaneEntity=d._.createMeshEntity(),M.__xCubeEntity.tryToSetUniqueName("TranslationGizmo_zxPlane",!0),M.__zxPlaneEntity.getSceneGraph().isVisible=!1,M.__zxPlaneMaterial=m.G.createClassicUberMaterial(),M.__zxPlaneMaterial.setParameter(c.f5.DiffuseColorFactor,x.Lt.fromCopyArray4([0,.5,0,0])),M.__zxPlaneMaterial.alphaMode=a.F.Translucent,M.__zxPlaneMesh=new u.K,M.__zxPlanePrimitive=new h.J,M.__zxPlanePrimitive.generate({width:1e5,height:1e5,uSpan:1,vSpan:1,isUVRepeat:!0,flipTextureCoordinateY:!1,material:M.__zxPlaneMaterial}),M.__zxPlaneMesh.addPrimitive(M.__zxPlanePrimitive),M.__zxPlaneEntity.getMesh().setMesh(M.__zxPlaneMesh)),I.Is.not.exist(M.__groupEntity)&&(M.__groupEntity=d._.createGroupEntity()),this.__topEntity.getSceneGraph().addChild(M.__groupEntity.getSceneGraph()),M.__groupEntity.getSceneGraph().addChild(M.__xCubeEntity.getSceneGraph()),M.__groupEntity.getSceneGraph().addChild(M.__yCubeEntity.getSceneGraph()),M.__groupEntity.getSceneGraph().addChild(M.__zCubeEntity.getSceneGraph()),M.__groupEntity.getSceneGraph().addChild(M.__xyPlaneEntity.getSceneGraph()),M.__groupEntity.getSceneGraph().addChild(M.__yzPlaneEntity.getSceneGraph()),M.__groupEntity.getSceneGraph().addChild(M.__zxPlaneEntity.getSceneGraph()),this.__latestTargetEntity=this.__target,this.setGizmoTag())},O._update=function(){if(null!=this.__topEntity){var e=this.__target.getSceneGraph(),t=e.worldAABB;t.isVanilla()?this.__topEntity.getTransform().localPosition=e.position:this.__topEntity.getTransform().localPosition=t.centerPoint;var n=Math.max(t.sizeX,t.sizeY,t.sizeZ);this.__topEntity.getTransform().localScale=g.P.fromCopyArray([Math.min(1,t.isVanilla()?1:n/2),Math.min(1,t.isVanilla()?1:n/2),Math.min(1,t.isVanilla()?1:n/2)]),this.__isPointerDown&&this.__latestTargetEntity===this.__target&&(this.__target.getTransform().localPosition=this.__deltaPoint.clone())}},O.__onPointerDown=function(e){e.preventDefault(),this.__isPointerDown=!0,M.__originalX=e.clientX,M.__originalY=e.clientY;var t=this.__target.getSceneGraph().parent,n=v.J.identity();I.Is.exist(t)&&(n=t.matrixInner.getRotate());var r=g.P.one(),o=y.h.fromCopy9RowMajor(r.x*n.m00,r.x*n.m01,r.x*n.m02,r.y*n.m10,r.y*n.m11,r.y*n.m12,r.z*n.m20,r.z*n.m21,r.z*n.m22);"local"===M.__space?o=y.h.transpose(o):"world"===M.__space&&(o=A.x.identity());var i=M.castRay(e),a=i.xResult,s=i.yResult,c=i.zResult;a.result&&((0,E.dK)(a.data),this.__pickStatedPoint=o.multiplyVector(a.data.position.clone()),console.log("Down:"+this.__pickStatedPoint.toStringApproximately()),M.__activeAxis="x"),s.result&&((0,E.dK)(s.data),this.__pickStatedPoint=o.multiplyVector(s.data.position.clone()),console.log("Down:"+this.__pickStatedPoint.toStringApproximately()),M.__activeAxis="y"),c.result&&((0,E.dK)(c.data),this.__pickStatedPoint=o.multiplyVector(c.data.position.clone()),console.log("Down:"+this.__pickStatedPoint.toStringApproximately()),M.__activeAxis="z"),this.__latestTargetEntity===this.__target&&(this.__targetPointBackup=this.__target.getTransform().localPosition)},O.__onPointerMove=function(e){if(e.preventDefault(),!I.Is.false(this.__isPointerDown)){var t=e.target.getBoundingClientRect(),n=e.target.clientWidth,i=e.target.clientHeight,a=e.clientX-t.left,s=t.height-(e.clientY-t.top),c=x.Lt.fromCopy4(0,0,n,i),l=o.C.getComponent(r.M,r.M.current),u=this.__target.getSceneGraph().parent,f=v.J.identity();I.Is.exist(u)&&(f=u.matrixInner.getRotate());var _=g.P.one(),h=y.h.fromCopy9RowMajor(_.x*f.m00,_.x*f.m01,_.x*f.m02,_.y*f.m10,_.y*f.m11,_.y*f.m12,_.z*f.m20,_.z*f.m21,_.z*f.m22);"local"===M.__space?h=y.h.transpose(h):"world"===M.__space&&(h=A.x.identity());var d=this.__pickStatedPoint.clone();if("x"===M.__activeAxis){var m=M.__xyPlaneEntity.getMesh().castRayFromScreenInWorld(a,s,l,c,0);if(m.result){(0,E.dK)(m.data);var p=h.multiplyVector(m.data.position);d=g.P.fromCopy3(p.x,d.y,d.z)}w.$t.disableCameraController()}if("y"===M.__activeAxis){var b=M.__xyPlaneEntity.getMesh().castRayFromScreenInWorld(a,s,l,c,0);if(b.result){(0,E.dK)(b.data);var S=h.multiplyVector(b.data.position);d=g.P.fromCopy3(d.x,S.y,d.z)}w.$t.disableCameraController()}if("z"===M.__activeAxis){var T=M.__yzPlaneEntity.getMesh().castRayFromScreenInWorld(a,s,l,c,0);if(T.result){(0,E.dK)(T.data);var C=h.multiplyVector(T.data.position);d=g.P.fromCopy3(d.x,d.y,C.z)}w.$t.disableCameraController()}var P=g.P.subtract(d,this.__pickStatedPoint);if(0!==P.length())if(console.log("".concat(this.__target.uniqueName,": ")+P.toStringApproximately()),"local"===M.__space)this.__deltaPoint=g.P.add(P,this.__targetPointBackup);else if("world"===M.__space){var R=this.__target.getSceneGraph().parent,D=v.J.identity();I.Is.exist(R)&&(D=R.matrix.getRotate());var B=g.P.one(),N=y.h.fromCopy9RowMajor(B.x*D.m00,B.x*D.m01,B.x*D.m02,B.y*D.m10,B.y*D.m11,B.y*D.m12,B.z*D.m20,B.z*D.m21,B.z*D.m22);N=y.h.transpose(N);var O=g.P.add(this.__targetPointBackup,N.multiplyVector(P));this.__deltaPoint=O}}},O.__onPointerUp=function(e){e.preventDefault(),this.__isPointerDown=!1,M.__activeAxis="none",w.$t.enableCameraController(),this.__latestTargetEntity===this.__target&&(this.__targetPointBackup=this.__target.getTransform().localPosition)},M.__generatePrimitive=function(){var e=new Float32Array([0,0,0,this.__length,0,0,0,0,0,0,this.__length,0,0,0,0,0,0,this.__length]),t=new Float32Array([1,0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0,1]);return f.W.createPrimitive({attributeSemantics:[l.T.Position.XYZ,l.T.Color0.XYZ],attributes:[e,t],primitiveMode:s.T.Lines})},M.castRay2=function(e){var t=e.target.getBoundingClientRect(),n=e.target.clientWidth,i=e.target.clientHeight,a=e.clientX-t.left,s=t.height-(e.clientY-t.top),c=x.Lt.fromCopy4(0,0,n,i),l=o.C.getComponent(r.M,r.M.current);return M.__groupEntity.getSceneGraph().castRayFromScreen(a,s,l,c,0,[])},M.castRay=function(e){var t=e.target.getBoundingClientRect(),n=e.target.clientWidth,i=e.target.clientHeight,a=e.clientX-t.left,s=t.height-(e.clientY-t.top),c=x.Lt.fromCopy4(0,0,n,i),l=o.C.getComponent(r.M,r.M.current);return{xResult:M.__xCubeEntity.getMesh().castRayFromScreenInWorld(a,s,l,c,0),yResult:M.__yCubeEntity.getMesh().castRayFromScreenInWorld(a,s,l,c,0),zResult:M.__zCubeEntity.getMesh().castRayFromScreenInWorld(a,s,l,c,0)}},B=M,(N=[{key:"isSetup",get:function(){return null!=this.__topEntity}},{key:"length",get:function(){return M.__length},set:function(e){M.__length=e}},{key:"isVisible",get:function(){return this.__isVisible},set:function(e){if(!1===this.__isVisible&&!0===e){var t=window;if(I.Is.exist(i.D.eventTargetDom)&&(t=i.D.eventTargetDom),w.$t.register(w.KQ,[{eventName:(0,w.EY)("start"),handler:this.__onPointerDownFunc,options:{},classInstance:this,eventTargetDom:t},{eventName:(0,w.EY)("move"),handler:this.__onPointerMoveFunc,options:{},classInstance:this,eventTargetDom:t},{eventName:(0,w.EY)("end"),handler:this.__onPointerUpFunc,options:{},classInstance:this,eventTargetDom:t},{eventName:"pointerleave",handler:this.__onPointerUpFunc,options:{},classInstance:this,eventTargetDom:t}]),this.__topEntity.getSceneGraph().addChild(M.__groupEntity.getSceneGraph()),this.__latestTargetEntity=this.__target,"local"===M.__space){var n=this.__target.getSceneGraph().parent,r=b._.identity();I.Is.exist(n)&&(r=n.getQuaternionRecursively()),M.__groupEntity.getTransform().localRotation=r}else"world"===M.__space&&(M.__groupEntity.getTransform().localRotation=b._.fromCopy4(0,0,0,1))}!0===this.__isVisible&&!1===e&&(w.$t.unregister(w.KQ),this.__deltaPoint=this.__target.getTransform().localPosition,this.__pickStatedPoint=g.P.zero(),this.__isPointerDown=!1,this.__targetPointBackup=this.__target.getTransform().localPosition,M.__activeAxis="none"),w.$t.setActive(w.KQ,e),this.__setVisible(e),M.__xyPlaneEntity.getSceneGraph().isVisible=!1,M.__yzPlaneEntity.getSceneGraph().isVisible=!1,M.__zxPlaneEntity.getSceneGraph().isVisible=!1}}])&&C(B.prototype,N),M}(S.t);B.__originalX=0,B.__originalY=0,B.__activeAxis="none",B.__space="world",B.__length=1},524:(e,t,n)=>{n.d(t,{_:()=>v});var r=n(2342),o=n(1417),i=n(429),a=n(9856),s=n(6807),c=n(6696),l=n(1625),u=n(2670),f=n(3279),_=n(4654);function h(){var e=r.g.createEntity();return r.g.addComponentToEntity(o.U,e)}function d(){var e=h();return r.g.addComponentToEntity(i.a,e)}function m(){var e=d();return r.g.addComponentToEntity(f.M,e)}var v=Object.freeze({createEntity:function(){return r.g.createEntity()},createTransformEntity:h,createGroupEntity:d,createMeshEntity:function(){var e=d(),t=r.g.addComponentToEntity(a.$,e);return r.g.addComponentToEntity(s.Y,t)},createCameraEntity:m,createCameraControllerEntity:function(){var e=m();return r.g.addComponentToEntity(c.S,e)},createSkeletalEntity:function(){var e=d();return r.g.addComponentToEntity(l.Y,e)},createLightEntity:function(){var e=d();return r.g.addComponentToEntity(_.r,e)},createLightWithCameraEntity:function(){var e=d(),t=r.g.addComponentToEntity(_.r,e),n=r.g.addComponentToEntity(f.M,t);return n.getCamera().isSyncToLight=!0,n},createPhysicsEntity:function(){var e=d();return r.g.addComponentToEntity(u.Z,e)}})},6382:(e,t,n)=>{n.d(t,{G:()=>W});var r=n(9977),o=n(7011),i=n(9305),a=n(7862),s=n(7403),c=n(6105),l=n(6165),u=n(6815),f=n(8563),_=n(1668),h=n(1349),d=n(5995),m=n(2653),v=n(3297),p=n(1181),y=n(9573),A=n(3673),b=n(7416),g=n(2535),x=n(3932),I=n(5685),E=n(2175);const w={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n  #ifdef WEBXR_MULTI_VIEW_VIEW_NUM_2\nlayout(num_views=2) in;\n  #endif\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec3 a_position;\nin vec3 a_color;\nin vec3 a_normal;\nin vec4 a_instanceInfo;\nin vec2 a_texcoord_0;\nin vec4 a_joint;\nin vec4 a_weight;\nin vec4 a_baryCentricCoord;\nout vec3 v_color;\nout vec3 v_normal_inWorld;\nout vec4 v_position_inWorld;\nout vec2 v_texcoord_0;\nout vec3 v_baryCentricCoord;\nout vec4 v_shadowCoord;\n\nuniform float u_pointSize; // initialValue=30\nuniform vec3 u_pointDistanceAttenuation; // initialValue=(0,0.1,0.01)\n\n// BiasMatrix * LightProjectionMatrix * LightViewMatrix, See: http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-16-shadow-mapping/#basic-shader\nuniform mat4 u_depthBiasPV; // initialValue=(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat4 viewMatrix,\n  in bool isBillboard,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n  mat4 worldMatrixInner = worldMatrix;\n  if (isBillboard) {\n    mat4 inverseViewMatrix = inverse(viewMatrix);\n    inverseViewMatrix[3][0] = 0.0;//worldMatrix[3][0];\n    inverseViewMatrix[3][1] = 0.0;//worldMatrix[3][1];\n    inverseViewMatrix[3][2] = 0.0;//worldMatrix[3][2];\n    worldMatrixInner = inverseViewMatrix * worldMatrix;\n  }\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrixInner * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main()\n{\n\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  mat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  mat3 normalMatrix = get_normalMatrix(a_instanceInfo.x);\n  bool isBillboard = get_isBillboard(a_instanceInfo.x);\n\n  // Skeletal\n  processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    viewMatrix,\n    isBillboard,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n\n  v_color = a_color;\n  v_normal_inWorld = normalMatrix * a_normal;\n  v_texcoord_0 = a_texcoord_0;\n  v_baryCentricCoord = a_baryCentricCoord.xyz;\n\n  bool visibility = get_isVisible(a_instanceInfo.x);\n  if (!visibility)\n  {\n    gl_Position = vec4(0.0);\n  }\n\n  v_shadowCoord = get_depthBiasPV(materialSID, 0) * v_position_inWorld;\n\n// #ifdef RN_IS_POINTSPRITE\n\nvec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\nvec3 viewPosition = get_viewPosition(cameraSID, 0);\nfloat distanceFromCamera = length(position_inWorld.xyz - viewPosition);\nvec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\nfloat distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\nfloat maxPointSize = get_pointSize(materialSID, 0);\ngl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\n\n// #endif\n\n\n}\n",shaderStage:"vertex",isFragmentShader:!1},S={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\nin vec3 v_color;\nin vec3 v_normal_inWorld;\nin vec4 v_position_inWorld;\nin vec2 v_texcoord_0;\nin vec3 v_baryCentricCoord;\nin vec4 v_shadowCoord;\n\nuniform int u_shadingModel; // initialValue=0\nuniform float u_alphaCutoff; // initialValue=0.01\nuniform float u_shininess; // initialValue=5\nuniform vec4 u_diffuseColorFactor; // initialValue=(1,1,1,1)\nuniform sampler2D u_diffuseColorTexture; // initialValue=(0,white)\nuniform sampler2D u_normalTexture; // initialValue=(1,blue)\nuniform vec4 u_diffuseColorTextureTransform; // initialValue=(1,1,0,0)\nuniform float u_diffuseColorTextureRotation; // initialValue=0\nuniform sampler2DShadow u_depthTexture; // initialValue=(2,white)\n\n/* shaderity: @{renderTargetBegin} */\n\n// #pragma shaderity: require(../common/deliot2019SeamlessTexture.glsl)\n// uniform sampler2D u_tInvTexture; // initialValue=(1,white)\n// uniform vec3 u_colorSpaceOrigin;\n// uniform vec3 u_colorSpaceVector1;\n// uniform vec3 u_colorSpaceVector2;\n// uniform vec3 u_colorSpaceVector3;\n// uniform vec4 u_scaleTranslate;\n\n\nvec2 uvTransform(vec2 scale, vec2 offset, float rotation, vec2 uv) {\n  mat3 translationMat = mat3(1,0,0, 0,1,0, offset.x, offset.y, 1);\n  mat3 rotationMat = mat3(\n      cos(rotation), -sin(rotation), 0,\n      sin(rotation), cos(rotation), 0,\n                  0,             0, 1\n  );\n  mat3 scaleMat = mat3(scale.x,0,0, 0,scale.y,0, 0,0,1);\n\n  mat3 matrix = translationMat * rotationMat * scaleMat;\n  vec2 uvTransformed = ( matrix * vec3(uv.xy, 1) ).xy;\n\n  return uvTransformed;\n}\n\n\n/* shaderity: @{getters} */\n\nstruct Light {\n  int type; // 0 = directional, 1 = point, 2 = spot\n  vec3 position;\n  vec3 intensity;\n  vec3 attenuatedIntensity;\n  vec3 directionOfLightObject;\n  vec3 direction; // direction of light vector, equal to normalize(light.pointToLight)\n  vec3 pointToLight; // not normalized\n  float spotAngleScale;\n  float spotAngleOffset;\n  float effectiveRange;\n};\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Khronos/KHR_lights_punctual/README.md#range-property\nfloat getRangeAttenuation(Light light)\n{\n  float distance = length(light.pointToLight);\n  // means no range limit\n  if (light.effectiveRange <= 0.0)\n  {\n    return 1.0 / pow(distance, 2.0);\n  }\n  return max(min(1.0 - pow(distance / light.effectiveRange, 4.0), 1.0), 0.0) / pow(distance, 2.0);\n}\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Khronos/KHR_lights_punctual/README.md#inner-and-outer-cone-angles\nfloat getSpotAttenuation(Light light)\n{\n\n  float cd = dot(light.directionOfLightObject, light.direction);\n  float angularAttenuation = clamp(cd * light.spotAngleScale + light.spotAngleOffset, 0.0, 1.0);\n  return angularAttenuation;\n}\n\nvoid getLightAttenuated(Light light) {\n  light.attenuatedIntensity = light.intensity;\n  // if (light.type == 0) { // Directional Light\n    // Directional Light don't attenuate geometically\n  // }\n\n  // Point Light and Spot Light\n  if (light.type != 0)\n  {\n    light.attenuatedIntensity *= getRangeAttenuation(light);\n  }\n  // Spot light\n  if (light.type == 2)\n  {\n    light.attenuatedIntensity *= getSpotAttenuation(light);\n  }\n}\n\nLight getLight(int lightIdx, vec3 v_position_inWorld) {\n  vec3 lightPosition = get_lightPosition(0.0, lightIdx);\n  vec3 direction_and_w_of_LightObject = get_lightDirection(0.0, lightIdx);\n  vec3 lightIntensity = get_lightIntensity(0.0, lightIdx);\n  vec4 lightProperty = get_lightProperty(0.0, lightIdx);\n  Light light;\n  light.directionOfLightObject = direction_and_w_of_LightObject;\n  float lightType = lightProperty.x;\n  light.effectiveRange = lightProperty.y;\n  light.spotAngleScale = lightProperty.z;\n  light.spotAngleOffset = lightProperty.w;\n\n  light.intensity = lightIntensity;\n  light.position = lightPosition;\n  if (lightType < -0.5) { // disabled light\n    light.intensity = vec3(0.0);\n    light.type = -1;\n  } else if (0.75 < lightType) { // is pointlight or spotlight\n    light.pointToLight = lightPosition - v_position_inWorld;\n    light.direction = normalize(light.pointToLight);\n    light.type = 1;\n  } else { // is Directional Light\n    light.type = 0;\n    light.direction = normalize(light.directionOfLightObject * -1.0);\n  }\n\n  if (lightType > 1.75) { // is spotlight\n    light.type = 2;\n  }\n\n  const float M_PI = 3.141592653589793;\n  light.intensity *= M_PI; // Punctual Light\n\n  // Attenuation\n  light.attenuatedIntensity = light.intensity;\n  getLightAttenuated(light);\n\n  return light;\n}\n\n\nvoid main ()\n{\n\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  // Normal\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\n\n  vec4 diffuseColorFactor = get_diffuseColorFactor(materialSID, 0);\n\n\n  // diffuseColor (Considered to be premultiplied alpha)\n  vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\n  float alpha = 1.0;\n  if (v_color != diffuseColor && diffuseColorFactor.rgb != diffuseColor) {\n    diffuseColor = v_color * diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (v_color == diffuseColor) {\n    diffuseColor = diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (diffuseColorFactor.rgb == diffuseColor) {\n    diffuseColor = v_color;\n  } else {\n    diffuseColor = vec3(1.0, 1.0, 1.0);\n  }\n\n  // diffuseColorTexture (Considered to be premultiplied alpha)\n  vec4 diffuseColorTextureTransform = get_diffuseColorTextureTransform(materialSID, 0);\n  float diffuseColorTextureRotation = get_diffuseColorTextureRotation(materialSID, 0);\n  vec2 diffuseColorTexUv = uvTransform(diffuseColorTextureTransform.xy, diffuseColorTextureTransform.zw, diffuseColorTextureRotation, v_texcoord_0);\n  vec4 textureColor = texture(u_diffuseColorTexture, diffuseColorTexUv);\n  diffuseColor *= textureColor.rgb;\n  alpha *= textureColor.a;\n\n#ifdef RN_IS_ALPHAMODE_MASK\n  float alphaCutoff = get_alphaCutoff(materialSID, 0);\n  if (alpha < alphaCutoff) {\n    discard;\n  }\n#endif\n\n\n  // Lighting\n  vec3 shadingColor = vec3(0.0, 0.0, 0.0);\n#ifdef RN_IS_LIGHTING\n  int shadingModel = get_shadingModel(materialSID, 0);\n  if (shadingModel > 0) {\n\n    vec3 diffuse = vec3(0.0, 0.0, 0.0);\n    vec3 specular = vec3(0.0, 0.0, 0.0);\n    for (int i = 0; i < /* shaderity: @{Config.maxLightNumberInShader} */ ; i++) {\n      if (i >= lightNumber) {\n        break;\n      }\n\n      // Light\n      Light light = getLight(i, v_position_inWorld.xyz);\n\n      // Diffuse\n      diffuse += diffuseColor * max(0.0, dot(normal_inWorld, light.direction)) * light.attenuatedIntensity;\n\n      float shininess = get_shininess(materialSID, 0);\n      int shadingModel = get_shadingModel(materialSID, 0);\n\n      vec3 viewPosition = get_viewPosition(cameraSID, 0);\n\n      // Specular\n      if (shadingModel == 2) {// BLINN\n        // ViewDirection\n        vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\n        vec3 halfVector = normalize(light.direction + viewDirection);\n        specular += pow(max(0.0, dot(halfVector, normal_inWorld)), shininess);\n      } else if (shadingModel == 3) { // PHONG\n        vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\n        vec3 R = reflect(light.direction, normal_inWorld);\n        specular += pow(max(0.0, dot(R, viewDirection)), shininess);\n      }\n\n    }\n\n    shadingColor = diffuse + specular;\n  } else {\n    shadingColor = diffuseColor;\n  }\n#else\n  shadingColor = diffuseColor;\n#endif\n\n  // Shadow\n#ifdef RN_USE_SHADOW_MAPPING\n  float visibility = 1.0;\n  float bias = 0.001;\n\n  // Non PCF\n  // if ( textureProj( u_depthTexture, v_shadowCoord ).r  < (v_shadowCoord.z - bias) / v_shadowCoord.w ) {\n  //   visibility = 0.5;\n  // }\n  // shadingColor *= visibility;\n\n  // Hardware PCF\n  vec4 shadowCoord = v_shadowCoord;\n  shadowCoord.z -= bias;\n  shadingColor *= textureProj( u_depthTexture, shadowCoord ) * 0.5 + 0.5;\n\n  // shadingColor.rgb = texture( u_depthTexture, v_shadowCoord.xy ).rrr;\n  // shadingColor.rgb = vec3(v_shadowCoord.xy, 0.0);\n  // shadingColor.rgb = vec3(diffuseColorTexUv, 0.0);\n  // shadingColor.rgb = vec3(texture( u_depthTexture, diffuseColorTexUv).rrr);\n  // shadingColor.rgb = texture( u_depthTexture, diffuseColorTexUv).rgb;\n  // shadingColor.rgb = vec3(textureProj( u_depthTexture, v_shadowCoord ).z, 0.0, 0.0);\n  alpha = 1.0;\n#endif\n\n  rt0 = vec4(shadingColor * alpha, alpha);\n  // rt0 = vec4(u_lightNumber, 0.0, 0.0, 1.0);\n  // rt0 = vec4(1.0, 0.0, 0.0, 1.0);\n  // rt0 = vec4(normal_inWorld*0.5+0.5, 1.0);\n\n#ifdef RN_IS_ALPHAMODE_OPAQUE\n  rt0.a = 1.0;\n#elif defined(RN_IS_ALPHAMODE_MASK)\n  rt0.a = 1.0;\n#endif\n\n\n/* shaderity: @{renderTargetEnd} */\n\n\n}\n",shaderStage:"fragment",isFragmentShader:!0},T={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n  #ifdef WEBXR_MULTI_VIEW_VIEW_NUM_2\nlayout(num_views=2) in;\n  #endif\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec3 a_position;\nin vec3 a_color;\nin vec3 a_normal;\nin vec4 a_instanceInfo;\nin vec2 a_texcoord_0;\nin vec2 a_texcoord_1;\nin vec2 a_texcoord_2;\nin vec4 a_joint;\nin vec4 a_weight;\nin vec4 a_baryCentricCoord;\nout vec3 v_color;\nout vec3 v_normal_inWorld;\nout vec4 v_position_inWorld;\nout vec2 v_texcoord_0;\nout vec2 v_texcoord_1;\nout vec2 v_texcoord_2;\nout vec3 v_baryCentricCoord;\nout float v_instanceInfo;\n#ifdef RN_USE_TANGENT_ATTRIBUTE\n  in vec4 a_tangent;\n  out vec3 v_tangent_inWorld;\n  out vec3 v_binormal_inWorld;\n#endif\n#ifdef RN_USE_SHADOW_MAPPING\n  out vec4 v_shadowCoord;\n#endif\n\nuniform float u_pointSize; // initialValue=30, soloDatum=true\nuniform vec3 u_pointDistanceAttenuation; // initialValue=(0.0, 0.1, 0.01), soloDatum=true\n\n#ifdef RN_IS_MORPHING\nuniform int u_morphTargetNumber; // initialValue=0, isCustomSetting=true, soloDatum=true, needUniformInDataTextureMode=true\n// uniform int u_dataTextureMorphOffsetPosition[];\n// uniform int u_morphWeights[]; //\n#endif\n\n// BiasMatrix * LightProjectionMatrix * LightViewMatrix, See: http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-16-shadow-mapping/#basic-shader\nuniform mat4 u_depthBiasPV; // initialValue=(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat4 viewMatrix,\n  in bool isBillboard,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n  mat4 worldMatrixInner = worldMatrix;\n  if (isBillboard) {\n    mat4 inverseViewMatrix = inverse(viewMatrix);\n    inverseViewMatrix[3][0] = 0.0;//worldMatrix[3][0];\n    inverseViewMatrix[3][1] = 0.0;//worldMatrix[3][1];\n    inverseViewMatrix[3][2] = 0.0;//worldMatrix[3][2];\n    worldMatrixInner = inverseViewMatrix * worldMatrix;\n  }\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrixInner * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main()\n{\n\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  mat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  mat3 normalMatrix = get_normalMatrix(a_instanceInfo.x);\n  bool isBillboard = get_isBillboard(a_instanceInfo.x);\n\n  v_color = a_color;\n\n  bool isSkinning = false;\n\n  isSkinning = processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    viewMatrix,\n    isBillboard,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n  v_texcoord_0 = a_texcoord_0;\n  v_texcoord_1 = a_texcoord_1;\n  v_texcoord_2 = a_texcoord_2;\n\n  #ifdef RN_USE_TANGENT_ATTRIBUTE\n    v_tangent_inWorld = normalMatrix * a_tangent.xyz;\n    v_binormal_inWorld = cross(v_tangent_inWorld, v_normal_inWorld) * a_tangent.w;\n  #endif\n  v_baryCentricCoord = a_baryCentricCoord.xyz;\n\n  v_instanceInfo = a_instanceInfo.x;\n\n  bool visibility = get_isVisible(a_instanceInfo.x);\n  if (!visibility)\n  {\n    gl_Position = vec4(0.0);\n  }\n\n#ifdef RN_USE_SHADOW_MAPPING\n  v_shadowCoord = get_depthBiasPV(materialSID, 0) * v_position_inWorld;\n#endif\n\n// #ifdef RN_IS_POINTSPRITE\n\nvec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\nvec3 viewPosition = get_viewPosition(cameraSID, 0);\nfloat distanceFromCamera = length(position_inWorld.xyz - viewPosition);\nvec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\nfloat distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\nfloat maxPointSize = get_pointSize(materialSID, 0);\ngl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\n\n// #endif\n\n\n}\n",shaderStage:"vertex",isFragmentShader:!1},C={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\nin vec3 v_color;\nin vec3 v_normal_inWorld;\nin vec4 v_position_inWorld;\nin vec2 v_texcoord_0;\nin vec2 v_texcoord_1;\nin vec2 v_texcoord_2;\nin vec3 v_baryCentricCoord;\nin float v_instanceInfo;\n\n#ifdef RN_USE_TANGENT_ATTRIBUTE\n  in vec3 v_tangent_inWorld;\n  in vec3 v_binormal_inWorld;\n#endif\n\n#ifdef RN_USE_SHADOW_MAPPING\nin vec4 v_shadowCoord;\n#endif\n\nuniform vec4 u_baseColorFactor; // initialValue=(1,1,1,1)\nuniform sampler2D u_baseColorTexture; // initialValue=(0,white)\nuniform vec2 u_metallicRoughnessFactor; // initialValue=(1,1)\nuniform sampler2D u_metallicRoughnessTexture; // initialValue=(1,white)\nuniform sampler2D u_occlusionTexture; // initialValue=(3,white)\nuniform vec3 u_emissiveFactor; // initialValue=(0,0,0)\nuniform sampler2D u_emissiveTexture; // initialValue=(4,white)\nuniform vec3 u_wireframe; // initialValue=(0,0,1)\nuniform bool u_isOutputHDR; // initialValue=0\nuniform bool u_makeOutputSrgb; // initialValue=1\nuniform vec4 u_iblParameter; // initialValue=(1,1,1,1), isCustomSetting=true\nuniform ivec2 u_hdriFormat; // initialValue=(0,0), isCustomSetting=true\nuniform samplerCube u_diffuseEnvTexture; // initialValue=(5,white), isCustomSetting=true\nuniform samplerCube u_specularEnvTexture; // initialValue=(6,white), isCustomSetting=true\nuniform vec4 u_baseColorTextureTransform; // initialValue=(1,1,0,0)\nuniform float u_baseColorTextureRotation; // initialValue=0\nuniform vec4 u_metallicRoughnessTextureTransform; // initialValue=(1,1,0,0)\nuniform float u_metallicRoughnessTextureRotation; // initialValue=0\nuniform int u_baseColorTexcoordIndex; // initialValue=0\nuniform int u_metallicRoughnessTexcoordIndex; // initialValue=0\nuniform int u_occlusionTexcoordIndex; // initialValue=0\nuniform vec4 u_occlusionTextureTransform; // initialValue=(1,1,0,0)\nuniform float u_occlusionTextureRotation; // initialValue=0\nuniform int u_emissiveTexcoordIndex; // initialValue=0\nuniform vec4 u_emissiveTextureTransform; // initialValue=(1,1,0,0)\nuniform float u_emissiveTextureRotation; // initialValue=0\nuniform float u_occlusionStrength; // initialValue=1\nuniform bool u_inverseEnvironment; // initialValue=true\nuniform float u_ior; // initialValue=1.5\n\n#ifdef RN_USE_NORMAL_TEXTURE\n  uniform sampler2D u_normalTexture; // initialValue=(2,black)\n  uniform vec4 u_normalTextureTransform; // initialValue=(1,1,0,0)\n  uniform float u_normalTextureRotation; // initialValue=(0)\n  uniform int u_normalTexcoordIndex; // initialValue=(0)\n  uniform float u_normalScale; // initialValue=(1)\n#endif\n\n#ifdef RN_USE_CLEARCOAT\n  uniform float u_clearCoatFactor; // initialValue=0\n  uniform float u_clearCoatRoughnessFactor; // initialValue=0\n  uniform vec4 u_clearCoatTextureTransform; // initialValue=(1,1,0,0)\n  uniform float u_clearCoatTextureRotation; // initialValue=0\n  uniform vec4 u_clearCoatRoughnessTextureTransform; // initialValue=(1,1,0,0)\n  uniform float u_clearCoatRoughnessTextureRotation; // initialValue=0\n  uniform vec4 u_clearCoatNormalTextureTransform; // initialValue=(1,1,0,0)\n  uniform float u_clearCoatNormalTextureRotation; // initialValue=0\n  uniform int u_clearCoatTexcoordIndex; // initialValue=(0)\n  uniform int u_clearCoatRoughnessTexcoordIndex; // initialValue=(0)\n  uniform int u_clearCoatNormalTexcoordIndex; // initialValue=(0)\n#endif\n\n#ifdef RN_USE_TRANSMISSION\n  uniform float u_transmissionFactor; // initialValue=(0)\n#endif\n\n#ifdef RN_USE_VOLUME\n  uniform float u_thicknessFactor; // initialValue=(0)\n  uniform float u_attenuationDistance; // initialValue=(0.000001)\n  uniform vec3 u_attenuationColor; // initialValue=(1,1,1)\n#endif\n\n#ifdef RN_USE_SHEEN\n  uniform vec3 u_sheenColorFactor; // initialValue=(0,0,0)\n  uniform float u_sheenRoughnessFactor; // initialValue=(0)\n#endif\n\n#ifdef RN_USE_SPECULAR\n  uniform float u_specularFactor; // initialValue=1.0\n  uniform vec3 u_specularColorFactor; // initialValue=(1,1,1)\n#endif\n\n#ifdef RN_USE_IRIDESCENCE\n  uniform float u_iridescenceFactor; // initialValue=0\n  uniform float u_iridescenceIor; // initialValue=1.3\n  uniform float u_iridescenceThicknessMinimum; // initialValue=100\n  uniform float u_iridescenceThicknessMaximum; // initialValue=400\n#endif\n\nuniform float u_alphaCutoff; // initialValue=(0.01)\n\n/* shaderity: @{renderTargetBegin} */\n\n\nconst float M_PI = 3.141592653589793;\nconst float RECIPROCAL_PI = 0.3183098861837907;\nconst float c_MinRoughness = 0.04;\n\nfloat angular_n_h(float NH) {\n  return acos(NH);\n}\n\nfloat d_phong(float NH, float c1) {\n  return pow(\n    cos(acos(NH))\n    , c1\n  );\n}\n\n// this is from https://www.unrealengine.com/blog/physically-based-shading-on-mobile\nvec2 envBRDFApprox( float Roughness, float NoV ) {\n  const vec4 c0 = vec4(-1, -0.0275, -0.572, 0.022 );\n  const vec4 c1 = vec4(1, 0.0425, 1.04, -0.04 );\n  vec4 r = Roughness * c0 + c1;\n  float a004 = min( r.x * r.x, exp2( -9.28 * NoV ) ) * r.x + r.y;\n  vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n  return AB;\n}\n\n// GGX NDF\nfloat d_ggx(float NH, float alphaRoughness) {\n  float roughnessSqr = alphaRoughness * alphaRoughness;\n  float f = (roughnessSqr - 1.0) * NH * NH + 1.0;\n  return roughnessSqr / (M_PI * f * f);\n}\n\nfloat d_torrance_reiz(float NH, float c3) {\n  float CosSquared = NH*NH;\n  float TanSquared = (1.0 - CosSquared)/CosSquared;\n  //return (1.0/M_PI) * sq(c3/(CosSquared * (c3*c3 + TanSquared)));  // gamma = 2, aka GGX\n  return (1.0/sqrt(M_PI)) * (sq(c3)/(CosSquared * (c3*c3 + TanSquared))); // gamma = 1, D_Berry\n}\n\nfloat d_beckmann(float NH, float m) {\n  float co = 1.0 / (4.0 * m * m * NH * NH * NH * NH);\n  float expx = exp((NH * NH - 1.0) / (m * m * NH * NH));\n  return co * expx;\n}\n\n// the same as glTF WebGL sample\n// https://github.com/KhronosGroup/glTF-WebGL-PBR/blob/88eda8c5358efe03128b72b6c5f5f6e5b6d023e1/shaders/pbr-frag.glsl#L188\n// That is, Unreal Engine based approach, but modified to use alphaRoughness (squared artist's roughness parameter),\n// and based on 'Separable Masking and Shadowing' approximation (propesed by Christophe Schlick)\n// https://www.cs.virginia.edu/~jdl/bib/appearance/analytic%20models/schlick94b.pdf\nfloat g_shielding(float NL, float NV, float alphaRoughness) {\n  float r = alphaRoughness;\n\n  // Local Shadowing using \"Schlick-Smith\" Masking Function\n  float localShadowing = 2.0 * NL / (NL + sqrt(r * r + (1.0 - r * r) * (NL * NL)));\n\n  // Local Masking using \"Schlick-Smith\" Masking Function\n  float localMasking = 2.0 * NV / (NV + sqrt(r * r + (1.0 - r * r) * (NV * NV)));\n\n  return localShadowing * localMasking;\n}\n\n// The code from https://google.github.io/filament/Filament.html#listing_approximatedspecularv\n// The idea is from [Heitz14] Eric Heitz. 2014. Understanding the Masking-Shadowing Function in Microfacet-Based BRDFs.\nfloat v_SmithGGXCorrelated(float NL, float NV, float alphaRoughness) {\n  float a2 = alphaRoughness * alphaRoughness;\n  float GGXV = NL * sqrt(NV * NV * (1.0 - a2) + a2);\n  float GGXL = NV * sqrt(NL * NL * (1.0 - a2) + a2);\n  return 0.5 / (GGXV + GGXL);\n}\n\nfloat v_SmithGGXCorrelatedFast(float NL, float NV, float alphaRoughness) {\n  float a = alphaRoughness;\n  float GGXV = NL * (NV * (1.0 - a) + a);\n  float GGXL = NV * (NL * (1.0 - a) + a);\n  return 0.5 / (GGXV + GGXL);\n}\n\n// The Schlick Approximation to Fresnel\nfloat fresnel(float f0, float f90, float VdotH) {\n  float x = clamp(1.0 - VdotH, 0.0, 1.0);\n  float x2 = x * x;\n  float x5 = x * x2 * x2;\n  return f0 + (f90 - f0) * x5;\n}\n\nvec3 fresnel(vec3 f0, vec3 f90, float VdotH) {\n  float x = clamp(1.0 - VdotH, 0.0, 1.0);\n  float x2 = x * x;\n  float x5 = x * x2 * x2;\n  return f0 + (f90 - f0) * x5;\n}\n\nvec3 fresnel(vec3 f0, float f90, float VdotH)\n{\n  float x = clamp(1.0 - VdotH, 0.0, 1.0);\n  float x2 = x * x;\n  float x5 = x * x2 * x2;\n  return f0 + (f90 - f0) * x5;\n}\n\nfloat fresnel(float f0, float VdotH)\n{\n  float f90 = 1.0; //clamp(50.0 * f0, 0.0, 1.0);\n  return fresnel(f0, f90, VdotH);\n}\nvec3 fresnel(vec3 f0, float VdotH)\n{\n  float f90 = 1.0; //clamp(50.0 * f0, 0.0, 1.0);\n  return fresnel(f0, f90, VdotH);\n}\n\nvec3 cook_torrance_specular_brdf(float NH, float NL, float NV, vec3 F, float alphaRoughness) {\n  float D = d_ggx(NH, alphaRoughness);\n  float V = v_SmithGGXCorrelated(NL, NV, alphaRoughness);\n  return vec3(D)*vec3(V)*F;\n//      float G = g_shielding(NL, NV, alphaRoughness);\n//      return vec3(D)*vec3(G)*F/vec3(4.0*NL*NV);\n\n}\n\n// https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#diffuse-brdf\nvec3 diffuse_brdf(vec3 albedo)\n{\n  // (1/pi) * diffuseAlbedo\n  return RECIPROCAL_PI * albedo;\n}\n\n// https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#specular-brdf\nfloat specular_brdf(float alphaRoughness, float NdotL, float NdotV, float NdotH) {\n  float V = v_SmithGGXCorrelated(NdotL, NdotV, alphaRoughness);\n  float D = d_ggx(NdotH, alphaRoughness);\n  return V * D;\n}\n\n// https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_transmission#implementation-notes\nfloat specular_btdf(float alphaRoughness, float NdotL, float NdotV, float NdotHt) {\n  float V = v_SmithGGXCorrelated(NdotL, NdotV, alphaRoughness);\n  float D = d_ggx(NdotHt, alphaRoughness);\n  return V * D;\n}\n\n// https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#fresnel\nvec3 conductor_fresnel(vec3 f0, float brdf, float alphaRoughness, float VdotH) {\n  return vec3(brdf) * (f0.rgb + (vec3(1.0) - f0.rgb) * vec3(pow(1.0 - abs(VdotH), 5.0)));\n}\n\n// https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#fresnel\nvec3 fresnel_mix(float ior, vec3 base, vec3 layer, float VdotH) {\n  float f0 = pow((1.0 - ior)/(1.0 + ior), 2.0);\n  float fr = f0 + (1.0 - f0) * pow(1.0 - abs(VdotH), 5.0);\n  return mix(base, layer, fr);\n}\n\n// https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#metal-brdf-and-dielectric-brdf\nvec3 metal_brdf(float perceptualRoughness, vec3 baseColor, float NdotL, float NdotV, float NdotH, float VdotH) {\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n  return conductor_fresnel(\n    baseColor,\n    specular_brdf(alphaRoughness, NdotL, NdotV, NdotH),\n    alphaRoughness,\n    VdotH\n  );\n}\n\n// https://www.khronos.org/registry/glTF/specs/2.0/glTF-2.0.html#metal-brdf-and-dielectric-brdf\nvec3 dielectric_brdf(float ior, vec3 baseColor, float perceptualRoughness, float NdotL, float NdotV, float NdotH, float VdotH) {\n  vec3 base = diffuse_brdf(baseColor);\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n  vec3 layer = vec3(specular_brdf(alphaRoughness, NdotL, NdotV, NdotH));\n  return fresnel_mix(ior, base, layer, VdotH);\n}\n\n// https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_clearcoat#layering\nvec3 coated_material_s(vec3 base, float perceptualRoughness, float clearcoatRoughness, float clearcoat, float VdotNc, float LdotNc, float NdotHc) {\n  float clearcoatFresnel = 0.04 + (1.0 - 0.04) * pow(1.0 - abs(VdotNc), 5.0);\n  float clearcoatAlpha = clearcoatRoughness * clearcoatRoughness;\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n  float D = d_ggx(NdotHc, clearcoatAlpha);\n  float V = v_SmithGGXCorrelated(LdotNc, VdotNc, clearcoatAlpha);\n  float f_clearcoat = clearcoatFresnel * D * V;\n\n  // base = (f_diffuse + f_specular) in https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_clearcoat#layering\n  return base * vec3(1.0 - clearcoat * clearcoatFresnel) + vec3(f_clearcoat * clearcoat);\n}\nvec3 srgbToLinear(vec3 srgbColor) {\n  return pow(srgbColor, vec3(2.2));\n}\n\nfloat srgbToLinear(float value) {\n  return pow(value, 2.2);\n}\n\nvec3 linearToSrgb(vec3 linearColor) {\n  return pow(linearColor, vec3(1.0/2.2));\n}\n\nfloat linearToSrgb(float value) {\n  return pow(value, 1.0/2.2);\n}\n\n// Roughness Dependent Fresnel\n// https://www.jcgt.org/published/0008/01/03/paper.pdf\nvec3 fresnelSchlickRoughness(vec3 F0, float cosTheta, float roughness)\n{\n  vec3 Fr = max(vec3(1.0 - roughness), F0) - F0;\n  vec3 k_S = F0 + Fr * pow(1.0 - cosTheta, 5.0);\n  return k_S;\n}\n\nvec3 fresnelSchlickRoughnessWithIridescence(\n  vec3 F0, float cosTheta, float roughness,\n  vec3 iridescenceFresnel, float iridescence\n  )\n{\n  vec3 Fr = max(vec3(1.0 - roughness), F0) - F0;\n  vec3 k_S = mix(F0 + Fr * pow(1.0 - cosTheta, 5.0), iridescenceFresnel, iridescence);\n  return k_S;\n}\n\n// From: https://github.com/KhronosGroup/glTF-Sample-Viewer/blob/e2c7b8c8bd12916c1a387cd41f9ef061edc718df/source/Renderer/shaders/brdf.glsl#L44-L66\nvec3 Schlick_to_F0(vec3 f, vec3 f90, float VdotH) {\n    float x = clamp(1.0 - VdotH, 0.0, 1.0);\n    float x2 = x * x;\n    float x5 = clamp(x * x2 * x2, 0.0, 0.9999);\n\n    return (f - f90 * x5) / (1.0 - x5);\n}\n\nfloat Schlick_to_F0(float f, float f90, float VdotH) {\n    float x = clamp(1.0 - VdotH, 0.0, 1.0);\n    float x2 = x * x;\n    float x5 = clamp(x * x2 * x2, 0.0, 0.9999);\n\n    return (f - f90 * x5) / (1.0 - x5);\n}\n\nvec3 Schlick_to_F0(vec3 f, float VdotH) {\n    return Schlick_to_F0(f, vec3(1.0), VdotH);\n}\n\nfloat Schlick_to_F0(float f, float VdotH) {\n    return Schlick_to_F0(f, 1.0, VdotH);\n}\n\nvec3 normalBlendingUDN(sampler2D baseMap, sampler2D detailMap, vec2 baseUv, vec2 detailUv) {\n  vec3 t = texture(baseMap,   baseUv).xyz * 2.0 - 1.0;\n  vec3 u = texture(detailMap, detailUv).xyz * 2.0 - 1.0;\n  vec3 r = normalize(vec3(t.xy + u.xy, t.z));\n  return r;\n}\n\nvec2 uvTransform(vec2 scale, vec2 offset, float rotation, vec2 uv) {\n  mat3 translationMat = mat3(1,0,0, 0,1,0, offset.x, offset.y, 1);\n  mat3 rotationMat = mat3(\n      cos(rotation), -sin(rotation), 0,\n      sin(rotation), cos(rotation), 0,\n                  0,             0, 1\n  );\n  mat3 scaleMat = mat3(scale.x,0,0, 0,scale.y,0, 0,0,1);\n\n  mat3 matrix = translationMat * rotationMat * scaleMat;\n  vec2 uvTransformed = ( matrix * vec3(uv.xy, 1) ).xy;\n\n  return uvTransformed;\n}\n\n// https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_materials_volume/README.md#attenuation\nvec3 volumeAttenuation(vec3 attenuationColor, float attenuationDistance, vec3 intensity, float transmissionDistance)\n{\n  if (attenuationDistance == 0.0) { // means Infinite distance\n    return intensity; // No attenuation\n  } else {\n    vec3 attenuationCo = -log(attenuationColor) / attenuationDistance;\n    vec3 attenuatedTransmittance = exp(-attenuationCo * transmissionDistance);\n    return intensity * attenuatedTransmittance;\n  }\n}\n\n#ifdef RN_USE_SHEEN\nfloat d_Charlie(float sheenPerceptualRoughness, float NoH) {\n  // Estevez and Kulla 2017, \"Production Friendly Microfacet Sheen BRDF\"\n  float alphaG = sheenPerceptualRoughness * sheenPerceptualRoughness;\n  float invAlpha  = 1.0 / alphaG;\n  float cos2h = NoH * NoH;\n  float sin2h = 1.0 - cos2h;\n  return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\n\n// https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen#sheen-visibility\nfloat sheenSimpleVisibility(float NdotL, float NdotV) {\n  return 1.0 / (4.0 * (NdotL + NdotV - NdotL * NdotV));\n}\n\n// https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen#sheen-visibility\nfloat charlieL(float x, float alphaG) {\n  float oneMinusAlphaSq = (1.0 - alphaG) * (1.0 - alphaG);\n  float a = mix(21.5473, 25.3245, oneMinusAlphaSq);\n  float b = mix(3.82987, 3.32435, oneMinusAlphaSq);\n  float c = mix(0.19823, 0.16801, oneMinusAlphaSq);\n  float d = mix(-1.97760, -1.27393, oneMinusAlphaSq);\n  float e = mix(-4.32054, -4.85967, oneMinusAlphaSq);\n  return a / (1.0 + b * pow(x, c)) + d * x + e;\n}\n\nfloat lambdaSheen(float cosTheta, float alphaG)\n{\n  return abs(cosTheta) < 0.5 ? exp(charlieL(cosTheta, alphaG)) : exp(2.0 * charlieL(0.5, alphaG) - charlieL(1.0 - cosTheta, alphaG));\n}\n\nfloat sheenCharlieVisibility(float NdotL, float NdotV, float sheenPerceptualRoughness) {\n  float alphaG = sheenPerceptualRoughness * sheenPerceptualRoughness;\n  float sheenVisibility = 1.0 / ((1.0 + lambdaSheen(NdotV, alphaG) + lambdaSheen(NdotL, alphaG)) * (4.0 * NdotV * NdotL));\n  return sheenVisibility;\n}\n\nvec3 sheen_brdf(vec3 sheenColor, float sheenPerceptualRoughness, float NdotL, float NdotV, float NdotH) {\n  float sheenDistribution = d_Charlie(sheenPerceptualRoughness, NdotH);\n  float sheenVisibility = sheenCharlieVisibility(NdotL, NdotV, sheenPerceptualRoughness);\n  return sheenColor * sheenDistribution * sheenVisibility;\n}\n\n#endif\n#ifdef RN_USE_IRIDESCENCE\n\n// XYZ to REC709(sRGB) conversion matrix\nconst mat3 XYZ_TO_REC709 = mat3(\n     3.2404542, -0.9692660,  0.0556434,\n    -1.5371385,  1.8760108, -0.2040259,\n    -0.4985314,  0.0415560,  1.0572252\n);\n\n// Assume air interface for top\nvec3 Fresnel0ToIor(vec3 F0) {\n    vec3 sqrtF0 = sqrt(F0);\n    return (vec3(1.0) + sqrtF0) / (vec3(1.0) - sqrtF0);\n}\n\n// Conversion from IOR to F0\n// ior is a value between 1.0 and 3.0. 1.0 is air interface\nvec3 IorToFresnel0(vec3 transmittedIor, float incidentIor) {\n    return sq((transmittedIor - vec3(incidentIor)) / (transmittedIor + vec3(incidentIor)));\n}\nfloat IorToFresnel0(float transmittedIor, float incidentIor) {\n    return sq((transmittedIor - incidentIor) / (transmittedIor + incidentIor));\n}\n\n/**\n * From: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_iridescence#analytic-spectral-integration\n */\nvec3 evalSensitivity(float OPD, vec3 shift) {\n    float phase = 2.0 * M_PI * OPD * 1.0e-9;\n    vec3 val = vec3(5.4856e-13, 4.4201e-13, 5.2481e-13);\n    vec3 pos = vec3(1.6810e+06, 1.7953e+06, 2.2084e+06);\n    vec3 var = vec3(4.3278e+09, 9.3046e+09, 6.6121e+09);\n\n    vec3 xyz = val * sqrt(2.0 * M_PI * var) * cos(pos * phase + shift) * exp(-(phase * phase) * var);\n    xyz.x += 9.7470e-14 * sqrt(2.0 * M_PI * 4.5282e+09) * cos(2.2399e+06 * phase + shift[0]) * exp(-4.5282e+09 * (phase * phase));\n    xyz /= 1.0685e-7;\n\n    vec3 rgb = XYZ_TO_REC709 * xyz;\n    return rgb;\n}\n\n\n/**\n * From: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_iridescence#iridescence-fresnel\n */\nvec3 calcIridescence(float outsideIor, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0) {\n\n\n  // iridescenceIor is the index of refraction of the thin-film layer\n  // Force iridescenceIor -> outsideIOR when thinFilmThickness -> 0.0\n  float iridescenceIor = mix(outsideIor, eta2, smoothstep(0.0, 0.03, thinFilmThickness));\n\n  // To calculate the reflectances R12 and R23 at the viewing angles (angle hitting the thin-film layer)\n  // and (angle after refraction in the thin-film) Schlick Fresnel is again used.\n  // This approximation allows to eliminate the split into S and P polarization for the exact Fresnel equations.\n  // can be calculated using Snell's law (with  being outsideIor and being iridescenceIor):\n  float sinTheta2Sq = sq(outsideIor / iridescenceIor) * (1.0 - sq(cosTheta1));\n  float cosTheta2Sq = 1.0 - sinTheta2Sq;\n\n  // Handle total internal reflection\n  if (cosTheta2Sq < 0.0) {\n      return vec3(1.0);\n  }\n\n  float cosTheta2 = sqrt(cosTheta2Sq);\n\n  /// Material Interfaces\n  // The iridescence model defined by Belcour/Barla models two material interfaces\n  // - one from the outside to the thin-film layer\n  // and another one from the thin-film to the base material. These two interfaces are defined as follows:\n\n  // First interface (from the outside to the thin-film layer)\n  float R0 = IorToFresnel0(iridescenceIor, outsideIor);\n  float R12 = fresnel(R0, cosTheta1);\n  float R21 = R12;\n  float T121 = 1.0 - R12;\n\n  // Second interface (from the thin-film to the base material)\n  vec3 baseIor = Fresnel0ToIor(baseF0 + 0.0001); // guard against 1.0\n  vec3 R1 = IorToFresnel0(baseIor, iridescenceIor);\n  vec3 R23 = fresnel(R1, cosTheta2);\n\n  // phi12 and phi23 define the base phases per interface and are approximated with 0.0\n  // if the IOR of the hit material (iridescenceIor or baseIor) is higher\n  // than the IOR of the previous material (outsideIor or iridescenceIor) and  otherwise.\n  // Also here, polarization is ignored.  float phi12 = 0.0;\n\n  // First interface (from the outside to the thin-film layer)\n  float phi12 = 0.0;\n  if (iridescenceIor < outsideIor) phi12 = M_PI;\n  float phi21 = M_PI - phi12;\n\n  // Second interface (from the thin-film to the base material)\n  vec3 phi23 = vec3(0.0);\n  if (baseIor[0] < iridescenceIor) phi23[0] = M_PI;\n  if (baseIor[1] < iridescenceIor) phi23[1] = M_PI;\n  if (baseIor[2] < iridescenceIor) phi23[2] = M_PI;\n\n  // OPD (optical path difference)\n  float OPD = 2.0 * iridescenceIor * thinFilmThickness * cosTheta2;\n  // Phase shift\n  vec3 phi = vec3(phi21) + phi23;\n\n  // Compound terms\n  vec3 R123 = clamp(R12 * R23, 1e-5, 0.9999);\n  vec3 r123 = sqrt(R123);\n  vec3 Rs = (T121 * T121) * R23 / (vec3(1.0) - R123);\n\n  // Reflectance term for m = 0 (DC term amplitude)\n  vec3 C0 = R12 + Rs;\n  vec3 I = C0;\n\n  // Reflectance term for m > 0 (pairs of diracs)\n  vec3 Cm = Rs - T121;\n  for (int m = 1; m <= 2; ++m)\n  {\n      Cm *= r123;\n      vec3 Sm = 2.0 * evalSensitivity(float(m) * OPD, float(m) * phi);\n      I += Cm * Sm;\n  }\n\n  vec3 F_iridescence = max(I, vec3(0.0));\n\n  return F_iridescence;\n}\n\n#endif\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\n#ifdef RN_USE_SHADOW_MAPPING\n\nconst float g_minVariance = 0.0;\n\nfloat chebyshevUpperBound(vec2 moments, float t) {\n  float p = (t <= moments.x) ? 1.0 : 0.0;\n\n  float variance = moments.y - sq(moments.x);\n  variance = max(variance, g_minVariance);\n\n  float d = t - moments.x;\n  float p_max = variance / (variance + sq(d));\n\n  return max(p, p_max);\n}\n\nfloat varianceShadowContribution(vec2 lightTexCoord, float distanceToLight) {\n  vec2 moments = texture(u_depthTexture, lightTexCoord).xy;\n\n  return chebyshevUpperBound(moments, distanceToLight);\n}\n\n#endif\n\n\nstruct Light {\n  int type; // 0 = directional, 1 = point, 2 = spot\n  vec3 position;\n  vec3 intensity;\n  vec3 attenuatedIntensity;\n  vec3 directionOfLightObject;\n  vec3 direction; // direction of light vector, equal to normalize(light.pointToLight)\n  vec3 pointToLight; // not normalized\n  float spotAngleScale;\n  float spotAngleOffset;\n  float effectiveRange;\n};\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Khronos/KHR_lights_punctual/README.md#range-property\nfloat getRangeAttenuation(Light light)\n{\n  float distance = length(light.pointToLight);\n  // means no range limit\n  if (light.effectiveRange <= 0.0)\n  {\n    return 1.0 / pow(distance, 2.0);\n  }\n  return max(min(1.0 - pow(distance / light.effectiveRange, 4.0), 1.0), 0.0) / pow(distance, 2.0);\n}\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Khronos/KHR_lights_punctual/README.md#inner-and-outer-cone-angles\nfloat getSpotAttenuation(Light light)\n{\n\n  float cd = dot(light.directionOfLightObject, light.direction);\n  float angularAttenuation = clamp(cd * light.spotAngleScale + light.spotAngleOffset, 0.0, 1.0);\n  return angularAttenuation;\n}\n\nvoid getLightAttenuated(Light light) {\n  light.attenuatedIntensity = light.intensity;\n  // if (light.type == 0) { // Directional Light\n    // Directional Light don't attenuate geometically\n  // }\n\n  // Point Light and Spot Light\n  if (light.type != 0)\n  {\n    light.attenuatedIntensity *= getRangeAttenuation(light);\n  }\n  // Spot light\n  if (light.type == 2)\n  {\n    light.attenuatedIntensity *= getSpotAttenuation(light);\n  }\n}\n\nLight getLight(int lightIdx, vec3 v_position_inWorld) {\n  vec3 lightPosition = get_lightPosition(0.0, lightIdx);\n  vec3 direction_and_w_of_LightObject = get_lightDirection(0.0, lightIdx);\n  vec3 lightIntensity = get_lightIntensity(0.0, lightIdx);\n  vec4 lightProperty = get_lightProperty(0.0, lightIdx);\n  Light light;\n  light.directionOfLightObject = direction_and_w_of_LightObject;\n  float lightType = lightProperty.x;\n  light.effectiveRange = lightProperty.y;\n  light.spotAngleScale = lightProperty.z;\n  light.spotAngleOffset = lightProperty.w;\n\n  light.intensity = lightIntensity;\n  light.position = lightPosition;\n  if (lightType < -0.5) { // disabled light\n    light.intensity = vec3(0.0);\n    light.type = -1;\n  } else if (0.75 < lightType) { // is pointlight or spotlight\n    light.pointToLight = lightPosition - v_position_inWorld;\n    light.direction = normalize(light.pointToLight);\n    light.type = 1;\n  } else { // is Directional Light\n    light.type = 0;\n    light.direction = normalize(light.directionOfLightObject * -1.0);\n  }\n\n  if (lightType > 1.75) { // is spotlight\n    light.type = 2;\n  }\n\n  const float M_PI = 3.141592653589793;\n  light.intensity *= M_PI; // Punctual Light\n\n  // Attenuation\n  light.attenuatedIntensity = light.intensity;\n  getLightAttenuated(light);\n\n  return light;\n}\n\n\nvec3 get_irradiance(vec3 normal_forEnv, float materialSID, ivec2 hdriFormat) {\n  vec4 diffuseTexel = texture(u_diffuseEnvTexture, normal_forEnv);\n\n  vec3 irradiance;\n  if (hdriFormat.x == 0) {\n    // LDR_SRGB\n    irradiance = srgbToLinear(diffuseTexel.rgb);\n  }\n  else if (hdriFormat.x == 3) {\n    // RGBE\n    irradiance = diffuseTexel.rgb * pow(2.0, diffuseTexel.a*255.0-128.0);\n  }\n  else {\n    irradiance = diffuseTexel.rgb;\n  }\n\n  return irradiance;\n}\n\nfloat scaleForLod(float perceptualRoughness, float ior)\n{\n  // Scale roughness to the range [0, 1],\n  // ior=1.0 will be scale 0,\n  // ior=1.5 will be scale 1.0,\n  // ior=2 will be scale 1.0 (clamped)\n  //\n\n  float scale = clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n  return perceptualRoughness * scale;\n}\n\n#ifdef RN_USE_TRANSMISSION\nvec3 get_sample_from_backbuffer(float materialSID, vec2 sampleCoord, float perceptualRoughness, float ior) {\n  ivec2 vrState = get_vrState(0.0, 0);\n  vec2 backBufferTextureSize = get_backBufferTextureSize(materialSID, 0);\n  float backBufferTextureLength = max(backBufferTextureSize.x, backBufferTextureSize.y);\n  if (vrState.x == 1) { // For VR\n    backBufferTextureLength = max(backBufferTextureSize.x / 2.0, backBufferTextureSize.y);\n    sampleCoord.x = sampleCoord.x * 0.5;\n    if (vrState.y == 1) { // For right eye\n      sampleCoord.x += 0.5;\n    }\n  }\n  float framebufferLod = log2(backBufferTextureLength) * scaleForLod(perceptualRoughness, ior);\n\n  #ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n    vec3 transmittedLight = texture2DLodEXT(u_backBufferTexture, sampleCoord, framebufferLod).rgb;\n  #elif defined(GLSL_ES3)\n    vec3 transmittedLight = textureLod(u_backBufferTexture, sampleCoord, framebufferLod).rgb;\n  #else\n    vec3 transmittedLight = texture(u_backBufferTexture, sampleCoord).rgb;\n  #endif\n\n  return transmittedLight;\n}\n#endif\n\nvec3 get_radiance(vec3 reflection, float lod, ivec2 hdriFormat) {\n  #ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n    vec4 specularTexel = textureCubeLodEXT(u_specularEnvTexture, reflection, lod);\n  #elif defined(GLSL_ES3)\n    vec4 specularTexel = textureLod(u_specularEnvTexture, reflection, lod);\n  #else\n    vec4 specularTexel = texture(u_specularEnvTexture, reflection);\n  #endif\n\n// #pragma shaderity: require(./../common/fetchCubeTexture.glsl)\n\n  vec3 radiance;\n  if (hdriFormat.y == 0) {\n    // LDR_SRGB\n    radiance = srgbToLinear(specularTexel.rgb);\n  }\n  else if (hdriFormat.y == 3) {\n    // RGBE\n    radiance = specularTexel.rgb * pow(2.0, specularTexel.a*255.0-128.0);\n  }\n  else {\n    radiance = specularTexel.rgb;\n  }\n\n  return radiance;\n}\n\n// from glTF Sample Viewer: https://github.com/KhronosGroup/glTF-Sample-Viewer\nvec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior)\n{\n  vec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);\n  mat4 worldMatrix = get_worldMatrix(v_instanceInfo);\n\n  vec3 modelScale;\n  modelScale.x = length(vec3(worldMatrix[0].xyz));\n  modelScale.y = length(vec3(worldMatrix[1].xyz));\n  modelScale.z = length(vec3(worldMatrix[2].xyz));\n\n  return normalize(refractionVector) * thickness * modelScale;\n}\n\nstruct IblResult\n{\n  vec3 specular;\n  vec3 diffuse;\n  vec3 FssEss;\n};\n\nIblResult getIBLRadianceGGX(float materialSID, float NdotV, vec3 viewDirection, vec3 albedo, vec3 F0,\n  float perceptualRoughness, vec4 iblParameter, ivec2 hdriFormat, mat3 rotEnvMatrix,\n  vec3 normal_forEnv, vec3 reflection)\n{\n  // get radiance\n  float mipCount = iblParameter.x;\n  float lod = (perceptualRoughness * (mipCount - 1.0));\n  vec3 radiance = get_radiance(reflection, lod, hdriFormat);\n\n  // Roughness dependent fresnel\n  vec3 kS = fresnelSchlickRoughness(F0, NdotV, perceptualRoughness);\n  vec2 f_ab = envBRDFApprox(perceptualRoughness, NdotV);\n  vec3 FssEss = kS * f_ab.x + f_ab.y;\n  IblResult result;\n  result.FssEss = FssEss;\n\n  // Specular IBL\n  vec3 specular = FssEss * radiance;\n\n  // scale with user parameters\n  float IBLSpecularContribution = iblParameter.z;\n  specular *= IBLSpecularContribution;\n\n  result.specular = specular;\n\n  return result;\n}\n\nIblResult getIBLRadianceGGXWithIridescence(float materialSID, float NdotV, vec3 viewDirection, vec3 albedo, vec3 F0,\n  float perceptualRoughness, vec4 iblParameter, ivec2 hdriFormat, mat3 rotEnvMatrix,\n  vec3 normal_forEnv, vec3 reflection, vec3 iridescenceFresnel, float iridescence)\n{\n  // get radiance\n  float mipCount = iblParameter.x;\n  float lod = (perceptualRoughness * (mipCount - 1.0));\n  vec3 radiance = get_radiance(reflection, lod, hdriFormat);\n\n  // Roughness dependent fresnel\n  vec3 kS = fresnelSchlickRoughnessWithIridescence(F0, NdotV, perceptualRoughness, iridescenceFresnel, iridescence);\n  vec2 f_ab = envBRDFApprox(perceptualRoughness, NdotV);\n  vec3 FssEss = kS * f_ab.x + f_ab.y;\n  IblResult result;\n  result.FssEss = FssEss;\n\n  // Specular IBL\n  vec3 specular = FssEss * radiance;\n\n  // scale with user parameters\n  float IBLSpecularContribution = iblParameter.z;\n  specular *= IBLSpecularContribution;\n\n  result.specular = specular;\n\n  return result;\n}\n\nIblResult getIBLRadianceLambertian(float materialSID, float NdotV, vec3 viewDirection, vec3 albedo, vec3 F0,\n  float perceptualRoughness, vec4 iblParameter, ivec2 hdriFormat, mat3 rotEnvMatrix,\n  vec3 normal_forEnv, vec3 reflection)\n{\n  // get irradiance\n  vec3 irradiance = get_irradiance(normal_forEnv, materialSID, hdriFormat);\n\n  // Roughness dependent fresnel\n  vec3 kS = fresnelSchlickRoughness(F0, NdotV, perceptualRoughness);\n  vec2 f_ab = envBRDFApprox(perceptualRoughness, NdotV);\n  vec3 FssEss = kS * f_ab.x + f_ab.y;\n  IblResult result;\n  result.FssEss = FssEss;\n\n  // Multiple scattering, Fdez-Aguera's approach\n  float Ems = (1.0 - (f_ab.x + f_ab.y));\n  vec3 F_avg = F0 + (1.0 - F0) / 21.0;\n  vec3 FmsEms = Ems * FssEss * F_avg / (1.0 - F_avg * Ems);\n  vec3 k_D = albedo * (1.0 - FssEss - FmsEms);\n\n  // Diffuse IBL\n  vec3 diffuse = (FmsEms + k_D) * irradiance;\n\n  // scale with user parameters\n  float IBLDiffuseContribution = iblParameter.y;\n  diffuse *= IBLDiffuseContribution;\n\n  result.diffuse = diffuse;\n\n  return result;\n}\n\nIblResult getIBLRadianceLambertianWithIridescence(float materialSID, float NdotV, vec3 viewDirection, vec3 albedo, vec3 F0,\n  float perceptualRoughness, vec4 iblParameter, ivec2 hdriFormat, mat3 rotEnvMatrix,\n  vec3 normal_forEnv, vec3 reflection, vec3 iridescenceF0, float iridescence)\n{\n  // get irradiance\n  vec3 irradiance = get_irradiance(normal_forEnv, materialSID, hdriFormat);\n\n  // Use the maximum component of the iridescence Fresnel color\n  // Maximum is used instead of the RGB value to not get inverse colors for the diffuse BRDF\n  vec3 iridescenceF0Max = vec3(max(max(iridescenceF0.r, iridescenceF0.g), iridescenceF0.b));\n\n  // Blend between base F0 and iridescence F0\n  vec3 mixedF0 = mix(F0, iridescenceF0Max, iridescence);\n\n  // Roughness dependent fresnel\n  vec3 kS = fresnelSchlickRoughness(mixedF0, NdotV, perceptualRoughness);\n  vec2 f_ab = envBRDFApprox(perceptualRoughness, NdotV);\n  vec3 FssEss = kS * f_ab.x + f_ab.y;\n  IblResult result;\n  result.FssEss = FssEss;\n\n  // Multiple scattering, Fdez-Aguera's approach\n  float Ems = (1.0 - (f_ab.x + f_ab.y));\n  vec3 F_avg = mixedF0 + (1.0 - mixedF0) / 21.0;\n  vec3 FmsEms = Ems * FssEss * F_avg / (1.0 - F_avg * Ems);\n  vec3 k_D = albedo * (1.0 - FssEss - FmsEms);\n\n  // Diffuse IBL\n  vec3 diffuse = (FmsEms + k_D) * irradiance;\n\n  // scale with user parameters\n  float IBLDiffuseContribution = iblParameter.y;\n  diffuse *= IBLDiffuseContribution;\n\n  result.diffuse = diffuse;\n\n  return result;\n}\n\n#ifdef RN_USE_SHEEN\nvec3 sheenIBL(float NdotV, float sheenPerceptualRoughness, vec3 sheenColor, vec4 iblParameter, vec3 reflection, ivec2 hdriFormat)\n{\n  float mipCount = iblParameter.x;\n  float lod = (sheenPerceptualRoughness * (mipCount - 1.0));\n\n  vec2 sheenLutUV = vec2(NdotV, sheenPerceptualRoughness);\n  float brdf = texture(u_sheenLutTexture, sheenLutUV).b;\n  vec3 sheenLight = get_radiance(reflection, lod, hdriFormat);\n  float IBLSpecularContribution = iblParameter.z;\n  sheenLight *= IBLSpecularContribution;\n\n  return sheenLight * sheenColor * brdf;\n}\n#endif\n\nvec3 getNormalForEnv(mat3 rotEnvMatrix, vec3 normal_inWorld, float materialSID) {\n  vec3 normal_forEnv = rotEnvMatrix * normal_inWorld;\n  if (get_inverseEnvironment(materialSID, 0)) {\n    normal_forEnv.x *= -1.0;\n  }\n  return normal_forEnv;\n}\n\nvec3 getReflection(mat3 rotEnvMatrix, vec3 viewDirection, vec3 normal_inWorld, float materialSID) {\n  vec3 reflection = rotEnvMatrix * reflect(-viewDirection, normal_inWorld);\n  if (get_inverseEnvironment(materialSID, 0)) {\n    reflection.x *= -1.0;\n  }\n  return reflection;\n}\n\nvec3 IBLContribution(float materialSID, vec3 normal_inWorld, float NdotV, vec3 viewDirection,\n  vec3 albedo, vec3 F0, float perceptualRoughness, float clearcoatRoughness, vec3 clearcoatNormal_inWorld,\n  float clearcoat, float VdotNc, vec3 geomNormal_inWorld, float cameraSID, float transmission, vec3 v_position_inWorld,\n  float thickness, vec3 sheenColor, float sheenRoughness, float albedoSheenScalingNdotV, float ior,\n  vec3 iridescenceFresnel, vec3 iridescenceF0, float iridescence)\n{\n  vec4 iblParameter = get_iblParameter(materialSID, 0);\n  float rot = iblParameter.w + 3.1415;\n  mat3 rotEnvMatrix = mat3(cos(rot), 0.0, -sin(rot), 0.0, 1.0, 0.0, sin(rot), 0.0, cos(rot));\n  ivec2 hdriFormat = get_hdriFormat(materialSID, 0);\n\n  vec3 normal_forEnv = getNormalForEnv(rotEnvMatrix, normal_inWorld, materialSID);\n  vec3 reflection = getReflection(rotEnvMatrix, viewDirection, normal_inWorld, materialSID);\n\n  // IBL\n  #ifdef RN_USE_IRIDESCENCE\n    IblResult baseRadianceResult = getIBLRadianceGGXWithIridescence(materialSID, NdotV, viewDirection, albedo, F0,\n      perceptualRoughness, iblParameter, hdriFormat, rotEnvMatrix, normal_forEnv, reflection, iridescenceFresnel, iridescence);\n    IblResult baseLambertianResult = getIBLRadianceLambertianWithIridescence(materialSID, NdotV, viewDirection, albedo, F0,\n      perceptualRoughness, iblParameter, hdriFormat, rotEnvMatrix, normal_forEnv, reflection, iridescenceF0, iridescence);\n  #else\n    IblResult baseRadianceResult = getIBLRadianceGGX(materialSID, NdotV, viewDirection, albedo, F0,\n      perceptualRoughness, iblParameter, hdriFormat, rotEnvMatrix, normal_forEnv, reflection);\n    IblResult baseLambertianResult = getIBLRadianceLambertian(materialSID, NdotV, viewDirection, albedo, F0,\n      perceptualRoughness, iblParameter, hdriFormat, rotEnvMatrix, normal_forEnv, reflection);\n  #endif\n\n#ifdef RN_USE_TRANSMISSION\n  vec3 refractedRay = getVolumeTransmissionRay(geomNormal_inWorld, viewDirection, thickness, ior);\n  vec3 refractedRayFromVPosition = v_position_inWorld + refractedRay;\n  vec4 ndcPoint = get_projectionMatrix(cameraSID, 0) * get_viewMatrix(cameraSID, 0) * vec4(refractedRayFromVPosition, 1.0);\n  vec2 refractionCoords = ndcPoint.xy / ndcPoint.w;\n  refractionCoords += 1.0;\n  refractionCoords /= 2.0;\n  vec3 transmittedLight = get_sample_from_backbuffer(materialSID, refractionCoords, perceptualRoughness, ior);\n\n#ifdef RN_USE_VOLUME\n  vec3 attenuationColor = get_attenuationColor(materialSID, 0);\n  float attenuationDistance = get_attenuationDistance(materialSID, 0);\n  transmittedLight = volumeAttenuation(attenuationColor, attenuationDistance, transmittedLight, length(refractedRay));\n#endif\n\n  vec3 transmissionComp = (vec3(1.0) - baseRadianceResult.FssEss) * transmittedLight * albedo;\n  vec3 diffuse = mix(baseLambertianResult.diffuse, transmissionComp, transmission);\n  vec3 base = diffuse + baseRadianceResult.specular;\n#else\n  vec3 base = baseLambertianResult.diffuse + baseRadianceResult.specular;\n#endif\n\n#ifdef RN_USE_SHEEN\n  vec3 sheen = sheenIBL(NdotV, sheenRoughness, sheenColor, iblParameter, reflection, hdriFormat);\n  vec3 color = sheen + base * albedoSheenScalingNdotV;\n#else\n  vec3 color = base;\n#endif\n\n#ifdef RN_USE_CLEARCOAT\n  float VdotNg = dot(geomNormal_inWorld, viewDirection);\n  vec3 clearcoatNormal_forEnv = getNormalForEnv(rotEnvMatrix, normal_inWorld, materialSID);\n  vec3 clearcoatReflection = getReflection(rotEnvMatrix, viewDirection, normal_inWorld, materialSID);\n  IblResult coatResult = getIBLRadianceGGX(materialSID, VdotNc, viewDirection, vec3(0.0), F0,\n    clearcoatRoughness, iblParameter, hdriFormat, rotEnvMatrix, clearcoatNormal_forEnv, clearcoatReflection);\n  vec3 coatLayer = coatResult.specular;\n\n  float clearcoatFresnel = 0.04 + (1.0 - 0.04) * pow(1.0 - abs(VdotNc), 5.0);\n  vec3 coated = color * vec3(1.0 - clearcoat * clearcoatFresnel) + vec3(coatLayer * clearcoat);\n  return coated;\n#else\n  return color;\n#endif\n\n}\n\nfloat edge_ratio(vec3 bary3, float wireframeWidthInner, float wireframeWidthRelativeScale) {\n  vec3 d = fwidth(bary3);\n  vec3 x = bary3+vec3(1.0 - wireframeWidthInner)*d;\n  vec3 a3 = smoothstep(vec3(0.0), d, x);\n  float factor = min(min(a3.x, a3.y), a3.z);\n\n  return clamp((1.0 - factor), 0.0, 1.0);\n}\n\nvec2 getTexcoord(int texcoordIndex) {\n  vec2 texcoord;\n  if(texcoordIndex == 2){\n    texcoord = v_texcoord_2;\n  } else if(texcoordIndex == 1){\n    texcoord = v_texcoord_1;\n  }else{\n    texcoord = v_texcoord_0;\n  }\n  return texcoord;\n}\n\n#ifdef RN_USE_TANGENT_ATTRIBUTE\n  vec3 perturb_normal(vec3 normal_inWorld, vec3 viewVector, vec2 texcoord, vec3 normalTex) {\n    vec3 tangent_inWorld = normalize(v_tangent_inWorld);\n    vec3 binormal_inWorld = normalize(v_binormal_inWorld);\n    mat3 tbnMat_tangent_to_world = mat3(tangent_inWorld, binormal_inWorld, normal_inWorld);\n\n    return normalize(tbnMat_tangent_to_world * normalTex);\n  }\n#else\n  #ifdef RN_IS_SUPPORTING_STANDARD_DERIVATIVES\n    // This is based on http://www.thetenthplanet.de/archives/1180\n    mat3 cotangent_frame(vec3 normal_inWorld, vec3 position, vec2 uv) {\n      uv = gl_FrontFacing ? uv : -uv;\n\n      // get edge vectors of the pixel triangle\n      vec3 dp1 = dFdx(position);\n      vec3 dp2 = dFdy(position);\n      vec2 duv1 = dFdx(uv);\n      vec2 duv2 = dFdy(uv);\n\n      // solve the linear system\n      vec3 dp2perp = cross(dp2, normal_inWorld);\n      vec3 dp1perp = cross(normal_inWorld, dp1);\n      vec3 tangent = dp2perp * duv1.x + dp1perp * duv2.x;\n      vec3 bitangent = dp2perp * duv1.y + dp1perp * duv2.y;\n      bitangent *= -1.0;\n\n      // construct a scale-invariant frame\n      float invMat = inversesqrt(max(dot(tangent, tangent), dot(bitangent, bitangent)));\n      return mat3(tangent * invMat, bitangent * invMat, normal_inWorld);\n    }\n\n    vec3 perturb_normal(vec3 normal_inWorld, vec3 viewVector, vec2 texcoord, vec3 normalTex) {\n      mat3 tbnMat_tangent_to_world = cotangent_frame(normal_inWorld, -viewVector, texcoord);\n      if (texcoord.x > 0.0 || texcoord.y > 0.0) {\n        return normalize(tbnMat_tangent_to_world * normalTex);\n      } else {\n        return normal_inWorld;\n      }\n    }\n  #else\n    vec3 perturb_normal(vec3 normal_inWorld, vec3 viewVector, vec2 texcoord, vec3 normalTex) {\n      return normal_inWorld;\n    }\n  #endif\n#endif\n\n\nvoid main ()\n{\n\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  // View vector\n  vec3 viewPosition = get_viewPosition(cameraSID, 0);\n  vec3 viewVector = viewPosition - v_position_inWorld.xyz;\n\n  // Normal\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\n  vec3 geomNormal_inWorld = normal_inWorld;\n  vec4 normalTextureTransform = get_normalTextureTransform(materialSID, 0);\n  float normalTextureRotation = get_normalTextureRotation(materialSID, 0);\n  int normalTexcoordIndex = get_normalTexcoordIndex(materialSID, 0);\n  vec2 normalTexcoord = getTexcoord(normalTexcoordIndex);\n  vec2 normalTexUv = uvTransform(normalTextureTransform.xy, normalTextureTransform.zw, normalTextureRotation, normalTexcoord);\n  #ifdef RN_USE_NORMAL_TEXTURE\n    vec3 normalTexValue = texture(u_normalTexture, normalTexUv).xyz;\n    if(normalTexValue.b >= 128.0 / 255.0) {\n      // normal texture is existence\n      vec3 normalTex = normalTexValue * 2.0 - 1.0;\n      float normalScale = get_normalScale(materialSID, 0);\n      vec3 scaledNormal = normalize(normalTex * vec3(normalScale, normalScale, 1.0));\n      normal_inWorld = perturb_normal(normal_inWorld, viewVector, normalTexUv, scaledNormal);\n    }\n  #endif\n\n  // BaseColorFactor\n  vec3 baseColor = vec3(0.0, 0.0, 0.0);\n  float alpha = 1.0;\n  vec4 baseColorFactor = get_baseColorFactor(materialSID, 0);\n  if (v_color != baseColor && baseColorFactor.rgb != baseColor) {\n    baseColor = v_color * baseColorFactor.rgb;\n    alpha = baseColorFactor.a;\n  } else if (v_color == baseColor) {\n    baseColor = baseColorFactor.rgb;\n    alpha = baseColorFactor.a;\n  } else if (baseColorFactor.rgb == baseColor) {\n    baseColor = v_color;\n  } else {\n    baseColor = vec3(1.0, 1.0, 1.0);\n  }\n\n  // BaseColor (take account for BaseColorTexture)\n  vec4 baseColorTextureTransform = get_baseColorTextureTransform(materialSID, 0);\n  float baseColorTextureRotation = get_baseColorTextureRotation(materialSID, 0);\n  int baseColorTexcoordIndex = get_baseColorTexcoordIndex(materialSID, 0);\n  vec2 baseColorTexcoord = getTexcoord(baseColorTexcoordIndex);\n  vec2 baseColorTexUv = uvTransform(baseColorTextureTransform.xy, baseColorTextureTransform.zw, baseColorTextureRotation, baseColorTexcoord);\n  vec4 textureColor = texture(u_baseColorTexture, baseColorTexUv);\n  baseColor *= srgbToLinear(textureColor.rgb);\n  alpha *= textureColor.a;\n\n#ifdef RN_IS_ALPHAMODE_MASK\n  float alphaCutoff = get_alphaCutoff(materialSID, 0);\n  if (alpha < alphaCutoff) {\n    discard;\n  }\n#endif\n\n\n  // NdotV\n  vec3 viewDirection = normalize(viewVector);\n  float NdotV = saturateEpsilonToOne(dot(normal_inWorld, viewDirection));\n\n  // Clearcoat\n#ifdef RN_USE_CLEARCOAT\n  float clearcoatFactor = get_clearCoatFactor(materialSID, 0);\n  vec4 clearcoatTextureTransform = get_clearCoatTextureTransform(materialSID, 0);\n  float clearcoatTextureRotation = get_clearCoatTextureRotation(materialSID, 0);\n  int clearCoatTexcoordIndex = get_clearCoatTexcoordIndex(materialSID, 0);\n  vec2 clearCoatTexcoord = getTexcoord(clearCoatTexcoordIndex);\n  vec2 clearcoatTexUv = uvTransform(clearcoatTextureTransform.xy, clearcoatTextureTransform.zw, clearcoatTextureRotation, clearCoatTexcoord);\n  float clearcoatTexture = texture(u_clearCoatTexture, clearcoatTexUv).r;\n  float clearcoat = clearcoatFactor * clearcoatTexture;\n#else\n  float clearcoat = 0.0;\n#endif // RN_USE_CLEARCOAT\n\n  // Transmission\n#ifdef RN_USE_TRANSMISSION\n  float transmissionFactor = get_transmissionFactor(materialSID, 0);\n  float transmissionTexture = texture(u_transmissionTexture, baseColorTexUv).r;\n  float transmission = transmissionFactor * transmissionTexture;\n  // alpha *= transmission;\n#else\n  float transmission = 0.0;\n#endif // RN_USE_TRANSMISSION\n\n#ifdef RN_IS_LIGHTING\n  // Metallic & Roughness\n  vec2 metallicRoughnessFactor = get_metallicRoughnessFactor(materialSID, 0);\n  float perceptualRoughness = metallicRoughnessFactor.y;\n  float metallic = metallicRoughnessFactor.x;\n\n  vec4 metallicRoughnessTextureTransform = get_metallicRoughnessTextureTransform(materialSID, 0);\n  float metallicRoughnessTextureRotation = get_metallicRoughnessTextureRotation(materialSID, 0);\n  int metallicRoughnessTexcoordIndex = get_metallicRoughnessTexcoordIndex(materialSID, 0);\n  vec2 metallicRoughnessTexcoord = getTexcoord(metallicRoughnessTexcoordIndex);\n  vec2 metallicRoughnessTexUv = uvTransform(metallicRoughnessTextureTransform.xy, metallicRoughnessTextureTransform.zw, metallicRoughnessTextureRotation, metallicRoughnessTexcoord);\n  vec4 ormTexel = texture(u_metallicRoughnessTexture, metallicRoughnessTexUv);\n  perceptualRoughness = ormTexel.g * perceptualRoughness;\n  metallic = ormTexel.b * metallic;\n\n  perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n  metallic = clamp(metallic, 0.0, 1.0);\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n#ifdef RN_USE_SPECULAR\n  float specularTexture = texture(u_specularTexture, baseColorTexUv).a;\n  float specular = get_specularFactor(materialSID, 0) * specularTexture;\n  vec3 specularColorTexture = srgbToLinear(texture(u_specularTexture, baseColorTexUv).rgb);\n  vec3 specularColor = get_specularColorFactor(materialSID, 0) * specularColorTexture;\n#else\n  float specular = 1.0;\n  vec3 specularColor = vec3(1.0, 1.0, 1.0);\n#endif // RN_USE_SPECULAR\n\n  // F0, F90\n  float ior = get_ior(materialSID, 0);\n  float outsideIor = 1.0;\n  vec3 dielectricSpecularF0 = min(\n    ((ior - outsideIor) / (ior + outsideIor)) * ((ior - outsideIor) / (ior + outsideIor)) * specularColor,\n    vec3(1.0)\n    ) * specular;\n  vec3 dielectricSpecularF90 = vec3(specular);\n  vec3 F0 = mix(dielectricSpecularF0, baseColor.rgb, metallic);\n  vec3 F90 = mix(dielectricSpecularF90, vec3(1.0), metallic);\n\n  // Albedo\n  vec3 black = vec3(0.0);\n  vec3 albedo = mix(baseColor.rgb, black, metallic);\n\n  rt0 = vec4(0.0, 0.0, 0.0, alpha);\n\n// Iridescence\n#ifdef RN_USE_IRIDESCENCE\n  float iridescenceFactor = get_iridescenceFactor(materialSID, 0);\n  float iridescenceTexture = texture(u_iridescenceTexture, baseColorTexUv).r;\n  float iridescence = iridescenceFactor * iridescenceTexture;\n  float iridescenceIor = get_iridescenceIor(materialSID, 0);\n  float thicknessRatio = texture(u_iridescenceThicknessTexture, baseColorTexUv).r;\n  float iridescenceThicknessMinimum = get_iridescenceThicknessMinimum(materialSID, 0);\n  float iridescenceThicknessMaximum = get_iridescenceThicknessMaximum(materialSID, 0);\n  float iridescenceThickness = mix(iridescenceThicknessMinimum, iridescenceThicknessMaximum, thicknessRatio);\n\n  vec3 iridescenceFresnel = calcIridescence(1.0, iridescenceIor, NdotV, iridescenceThickness, F0);\n  vec3 iridescenceF0 = Schlick_to_F0(iridescenceFresnel, NdotV);\n\n#else\n  float iridescence = 0.0;\n  vec3 iridescenceFresnel = vec3(0.0);\n  vec3 iridescenceF0 = F0;\n#endif // RN_USE_IRIDESCENCE\n\n#ifdef RN_USE_CLEARCOAT\n  // Clearcoat\n  float clearcoatRoughnessFactor = get_clearCoatRoughnessFactor(materialSID, 0);\n  int clearCoatRoughnessTexcoordIndex = get_clearCoatRoughnessTexcoordIndex(materialSID, 0);\n  vec2 clearCoatRoughnessTexcoord = getTexcoord(clearCoatRoughnessTexcoordIndex);\n  vec4 clearcoatRoughnessTextureTransform = get_clearCoatRoughnessTextureTransform(materialSID, 0);\n  float clearcoatRoughnessTextureRotation = get_clearCoatRoughnessTextureRotation(materialSID, 0);\n  vec2 clearcoatRoughnessTexUv = uvTransform(clearcoatRoughnessTextureTransform.xy, clearcoatRoughnessTextureTransform.zw, clearcoatRoughnessTextureRotation, clearCoatRoughnessTexcoord);\n  float textureRoughnessTexture = texture(u_clearCoatRoughnessTexture, clearcoatRoughnessTexUv).g;\n  float clearcoatRoughness = clearcoatRoughnessFactor * textureRoughnessTexture;\n\n  int clearCoatNormalTexcoordIndex = get_clearCoatNormalTexcoordIndex(materialSID, 0);\n  vec2 clearCoatNormalTexcoord = getTexcoord(clearCoatNormalTexcoordIndex);\n  vec4 clearcoatNormalTextureTransform = get_clearCoatNormalTextureTransform(materialSID, 0);\n  float clearcoatNormalTextureRotation = get_clearCoatNormalTextureRotation(materialSID, 0);\n  vec2 clearcoatNormalTexUv = uvTransform(clearcoatNormalTextureTransform.xy, clearcoatNormalTextureTransform.zw, clearcoatNormalTextureRotation, clearCoatNormalTexcoord);\n  vec3 textureNormal_tangent = texture(u_clearCoatNormalTexture, clearcoatNormalTexUv).xyz * vec3(2.0) - vec3(1.0);\n  vec3 clearcoatNormal_inWorld = perturb_normal(geomNormal_inWorld, viewVector, normalTexUv, textureNormal_tangent);\n  float VdotNc = saturateEpsilonToOne(dot(viewDirection, clearcoatNormal_inWorld));\n#else\n  float clearcoatRoughness = 0.0;\n  vec3 clearcoatNormal_inWorld = vec3(0.0);\n  float VdotNc = 0.0;\n#endif // RN_USE_CLEARCOAT\n\n#ifdef RN_USE_VOLUME\n  // Volume\n  float thicknessFactor = get_thicknessFactor(materialSID, 0);\n  float thicknessTexture = texture(u_thicknessTexture, baseColorTexUv).g;\n  float attenuationDistance = get_attenuationDistance(materialSID, 0);\n  vec3 attenuationColor = get_attenuationColor(materialSID, 0);\n  float thickness = thicknessFactor * thicknessTexture;\n#else\n  float thickness = 0.0;\n  vec3 attenuationColor = vec3(0.0);\n  float attenuationDistance = 0.000001;\n#endif // RN_USE_VOLUME\n\n#ifdef RN_USE_SHEEN\n  // Sheen\n  vec3 sheenColorFactor = get_sheenColorFactor(materialSID, 0);\n  vec3 sheenColorTexture = texture(u_sheenColorTexture, baseColorTexUv).rgb;\n  float sheenRoughnessFactor = get_sheenRoughnessFactor(materialSID, 0);\n  float sheenRoughnessTexture = texture(u_sheenRoughnessTexture, baseColorTexUv).a;\n  vec3 sheenColor = sheenColorFactor * sheenColorTexture;\n  float sheenRoughness = clamp(sheenRoughnessFactor * sheenRoughnessTexture, 0.000001, 1.0);\n  float albedoSheenScalingNdotV = 1.0 - max3(sheenColor) * texture(u_sheenLutTexture, vec2(NdotV, sheenRoughness)).r;\n#else\n  vec3 sheenColor = vec3(0.0);\n  float sheenRoughness = 0.000001;\n  float albedoSheenScalingNdotV = 1.0;\n#endif // RN_USE_SHEEN\n\n  // Lighting\n  vec3 diffuse = vec3(0.0, 0.0, 0.0);\n  for (int i = 0; i < /* shaderity: @{Config.maxLightNumberInShader} */; i++) {\n    if (i >= lightNumber) {\n      break;\n    }\n\n    // Light\n    Light light = getLight(i, v_position_inWorld.xyz);\n\n    // Fresnel\n    vec3 halfVector = normalize(light.direction + viewDirection);\n    float VdotH = dot(viewDirection, halfVector);\n    vec3 F = fresnel(F0, F90, VdotH);\n\n    float NdotL = saturateEpsilonToOne(dot(normal_inWorld, light.direction));\n\n    // Diffuse\n    vec3 diffuseBrdf = diffuse_brdf(albedo);\n    vec3 pureDiffuse = (vec3(1.0) - F) * diffuseBrdf * vec3(NdotL) * light.attenuatedIntensity;\n\n#ifdef RN_USE_TRANSMISSION\n    vec3 refractionVector = refract(-viewDirection, normal_inWorld, 1.0 / ior);\n    Light transmittedLightFromUnderSurface = light;\n    transmittedLightFromUnderSurface.pointToLight -= refractionVector;\n    vec3 transmittedLightDirectionFromUnderSurface = normalize(transmittedLightFromUnderSurface.pointToLight);\n    transmittedLightFromUnderSurface.direction = transmittedLightDirectionFromUnderSurface;\n\n    vec3 Ht = normalize(viewDirection + transmittedLightFromUnderSurface.direction);\n    float NdotHt = saturateEpsilonToOne(dot(normal_inWorld, Ht));\n    float NdotLt = saturateEpsilonToOne(dot(normal_inWorld, transmittedLightFromUnderSurface.direction));\n\n    vec3 transmittedContrib = (vec3(1.0) - F) * specular_btdf(alphaRoughness, NdotLt, NdotV, NdotHt) * albedo * transmittedLightFromUnderSurface.attenuatedIntensity;\n\n#ifdef RN_USE_VOLUME\n    vec3 attenuationColor = get_attenuationColor(materialSID, 0);\n    float attenuationDistance = get_attenuationDistance(materialSID, 0);\n    transmittedContrib = volumeAttenuation(attenuationColor, attenuationDistance, transmittedContrib, length(transmittedLightFromUnderSurface.pointToLight));\n#endif // RN_USE_VOLUME\n\n    vec3 diffuseContrib = mix(pureDiffuse, vec3(transmittedContrib), transmission);\n#else\n    vec3 diffuseContrib = pureDiffuse;\n#endif // RN_USE_TRANSMISSION\n\n    // Specular\n    float NdotH = saturateEpsilonToOne(dot(normal_inWorld, halfVector));\n    vec3 specularContrib = cook_torrance_specular_brdf(NdotH, NdotL, NdotV, F, alphaRoughness) * vec3(NdotL) * light.attenuatedIntensity;\n\n    // Base Layer\n    vec3 baseLayer = diffuseContrib + specularContrib;\n\n#ifdef RN_USE_SHEEN\n    // Sheen\n    vec3 sheenContrib = sheen_brdf(sheenColor, sheenRoughness, NdotL, NdotV, NdotH) * NdotL * light.attenuatedIntensity;\n    float albedoSheenScaling = min(\n      albedoSheenScalingNdotV,\n      1.0 - max3(sheenColor) * texture(u_sheenLutTexture, vec2(NdotL, sheenRoughness)).r);\n    vec3 color = sheenContrib + baseLayer * albedoSheenScaling;\n#else\n    vec3 color = baseLayer;\n    float albedoSheenScaling = 1.0;\n#endif // RN_USE_SHEEN\n\n#ifdef RN_USE_CLEARCOAT\n    // Clear Coat Layer\n    float NdotHc = saturateEpsilonToOne(dot(clearcoatNormal_inWorld, halfVector));\n    float LdotNc = saturateEpsilonToOne(dot(light.direction, clearcoatNormal_inWorld));\n    vec3 coated = coated_material_s(color, perceptualRoughness,\n      clearcoatRoughness, clearcoat, VdotNc, LdotNc, NdotHc);\n    rt0.xyz += coated;\n#else\n    rt0.xyz += color;\n#endif // RN_USE_CLEARCOAT\n  }\n\n#ifdef RN_USE_SHADOW_MAPPING\n  float bias = 0.001;\n  float shadowContribusion = varianceShadowContribution(v_shadowCoord.xy/v_shadowCoord.w, (v_shadowCoord.z - bias)/v_shadowCoord.w);\n  // rt0.rgb = rt0.rgb * (0.5 + shadowContribusion * 0.5);\n  rt0.rgb = rt0.rgb * shadowContribusion;\n#endif\n\n  vec3 ibl = IBLContribution(materialSID, normal_inWorld, NdotV, viewDirection,\n    albedo, F0, perceptualRoughness, clearcoatRoughness, clearcoatNormal_inWorld,\n    clearcoat, VdotNc, geomNormal_inWorld, cameraSID, transmission, v_position_inWorld.xyz, thickness,\n    sheenColor, sheenRoughness, albedoSheenScalingNdotV, ior, iridescenceFresnel, iridescenceF0, iridescence);\n\n  int occlusionTexcoordIndex = get_occlusionTexcoordIndex(materialSID, 0);\n  vec2 occlusionTexcoord = getTexcoord(occlusionTexcoordIndex);\n  vec4 occlusionTextureTransform = get_occlusionTextureTransform(materialSID, 0);\n  float occlusionTextureRotation = get_occlusionTextureRotation(materialSID, 0);\n  vec2 occlusionTexUv = uvTransform(occlusionTextureTransform.xy, occlusionTextureTransform.zw, occlusionTextureRotation, occlusionTexcoord);\n  float occlusion = texture(u_occlusionTexture, occlusionTexUv).r;\n  float occlusionStrength = get_occlusionStrength(materialSID, 0);\n\n  // Occlution to Indirect Lights\n  rt0.xyz += mix(ibl, ibl * occlusion, occlusionStrength);\n#else\n  rt0 = vec4(baseColor, alpha);\n#endif // RN_IS_LIGHTING\n\n  // Emissive\n  vec3 emissiveFactor = get_emissiveFactor(materialSID, 0);\n  int emissiveTexcoordIndex = get_emissiveTexcoordIndex(materialSID, 0);\n  vec2 emissiveTexcoord = getTexcoord(emissiveTexcoordIndex);\n  vec4 emissiveTextureTransform = get_emissiveTextureTransform(materialSID, 0);\n  float emissiveTextureRotation = get_emissiveTextureRotation(materialSID, 0);\n  vec2 emissiveTexUv = uvTransform(emissiveTextureTransform.xy, emissiveTextureTransform.zw, emissiveTextureRotation, emissiveTexcoord);\n  vec3 emissive = emissiveFactor * srgbToLinear(texture(u_emissiveTexture, emissiveTexUv).xyz);\n\n#ifdef RN_USE_CLEARCOAT\n  vec3 coated_emissive = emissive * mix(vec3(1.0), vec3(0.04 + (1.0 - 0.04) * pow(1.0 - NdotV, 5.0)), clearcoat);\n  rt0.xyz += coated_emissive;\n#else\n  rt0.xyz += emissive;\n#endif // RN_USE_CLEARCOAT\n\n  bool isOutputHDR = get_isOutputHDR(materialSID, 0);\n  if(isOutputHDR){\n/* shaderity: @{renderTargetEnd} */\n\n    return;\n  }\n\n#ifdef RN_IS_ALPHAMODE_OPAQUE\n  rt0.a = 1.0;\n#elif defined(RN_IS_ALPHAMODE_MASK)\n  rt0.a = 1.0;\n#endif\n\n\n  // Wireframe\n  float threshold = 0.001;\n  vec3 wireframe = get_wireframe(materialSID, 0);\n  float wireframeWidthInner = wireframe.z;\n  float wireframeWidthRelativeScale = 1.0;\n  if (wireframe.x > 0.5 && wireframe.y < 0.5) {\n    rt0.a = 0.0;\n  }\n  vec4 wireframeResult = rt0;\n  vec4 wireframeColor = vec4(0.2, 0.75, 0.0, 1.0);\n  float edgeRatio = edge_ratio(v_baryCentricCoord, wireframeWidthInner, wireframeWidthRelativeScale);\n  float edgeRatioModified = mix(step(threshold, edgeRatio), clamp(edgeRatio*4.0, 0.0, 1.0), wireframeWidthInner / wireframeWidthRelativeScale/4.0);\n  // if r0.a is 0.0, it is wireframe not on shaded\n  wireframeResult.rgb = wireframeColor.rgb * edgeRatioModified + rt0.rgb * (1.0 - edgeRatioModified);\n  wireframeResult.a = max(rt0.a, wireframeColor.a * mix(edgeRatioModified, pow(edgeRatioModified, 100.0), wireframeWidthInner / wireframeWidthRelativeScale/1.0));\n\n  if (wireframe.x > 0.5) {\n    rt0 = wireframeResult;\n    if (wireframe.y < 0.5 && rt0.a == 0.0) {\n      discard;\n    }\n  }\n\n  // rt0.rgb = vec3(texture(u_depthTexture, v_shadowCoord.xy/v_shadowCoord.w).r);\n\n  // premultiplied alpha\n  // rt0.rgb /= alpha;\n\nfloat makeOutputSrgb = float(get_makeOutputSrgb(materialSID, 0));\nrt0.rgb = mix(rt0.rgb, linearToSrgb(rt0.rgb), makeOutputSrgb);\n\nrt1 = rt0;\nrt2 = rt0;\nrt3 = rt0;\n/* shaderity: @{renderTargetEnd} */\n\n\n}\n",shaderStage:"fragment",isFragmentShader:!0};var P=n(5757),R=n(4878);const D={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\nin vec4 a_instanceInfo;\nin vec2 a_texcoord_0;\nin vec3 a_position;\nout vec2 v_texcoord_0;\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nvoid main(){\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\nmat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n\n#ifdef RN_NO_CAMERA_TRANSFORM\n  gl_Position = worldMatrix * vec4(a_position, 1.0);\n#else\n\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  gl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\n\n#endif\n\n\n  v_texcoord_0 = a_texcoord_0;\n}\n",shaderStage:"vertex",isFragmentShader:!1},M={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/**\n * This file contains source code provided by NVIDIA Corporation.\n * FXAA antialiasing is developed by NVIDIA.\n * The codes of this file is modified from original code to work on WebGL1.\n * The modification for GLSL 100 is referred from Three.js, https://github.com/mrdoob/three.js/blob/5ba4c25bcb74577e1b1e14906f345135610a94f3/examples/js/shaders/FXAAShader.js\n * The original FXAA code is https://github.com/NVIDIAGameWorks/GraphicsSamples/blob/80e8ba8f5e8935821513207033490735dd3279d8/samples/es3-kepler/FXAA/FXAA3_11.h\n */\n\n//----------------------------------------------------------------------------------\n// File:        es3-kepler\\FXAA/FXAA3_11.h\n// SDK Version: v3.00\n// Email:       gameworks@nvidia.com\n// Site:        http://developer.nvidia.com/\n//\n// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions\n// are met:\n//  * Redistributions of source code must retain the above copyright\n//    notice, this list of conditions and the following disclaimer.\n//  * Redistributions in binary form must reproduce the above copyright\n//    notice, this list of conditions and the following disclaimer in the\n//    documentation and/or other materials provided with the distribution.\n//  * Neither the name of NVIDIA CORPORATION nor the names of its\n//    contributors may be used to endorse or promote products derived\n//    from this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS 'AS IS' AND ANY\n// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n//----------------------------------------------------------------------------------\n/*============================================================================\n                    NVIDIA FXAA 3.11 by TIMOTHY LOTTES\n============================================================================*/\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\nin vec2 v_texcoord_0;\n\nuniform sampler2D u_baseColorTexture; // initialValue=(0,white)\nuniform vec2 u_screenInfo; // initialValue=(0,0)\n\n/* shaderity: @{renderTargetBegin} */\n\n\n/* shaderity: @{getters} */\n\n\n\n  #define FXAA_PC 1\n  #define FXAA_QUALITYPRESET 39\n  #define FXAA_GREEN_AS_LUMA 0\n  #define FXAA_GLSL_100 1\n\n  /*============================================================================\n                                INTEGRATION KNOBS\n  ============================================================================*/\n  //\n  // FXAA_PS3 and FXAA_360 choose the console algorithm (FXAA3 CONSOLE).\n  // FXAA_360_OPT is a prototype for the new optimized 360 version.\n  //\n  // 1 = Use API.\n  // 0 = Don't use API.\n  //\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_PS3\n  #define FXAA_PS3 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_360\n  #define FXAA_360 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_360_OPT\n  #define FXAA_360_OPT 0\n  #endif\n  /*==========================================================================*/\n  #ifndef FXAA_PC\n  //\n  // FXAA Quality\n  // The high quality PC algorithm.\n  //\n  #define FXAA_PC 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_PC_CONSOLE\n  //\n  // The console algorithm for PC is included\n  // for developers targeting really low spec machines.\n  // Likely better to just run FXAA_PC, and use a really low preset.\n  //\n  #define FXAA_PC_CONSOLE 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_GLSL_120\n  #define FXAA_GLSL_120 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_GLSL_130\n  #define FXAA_GLSL_130 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_HLSL_3\n  #define FXAA_HLSL_3 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_HLSL_4\n  #define FXAA_HLSL_4 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_HLSL_5\n  #define FXAA_HLSL_5 0\n  #endif\n  /*==========================================================================*/\n  #ifndef FXAA_GREEN_AS_LUMA\n  //\n  // For those using non-linear color,\n  // and either not able to get luma in alpha, or not wanting to,\n  // this enables FXAA to run using green as a proxy for luma.\n  // So with this enabled, no need to pack luma in alpha.\n  //\n  // This will turn off AA on anything which lacks some amount of green.\n  // Pure red and blue or combination of only R and B, will get no AA.\n  //\n  // Might want to lower the settings for both,\n  //    fxaaConsoleEdgeThresholdMin\n  //    fxaaQualityEdgeThresholdMin\n  // In order to insure AA does not get turned off on colors\n  // which contain a minor amount of green.\n  //\n  // 1 = On.\n  // 0 = Off.\n  //\n  #define FXAA_GREEN_AS_LUMA 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_EARLY_EXIT\n  //\n  // Controls algorithm's early exit path.\n  // On PS3 turning this ON adds 2 cycles to the shader.\n  // On 360 turning this OFF adds 10ths of a millisecond to the shader.\n  // Turning this off on console will result in a more blurry image.\n  // So this defaults to on.\n  //\n  // 1 = On.\n  // 0 = Off.\n  //\n  #define FXAA_EARLY_EXIT 1\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_DISCARD\n  //\n  // Only valid for PC OpenGL currently.\n  // Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n  //\n  // 1 = Use discard on pixels which don't need AA.\n  //     For APIs which enable concurrent TEX+ROP from same surface.\n  // 0 = Return unchanged color on pixels which don't need AA.\n  //\n  #define FXAA_DISCARD 0\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_FAST_PIXEL_OFFSET\n  //\n  // Used for GLSL 120 only.\n  //\n  // 1 = GL API supports fast pixel offsets\n  // 0 = do not use fast pixel offsets\n  //\n  #ifdef GLEXT_gpu_shader4\n  #define FXAA_FAST_PIXEL_OFFSET 1\n  #endif\n  #ifdef GLNV_gpu_shader5\n  #define FXAA_FAST_PIXEL_OFFSET 1\n  #endif\n  #ifdef GLARB_gpu_shader5\n  #define FXAA_FAST_PIXEL_OFFSET 1\n  #endif\n  #ifndef FXAA_FAST_PIXEL_OFFSET\n  #define FXAA_FAST_PIXEL_OFFSET 0\n  #endif\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_GATHER4_ALPHA\n  //\n  // 1 = API supports gather4 on alpha channel.\n  // 0 = API does not support gather4 on alpha channel.\n  //\n  #if (FXAA_HLSL_5 == 1)\n  #define FXAA_GATHER4_ALPHA 1\n  #endif\n  #ifdef GLARB_gpu_shader5\n  #define FXAA_GATHER4_ALPHA 1\n  #endif\n  #ifdef GLNV_gpu_shader5\n  #define FXAA_GATHER4_ALPHA 1\n  #endif\n  #ifndef FXAA_GATHER4_ALPHA\n  #define FXAA_GATHER4_ALPHA 0\n  #endif\n  #endif\n\n  /*============================================================================\n                        FXAA CONSOLE PS3 - TUNING KNOBS\n  ============================================================================*/\n  #ifndef FXAA_CONSOLEPS3_EDGE_SHARPNESS\n  //\n  // Consoles the sharpness of edges on PS3 only.\n  // Non-PS3 tuning is done with shader input.\n  //\n  // Due to the PS3 being ALU bound,\n  // there are only two safe values here: 4 and 8.\n  // These options use the shaders ability to a free *|/ by 2|4|8.\n  //\n  // 8.0 is sharper\n  // 4.0 is softer\n  // 2.0 is really soft (good for vector graphics inputs)\n  //\n  #if 1\n  #define FXAA_CONSOLEPS3_EDGE_SHARPNESS 8.0\n  #endif\n  #if 0\n  #define FXAA_CONSOLEPS3_EDGE_SHARPNESS 4.0\n  #endif\n  #if 0\n  #define FXAA_CONSOLEPS3_EDGE_SHARPNESS 2.0\n  #endif\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #ifndef FXAA_CONSOLEPS3_EDGE_THRESHOLD\n  //\n  // Only effects PS3.\n  // Non-PS3 tuning is done with shader input.\n  //\n  // The minimum amount of local contrast required to apply algorithm.\n  // The console setting has a different mapping than the quality setting.\n  //\n  // This only applies when FXAA_EARLY_EXIT is 1.\n  //\n  // Due to the PS3 being ALU bound,\n  // there are only two safe values here: 0.25 and 0.125.\n  // These options use the shaders ability to a free *|/ by 2|4|8.\n  //\n  // 0.125 leaves less aliasing, but is softer\n  // 0.25 leaves more aliasing, and is sharper\n  //\n  #if 1\n  #define FXAA_CONSOLEPS3_EDGE_THRESHOLD 0.125\n  #else\n  #define FXAA_CONSOLEPS3_EDGE_THRESHOLD 0.25\n  #endif\n  #endif\n\n  /*============================================================================\n                          FXAA QUALITY - TUNING KNOBS\n  ------------------------------------------------------------------------------\n  NOTE the other tuning knobs are now in the shader function inputs!\n  ============================================================================*/\n  #ifndef FXAA_QUALITYPRESET\n  //\n  // Choose the quality preset.\n  // This needs to be compiled into the shader as it effects code.\n  // Best option to include multiple presets is to\n  // in each shader define the preset, then include this file.\n  //\n  // OPTIONS\n  // -----------------------------------------------------------------------\n  // 10 to 15 - default medium dither (10=fastest, 15=highest quality)\n  // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)\n  // 39       - no dither, very expensive\n  //\n  // NOTES\n  // -----------------------------------------------------------------------\n  // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)\n  // 13 = about same speed as FXAA 3.9 and better than 12\n  // 23 = closest to FXAA 3.9 visually and performance wise\n  //  _ = the lowest digit is directly related to performance\n  // _  = the highest digit is directly related to style\n  //\n  #define FXAA_QUALITYPRESET 12\n  #endif\n\n\n  /*============================================================================\n                             FXAA QUALITY - PRESETS\n  ============================================================================*/\n\n  /*============================================================================\n                       FXAA QUALITY - MEDIUM DITHER PRESETS\n  ============================================================================*/\n  #if(FXAA_QUALITYPRESET == 10)\n#define FXAA_QUALITYPS 3\n#define FXAA_QUALITYP0 1.5\n#define FXAA_QUALITYP1 3.0\n#define FXAA_QUALITYP2 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 11)\n#define FXAA_QUALITYPS 4\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 3.0\n#define FXAA_QUALITYP3 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 12)\n#define FXAA_QUALITYPS 5\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 4.0\n#define FXAA_QUALITYP4 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 13)\n#define FXAA_QUALITYPS 6\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 4.0\n#define FXAA_QUALITYP5 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 14)\n#define FXAA_QUALITYPS 7\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 4.0\n#define FXAA_QUALITYP6 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 15)\n#define FXAA_QUALITYPS 8\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 2.0\n#define FXAA_QUALITYP6 4.0\n#define FXAA_QUALITYP7 12.0\n#endif\n\n/*============================================================================\n                     FXAA QUALITY - LOW DITHER PRESETS\n============================================================================*/\n#if (FXAA_QUALITYPRESET == 20)\n#define FXAA_QUALITYPS 3\n#define FXAA_QUALITYP0 1.5\n#define FXAA_QUALITYP1 2.0\n#define FXAA_QUALITYP2 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 21)\n#define FXAA_QUALITYPS 4\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 22)\n#define FXAA_QUALITYPS 5\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 23)\n#define FXAA_QUALITYPS 6\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 24)\n#define FXAA_QUALITYPS 7\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 3.0\n#define FXAA_QUALITYP6 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 25)\n#define FXAA_QUALITYPS 8\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 2.0\n#define FXAA_QUALITYP6 4.0\n#define FXAA_QUALITYP7 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 26)\n#define FXAA_QUALITYPS 9\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 2.0\n#define FXAA_QUALITYP6 2.0\n#define FXAA_QUALITYP7 4.0\n#define FXAA_QUALITYP8 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 27)\n#define FXAA_QUALITYPS 10\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 2.0\n#define FXAA_QUALITYP6 2.0\n#define FXAA_QUALITYP7 2.0\n#define FXAA_QUALITYP8 4.0\n#define FXAA_QUALITYP9 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 28)\n#define FXAA_QUALITYPS 11\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 2.0\n#define FXAA_QUALITYP6 2.0\n#define FXAA_QUALITYP7 2.0\n#define FXAA_QUALITYP8 2.0\n#define FXAA_QUALITYP9 4.0\n#define FXAA_QUALITYP10 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITYPRESET == 29)\n#define FXAA_QUALITYPS 12\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.5\n#define FXAA_QUALITYP2 2.0\n#define FXAA_QUALITYP3 2.0\n#define FXAA_QUALITYP4 2.0\n#define FXAA_QUALITYP5 2.0\n#define FXAA_QUALITYP6 2.0\n#define FXAA_QUALITYP7 2.0\n#define FXAA_QUALITYP8 2.0\n#define FXAA_QUALITYP9 2.0\n#define FXAA_QUALITYP10 4.0\n#define FXAA_QUALITYP11 8.0\n#endif\n\n/*============================================================================\n                     FXAA QUALITY - EXTREME QUALITY\n============================================================================*/\n#if (FXAA_QUALITYPRESET == 39)\n#define FXAA_QUALITYPS 12\n#define FXAA_QUALITYP0 1.0\n#define FXAA_QUALITYP1 1.0\n#define FXAA_QUALITYP2 1.0\n#define FXAA_QUALITYP3 1.0\n#define FXAA_QUALITYP4 1.0\n#define FXAA_QUALITYP5 1.5\n#define FXAA_QUALITYP6 2.0\n#define FXAA_QUALITYP7 2.0\n#define FXAA_QUALITYP8 2.0\n#define FXAA_QUALITYP9 2.0\n#define FXAA_QUALITYP10 4.0\n#define FXAA_QUALITYP11 8.0\n#endif\n\n\n\n/*============================================================================\n                                API PORTING\n============================================================================*/\n#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)\n#define FxaaBool bool\n#define FxaaDiscard discard\n#define FxaaFloat float\n#define FxaaFloat2 vec2\n#define FxaaFloat3 vec3\n#define FxaaFloat4 vec4\n#define FxaaHalf float\n#define FxaaHalf2 vec2\n#define FxaaHalf3 vec3\n#define FxaaHalf4 vec4\n#define FxaaInt2 ivec2\n#define FxaaSat(x) clamp(x, 0.0, 1.0)\n#define FxaaTex sampler2D\n#else\n#define FxaaBool bool\n#define FxaaDiscard clip(-1)\n#define FxaaFloat float\n#define FxaaFloat2 float2\n#define FxaaFloat3 float3\n#define FxaaFloat4 float4\n#define FxaaHalf half\n#define FxaaHalf2 half2\n#define FxaaHalf3 half3\n#define FxaaHalf4 half4\n#define FxaaSat(x) saturate(x)\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_GLSL_100 == 1)\n#define FxaaTexTop(t, p) texture(t, p, 0.0)\n#define FxaaTexOff(t, p, o, r) texture(t, p + (o * r), 0.0)\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_GLSL_120 == 1)\n// Requires,\n//  #version 120\n// And at least,\n//  #extension GLEXT_gpu_shader4 : enable\n//  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)\n#define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)\n#if (FXAA_FAST_PIXEL_OFFSET == 1)\n#define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)\n#else\n#define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)\n#endif\n#if (FXAA_GATHER4_ALPHA == 1)\n// use #extension GLARB_gpu_shader5 : enable\n#define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n#define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n#define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n#define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n#endif\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_GLSL_130 == 1)\n// Requires \"#version 130\" or better\n#define FxaaTexTop(t, p) textureLod(t, p, 0.0)\n#define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)\n#if (FXAA_GATHER4_ALPHA == 1)\n// use #extension GLARB_gpu_shader5 : enable\n#define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n#define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n#define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n#define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n#endif\n#endif\n\n\n/*============================================================================\n                   GREEN AS LUMA OPTION SUPPORT FUNCTION\n============================================================================*/\n#if (FXAA_GREEN_AS_LUMA == 0)\n  FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return dot(rgba.rgb, vec3(0.298912, 0.586611, 0.114478)); }\n  // FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }\n#else\n  FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\n#endif\n\n\n\n\n\n\n\n\n\n/*============================================================================\n                             FXAA3 QUALITY - PC\n============================================================================*/\n#if (FXAA_PC == 1)\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat4 FxaaPixelShader(\n    //\n    // Use noperspective interpolation here (turn off perspective interpolation).\n    // {xy} = center of pixel\n    FxaaFloat2 pos,\n    //\n    // Used only for FXAA Console, and not used on the 360 version.\n    // Use noperspective interpolation here (turn off perspective interpolation).\n    // {xy} = upper left of pixel\n    // {zw} = lower right of pixel\n    FxaaFloat4 fxaaConsolePosPos,\n    //\n    // Input color texture.\n    // {rgb_} = color in linear or perceptual color space\n    // if (FXAA_GREEN_AS_LUMA == 0)\n    //     {_a} = luma in perceptual color space (not linear)\n    FxaaTex tex,\n    //\n    // Only used on the optimized 360 version of FXAA Console.\n    // For everything but 360, just use the same input here as for \"tex\".\n    // For 360, same texture, just alias with a 2nd sampler.\n    // This sampler needs to have an exponent bias of -1.\n    FxaaTex fxaaConsole360TexExpBiasNegOne,\n    //\n    // Only used on the optimized 360 version of FXAA Console.\n    // For everything but 360, just use the same input here as for \"tex\".\n    // For 360, same texture, just alias with a 3nd sampler.\n    // This sampler needs to have an exponent bias of -2.\n    FxaaTex fxaaConsole360TexExpBiasNegTwo,\n    //\n    // Only used on FXAA Quality.\n    // This must be from a constant/uniform.\n    // {x_} = 1.0/screenWidthInPixels\n    // {_y} = 1.0/screenHeightInPixels\n    FxaaFloat2 fxaaQualityRcpFrame,\n    //\n    // Only used on FXAA Console.\n    // This must be from a constant/uniform.\n    // This effects sub-pixel AA quality and inversely sharpness.\n    //   Where N ranges between,\n    //     N = 0.50 (default)\n    //     N = 0.33 (sharper)\n    // {x_} = -N/screenWidthInPixels\n    // {_y} = -N/screenHeightInPixels\n    // {z_} =  N/screenWidthInPixels\n    // {_w} =  N/screenHeightInPixels\n    FxaaFloat4 fxaaConsoleRcpFrameOpt,\n    //\n    // Only used on FXAA Console.\n    // Not used on 360, but used on PS3 and PC.\n    // This must be from a constant/uniform.\n    // {x_} = -2.0/screenWidthInPixels\n    // {_y} = -2.0/screenHeightInPixels\n    // {z_} =  2.0/screenWidthInPixels\n    // {_w} =  2.0/screenHeightInPixels\n    FxaaFloat4 fxaaConsoleRcpFrameOpt2,\n    //\n    // Only used on FXAA Console.\n    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.\n    // This must be from a constant/uniform.\n    // {x_} =  8.0/screenWidthInPixels\n    // {_y} =  8.0/screenHeightInPixels\n    // {z_} = -4.0/screenWidthInPixels\n    // {_w} = -4.0/screenHeightInPixels\n    FxaaFloat4 fxaaConsole360RcpFrameOpt2,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITYSUBPIX define.\n    // It is here now to allow easier tuning.\n    // Choose the amount of sub-pixel aliasing removal.\n    // This can effect sharpness.\n    //   1.00 - upper limit (softer)\n    //   0.75 - default amount of filtering\n    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)\n    //   0.25 - almost off\n    //   0.00 - completely off\n    FxaaFloat fxaaQualitySubpix,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITYEDGE_THRESHOLD define.\n    // It is here now to allow easier tuning.\n    // The minimum amount of local contrast required to apply algorithm.\n    //   0.333 - too little (faster)\n    //   0.250 - low quality\n    //   0.166 - default\n    //   0.125 - high quality\n    //   0.063 - overkill (slower)\n    FxaaFloat fxaaQualityEdgeThreshold,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITYEDGE_THRESHOLD_MIN define.\n    // It is here now to allow easier tuning.\n    // Trims the algorithm from processing darks.\n    //   0.0833 - upper limit (default, the start of visible unfiltered edges)\n    //   0.0625 - high quality (faster)\n    //   0.0312 - visible limit (slower)\n    // Special notes when using FXAA_GREEN_AS_LUMA,\n    //   Likely want to set this to zero.\n    //   As colors that are mostly not-green\n    //   will appear very dark in the green channel!\n    //   Tune by looking at mostly non-green content,\n    //   then start at zero and increase until aliasing is a problem.\n    FxaaFloat fxaaQualityEdgeThresholdMin,\n    //\n    // Only used on FXAA Console.\n    // This used to be the FXAA_CONSOLEEDGE_SHARPNESS define.\n    // It is here now to allow easier tuning.\n    // This does not effect PS3, as this needs to be compiled in.\n    //   Use FXAA_CONSOLEPS3_EDGE_SHARPNESS for PS3.\n    //   Due to the PS3 being ALU bound,\n    //   there are only three safe values here: 2 and 4 and 8.\n    //   These options use the shaders ability to a free *|/ by 2|4|8.\n    // For all other platforms can be a non-power of two.\n    //   8.0 is sharper (default!!!)\n    //   4.0 is softer\n    //   2.0 is really soft (good only for vector graphics inputs)\n    FxaaFloat fxaaConsoleEdgeSharpness,\n    //\n    // Only used on FXAA Console.\n    // This used to be the FXAA_CONSOLEEDGE_THRESHOLD define.\n    // It is here now to allow easier tuning.\n    // This does not effect PS3, as this needs to be compiled in.\n    //   Use FXAA_CONSOLEPS3_EDGE_THRESHOLD for PS3.\n    //   Due to the PS3 being ALU bound,\n    //   there are only two safe values here: 1/4 and 1/8.\n    //   These options use the shaders ability to a free *|/ by 2|4|8.\n    // The console setting has a different mapping than the quality setting.\n    // Other platforms can use other values.\n    //   0.125 leaves less aliasing, but is softer (default!!!)\n    //   0.25 leaves more aliasing, and is sharper\n    FxaaFloat fxaaConsoleEdgeThreshold,\n    //\n    // Only used on FXAA Console.\n    // This used to be the FXAA_CONSOLEEDGE_THRESHOLD_MIN define.\n    // It is here now to allow easier tuning.\n    // Trims the algorithm from processing darks.\n    // The console setting has a different mapping than the quality setting.\n    // This only applies when FXAA_EARLY_EXIT is 1.\n    // This does not apply to PS3,\n    // PS3 was simplified to avoid more shader instructions.\n    //   0.06 - faster but more aliasing in darks\n    //   0.05 - default\n    //   0.04 - slower and less aliasing in darks\n    // Special notes when using FXAA_GREEN_AS_LUMA,\n    //   Likely want to set this to zero.\n    //   As colors that are mostly not-green\n    //   will appear very dark in the green channel!\n    //   Tune by looking at mostly non-green content,\n    //   then start at zero and increase until aliasing is a problem.\n    FxaaFloat fxaaConsoleEdgeThresholdMin,\n    //\n    // Extra constants for 360 FXAA Console only.\n    // Use zeros or anything else for other platforms.\n    // These must be in physical constant registers and NOT immedates.\n    // Immedates will result in compiler un-optimizing.\n    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)\n    FxaaFloat4 fxaaConsole360ConstDir\n  ) {\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat2 posM;\n  posM.x = pos.x;\n  posM.y = pos.y;\n  #if (FXAA_GATHER4_ALPHA == 1)\n  #if (FXAA_DISCARD == 0)\n    FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n  #if (FXAA_GREEN_AS_LUMA == 0)\n  #define lumaM rgbyM.w\n  #else\n  #define lumaM rgbyM.y\n  #endif\n  #endif\n  #if (FXAA_GREEN_AS_LUMA == 0)\n    FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);\n  FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));\n  #else\n  FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);\n  FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));\n  #endif\n  #if (FXAA_DISCARD == 1)\n  #define lumaM luma4A.w\n  #endif\n  #define lumaE luma4A.z\n  #define lumaS luma4A.x\n  #define lumaSE luma4A.y\n  #define lumaNW luma4B.w\n  #define lumaN luma4B.z\n  #define lumaW luma4B.x\n  #else\n  FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n  #if (FXAA_GREEN_AS_LUMA == 0)\n  #define lumaM rgbyM.w\n  #else\n  #define lumaM rgbyM.y\n  #endif\n  #if (FXAA_GLSL_100 == 1)\n    FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(0.0, 1.0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(1.0, 0.0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(0.0, -1.0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));\n  #else\n  FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(0, 1), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, 0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(0, -1), fxaaQualityRcpFrame.xy));\n  #endif\n  #endif\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat maxSM = max(lumaS, lumaM);\n  FxaaFloat minSM = min(lumaS, lumaM);\n  FxaaFloat maxESM = max(lumaE, maxSM);\n  FxaaFloat minESM = min(lumaE, minSM);\n  FxaaFloat maxWN = max(lumaN, lumaW);\n  FxaaFloat minWN = min(lumaN, lumaW);\n  FxaaFloat rangeMax = max(maxWN, maxESM);\n  FxaaFloat rangeMin = min(minWN, minESM);\n  FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n  FxaaFloat range = rangeMax - rangeMin;\n  FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n  FxaaBool earlyExit = range < rangeMaxClamped;\n  /*--------------------------------------------------------------------------*/\n  if (earlyExit)\n  #if (FXAA_DISCARD == 1)\n    FxaaDiscard;\n  #else\n  return rgbyM;\n  #endif\n  /*--------------------------------------------------------------------------*/\n  #if (FXAA_GATHER4_ALPHA == 0)\n  #if (FXAA_GLSL_100 == 1)\n    FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, -1.0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(1.0, 1.0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(1.0, -1.0), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));\n  #else\n  FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, -1), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, 1), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n  #endif\n  #else\n  FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));\n  FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n  #endif\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat lumaNS = lumaN + lumaS;\n  FxaaFloat lumaWE = lumaW + lumaE;\n  FxaaFloat subpixRcpRange = 1.0 / range;\n  FxaaFloat subpixNSWE = lumaNS + lumaWE;\n  FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n  FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat lumaNESE = lumaNE + lumaSE;\n  FxaaFloat lumaNWNE = lumaNW + lumaNE;\n  FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n  FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat lumaNWSW = lumaNW + lumaSW;\n  FxaaFloat lumaSWSE = lumaSW + lumaSE;\n  FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n  FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n  FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n  FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n  FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n  FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n  FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n  FxaaBool horzSpan = edgeHorz >= edgeVert;\n  FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n  /*--------------------------------------------------------------------------*/\n  if (!horzSpan) lumaN = lumaW;\n  if (!horzSpan) lumaS = lumaE;\n  if (horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n  FxaaFloat subpixB = (subpixA * (1.0 / 12.0)) - lumaM;\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat gradientN = lumaN - lumaM;\n  FxaaFloat gradientS = lumaS - lumaM;\n  FxaaFloat lumaNN = lumaN + lumaM;\n  FxaaFloat lumaSS = lumaS + lumaM;\n  FxaaBool pairN = abs(gradientN) >= abs(gradientS);\n  FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n  if (pairN) lengthSign = -lengthSign;\n  FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat2 posB;\n  posB.x = posM.x;\n  posB.y = posM.y;\n  FxaaFloat2 offNP;\n  offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n  offNP.y = (horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n  if (!horzSpan) posB.x += lengthSign * 0.5;\n  if (horzSpan) posB.y += lengthSign * 0.5;\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat2 posN;\n  posN.x = posB.x - offNP.x * FXAA_QUALITYP0;\n  posN.y = posB.y - offNP.y * FXAA_QUALITYP0;\n  FxaaFloat2 posP;\n  posP.x = posB.x + offNP.x * FXAA_QUALITYP0;\n  posP.y = posB.y + offNP.y * FXAA_QUALITYP0;\n  FxaaFloat subpixD = ((-2.0) * subpixC) + 3.0;\n  FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\n  FxaaFloat subpixE = subpixC * subpixC;\n  FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\n  /*--------------------------------------------------------------------------*/\n  if (!pairN) lumaNN = lumaSS;\n  FxaaFloat gradientScaled = gradient * 1.0 / 4.0;\n  FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n  FxaaFloat subpixF = subpixD * subpixE;\n  FxaaBool lumaMLTZero = lumaMM < 0.0;\n  /*--------------------------------------------------------------------------*/\n  lumaEndN -= lumaNN * 0.5;\n  lumaEndP -= lumaNN * 0.5;\n  FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n  FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n  if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP1;\n  if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP1;\n  FxaaBool doneNP = (!doneN) || (!doneP);\n  if (!doneP) posP.x += offNP.x * FXAA_QUALITYP1;\n  if (!doneP) posP.y += offNP.y * FXAA_QUALITYP1;\n  /*--------------------------------------------------------------------------*/\n  if (doneNP) {\n    if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n    if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n    if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n    if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n    doneN = abs(lumaEndN) >= gradientScaled;\n    doneP = abs(lumaEndP) >= gradientScaled;\n    if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP2;\n    if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP2;\n    doneNP = (!doneN) || (!doneP);\n    if (!doneP) posP.x += offNP.x * FXAA_QUALITYP2;\n    if (!doneP) posP.y += offNP.y * FXAA_QUALITYP2;\n    /*--------------------------------------------------------------------------*/\n    #if (FXAA_QUALITYPS > 3)\n      if (doneNP) {\n        if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n        if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n        if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP3;\n        if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP3;\n        doneNP = (!doneN) || (!doneP);\n        if (!doneP) posP.x += offNP.x * FXAA_QUALITYP3;\n        if (!doneP) posP.y += offNP.y * FXAA_QUALITYP3;\n        /*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITYPS > 4)\n          if (doneNP) {\n            if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP4;\n            if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP4;\n            doneNP = (!doneN) || (!doneP);\n            if (!doneP) posP.x += offNP.x * FXAA_QUALITYP4;\n            if (!doneP) posP.y += offNP.y * FXAA_QUALITYP4;\n            /*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITYPS > 5)\n              if (doneNP) {\n                if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP5;\n                if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP5;\n                doneNP = (!doneN) || (!doneP);\n                if (!doneP) posP.x += offNP.x * FXAA_QUALITYP5;\n                if (!doneP) posP.y += offNP.y * FXAA_QUALITYP5;\n                /*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITYPS > 6)\n                  if (doneNP) {\n                    if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP6;\n                    if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP6;\n                    doneNP = (!doneN) || (!doneP);\n                    if (!doneP) posP.x += offNP.x * FXAA_QUALITYP6;\n                    if (!doneP) posP.y += offNP.y * FXAA_QUALITYP6;\n                    /*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITYPS > 7)\n                      if (doneNP) {\n                        if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP7;\n                        if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP7;\n                        doneNP = (!doneN) || (!doneP);\n                        if (!doneP) posP.x += offNP.x * FXAA_QUALITYP7;\n                        if (!doneP) posP.y += offNP.y * FXAA_QUALITYP7;\n                        /*--------------------------------------------------------------------------*/\n                        #if (FXAA_QUALITYPS > 8)\n                          if (doneNP) {\n                            if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                            if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                            if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP8;\n                            if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP8;\n                            doneNP = (!doneN) || (!doneP);\n                            if (!doneP) posP.x += offNP.x * FXAA_QUALITYP8;\n                            if (!doneP) posP.y += offNP.y * FXAA_QUALITYP8;\n                            /*--------------------------------------------------------------------------*/\n                            #if (FXAA_QUALITYPS > 9)\n                              if (doneNP) {\n                                if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                                if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                                if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                                if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                                doneN = abs(lumaEndN) >= gradientScaled;\n                                doneP = abs(lumaEndP) >= gradientScaled;\n                                if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP9;\n                                if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP9;\n                                doneNP = (!doneN) || (!doneP);\n                                if (!doneP) posP.x += offNP.x * FXAA_QUALITYP9;\n                                if (!doneP) posP.y += offNP.y * FXAA_QUALITYP9;\n                                /*--------------------------------------------------------------------------*/\n                                #if (FXAA_QUALITYPS > 10)\n                                  if (doneNP) {\n                                    if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                                    if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                                    if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                                    if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                                    doneN = abs(lumaEndN) >= gradientScaled;\n                                    doneP = abs(lumaEndP) >= gradientScaled;\n                                    if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP10;\n                                    if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP10;\n                                    doneNP = (!doneN) || (!doneP);\n                                    if (!doneP) posP.x += offNP.x * FXAA_QUALITYP10;\n                                    if (!doneP) posP.y += offNP.y * FXAA_QUALITYP10;\n                                    /*--------------------------------------------------------------------------*/\n                                    #if (FXAA_QUALITYPS > 11)\n                                      if (doneNP) {\n                                        if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                                        if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                                        if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                                        if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                                        doneN = abs(lumaEndN) >= gradientScaled;\n                                        doneP = abs(lumaEndP) >= gradientScaled;\n                                        if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP11;\n                                        if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP11;\n                                        doneNP = (!doneN) || (!doneP);\n                                        if (!doneP) posP.x += offNP.x * FXAA_QUALITYP11;\n                                        if (!doneP) posP.y += offNP.y * FXAA_QUALITYP11;\n                                        /*--------------------------------------------------------------------------*/\n                                        #if (FXAA_QUALITYPS > 12)\n                                          if (doneNP) {\n                                            if (!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                                            if (!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                                            if (!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                                            if (!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                                            doneN = abs(lumaEndN) >= gradientScaled;\n                                            doneP = abs(lumaEndP) >= gradientScaled;\n                                            if (!doneN) posN.x -= offNP.x * FXAA_QUALITYP12;\n                                            if (!doneN) posN.y -= offNP.y * FXAA_QUALITYP12;\n                                            doneNP = (!doneN) || (!doneP);\n                                            if (!doneP) posP.x += offNP.x * FXAA_QUALITYP12;\n                                            if (!doneP) posP.y += offNP.y * FXAA_QUALITYP12;\n                                            /*--------------------------------------------------------------------------*/\n                                          }\n                                        #endif\n                                        /*--------------------------------------------------------------------------*/\n                                      }\n                                    #endif\n                                    /*--------------------------------------------------------------------------*/\n                                  }\n                                #endif\n                                /*--------------------------------------------------------------------------*/\n                              }\n                            #endif\n                            /*--------------------------------------------------------------------------*/\n                          }\n                        #endif\n                        /*--------------------------------------------------------------------------*/\n                      }\n                    #endif\n                    /*--------------------------------------------------------------------------*/\n                  }\n                #endif\n                /*--------------------------------------------------------------------------*/\n              }\n            #endif\n            /*--------------------------------------------------------------------------*/\n          }\n        #endif\n        /*--------------------------------------------------------------------------*/\n      }\n    #endif\n    /*--------------------------------------------------------------------------*/\n  }\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat dstN = posM.x - posN.x;\n  FxaaFloat dstP = posP.x - posM.x;\n  if (!horzSpan) dstN = posM.y - posN.y;\n  if (!horzSpan) dstP = posP.y - posM.y;\n  /*--------------------------------------------------------------------------*/\n  FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n  FxaaFloat spanLength = (dstP + dstN);\n  FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n  FxaaFloat spanLengthRcp = 1.0 / spanLength;\n  /*--------------------------------------------------------------------------*/\n  FxaaBool directionN = dstN < dstP;\n  FxaaFloat dst = min(dstN, dstP);\n  FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n  FxaaFloat subpixG = subpixF * subpixF;\n  FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n  FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n  /*--------------------------------------------------------------------------*/\n  FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n  FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n  if (!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n  if (horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n  #if (FXAA_DISCARD == 1)\n    return FxaaTexTop(tex, posM);\n  #else\n  return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\n  #endif\n}\n/*==========================================================================*/\n#endif\n\n\nvoid main(){\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  vec2 screenInfo = get_screenInfo(materialSID, 0);\n  rt0 = FxaaPixelShader(\n      v_texcoord_0,\n      vec4(0.0),\n      u_baseColorTexture,\n      u_baseColorTexture,\n      u_baseColorTexture,\n      1.0 / screenInfo,\n      vec4(0.0),\n      vec4(0.0),\n      vec4(0.0),\n      0.75,\n      0.166,\n      0.0833,\n      0.0,\n      0.0,\n      0.0,\n      vec4(0.0)\n  );\n  rt0.a = 1.0;\n\n/* shaderity: @{renderTargetEnd} */\n\n\n}\n",shaderStage:"fragment",isFragmentShader:!0},B={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec4 a_instanceInfo;\nin vec2 a_texcoord_0;\nin vec3 a_position;\nout vec2 v_texcoord_0;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nvoid main()\n{\n\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\nmat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n\n#ifdef RN_NO_CAMERA_TRANSFORM\n  gl_Position = worldMatrix * vec4(a_position, 1.0);\n#else\n\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  gl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\n\n#endif\n\n\nv_texcoord_0 = a_texcoord_0;\n\n}\n",shaderStage:"vertex",isFragmentShader:!1},N={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\nin vec2 v_texcoord_0;\n\nuniform sampler2D u_baseColorTexture; // initialValue=(0,white)\nuniform bool u_enableLinearToSrgb; // initialValue=true\n\n/* shaderity: @{renderTargetBegin} */\n\n\n/* shaderity: @{getters} */\n\nvec3 linearToSrgb(vec3 linearColor) {\n  return pow(linearColor, vec3(1.0/2.2));\n}\n\nvec3 srgbToLinear(vec3 srgbColor) {\n  return pow(srgbColor, vec3(2.2));\n}\n\n\nvoid main ()\n{\n\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\nvec4 baseColor = texture(u_baseColorTexture, v_texcoord_0);\n\nif (get_enableLinearToSrgb(materialSID, 0)) {\n  baseColor.rgb = linearToSrgb(baseColor.rgb);\n}\n\nrt0 = baseColor;\n\n/* shaderity: @{renderTargetEnd} */\n\n\n}\n",shaderStage:"fragment",isFragmentShader:!0},O={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec4 a_instanceInfo;\nin vec2 a_texcoord_0;\nin vec3 a_position;\nout vec2 v_texcoord_0;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nvoid main()\n{\n\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\nmat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n\n#ifdef RN_NO_CAMERA_TRANSFORM\n  gl_Position = worldMatrix * vec4(a_position, 1.0);\n#else\n\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  gl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\n\n#endif\n\n\nv_texcoord_0 = a_texcoord_0;\n\n}\n",shaderStage:"vertex",isFragmentShader:!1},L={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\nin vec2 v_texcoord_0;\n\nuniform sampler2DRect u_baseColorTexture; // initialValue=(0,white)\nuniform float u_count; // initialValue=0.0\nuniform float u_direction; // initialValue=0.0\n/* shaderity: @{renderTargetBegin} */\n\n\n/* shaderity: @{getters} */\n\nvoid main ()\n{\n\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\nfloat i = get_count(materialSID, 0);\nfloat dir = get_direction(materialSID, 0);\n\nrt0 = texture(u_baseColorTexture, gl_FragCoord.xy);\n\nif (dir > 0.0) {\n  // horizontal\n  rt0 += texture(u_baseColorTexture, vec2(gl_FragCoord.x + pow(2.0, i), gl_FragCoord.y));\n} else {\n  // virtical\n  rt0 += texture(u_baseColorTexture, vec2(gl_FragCoord.x, gl_FragCoord.y + pow(2.0, i)));\n}\n\n/* shaderity: @{renderTargetEnd} */\n\n\n}\n",shaderStage:"fragment",isFragmentShader:!0},F={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n  #ifdef WEBXR_MULTI_VIEW_VIEW_NUM_2\nlayout(num_views=2) in;\n  #endif\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec3 a_position;\nin vec3 a_color;\nin vec3 a_normal;\nin vec4 a_instanceInfo;\nin vec2 a_texcoord_0;\nin vec4 a_joint;\nin vec4 a_weight;\nin vec4 a_baryCentricCoord;\nout vec3 v_color;\nout vec3 v_normal_inWorld;\nout vec4 v_position_inWorld;\nout vec2 v_texcoord_0;\nout vec3 v_baryCentricCoord;\n\nuniform float u_pointSize; // initialValue=30\nuniform vec3 u_pointDistanceAttenuation; // initialValue=(0,0.1,0.01)\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat4 viewMatrix,\n  in bool isBillboard,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n  mat4 worldMatrixInner = worldMatrix;\n  if (isBillboard) {\n    mat4 inverseViewMatrix = inverse(viewMatrix);\n    inverseViewMatrix[3][0] = 0.0;//worldMatrix[3][0];\n    inverseViewMatrix[3][1] = 0.0;//worldMatrix[3][1];\n    inverseViewMatrix[3][2] = 0.0;//worldMatrix[3][2];\n    worldMatrixInner = inverseViewMatrix * worldMatrix;\n  }\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrixInner * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main()\n{\n\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  mat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  mat3 normalMatrix = get_normalMatrix(a_instanceInfo.x);\n  bool isBillboard = get_isBillboard(a_instanceInfo.x);\n\n  // Skeletal\n  processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    viewMatrix,\n    isBillboard,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n\n  v_color = a_color;\n  v_normal_inWorld = normalMatrix * a_normal;\n  v_texcoord_0 = a_texcoord_0;\n  v_baryCentricCoord = a_baryCentricCoord.xyz;\n\n  bool visibility = get_isVisible(a_instanceInfo.x);\n  if (!visibility)\n  {\n    gl_Position = vec4(0.0);\n  }\n\n// #ifdef RN_IS_POINTSPRITE\n\nvec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\nvec3 viewPosition = get_viewPosition(cameraSID, 0);\nfloat distanceFromCamera = length(position_inWorld.xyz - viewPosition);\nvec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\nfloat distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\nfloat maxPointSize = get_pointSize(materialSID, 0);\ngl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\n\n// #endif\n\n\n}\n",shaderStage:"vertex",isFragmentShader:!1},G={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\nin vec3 v_color;\nin vec3 v_normal_inWorld;\nin vec4 v_position_inWorld;\nin vec2 v_texcoord_0;\nin vec3 v_baryCentricCoord;\n\nuniform int u_shadingModel; // initialValue=0\nuniform float u_alphaCutoff; // initialValue=0.01\nuniform vec4 u_diffuseColorFactor; // initialValue=(1,1,1,1)\nuniform sampler2D u_diffuseColorTexture; // initialValue=(0,white)\nuniform sampler2D u_normalTexture; // initialValue=(1,blue)\nuniform vec4 u_diffuseColorTextureTransform; // initialValue=(1,1,0,0)\nuniform float u_diffuseColorTextureRotation; // initialValue=0\n\n/* shaderity: @{renderTargetBegin} */\n\n\n\nvec2 uvTransform(vec2 scale, vec2 offset, float rotation, vec2 uv) {\n  mat3 translationMat = mat3(1,0,0, 0,1,0, offset.x, offset.y, 1);\n  mat3 rotationMat = mat3(\n      cos(rotation), -sin(rotation), 0,\n      sin(rotation), cos(rotation), 0,\n                  0,             0, 1\n  );\n  mat3 scaleMat = mat3(scale.x,0,0, 0,scale.y,0, 0,0,1);\n\n  mat3 matrix = translationMat * rotationMat * scaleMat;\n  vec2 uvTransformed = ( matrix * vec3(uv.xy, 1) ).xy;\n\n  return uvTransformed;\n}\n\n\n/* shaderity: @{getters} */\n\nstruct Light {\n  int type; // 0 = directional, 1 = point, 2 = spot\n  vec3 position;\n  vec3 intensity;\n  vec3 attenuatedIntensity;\n  vec3 directionOfLightObject;\n  vec3 direction; // direction of light vector, equal to normalize(light.pointToLight)\n  vec3 pointToLight; // not normalized\n  float spotAngleScale;\n  float spotAngleOffset;\n  float effectiveRange;\n};\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Khronos/KHR_lights_punctual/README.md#range-property\nfloat getRangeAttenuation(Light light)\n{\n  float distance = length(light.pointToLight);\n  // means no range limit\n  if (light.effectiveRange <= 0.0)\n  {\n    return 1.0 / pow(distance, 2.0);\n  }\n  return max(min(1.0 - pow(distance / light.effectiveRange, 4.0), 1.0), 0.0) / pow(distance, 2.0);\n}\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Khronos/KHR_lights_punctual/README.md#inner-and-outer-cone-angles\nfloat getSpotAttenuation(Light light)\n{\n\n  float cd = dot(light.directionOfLightObject, light.direction);\n  float angularAttenuation = clamp(cd * light.spotAngleScale + light.spotAngleOffset, 0.0, 1.0);\n  return angularAttenuation;\n}\n\nvoid getLightAttenuated(Light light) {\n  light.attenuatedIntensity = light.intensity;\n  // if (light.type == 0) { // Directional Light\n    // Directional Light don't attenuate geometically\n  // }\n\n  // Point Light and Spot Light\n  if (light.type != 0)\n  {\n    light.attenuatedIntensity *= getRangeAttenuation(light);\n  }\n  // Spot light\n  if (light.type == 2)\n  {\n    light.attenuatedIntensity *= getSpotAttenuation(light);\n  }\n}\n\nLight getLight(int lightIdx, vec3 v_position_inWorld) {\n  vec3 lightPosition = get_lightPosition(0.0, lightIdx);\n  vec3 direction_and_w_of_LightObject = get_lightDirection(0.0, lightIdx);\n  vec3 lightIntensity = get_lightIntensity(0.0, lightIdx);\n  vec4 lightProperty = get_lightProperty(0.0, lightIdx);\n  Light light;\n  light.directionOfLightObject = direction_and_w_of_LightObject;\n  float lightType = lightProperty.x;\n  light.effectiveRange = lightProperty.y;\n  light.spotAngleScale = lightProperty.z;\n  light.spotAngleOffset = lightProperty.w;\n\n  light.intensity = lightIntensity;\n  light.position = lightPosition;\n  if (lightType < -0.5) { // disabled light\n    light.intensity = vec3(0.0);\n    light.type = -1;\n  } else if (0.75 < lightType) { // is pointlight or spotlight\n    light.pointToLight = lightPosition - v_position_inWorld;\n    light.direction = normalize(light.pointToLight);\n    light.type = 1;\n  } else { // is Directional Light\n    light.type = 0;\n    light.direction = normalize(light.directionOfLightObject * -1.0);\n  }\n\n  if (lightType > 1.75) { // is spotlight\n    light.type = 2;\n  }\n\n  const float M_PI = 3.141592653589793;\n  light.intensity *= M_PI; // Punctual Light\n\n  // Attenuation\n  light.attenuatedIntensity = light.intensity;\n  getLightAttenuated(light);\n\n  return light;\n}\n\n\nvoid main ()\n{\n\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  // Normal\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\n\n  vec4 diffuseColorFactor = get_diffuseColorFactor(materialSID, 0);\n\n\n  // diffuseColor (Considered to be premultiplied alpha)\n  vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\n  float alpha = 1.0;\n  if (v_color != diffuseColor && diffuseColorFactor.rgb != diffuseColor) {\n    diffuseColor = v_color * diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (v_color == diffuseColor) {\n    diffuseColor = diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (diffuseColorFactor.rgb == diffuseColor) {\n    diffuseColor = v_color;\n  } else {\n    diffuseColor = vec3(1.0, 1.0, 1.0);\n  }\n\n  // diffuseColorTexture (Considered to be premultiplied alpha)\n  vec4 diffuseColorTextureTransform = get_diffuseColorTextureTransform(materialSID, 0);\n  float diffuseColorTextureRotation = get_diffuseColorTextureRotation(materialSID, 0);\n  vec2 diffuseColorTexUv = uvTransform(diffuseColorTextureTransform.xy, diffuseColorTextureTransform.zw, diffuseColorTextureRotation, v_texcoord_0);\n  vec4 textureColor = texture(u_diffuseColorTexture, diffuseColorTexUv);\n  diffuseColor *= textureColor.rgb;\n  alpha *= textureColor.a;\n\n// #pragma shaderity: require(../common/alphaMask.glsl)\n\n  // rt0 = vec4(diffuseColor * alpha, alpha);\n  rt0 = vec4(1.0, 0.0, 0.0, 1.0);\n\n// #pragma shaderity: require(../common/setAlphaIfNotInAlphaBlendMode.glsl)\n\n/* shaderity: @{renderTargetEnd} */\n\n\n}\n\n",shaderStage:"fragment",isFragmentShader:!0},V={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec3 a_position;\nin vec3 a_color;\nin vec3 a_normal;\nin vec4 a_instanceInfo;\nin vec2 a_texcoord_0;\nin vec2 a_texcoord_1;\nin vec2 a_texcoord_2;\nin vec4 a_joint;\nin vec4 a_weight;\nout vec3 v_color;\nout vec3 v_normal_inWorld;\nout vec4 v_position_inWorld;\n\nuniform float u_pointSize; // initialValue=30, soloDatum=true\nuniform vec3 u_pointDistanceAttenuation; // initialValue=(0.0, 0.1, 0.01), soloDatum=true\n\n#ifdef RN_IS_MORPHING\nuniform int u_morphTargetNumber; // initialValue=0, isCustomSetting=true, soloDatum=true, needUniformInDataTextureMode=true\n#endif\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat4 viewMatrix,\n  in bool isBillboard,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n  mat4 worldMatrixInner = worldMatrix;\n  if (isBillboard) {\n    mat4 inverseViewMatrix = inverse(viewMatrix);\n    inverseViewMatrix[3][0] = 0.0;//worldMatrix[3][0];\n    inverseViewMatrix[3][1] = 0.0;//worldMatrix[3][1];\n    inverseViewMatrix[3][2] = 0.0;//worldMatrix[3][2];\n    worldMatrixInner = inverseViewMatrix * worldMatrix;\n  }\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrixInner * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main()\n{\n\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  mat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  mat3 normalMatrix = get_normalMatrix(a_instanceInfo.x);\n  bool isBillboard = get_isBillboard(a_instanceInfo.x);\n\n  v_color = a_color;\n\n  bool isSkinning = false;\n\n  isSkinning = processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    viewMatrix,\n    isBillboard,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n  bool visibility = get_isVisible(a_instanceInfo.x);\n  if (!visibility)\n  {\n    gl_Position = vec4(0.0);\n  }\n\n// #ifdef RN_IS_POINTSPRITE\n\nvec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\nvec3 viewPosition = get_viewPosition(cameraSID, 0);\nfloat distanceFromCamera = length(position_inWorld.xyz - viewPosition);\nvec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\nfloat distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\nfloat maxPointSize = get_pointSize(materialSID, 0);\ngl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\n\n// #endif\n\n\n}\n\n",shaderStage:"vertex",isFragmentShader:!1},z={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\nin vec3 v_color;\nin vec3 v_normal_inWorld;\nin vec4 v_position_inWorld;\n\n/* shaderity: @{renderTargetBegin} */\n\n\n/* shaderity: @{getters} */\n\n\nvoid main (){\n\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  float depth = gl_FragCoord.z;\n  float dx = dFdx(depth);\n  float dy = dFdy(depth);\n\n  rt0.x = depth; // M1\n  rt0.y = sq(depth) + 0.25 * (sq(dx) + sq(dy)); // M2\n  rt0.z = 0.0;\n  rt0.w = 1.0;\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n\n",shaderStage:"fragment",isFragmentShader:!0};var k=n(678),U=n(2603);function Q(e,t,n){var r=0,o=!1;do{var i=e+"__".concat(r);if(!(o=U.r.isFullOrOverOfThisMaterialType(i)))return U.r.registerMaterial(i,t,n),U.r.createMaterial(i,t);r++}while(o);return U.r.isRegisteredMaterialType(e)||U.r.registerMaterial(e,t,n),U.r.createMaterial(e,t)}function j(e,t,n){return U.r.forceRegisterMaterial(e,t,n),U.r.createMaterial(e,t)}var W=Object.freeze({createMaterial:Q,recreateMaterial:j,recreateCustomMaterial:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.additionalName,i=void 0===o?"":o,a=n.isSkinning,s=void 0===a||a,c=n.isLighting,u=void 0!==c&&c,f=n.isMorphing,_=void 0!==f&&f,h=n.maxInstancesNumber,d=void 0===h?r.D.maxMaterialInstanceForEachType:h,m="Custom"+"_".concat(i,"_")+(_?"+morphing":"")+(s?"+skinning":"")+(u?"":"-lighting"),v=new l.f({name:m,isSkinning:s,isLighting:u,isMorphing:_,useTangentAttribute:!1,useNormalTexture:!0,vertexShader:{code:e,shaderStage:"vertex",isFragmentShader:!1},pixelShader:{code:t,shaderStage:"fragment",isFragmentShader:!0},noUseCameraTransform:!1,additionalShaderSemanticInfo:[]});v.isSingleOperation=!0;var p=j(m,v,d);return p},recreateShaderityMaterial:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.additionalName,i=void 0===o?"":o,a=n.maxInstancesNumber,s=void 0===a?r.D.maxMaterialInstanceForEachType:a,c="Shaderity_".concat(i),l=new A.u({name:c,vertexShaderityObj:e,pixelShaderityObj:t});l.isSingleOperation=!0;var u=j(c,l,s);return u},createEmptyMaterial:function(){var e=Q("Empty",void 0,r.D.maxMaterialInstanceForEachType);return e.tryToSetUniqueName("EmptyMaterial",!0),e},createClassicUberMaterial:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalName,n=void 0===t?"":t,o=e.isSkinning,i=void 0===o||o,a=e.isLighting,s=void 0!==a&&a,c=e.isMorphing,u=void 0!==c&&c,f=e.isShadow,_=void 0!==f&&f,h=e.maxInstancesNumber,d=void 0===h?r.D.maxMaterialInstanceForEachType:h,m="ClassicUber"+"_".concat(n,"_")+(i?"+skinning":"")+(s?"":"-lighting"),v=new l.f({name:"ClassicUber",isSkinning:i,isLighting:s,isMorphing:u,isShadow:_,useTangentAttribute:!1,useNormalTexture:!0,vertexShader:w,pixelShader:S,noUseCameraTransform:!1,additionalShaderSemanticInfo:[]});v.isSingleOperation=!0;var p=Q(m,v,d);return p},createDepthMomentEncodeMaterial:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalName,n=void 0===t?"":t,o=e.isSkinning,i=void 0===o||o,a=e.isMorphing,s=void 0!==a&&a,c=e.maxInstancesNumber,u=void 0===c?r.D.maxMaterialInstanceForEachType:c,f="DepthMomentEncode"+"_".concat(n,"_"),_=new l.f({name:"DepthMomentEncode",isSkinning:i,isLighting:!1,isMorphing:s,useTangentAttribute:!1,useNormalTexture:!0,vertexShader:V,pixelShader:z,noUseCameraTransform:!1,additionalShaderSemanticInfo:[]});_.isSingleOperation=!0;var h=Q(f,_,u);return h},createFlatMaterial:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalName,n=void 0===t?"":t,o=e.isSkinning,i=void 0===o||o,a=e.isMorphing,s=void 0!==a&&a,c=e.maxInstancesNumber,u=void 0===c?r.D.maxMaterialInstanceForEachType:c,f="Flat"+"_".concat(n,"_")+(i?"+skinning":""),_=new l.f({name:"Flat",isSkinning:i,isLighting:!1,isMorphing:s,useTangentAttribute:!1,useNormalTexture:!0,vertexShader:F,pixelShader:G,noUseCameraTransform:!1,additionalShaderSemanticInfo:[]});_.isSingleOperation=!0;var h=Q(f,_,u);return h},createPbrUberMaterial:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalName,n=void 0===t?"":t,i=e.isMorphing,a=void 0===i||i,s=e.isSkinning,c=void 0===s||s,u=e.isLighting,f=void 0===u||u,_=e.isClearCoat,h=void 0!==_&&_,d=e.isTransmission,m=void 0!==d&&d,v=e.isVolume,p=void 0!==v&&v,y=e.isSheen,A=void 0!==y&&y,w=e.isSpecular,S=void 0!==w&&w,P=e.isIridescence,R=void 0!==P&&P,D=e.isShadow,M=void 0!==D&&D,B=e.useTangentAttribute,N=void 0!==B&&B,O=e.useNormalTexture,L=void 0===O||O,F=e.maxInstancesNumber,G=void 0===F?r.D.maxMaterialInstanceForEachType:F,V="PbrUber"+"_".concat(n,"_")+(a?"+morphing":"")+(c?"+skinning":"")+(f?"":"-lighting")+(h?"+clearcoat":"")+(m?"+transmission":"")+(p?"+volume":"")+(A?"+sheen":"")+(S?"+specular":"")+(R?"+iridescence":"")+(N?"+tangentAttribute":"")+(L?"":"-normalTexture"),z=[];a&&(z=[{semantic:b.f5.DataTextureMorphOffsetPosition,componentType:g.r.Int,compositionType:x.d.ScalarArray,arrayLength:r.D.maxVertexMorphNumberInShader,stage:I.H.VertexShader,isCustomSetting:!0,soloDatum:!0,initialValue:new E.j(new Int32Array(r.D.maxVertexMorphNumberInShader)),min:-Number.MAX_VALUE,max:Number.MAX_VALUE,needUniformInDataTextureMode:!0},{semantic:b.f5.MorphWeights,componentType:g.r.Float,compositionType:x.d.ScalarArray,arrayLength:r.D.maxVertexMorphNumberInShader,stage:I.H.VertexShader,isCustomSetting:!0,soloDatum:!0,initialValue:new E.j(new Float32Array(r.D.maxVertexMorphNumberInShader)),min:-Number.MAX_VALUE,max:Number.MAX_VALUE,needUniformInDataTextureMode:!0}]);var U=8;h&&(z.push({semantic:b.f5.ClearCoatTexture,componentType:g.r.Int,compositionType:x.d.Texture2D,stage:I.H.PixelShader,isCustomSetting:!1,updateInterval:k.a.EveryTime,initialValue:[U++,o.P.dummyWhiteTexture],min:0,max:Number.MAX_VALUE}),z.push({semantic:b.f5.ClearCoatRoughnessTexture,componentType:g.r.Int,compositionType:x.d.Texture2D,stage:I.H.PixelShader,isCustomSetting:!1,updateInterval:k.a.EveryTime,initialValue:[U++,o.P.dummyWhiteTexture],min:0,max:Number.MAX_VALUE}),z.push({semantic:b.f5.ClearCoatNormalTexture,componentType:g.r.Int,compositionType:x.d.Texture2D,stage:I.H.PixelShader,isCustomSetting:!1,updateInterval:k.a.EveryTime,initialValue:[U++,o.P.dummyBlueTexture],min:0,max:Number.MAX_VALUE})),m&&(z.push({semantic:b.f5.TransmissionTexture,componentType:g.r.Int,compositionType:x.d.Texture2D,stage:I.H.PixelShader,isCustomSetting:!1,updateInterval:k.a.EveryTime,initialValue:[U++,o.P.dummyWhiteTexture],min:0,max:Number.MAX_VALUE}),z.push({semantic:b.f5.BackBufferTexture,componentType:g.r.Int,compositionType:x.d.Texture2D,stage:I.H.PixelShader,isCustomSetting:!1,updateInterval:k.a.EveryTime,initialValue:[U++,o.P.dummyBlackTexture],min:0,max:Number.MAX_VALUE})),p&&z.push({semantic:b.f5.ThicknessTexture,componentType:g.r.Int,compositionType:x.d.Texture2D,stage:I.H.PixelShader,isCustomSetting:!1,updateInterval:k.a.EveryTime,initialValue:[U++,o.P.dummyWhiteTexture],min:0,max:Number.MAX_VALUE}),A&&(z.push({semantic:b.f5.SheenColorTexture,componentType:g.r.Int,compositionType:x.d.Texture2D,stage:I.H.PixelShader,isCustomSetting:!1,soloDatum:!1,initialValue:[U++,o.P.dummyWhiteTexture],min:0,max:Number.MAX_VALUE}),z.push({semantic:b.f5.SheenRoughnessTexture,componentType:g.r.Int,compositionType:x.d.Texture2D,stage:I.H.PixelShader,isCustomSetting:!1,soloDatum:!1,updateInterval:k.a.EveryTime,initialValue:[U++,o.P.dummyWhiteTexture],min:0,max:Number.MAX_VALUE}),z.push({semantic:b.f5.SheenLutTexture,componentType:g.r.Int,compositionType:x.d.Texture2D,stage:I.H.PixelShader,isCustomSetting:!1,soloDatum:!1,updateInterval:k.a.EveryTime,initialValue:[U++,o.P.__sheenLutTextureUid],min:0,max:Number.MAX_VALUE})),S&&(z.push({semantic:b.f5.SpecularTexture,componentType:g.r.Int,compositionType:x.d.Texture2D,stage:I.H.PixelShader,isCustomSetting:!1,soloDatum:!1,updateInterval:k.a.EveryTime,initialValue:[U++,o.P.dummyWhiteTexture],min:0,max:Number.MAX_VALUE}),z.push({semantic:b.f5.SpecularColorTexture,componentType:g.r.Int,compositionType:x.d.Texture2D,stage:I.H.PixelShader,isCustomSetting:!1,soloDatum:!1,updateInterval:k.a.EveryTime,initialValue:[U++,o.P.dummyWhiteTexture],min:0,max:Number.MAX_VALUE})),R&&(z.push({semantic:b.f5.IridescenceTexture,componentType:g.r.Int,compositionType:x.d.Texture2D,stage:I.H.PixelShader,isCustomSetting:!1,soloDatum:!1,updateInterval:k.a.EveryTime,initialValue:[U++,o.P.dummyWhiteTexture],min:0,max:Number.MAX_VALUE}),z.push({semantic:b.f5.IridescenceThicknessTexture,componentType:g.r.Int,compositionType:x.d.Texture2D,stage:I.H.PixelShader,isCustomSetting:!1,soloDatum:!1,updateInterval:k.a.EveryTime,initialValue:[U++,o.P.dummyWhiteTexture],min:0,max:Number.MAX_VALUE})),M&&z.push({semantic:b.f5.DepthTexture,componentType:g.r.Int,compositionType:x.d.Texture2D,stage:I.H.PixelShader,isCustomSetting:!1,soloDatum:!1,updateInterval:k.a.EveryTime,initialValue:[U++,o.P.dummyWhiteTexture],min:0,max:Number.MAX_VALUE});var j=new l.f({name:"PbrUber",isSkinning:c,isLighting:f,isMorphing:a,isClearCoat:h,isTransmission:m,isVolume:p,isSheen:A,isSpecular:S,isIridescence:R,isShadow:M,useTangentAttribute:N,useNormalTexture:L,vertexShader:T,pixelShader:C,noUseCameraTransform:!1,additionalShaderSemanticInfo:z});j.isSingleOperation=!0;var W=Q(V,j,G);return W},createEnvConstantMaterial:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalName,n=void 0===t?"":t,r=e.maxInstancesNumber,o=void 0===r?5:r,i=e.makeOutputSrgb,a=void 0===i||i,s="EnvConstant"+"_".concat(n),c=new l.f({name:s,isSkinning:!1,isLighting:!1,isMorphing:!1,useTangentAttribute:!1,useNormalTexture:!1,vertexShader:P.Z,pixelShader:R.Z,noUseCameraTransform:!1,additionalShaderSemanticInfo:[]});c.isSingleOperation=!0;var u=Q(s,c,o);return u.setParameter(b.f5.MakeOutputSrgb,a?1:0),u},createFXAA3QualityMaterial:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalName,n=void 0===t?"":t,r=e.maxInstancesNumber,o=void 0===r?1:r,i=e.noUseCameraTransform,a=void 0!==i&&i,s="FXAA3Quality"+"_".concat(n),c=new l.f({name:s,isSkinning:!1,isLighting:!1,isMorphing:!1,useTangentAttribute:!1,useNormalTexture:!0,vertexShader:D,pixelShader:M,noUseCameraTransform:a,additionalShaderSemanticInfo:[]});c.isSingleOperation=!0;var u=Q(s,c,o);return u},createDepthEncodeMaterial:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalName,n=void 0===t?"":t,r=e.isSkinning,o=void 0!==r&&r,a=e.depthPow,s=void 0===a?1:a,c=e.maxInstancesNumber,l=void 0===c?10:c,u="DepthEncode"+"_".concat(n,"_")+(o?"+skinning":""),f=new i.Q(s,{isSkinning:o});f.isSingleOperation=!0;var _=Q(u,f,l);return _},createShadowMapDecodeClassicSingleMaterial:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalName,n=void 0===t?"":t,r=e.isMorphing,o=void 0!==r&&r,i=e.isSkinning,s=void 0!==i&&i,c=e.isLighting,l=void 0===c||c,u=e.isDebugging,f=void 0!==u&&u,_=e.colorAttachmentsNumber,h=void 0===_?0:_,d=e.maxInstancesNumber,m=void 0===d?20:d,v=arguments.length>1?arguments[1]:void 0,p="ShadowMapDecodeClassic"+"_".concat(n,"_")+(s?"+skinning":"")+(l?"":"-lighting"),y=new a.R({isMorphing:o,isSkinning:s,isLighting:l,isDebugging:f,colorAttachmentsNumber:h},v);y.isSingleOperation=!0;var A=Q(p,y,m);return A},createGammaCorrectionMaterial:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalName,n=void 0===t?"":t,r=e.maxInstancesNumber,o=void 0===r?1:r,i=e.noUseCameraTransform,a=void 0!==i&&i,s="GammaCorrection"+"_".concat(n),c=new l.f({name:s,isSkinning:!1,isLighting:!1,isMorphing:!1,useTangentAttribute:!1,useNormalTexture:!0,vertexShader:B,pixelShader:N,noUseCameraTransform:a,additionalShaderSemanticInfo:[]});c.isSingleOperation=!0;var u=Q(s,c,o);return u},createSummedAreaTableMaterial:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalName,n=void 0===t?"":t,r=e.maxInstancesNumber,o=void 0===r?1:r,i=e.noUseCameraTransform,a=void 0!==i&&i,s="SummedAreaTable"+"_".concat(n),c=new l.f({name:s,isSkinning:!1,isLighting:!1,isMorphing:!1,useTangentAttribute:!1,useNormalTexture:!0,vertexShader:O,pixelShader:L,noUseCameraTransform:a,additionalShaderSemanticInfo:[]});c.isSingleOperation=!0;var u=Q(s,c,o);return u},createVarianceShadowMapDecodeClassicSingleMaterial:function(e,t){var n=e.additionalName,r=void 0===n?"":n,o=e.isMorphing,i=void 0!==o&&o,a=e.isSkinning,s=void 0!==a&&a,c=e.isDebugging,l=void 0!==c&&c,u=e.isLighting,f=void 0===u||u,_=e.colorAttachmentsNumberDepth,h=void 0===_?0:_,d=e.colorAttachmentsNumberSquareDepth,m=void 0===d?0:d,v=e.depthCameraComponent,p=void 0===v?void 0:v,A=e.maxInstancesNumber,b=void 0===A?10:A,g="VarianceShadowMapDecodeShading"+"_".concat(r,"_")+(i?"+morphing":"")+(s?"+skinning":"")+(f?"":"-lighting")+(l?"":"+debugging"),x=new y.Q({isMorphing:i,isSkinning:s,isLighting:f,isDebugging:l,colorAttachmentsNumberDepth:h,colorAttachmentsNumberSquareDepth:m,depthCameraComponent:p},t);return x.isSingleOperation=!0,Q(g,x,b)},createEntityUIDOutputMaterial:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalName,n=void 0===t?"":t,r=e.maxInstancesNumber,o=void 0===r?10:r,i="EntityUIDOutput"+"_".concat(n),a=new s.z;a.isSingleOperation=!0;var c=Q(i,a,o);return c},createMToonMaterial:function(e){var t=e.additionalName,n=void 0===t?"":t,o=e.isMorphing,i=void 0!==o&&o,a=e.isSkinning,s=void 0!==a&&a,l=e.isLighting,u=void 0===l||l,f=e.useTangentAttribute,_=void 0!==f&&f,h=e.isOutline,d=void 0!==h&&h,m=e.materialProperties,v=e.textures,p=e.debugMode,y=e.maxInstancesNumber,A=void 0===y?r.D.maxMaterialInstanceForEachType:y,b=e.makeOutputSrgb,g=void 0===b||b,x="MToon"+"_".concat(n,"_")+(i?"+morphing":"")+(s?"+skinning":"")+(u?"":"-lighting")+(_?"+tangentAttribute":"")+(d?"-outline":""),I=new c.f(d,m,v,i,s,u,_,p,g);I.isSingleOperation=!0;var E=Q(x,I,A);return I.setMaterialParameters(E,d),E},createFurnaceTestMaterial:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalName,n=void 0===t?"":t,r=e.maxInstancesNumber,o=void 0===r?1:r,i="FurnaceTest"+"_".concat(n),a=new f.b;a.isSingleOperation=!0;var s=Q(i,a,o);return s},createGaussianBlurForEncodedDepthMaterial:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalName,n=void 0===t?"":t,r=e.maxInstancesNumber,o=void 0===r?10:r,i="GaussianBlurForEncodedDepth"+"_".concat(n),a=new _._;a.isSingleOperation=!0;var s=Q(i,a,o);return s},createDetectHighLuminanceMaterial:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalName,n=void 0===t?"":t,r=e.colorAttachmentsNumber,o=void 0===r?0:r,i=e.maxInstancesNumber,a=void 0===i?5:i,s=arguments.length>1?arguments[1]:void 0,c="DetectHighLuminance"+"_".concat(n,"_"),l=new d.t(s,o);l.isSingleOperation=!0;var u=Q(c,l,a);return u},createGaussianBlurMaterial:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalName,n=void 0===t?"":t,r=e.maxInstancesNumber,o=void 0===r?10:r,i="GaussianBlur"+"_".concat(n),a=new h.W;a.isSingleOperation=!0;var s=Q(i,a,o);return s},createSynthesizeHDRMaterial:function(e,t){var n=e.additionalName,r=void 0===n?"":n,o=e.targetRegionTexture,i=e.maxInstancesNumber,a=void 0===i?1:i,s="SynthesizeHDR"+"_".concat(r),c=new m.d(t,o);return c.isSingleOperation=!0,Q(s,c,a)},createColorGradingUsingLUTsMaterial:function(e,t){var n=e.additionalName,r=void 0===n?"":n,o=e.colorAttachmentsNumber,i=void 0===o?0:o,a=e.uri,s=e.texture,c=e.maxInstancesNumber,l=void 0===c?1:c,u="ColorGradingUsingLUTs"+"_".concat(r),f=new v.h(t,i,a,s);return f.isSingleOperation=!0,Q(u,f,l)},createMatCapMaterial:function(e){var t=e.additionalName,n=void 0===t?"":t,r=e.isSkinning,o=void 0!==r&&r,i=e.uri,a=e.texture,s=e.maxInstancesNumber,c=void 0===s?10:s,l="MatCap"+"_".concat(n)+(o?"+skinning":""),u=new p.S(o,i,a);return u.isSingleOperation=!0,Q(l,u,c)},changeMaterial:function(e,t,n){var r=e.getMeshRenderer();t.material=n,r.moveStageTo(u.I.Load)}})},5936:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(5479),o=n(3363),i=n(9197),a=n(1274),s=n(3116);function c(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,s,"next",e)}function s(e){c(i,r,o,a,s,"throw",e)}a(void 0)}))}}var u=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.importFromUri=function(e,t){var n=this;return l((function(){var o,i;return u(this,(function(a){switch(a.label){case 0:return[4,r.j.fetchArrayBuffer(e)];case 1:return(o=a.sent()).isErr()?[2,new s.UG({message:"fetchArrayBuffer error",error:void 0})]:[4,n._importGltfOrGlbFromArrayBuffers(o.unwrapForce(),null!==(i=null==t?void 0:t.files)&&void 0!==i?i:{},t,e)];case 2:return[2,a.sent()]}}))}))()},e.importFromArrayBuffers=function(e,t){var n=this;return l((function(){var o,i,a,c,l;return u(this,(function(u){switch(u.label){case 0:for(i in o=[],e)o.push(i);a=0,u.label=1;case 1:return a<o.length?(c=o[a],"gltf"!==(l=r.j.getExtension(c))&&"glb"!==l?[3,3]:[4,n._importGltfOrGlbFromArrayBuffers(e[c],e,t)]):[3,4];case 2:return[2,u.sent()];case 3:return a++,[3,1];case 4:return[2,new s.UG({message:"no gltf or glb file found",error:void 0})]}}))}))()},e._importGltfOrGlbFromArrayBuffers=function(e,t,n,o){var i=this;return l((function(){var a,c,l,f;return u(this,(function(u){switch(u.label){case 0:if(1179937895===new DataView(e,0,20).getUint32(0,!0))return[3,5];a=r.j.arrayBufferToString(e),c=JSON.parse(a),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,i._importGltf(c,t,n,o)];case 2:return l=u.sent(),[2,new s.Ok(l)];case 3:return u.sent(),[2,new s.UG({message:"this.__importGltf error",error:void 0})];case 4:return[3,8];case 5:return u.trys.push([5,7,,8]),[4,i._importGlb(e,t,n)];case 6:return f=u.sent(),[2,new s.Ok(f)];case 7:return u.sent(),[2,new s.UG({message:"this.importGlb error",error:void 0})];case 8:return[2]}}))}))()},e._getOptions=function(e,t,n){var r,o;if(null!=(null===(r=t.asset)||void 0===r||null===(o=r.extras)||void 0===o?void 0:o.rnLoaderOptions))for(var i in t.asset.extras.rnLoaderOptions)e[i]=t.asset.extras.rnLoaderOptions[i];for(var a in n)e[a]=n[a];return n&&n.loaderExtensionName&&"string"==typeof n.loaderExtensionName&&(null!=Rn[n.loaderExtensionName]?e.loaderExtension=Rn[n.loaderExtensionName].getInstance():(console.error("".concat(n.loaderExtensionName," not found!")),e.loaderExtension=void 0)),e},e._importGlb=function(e,t,n){var o=this;return l((function(){var i,a,s,c,l,f,_,h;return u(this,(function(u){switch(u.label){case 0:if(2!==(i=new DataView(e,0,20)).getUint32(4,!0))throw new Error("invalid version field in this binary glTF file.");if(a=i.getUint32(12,!0),1313821514!==i.getUint32(16,!0))throw new Error("invalid chunkType of chunk0 in this binary glTF file.");s=new Uint8Array(e,20,a),c=r.j.uint8ArrayToString(s),l=JSON.parse(c),f=r.j.createDefaultGltfOptions(),n=o._getOptions(f,l,n),_=new Uint8Array(e,20+a+8),void 0===l.asset.extras&&(l.asset.extras={fileType:"glTF",version:"2"}),o._mergeExtendedJson(l,n.extendedJson),l.asset.extras.rnLoaderOptions=n,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,o._loadInner(l,t,n,_)];case 2:return u.sent(),[3,4];case 3:return h=u.sent(),console.log("this._loadInner error in _loadAsBinaryJson",h),[3,4];case 4:return[2,l]}}))}))()},e._importGltf=function(e,t,n,o,i){var a=this;return l((function(){var s,c,l;return u(this,(function(u){switch(u.label){case 0:s=(null==o?void 0:o.substring(0,null==o?void 0:o.lastIndexOf("/")))+"/",void 0===e.asset.extras&&(e.asset.extras={fileType:"glTF",version:"2"}),c=r.j.createDefaultGltfOptions(),n=a._getOptions(c,e,n),a._mergeExtendedJson(e,n.extendedJson),e.asset.extras.rnLoaderOptions=n,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,a._loadInner(e,t,n,void 0,s,i)];case 2:return u.sent(),[3,4];case 3:return l=u.sent(),console.error("this._loadInner error in _loadAsTextJson",l),[3,4];case 4:return[2,e]}}))}))()},e._loadInner=function(e,t,n,r,i,a){var s=this,c=[];return c.push(this._loadResources(r,e,t,n,i,a)),c.push(new o.n((function(t){s._loadJsonContent(e),t()}))),o.n.all(c)},e._loadJsonContent=function(e){this._loadDependenciesOfScenes(e),this._loadDependenciesOfNodes(e),this._loadDependenciesOfMeshes(e),this._loadDependenciesOfMaterials(e),this._loadDependenciesOfTextures(e),this._loadDependenciesOfJoints(e),this._loadDependenciesOfAnimations(e),this._loadDependenciesOfAccessors(e),this._loadDependenciesOfBufferViews(e),void 0===e.asset.extras&&(e.asset.extras={})},e._loadDependenciesOfScenes=function(e){var t=!0,n=!1,r=void 0;try{for(var o,a=e.scenes[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;i.Is.undefined(s.nodesObjects)&&(s.nodesObjects=[]);var c=!0,l=!1,u=void 0;try{for(var f,_=s.nodes[Symbol.iterator]();!(c=(f=_.next()).done);c=!0){var h=f.value;s.nodesObjects[h]=e.nodes[s.nodes[h]]}}catch(e){l=!0,u=e}finally{try{c||null==_.return||_.return()}finally{if(l)throw u}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}},e._loadDependenciesOfNodes=function(e){var t=!0,n=!1,r=void 0;try{for(var o,a=e.nodes[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s,c,l=o.value;if(l.childrenObjects=null!==(s=l.childrenObjects)&&void 0!==s?s:[],l.children){var u=!0,f=!1,_=void 0;try{for(var h,d=l.children[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){var m=h.value;l.childrenObjects[m]=e.nodes[m]}}catch(e){f=!0,_=e}finally{try{u||null==d.return||d.return()}finally{if(f)throw _}}}void 0!==l.mesh&&void 0!==e.meshes&&(l.meshObject=e.meshes[l.mesh]),void 0!==l.skin&&void 0!==e.skins&&(l.skinObject=e.skins[l.skin],i.Is.exist(l.skinObject)&&(i.Is.not.exist(null===(c=l.meshObject)||void 0===c?void 0:c.extras)&&(l.meshObject.extras={}),l.meshObject.extras._skin=l.skin)),void 0!==l.camera&&void 0!==e.cameras&&(l.cameraObject=e.cameras[l.camera]),void 0!==l.extensions&&void 0!==e.extensions&&void 0!==e.extensions.KHR_lights_punctual&&(l.extensions.KHR_lights_punctual.lightIndex=l.extensions.KHR_lights_punctual.light,l.extensions.KHR_lights_punctual.light=e.extensions.KHR_lights_punctual.lights[l.extensions.KHR_lights_punctual.lightIndex])}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}},e._loadDependenciesOfMeshes=function(e){if(!i.Is.not.exist(e.meshes)){var t=!0,n=!1,r=void 0;try{for(var o,a=e.meshes[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value,c=!0,l=!1,u=void 0;try{for(var f,_=s.primitives[Symbol.iterator]();!(c=(f=_.next()).done);c=!0){var h,d=f.value;if(void 0!==d.material&&(d.materialObject=e.materials[d.material]),null!=(null===(h=d.extensions)||void 0===h?void 0:h.KHR_materials_variants)){d.materialVariants=[];var m=d.extensions.KHR_materials_variants.mappings,v=e.extensions.KHR_materials_variants.variants,p=!0,y=!1,A=void 0;try{for(var b,g=m[Symbol.iterator]();!(p=(b=g.next()).done);p=!0){var x=b.value,I=x.variants.map((function(e){return v[e].name})),E={materialObject:e.materials[x.material],variants:I};d.materialVariants.push(E)}}catch(e){y=!0,A=e}finally{try{p||null==g.return||g.return()}finally{if(y)throw A}}}for(var w in d.attributesObjects={},d.attributes){var S=d.attributes[w],T=e.accessors[S];T.extras={toGetAsTypedArray:!0,attributeName:w},d.attributesObjects[w]=T}if(null!=d.indices&&(d.indicesObject=e.accessors[d.indices]),null!=d.targets){d.targetsObjects=[];var C=!0,P=!1,R=void 0;try{for(var D,M=d.targets[Symbol.iterator]();!(C=(D=M.next()).done);C=!0){var B=D.value,N={};for(var O in B){var L=B[O];if(L>=0){var F=e.accessors[L];F.extras={toGetAsTypedArray:!0,attributeName:O},N[O]=F}}d.targetsObjects.push(N)}}catch(e){P=!0,R=e}finally{try{C||null==M.return||M.return()}finally{if(P)throw R}}}}}catch(e){l=!0,u=e}finally{try{c||null==_.return||_.return()}finally{if(l)throw u}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},e._checkRnGltfLoaderOptionsExist=function(e){return!(!e.asset.extras||!e.asset.extras.rnLoaderOptions)},e._loadDependenciesOfMaterials=function(e){if(e.textures||(e.textures=[]),e.materials){var t=!0,n=!1,r=void 0;try{for(var o,a=e.materials[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;if(s.pbrMetallicRoughness){var c=s.pbrMetallicRoughness.baseColorTexture;void 0!==c&&(c.texture=e.textures[c.index]);var l=s.pbrMetallicRoughness.metallicRoughnessTexture;void 0!==l&&(l.texture=e.textures[l.index])}var u=s.normalTexture;void 0!==u&&(u.texture=e.textures[u.index]);var f=s.occlusionTexture;void 0!==f&&(f.texture=e.textures[f.index]);var _=s.emissiveTexture;if(void 0!==_&&(_.texture=e.textures[_.index]),this._checkRnGltfLoaderOptionsExist(e)&&e.asset.extras.rnLoaderOptions.loaderExtension&&e.asset.extras.rnLoaderOptions.loaderExtension.setTextures&&e.asset.extras.rnLoaderOptions.loaderExtension.setTextures(e,s),i.Is.exist(s.extensions)){var h=s.extensions;if(i.Is.exist(h.KHR_materials_clearcoat)){var d=h.KHR_materials_clearcoat.clearcoatTexture;void 0!==d&&(d.texture=e.textures[d.index]);var m=h.KHR_materials_clearcoat.clearcoatRoughnessTexture;void 0!==m&&(m.texture=e.textures[m.index]);var v=h.KHR_materials_clearcoat.clearcoatNormalTexture;void 0!==v&&(v.texture=e.textures[v.index])}if(i.Is.exist(h.KHR_materials_transmission)){var p=h.KHR_materials_transmission.transmissionTexture;void 0!==p&&(p.texture=e.textures[p.index])}if(i.Is.exist(h.KHR_materials_volume)){var y=h.KHR_materials_volume.thicknessTexture;void 0!==y&&(y.texture=e.textures[y.index])}if(i.Is.exist(h.KHR_materials_sheen)){var A=h.KHR_materials_sheen.sheenColorTexture;void 0!==A&&(A.texture=e.textures[A.index]);var b=h.KHR_materials_sheen.sheenRoughnessTexture;void 0!==b&&(b.texture=e.textures[b.index])}if(i.Is.exist(h.KHR_materials_specular)){var g=h.KHR_materials_specular.specularTexture;void 0!==g&&(g.texture=e.textures[g.index]);var x=h.KHR_materials_specular.specularColorTexture;void 0!==x&&(x.texture=e.textures[x.index])}if(i.Is.exist(h.KHR_materials_iridescence)){var I=h.KHR_materials_iridescence.iridescenceTexture;void 0!==I&&(I.texture=e.textures[I.index]);var E=h.KHR_materials_iridescence.iridescenceThicknessTexture;void 0!==E&&(E.texture=e.textures[E.index])}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},e._loadDependenciesOfTextures=function(e){if(e.textures){var t=!0,n=!1,r=void 0;try{for(var o,i=function(){var t,n,r=o.value;(0,a.Jx)((function(t){return r.samplerObject=e.samplers[t]}),r.sampler),null!=(null===(t=r.extensions)||void 0===t||null===(n=t.KHR_texture_basisu)||void 0===n?void 0:n.source)?(r.extensions.KHR_texture_basisu.fallbackSourceIndex=r.source,r.source=r.extensions.KHR_texture_basisu.source,r.image=e.images[r.source]):void 0!==r.source&&(r.image=e.images[r.source])},s=e.textures[Symbol.iterator]();!(t=(o=s.next()).done);t=!0)i()}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}}},e._loadDependenciesOfJoints=function(e){if(e.skins){var t=!0,n=!1,r=void 0;try{for(var o,a=e.skins[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;s.skeletonObject=e.nodes[s.skeleton],s.inverseBindMatricesObject=e.accessors[s.inverseBindMatrices],i.Is.not.exist(s.skeleton)&&(s.skeleton=s.joints[0],s.skeletonObject=e.nodes[s.skeleton]),s.jointsObjects=[];var c=!0,l=!1,u=void 0;try{for(var f,_=s.joints[Symbol.iterator]();!(c=(f=_.next()).done);c=!0){var h=f.value;s.jointsObjects.push(e.nodes[h])}}catch(e){l=!0,u=e}finally{try{c||null==_.return||_.return()}finally{if(l)throw u}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},e._loadDependenciesOfAnimations=function(e){if(e.animations){var t=!0,n=!1,r=void 0;try{for(var o,a=e.animations[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value,c=!0,l=!1,u=void 0;try{for(var f,_=s.channels[Symbol.iterator]();!(c=(f=_.next()).done);c=!0){var h=f.value;if(i.Is.exist(h.sampler)){if(h.samplerObject=s.samplers[h.sampler],h.target.nodeObject=e.nodes[h.target.node],h.samplerObject.inputObject=e.accessors[h.samplerObject.input],h.samplerObject.outputObject=e.accessors[h.samplerObject.output],i.Is.undefined(h.samplerObject.outputObject.extras)&&(h.samplerObject.outputObject.extras={}),"weights"===h.target.path){var d=h.samplerObject.outputObject.count/h.samplerObject.inputObject.count;"CUBICSPLINE"===h.samplerObject.interpolation&&(d=h.samplerObject.outputObject.count/h.samplerObject.inputObject.count/3),h.samplerObject.outputObject.extras.weightsArrayLength=d}"rotation"===h.target.path&&(h.samplerObject.outputObject.extras.quaternionIfVec4=!0)}}}catch(e){l=!0,u=e}finally{try{c||null==_.return||_.return()}finally{if(l)throw u}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},e._loadDependenciesOfAccessors=function(e){var t=!0,n=!1,r=void 0;try{for(var o,a=e.accessors[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;if(null==s.bufferView&&(s.bufferView=0),s.bufferViewObject=e.bufferViews[s.bufferView],i.Is.exist(s.sparse)){var c=s.sparse;i.Is.exist(c)&&i.Is.exist(c.indices)&&i.Is.exist(c.values)&&(c.indices.bufferViewObject=e.bufferViews[c.indices.bufferView],c.values.bufferViewObject=e.bufferViews[c.values.bufferView])}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}},e._loadDependenciesOfBufferViews=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e.bufferViews[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;void 0!==a.buffer&&(a.bufferObject=e.buffers[a.buffer])}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},e._mergeExtendedJson=function(e,t){var n,o,i=null;if(n=t,null!=(o=ArrayBuffer)&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](n):n instanceof o){var a=r.j.arrayBufferToString(t);i=JSON.parse(a)}else"string"==typeof t?i=JSON.parse(t):"object"==typeof t&&(i=t);Object.assign(e,i)},e._loadResources=function(e,t,n,a,s,c){var l,u,f=this,_=[],h=!0,d=!1,m=void 0;try{for(var v,p=this,y=function(){var t=v.value,i="";if(t.uri){var a=t.uri.split("/");i=a[a.length-1]}l=void 0===t.uri?new o.n((function(n){t.buffer=e,n(e)})):t.uri.match(/^data:application\/(.*);base64,/)?new o.n((function(e){var n=r.j.dataUriToArrayBuffer(t.uri);t.buffer=new Uint8Array(n),e(n)})):n&&p.__containsFileName(n,i)?new o.n((function(e){var r=f.__getFullPathOfFileName(n,i),o=n[r];t.buffer=new Uint8Array(o),e(o)})):new o.n(r.j.loadResourceAsync(s+t.uri,!0,(function(e,n){t.buffer=new Uint8Array(n),e(n)}),(function(e,t){e("HTTP Error Status:"+t)}))),t.bufferPromise=l,_.push(l)},A=t.buffers[Symbol.iterator]();!(h=(v=A.next()).done);h=!0)y()}catch(e){d=!0,m=e}finally{try{h||null==A.return||A.return()}finally{if(d)throw m}}var b=!0,g=!1,x=void 0;try{for(var I,E=this,w=function(){var a=I.value;if(null==a.uri)if(i.Is.exist(e)){var c=r.j.createUint8ArrayFromBufferViewInfo(t,a.bufferView,e),l=r.j.createBlobImageUriFromUint8Array(c,a.mimeType);_.push(E.__loadImageUri(l,a,n))}else{var u=t.bufferViews[a.bufferView].bufferObject;if(i.Is.not.exist(u))return console.error("gltf2BufferView.bufferObject not found"),"continue";var h=u.bufferPromise,d=new o.n((function(e){h.then((function(o){var i=r.j.createUint8ArrayFromBufferViewInfo(t,a.bufferView,o),s=r.j.createBlobImageUriFromUint8Array(i,a.mimeType);f.__loadImageUri(s,a,n).then((function(){e(o)}))}))})),m=_.indexOf(h);_[m]=d,u.bufferPromise=d}else{var v=a.uri,p=v.split("/"),y=p[p.length-1],A=void 0;if(n&&E.__containsFileName(n,y)){var b=E.__getFullPathOfFileName(n,y),g=n[b];A=r.j.createBlobImageUriFromUint8Array(new Uint8Array(g),a.mimeType)}else A=v.match(/^data:/)?v:s+v;_.push(E.__loadImageUri(A,a,n))}},S=(null!==(u=t.images)&&void 0!==u?u:[])[Symbol.iterator]();!(b=(I=S.next()).done);b=!0)w()}catch(e){g=!0,x=e}finally{try{b||null==S.return||S.return()}finally{if(g)throw x}}if(a.defaultTextures){var T=a.defaultTextures.basePath,C=a.defaultTextures.textureInfos,P=!0,R=!1,D=void 0;try{for(var M,B=function(){var e=M.value,t=e.fileName,n=T+t,o=r.j.getExtension(t),i=r.j.getMimeTypeFromExtension(o),a=r.j.createImageFromUri(n,i).then((function(t){return t.crossOrigin="Anonymous",e.image={image:t},e.image}));_.push(a)},N=C[Symbol.iterator]();!(P=(M=N.next()).done);P=!0)B()}catch(e){R=!0,D=e}finally{try{P||null==N.return||N.return()}finally{if(R)throw D}}}return o.n.all(_,c).catch((function(e){console.log("Promise.all error",e)}))},e.__containsFileName=function(e,t){for(var n in e){var r=n.split("/");if(r[r.length-1]===t)return!0}return!1},e.__getFullPathOfFileName=function(e,t){for(var n in e){var r=n.split("/");if(r[r.length-1]===t)return n}},e.__loadImageUri=function(e,t,n){var i,a;return e.match(/basis$/)?new o.n((function(n){fetch(e,{mode:"cors"}).then((function(e){e.arrayBuffer().then((function(e){var r=new Uint8Array(e);t.basis=r,n(t)}))}))})):(null===(i=t.uri)||void 0===i?void 0:i.match(/basis$/))?new o.n((function(e){t.basis=new Uint8Array(n[t.uri]),e(t)})):e.match(/\.ktx2$/)||e.match(/^data:image\/ktx2/)||null!=t.bufferView&&"image/ktx2"===t.mimeType?new o.n((function(n){fetch(e,{mode:"cors"}).then((function(e){e.arrayBuffer().then((function(e){var r=new Uint8Array(e);t.ktx2=r,n(t)}))}))})):(null===(a=t.uri)||void 0===a?void 0:a.match(/ktx2$/))?new o.n((function(e){t.ktx2=new Uint8Array(n[t.uri]),e(t)})):r.j.createImageFromUri(e,t.mimeType).then((function(e){return e.crossOrigin="Anonymous",t.image=e,t}))},e}()},9645:(e,t,n)=>{n.d(t,{e:()=>W});var r=n(2342),o=n(9856),i=n(6860),a=n(5233),s=n(7468),c=n(8118),l=n(5527),u=n(361),f=n(3932),_=n(2535),h=n(6221),d=n(2637),m=n(9294),v=n(6264),p=n(5054),y=n(9611),A=n(4969),b=n(1625),g=n(3650),x=n(6382),I=n(7416),E=n(8020),w=n(7364),S=n(6601),T=n(2328),C=n(9805),P=n(9977),R=n(5171),D=n(4395),M=n(1811),B=n(7102),N=n(4021),O=n(9197),L=n(5479),F=n(3884),G=n(524),V=n(9958),z=n(4654),k=n(4398),U=n(7302),Q=n(8289);function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var W=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.__generateGroupEntity=function(e){var t=G._.createGroupEntity();return this.addTags(t,e),t},e.addTags=function(e,t){e.tryToSetTag({tag:"SourceType",value:t.asset.extras.fileType}),e.tryToSetTag({tag:"SourceTypeVersion",value:t.asset.extras.version})},e.__generateMeshEntity=function(e){var t=G._.createMeshEntity();return this.addTags(t,e),t},e.__generateCameraEntity=function(e){var t=G._.createCameraEntity();return this.addTags(t,e),t},e.__generateLightEntity=function(e){var t=G._.createLightEntity();return this.addTags(t,e),t},e.convertToRhodoniteObject=function(e){e.asset.extras.rnMeshesAtGltMeshIdx=[];var t=this.createRnBuffer(e);e.asset.extras.rnMaterials={};var n=this.__setupObjects(e,t),r=n.rnEntities,o=n.rnEntitiesByNames;e.asset.extras.rnEntities=r,this._setupTransform(e,r),this._setupAnimation(e,r,t),this._setupSkeleton(e,r,t),this._setupHierarchy(e,r),this._setupAnimation(e,r,t);var i=this.__generateGroupEntity(e);if(i.tryToSetUniqueName("FileRoot",!0),i.tryToSetTag({tag:"ObjectType",value:"top"}),e.scenes[0].nodes){var a=!0,s=!1,c=void 0;try{for(var l,u=e.scenes[0].nodes[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var f=r[l.value].getSceneGraph();i.getSceneGraph().addChild(f)}}catch(e){s=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw c}}}if(e.asset.extras&&e.asset.extras.rnLoaderOptions){var _,h=e.asset.extras.rnLoaderOptions;h&&h.loaderExtension&&(null==h||null===(_=h.loaderExtension)||void 0===_?void 0:_.loadExtensionInfoAndSetToRootGroup)&&h.loaderExtension.loadExtensionInfoAndSetToRootGroup(i,e),h&&h.expression&&h.expression.tryToSetTag({tag:"gltfModel",value:e})}return i.tryToSetTag({tag:"rnEntities",value:r}),i.tryToSetTag({tag:"rnEntitiesByNames",value:o}),i.tryToSetTag({tag:"gltfModel",value:e}),O.Is.not.exist(e.extras)&&(e.extras={}),e.extras.rnEntities=r,e.extras.rnEntitiesByNames=o,k.z.importEffect(e,i),k.z.importBillboard(e,r),O.Is.exist(e.extensionsUsed)&&e.extensionsUsed.indexOf("VRMC_vrm"),i},e.createRnBuffer=function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,a=e.buffers[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,c=new l.l({byteLength:s.byteLength,buffer:s.buffer,name:"gltf2Buffer_0_(".concat(s.uri,")"),byteAlign:4});t.push(c)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t},e._setupTransform=function(e,t){for(var n in e.nodes){var r=t[n],o=e.nodes[n],c=r.getTransform();o.translation&&(c.localPosition=i.P.fromCopyArray([o.translation[0],o.translation[1],o.translation[2]])),o.scale&&(c.localScale=i.P.fromCopyArray([o.scale[0],o.scale[1],o.scale[2]])),o.rotation&&(c.localRotation=a._.fromCopy4(o.rotation[0],o.rotation[1],o.rotation[2],o.rotation[3])),o.matrix&&(c.localMatrix=s.J.fromCopyArrayColumnMajor(o.matrix))}},e._setupHierarchy=function(e,t){var n=t.map((function(e){return e.getSceneGraph()}));for(var r in e.nodes){var o=parseInt(r),i=e.nodes[o];if(O.Is.exist(i.children)){var a=n[o],s=!0,c=!1,l=void 0;try{for(var u,f=i.children[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var _=n[u.value];a.addChild(_)}}catch(e){c=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw l}}}}},e._setupAnimation=function(e,t,n){if(e.animations){var o=!0,i=!1,a=void 0;try{for(var s,c=e.animations[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value,u=!0,f=!1,_=void 0;try{for(var h,d=l.samplers[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){var m=h.value;this._readBinaryFromAccessorAndSetItToAccessorExtras(m.inputObject,n),this._readBinaryFromAccessorAndSetItToAccessorExtras(m.outputObject,n)}}catch(e){f=!0,_=e}finally{try{u||null==d.return||d.return()}finally{if(f)throw _}}}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}}if(O.Is.exist(e.animations)&&e.animations.length>0){var v=!0,A=!1,b=void 0;try{for(var g,x=e.animations[Symbol.iterator]();!(v=(g=x.next()).done);v=!0){var I=g.value,E=!0,w=!1,S=void 0;try{for(var T,C=I.channels[Symbol.iterator]();!(E=(T=C.next()).done);E=!0){var P=T.value;if(O.Is.exist(P.samplerObject)){var R,D,M=P.samplerObject.inputObject.extras.typedDataArray,B=P.samplerObject.outputObject.extras.typedDataArray,N=null!==(R=P.samplerObject.interpolation)&&void 0!==R?R:"LINEAR";D="translation"===P.target.path?"translate":"rotation"===P.target.path?"quaternion":P.target.path;var L=t[P.target.node];if(O.Is.exist(L)){var F=L.tryToGetAnimation();if(O.Is.not.exist(F)&&(F=r.g.addComponentToEntity(p.c,L).getAnimation()),O.Is.exist(F)){var G=P.samplerObject.outputObject.extras.componentN;F.setAnimation(O.Is.exist(I.name)?I.name:"Untitled_Animation",D,M,B,G,y.k.fromString(N))}}}}}catch(e){w=!0,S=e}finally{try{E||null==C.return||C.return()}finally{if(w)throw S}}}}catch(e){A=!0,b=e}finally{try{v||null==x.return||x.return()}finally{if(A)throw b}}}},e._setupSkeleton=function(e,t,n){if(null!=e.skins)for(var o in e.nodes){var i=e.nodes[o],a=t[o].getSceneGraph(),c=void 0;if(O.Is.exist(i.skinObject)){var l=t[o];if(c=r.g.addComponentToEntity(b.Y,l).getSkeletal(),O.Is.exist(i.skinObject.bindShapeMatrix)&&(c._bindShapeMatrix=s.J.fromCopyArrayColumnMajor(i.skinObject.bindShapeMatrix)),O.Is.exist(i.skinObject.skeleton)&&(a.isRootJoint=!0,O.Is.exist(i.mesh))){var u=[],f=!0,_=!1,h=void 0;try{for(var d,m=i.skinObject.joints[Symbol.iterator]();!(f=(d=m.next()).done);f=!0){var v=d.value;u.push(t[v].getSceneGraph())}}catch(e){_=!0,h=e}finally{try{f||null==m.return||m.return()}finally{if(_)throw h}}c.setJoints(u),O.Is.exist(i.skinObject.skeleton)?c.topOfJointsHierarchy=t[i.skinObject.skeleton].getSceneGraph():c.topOfJointsHierarchy=u[0]}var p=!0,y=!1,A=void 0;try{for(var g,x=i.skinObject.joints[Symbol.iterator]();!(p=(g=x.next()).done);p=!0){var I=g.value;t[I].getSceneGraph().jointIndex=I}}catch(e){y=!0,A=e}finally{try{p||null==x.return||x.return()}finally{if(y)throw A}}var E=i.skinObject.inverseBindMatricesObject;if(O.Is.exist(E)){var w=this.__getRnBufferViewAndRnAccessor(E,n[E.bufferViewObject.buffer]);c.setInverseBindMatricesAccessor(w)}}}},e.__setupObjects=function(e,t){var n=[],i=new Map;for(var a in e.nodes){var s,c=e.nodes[parseInt(a)],l=void 0;if(null!=c.mesh){var u,f=c.mesh,_=this.__setupMesh(c,c.meshObject,f,t,e);c.name&&_.tryToSetUniqueName(c.name,!0),(null===(u=c.meshObject)||void 0===u?void 0:u.name)&&_.getComponent(o.$).tryToSetUniqueName(c.meshObject.name,!0),l=_}else if(null!=c.cameraObject){var h=this.__setupCamera(c.cameraObject,e);c.name&&h.tryToSetUniqueName(c.name,!0),l=h}else if(null===(s=c.extensions)||void 0===s?void 0:s.KHR_lights_punctual)l=this.__setupLight(c.extensions.KHR_lights_punctual.light,e);else{var d=this.__generateGroupEntity(e);c.name&&d.tryToSetUniqueName(c.name,!0),l=d}if(this.__isMorphing(c,e)){var m,v,p,y=[];if(c.weights)y=c.weights;else if(null===(m=c.meshObject)||void 0===m?void 0:m.weights)y=c.meshObject.weights;else{var A=0,b=!0,g=!1,x=void 0;try{for(var I,E=c.meshObject.primitives[Symbol.iterator]();!(b=(I=E.next()).done);b=!0){var w=I.value;O.Is.exist(w.targets)&&w.targets.length>A&&(A=w.targets.length)}}catch(e){g=!0,x=e}finally{try{b||null==E.return||E.return()}finally{if(g)throw x}}y=new Array(A).fill(0)}var S=(l=r.g.addComponentToEntity(V.x,l)).getBlendShape();S.weights=y,(null===(v=null===(p=c.meshObject)||void 0===p?void 0:p.primitives[0].extras)||void 0===v?void 0:v.targetNames)&&(S.targetNames=c.meshObject.primitives[0].extras.targetNames)}l.tryToSetTag({tag:F.j,value:a}),n.push(l),i.set(c.name,l)}return{rnEntities:n,rnEntitiesByNames:i}},e.__isMorphing=function(e,t){var n,r,o,i=null===(n=t.asset.extras)||void 0===n||null===(r=n.rnLoaderOptions)||void 0===r?void 0:r.defaultMaterialHelperArgumentArray[0];return!1!==(null==i?void 0:i.isMorphing)&&null!=(null===(o=e.meshObject)||void 0===o?void 0:o.primitives[0].targets)},e.__setupLight=function(e,t){var n=this.__generateLightEntity(t),r=n.getComponent(z.r);if(null!=e.name){r.tryToSetUniqueName(e.name,!0),r.type=C.v.fromString(e.type);var o,a,s=i.P.fromCopyArray3([1,1,1]),c=1;null!=e.color&&(s=i.P.fromCopyArray3(e.color)),null!=e.intensity&&(c=e.intensity),r.intensity=i.P.multiply(s,c),null!=e.range&&(r.range=e.range),"spot"===e.type&&(null!=(null===(o=e.spot)||void 0===o?void 0:o.innerConeAngle)&&(r.innerConeAngle=e.spot.innerConeAngle),null!=(null===(a=e.spot)||void 0===a?void 0:a.outerConeAngle)&&(r.outerConeAngle=e.spot.outerConeAngle))}return n},e.__setupCamera=function(e,t){var n=this.__generateCameraEntity(t),r=n.getCamera();return r.direction=i.P.fromCopyArray([0,0,-1]),t.asset&&t.asset.LastSaved_ApplicationVendor&&(r.direction=i.P.fromCopyArray([1,0,0]),r.directionInner=i.P.fromCopyArray([1,0,0])),r.up=i.P.fromCopyArray([0,1,0]),r.type=d.i.fromString(e.type),r.type===d.i.Perspective?(r.aspect=e.perspective.aspectRatio?e.perspective.aspectRatio:1,r.setFovyAndChangeFocalLength(A.k.radianToDegree(e.perspective.yfov)),r.zNear=e.perspective.znear,r.zFar=e.perspective.zfar?e.perspective.zfar:1e5,r.tryToSetTag({tag:"OriginalFovY",value:r.fovy})):r.type===d.i.Orthographic&&(r.xMag=e.orthographic.xmag,r.yMag=e.orthographic.ymag,r.zNear=e.orthographic.znear,r.zFar=e.orthographic.zfar,r.tryToSetTag({tag:"OriginalXMag",value:r.xMag}),r.tryToSetTag({tag:"OriginalYMag",value:r.yMag})),r.tryToSetTag({tag:"OriginalAspect",value:r.aspect}),n},e.__setupMesh=function(t,n,r,o,i){var a=this,s=this.__generateMeshEntity(i),l=i.asset.extras.rnMeshesAtGltMeshIdx[r],f=u.T.Triangles,_=s.getMesh();if(null!=l)_.setMesh(l);else{var d=new S.K,m=i.asset.extras.rnLoaderOptions;null!=(null==m?void 0:m.tangentCalculationMode)&&(d.tangentCalculationMode=m.tangentCalculationMode);var v=function(n,r){var o=a.__setupMaterial(n,t,i,r,r.materialObject);return!1===o.isEmptyMaterial()&&e.setDefaultTextures(o,i),o},p=function(n,r){var o=r.materialVariants;if(!O.Is.not.exist(o)){var s=!0,c=!1,l=void 0;try{for(var u,f=o[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var _=u.value,h=a.__setupMaterial(n,t,i,r,_.materialObject);!1===h.isEmptyMaterial()&&e.setDefaultTextures(h,i);var d=!0,m=!1,v=void 0;try{for(var p,y=_.variants[Symbol.iterator]();!(d=(p=y.next()).done);d=!0){var A=p.value;n.setMaterialVariant(A,h)}}catch(e){m=!0,v=e}finally{try{d||null==y.return||y.return()}finally{if(m)throw v}}}}catch(e){c=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw l}}}};for(var y in n.primitives){var A,b=n.primitives[y];null!=b.mode&&(f=u.T.from(b.mode));var g=new c.W,x=v(g,b);p(g,b);var I=void 0,E=new Map;if(null===(A=b.extensions)||void 0===A?void 0:A.KHR_draco_mesh_compression){if(I=this.__decodeDraco(b,o,i,E),O.Is.not.exist(I))break}else{O.Is.exist(b.indices)&&(I=this.__getRnBufferViewAndRnAccessor(b.indicesObject,o[b.indicesObject.bufferViewObject.buffer]));var w=new Map;for(var T in b.attributesObjects){var C=b.attributesObjects[T],R=o[C.bufferViewObject.buffer],D=void 0;O.Is.exist(C.bufferView)?(D=w.get(C.bufferView),O.Is.not.exist(D)&&(D=this.__getRnBufferView(C.bufferViewObject,R),w.set(C.bufferView,D))):D=R.takeBufferView({byteLengthToNeed:0,byteStride:0}).unwrapForce();var M=this.__getRnAccessor(C,D),B=h.T.toVertexAttributeSemanticJoinedStringAsGltfStyle(h.T.fromString(C.extras.attributeName));E.set(B,M)}}if(g.setData(E,f,x,I),null!=b.targets){var N=P.D.maxMorphTargetNumber;null!=(null==m?void 0:m.maxMorphTargetNumber)&&(N=m.maxMorphTargetNumber);for(var L=[],F=0;F<b.targetsObjects.length&&!(F>=N);F++){var G=b.targetsObjects[F],V=new Map;for(var z in G){var k=G[z],U=this.__getRnBufferViewAndRnAccessor(k,o[k.bufferViewObject.buffer]),Q=this.__copyRnAccessorAndBufferView(U),j=h.T.fromString(z),W=h.T.toVertexAttributeSemanticJoinedStringAsGltfStyle(j);V.set(W,Q)}L.push(V)}g.setBlendShapeTargets(L)}d.addPrimitive(g)}_.setMesh(d),i.asset.extras.rnMeshesAtGltMeshIdx[r]=d}return s},e.setSparseAccessor=function(e,t){for(var n,r,o,i,a=e.bufferViewObject.bufferObject.buffer,s=e.sparse.count,c=e.sparse.indices,l=(null!==(n=c.bufferViewObject.byteOffset)&&void 0!==n?n:0)+(null!==(r=c.byteOffset)&&void 0!==r?r:0),u=this._checkBytesPerComponent(c),f=u*s,_=new DataView(a.buffer,l+a.byteOffset,f),h=this._checkDataViewMethod(c),d=e.sparse.values,m=(null!==(o=d.bufferViewObject.byteOffset)&&void 0!==o?o:0)+(null!==(i=d.byteOffset)&&void 0!==i?i:0),v=this._checkBytesPerComponent(e),p=this._checkComponentNumber(e),y=v*p*s,A=new DataView(a.buffer,m+a.byteOffset,y),b=this._checkDataViewMethod(e),g=t.getTypedArray(),x=0;x<s;x++)for(var I=_[h](u*x,!0),E=0;E<p;E++){var w=A[b](v*p*x+v*E,!0);g[I*p+E]=w}},e.setDefaultTextures=function(e,t){var n,r;if(null!=(null===(n=t.asset.extras)||void 0===n||null===(r=n.rnLoaderOptions)||void 0===r?void 0:r.defaultTextures)){var o=t.asset.extras.rnLoaderOptions,i=t.asset.extras.rnLoaderOptions.defaultTextures,a=i.basePath,s=i.textureInfos,c=!0,l=!1,u=void 0;try{for(var f,_=s[Symbol.iterator]();!(c=(f=_.next()).done);c=!0){var h,d,v,p,y=f.value,A=new m.x;y.shaderSemantics!==I.f5.BaseColorTexture&&y.shaderSemantics!==I.f5.DiffuseColorTexture||(A.autoDetectTransparency=!0===o.autoDetectTextureTransparency),A.autoResize=!0===o.autoResizeTexture;var b={magFilter:O.Is.exist(null===(h=y.sampler)||void 0===h?void 0:h.magFilter)?B.d.from(y.sampler.magFilter):B.d.Linear,minFilter:O.Is.exist(null===(d=y.sampler)||void 0===d?void 0:d.minFilter)?B.d.from(y.sampler.minFilter):B.d.Linear,wrapS:O.Is.exist(null===(v=y.sampler)||void 0===v?void 0:v.wrapS)?B.d.from(y.sampler.wrapS):B.d.Repeat,wrapT:O.Is.exist(null===(p=y.sampler)||void 0===p?void 0:p.wrapT)?B.d.from(y.sampler.wrapT):B.d.Repeat},g=a+y.fileName;A.name=g;var x,E=y.image;if(null!=(null==E?void 0:E.image))!(null===(x=N.F.getWebGLResourceRepository().currentWebGLContextWrapper)||void 0===x?void 0:x.isWebGL2)&&!this.__sizeIsPowerOfTwo(E.image)&&this.__needResizeToPowerOfTwoOnWebGl1(b)&&(A.autoResize=!0),A.generateTextureFromImage(E.image,b);else if(null!=(null==E?void 0:E.basis))A.generateTextureFromBasis(E.basis,b);else{if(null==(null==E?void 0:E.ktx2)){console.warn("default image not found");continue}A.generateTextureFromKTX2(E.ktx2,b)}var w=y.shaderSemantics;e.setTextureParameter(w,A)}}catch(e){l=!0,u=e}finally{try{c||null==_.return||_.return()}finally{if(l)throw u}}}},e.__setVRM1Material=function(e,t,n,r,o,i){var a=n.extensions.VRM,s=o.extras.vrm0xMaterialProperty;if("VRM/MToon"===s.shader){var c,l,u=i.defaultMaterialHelperArgumentArray[0],f=u.additionalName,_=this.__isMorphing(t,n),h=this.__isSkinning(t,n),d=this.__isLighting(n,o),m=this.__useTangentAttribute(n,r),v=u.textures,p=u.debugMode,y=u.maxInstancesNumber,A=this.__makeOutputSrgb(n),b=a.rnExtension;return O.Is.exist(b)&&((c=b.renderPassOutline).isVrRendering=!0),null!=c&&(l=0!==s.floatProperties._OutlineWidthMode?x.G.createMToonMaterial({additionalName:f,isMorphing:_,isSkinning:h,isLighting:d,useTangentAttribute:m,isOutline:!0,materialProperties:s,textures:v,debugMode:p,maxInstancesNumber:y,makeOutputSrgb:A}):x.G.createEmptyMaterial(),c.setMaterialForPrimitive(l,e)),x.G.createMToonMaterial({additionalName:f,isMorphing:_,isSkinning:h,isLighting:d,useTangentAttribute:m,isOutline:!1,materialProperties:s,textures:v,debugMode:p,maxInstancesNumber:y,makeOutputSrgb:A})}if(i.defaultMaterialHelperArgumentArray[0].isOutline)return x.G.createEmptyMaterial()},e.__setVRM0xMaterial=function(e,t,n,r,o,i){var a=n.extensions.VRM,s=n.extensions.VRM.materialProperties[r.material];if("VRM/MToon"===s.shader){var c,l,u=i.defaultMaterialHelperArgumentArray[0],f=u.additionalName,_=this.__isMorphing(t,n),h=this.__isSkinning(t,n),d=this.__isLighting(n,o),m=this.__useTangentAttribute(n,r),v=u.textures,p=u.debugMode,y=u.maxInstancesNumber,A=this.__makeOutputSrgb(n),b=a.rnExtension;return O.Is.exist(b)&&((c=b.renderPassOutline).isVrRendering=!0),null!=c&&(l=0!==s.floatProperties._OutlineWidthMode?x.G.createMToonMaterial({additionalName:f,isMorphing:_,isSkinning:h,isLighting:d,useTangentAttribute:m,isOutline:!0,materialProperties:s,textures:v,debugMode:p,maxInstancesNumber:y,makeOutputSrgb:A}):x.G.createEmptyMaterial(),c.setMaterialForPrimitive(l,e)),x.G.createMToonMaterial({additionalName:f,isMorphing:_,isSkinning:h,isLighting:d,useTangentAttribute:m,isOutline:!1,materialProperties:s,textures:v,debugMode:p,maxInstancesNumber:y,makeOutputSrgb:A})}if(i.defaultMaterialHelperArgumentArray[0].isOutline)return x.G.createEmptyMaterial()},e.__generateAppropriateMaterial=function(e,t,n,r,o){var i,a,s,c;if(null!=(null===(i=n.asset.extras)||void 0===i?void 0:i.rnLoaderOptions)){var l,u=n.asset.extras.rnLoaderOptions;if(null!=(null===(l=u.loaderExtension)||void 0===l?void 0:l.isNeededToUseThisMaterial)&&u.loaderExtension.isNeededToUseThisMaterial(n)){var f,_,h=null===(f=n.asset.extras)||void 0===f||null===(_=f.rnLoaderOptions)||void 0===_?void 0:_.loaderExtension;if(null!=(null==h?void 0:h.generateMaterial))return h.generateMaterial(o)}if(u.__isImportVRM0x){var d=this.__setVRM0xMaterial(e,t,n,r,o,u);if(O.Is.exist(d))return d}var m,v=u.defaultMaterialHelperName;if(null!=v)return(m=x.G)[v].apply(m,function(e){if(Array.isArray(e))return j(e)}(c=u.defaultMaterialHelperArgumentArray)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(c)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}var p,y,A=this.__isMorphing(t,n),b=this.__isSkinning(t,n),E=this.__isLighting(n,o),w=g.F.fromGlTFString((null==o?void 0:o.alphaMode)||"OPAQUE");w=O.Is.exist(null==o||null===(a=o.extensions)||void 0===a?void 0:a.KHR_materials_transmission)?g.F.Translucent:w;var S,T=null!=t.skin?"skin".concat(null!==(y=null!==(p=t.skin)&&void 0!==p?p:t.skinName)&&void 0!==y?y:""):void 0;if(O.Is.exist(o)&&null!=(null===(S=o.extensions)||void 0===S?void 0:S.VRMC_materials_mtoon)){var C=n.asset.extras.rnLoaderOptions,R=this.__setVRM1Material(e,t,n,r,o,C);if(O.Is.exist(R))return R}var D=P.D.maxMaterialInstanceForEachType;if(parseFloat(null===(s=n.asset)||void 0===s?void 0:s.version)>=2){var M,B,N,L,F,G,V,z,k=null!==(z=null===(M=n.asset.extras)||void 0===M?void 0:M.rnLoaderOptions)&&void 0!==z?z:{},U=this.__useTangentAttribute(n,r),Q=this.__useNormalTexture(n),W=x.G.createPbrUberMaterial({isMorphing:A,isSkinning:b,isLighting:E,isClearCoat:O.Is.exist(null==o||null===(B=o.extensions)||void 0===B?void 0:B.KHR_materials_clearcoat),isTransmission:O.Is.exist(null==o||null===(N=o.extensions)||void 0===N?void 0:N.KHR_materials_transmission),isVolume:O.Is.exist(null==o||null===(L=o.extensions)||void 0===L?void 0:L.KHR_materials_volume),isSheen:O.Is.exist(null==o||null===(F=o.extensions)||void 0===F?void 0:F.KHR_materials_sheen),isSpecular:O.Is.exist(null==o||null===(G=o.extensions)||void 0===G?void 0:G.KHR_materials_specular),isIridescence:O.Is.exist(null==o||null===(V=o.extensions)||void 0===V?void 0:V.KHR_materials_iridescence),isShadow:!!k.shadow,useTangentAttribute:U,useNormalTexture:Q,additionalName:T,maxInstancesNumber:D}),X=this.__makeOutputSrgb(n);return O.Is.exist(X)&&W.setParameter(I.f5.MakeOutputSrgb,X),W}return x.G.createClassicUberMaterial({isSkinning:b,isLighting:E,additionalName:T,maxInstancesNumber:D})},e.__isLighting=function(e,t){var n,r,o,i,a=null==e||null===(n=e.asset)||void 0===n||null===(r=n.extras)||void 0===r||null===(o=r.rnLoaderOptions)||void 0===o?void 0:o.defaultMaterialHelperArgumentArray[0];return null!=(null==a?void 0:a.isLighting)?a.isLighting:null==(null==t||null===(i=t.extensions)||void 0===i?void 0:i.KHR_materials_unlit)},e.__isSkinning=function(e,t){var n,r,o,i=null==t||null===(n=t.asset)||void 0===n||null===(r=n.extras)||void 0===r||null===(o=r.rnLoaderOptions)||void 0===o?void 0:o.defaultMaterialHelperArgumentArray[0];return!1!==(null==i?void 0:i.isSkinning)&&null!=e.skin},e.__useTangentAttribute=function(e,t){var n,r,o;switch(null==e||null===(n=e.asset)||void 0===n||null===(r=n.extras)||void 0===r||null===(o=r.rnLoaderOptions)||void 0===o?void 0:o.tangentCalculationMode){case 0:case 3:return!1;case 1:break;case 2:case 4:return!0}for(var i in t.attributes)if("TANGENT"===i)return!0;return!1},e.__useNormalTexture=function(e){var t,n,r,o,i,a,s=null==e||null===(t=e.asset)||void 0===t||null===(n=t.extras)||void 0===n||null===(r=n.rnLoaderOptions)||void 0===r?void 0:r.defaultMaterialHelperArgumentArray[0];return!1!==(null==s?void 0:s.useNormalTexture)&&0!==(null==e||null===(o=e.asset)||void 0===o||null===(i=o.extras)||void 0===i||null===(a=i.rnLoaderOptions)||void 0===a?void 0:a.tangentCalculationMode)},e.__makeOutputSrgb=function(e){var t,n,r,o=null==e||null===(t=e.asset)||void 0===t||null===(n=t.extras)||void 0===n||null===(r=n.rnLoaderOptions)||void 0===r?void 0:r.defaultMaterialHelperArgumentArray[0];return null==o?void 0:o.makeOutputSrgb},e.__getMaterialHash=function(e,t,n,r){return n.material+"_isSkinning_"+this.__isSkinning(e,t)+"_isMorphing_"+this.__isMorphing(e,t)+"_isLighting_"+this.__isLighting(t,r)+"_useTangentAttribute_"+this.__useTangentAttribute(t,n)},e.__setupMaterial=function(t,n,r,o,a){var s,c,l=null!=(null==a||null===(s=a.extensions)||void 0===s?void 0:s.KHR_materials_unlit),u=this.__generateAppropriateMaterial(t,n,r,o,a);if(!this.__needParameterInitialization(a,u.materialTypeName))return u;var f=r.asset.extras.rnLoaderOptions,_=null==a?void 0:a.pbrMetallicRoughness;if(null!=_)X(_,u,r,f,a);else{var h,d=w.D.Phong.index;if(null==a||null===(h=a.extras)||void 0===h?void 0:h.technique){switch(a.extras.technique){case w.D.Constant.str:d=w.D.Constant.index;break;case w.D.Lambert.str:d=w.D.Lambert.index;break;case w.D.BlinnPhong.str:d=w.D.BlinnPhong.index;break;case w.D.Phong.str:d=w.D.Phong.index}u.setParameter(I.f5.ShadingModel,M.Ru.fromCopyNumber(d))}}var m=l?[0,0,0]:null==a?void 0:a.emissiveFactor;null!=m&&u.setParameter(I.f5.EmissiveFactor,i.P.fromCopyArray3(m));var p=null==a?void 0:a.emissiveTexture;if(null!=p&&O.Is.falsy(l)){var y,A=e._createTexture(p.texture,r);u.setTextureParameter(I.f5.EmissiveTexture,A),parseFloat(null===(y=r.asset)||void 0===y?void 0:y.version)>=2&&null!=p.texCoord&&u.setParameter(I.f5.EmissiveTexcoordIndex,p.texCoord),e._setupTextureTransform(p,u,I.f5.EmissiveTextureTransform,I.f5.EmissiveTextureRotation)}var b,x,E,S=null==a?void 0:a.alphaMode;(null==f?void 0:f.alphaMode)&&(S=f.alphaMode),null!=S&&(u.alphaMode=g.F.fromGlTFString(S),u.alphaMode!==g.F.Mask||(null===(b=r.asset.extras)||void 0===b||null===(x=b.rnLoaderOptions)||void 0===x?void 0:x.__isImportVRM0x)||u.setParameter(I.f5.AlphaCutoff,M.Ru.fromCopyNumber(null!==(E=null==a?void 0:a.alphaCutoff)&&void 0!==E?E:.5))),O.Is.exist(null==a||null===(c=a.extensions)||void 0===c?void 0:c.KHR_materials_transmission)&&(u.alphaMode=g.F.Translucent);var T=null==a?void 0:a.doubleSided;if(null!=T&&(u.cullFace=!T),O.Is.exist(a.diffuseColorTexture)){var C,P,R=a.diffuseColorTexture,D=e._createTexture(R,r,{autoDetectTransparency:null==f?void 0:f.autoDetectTextureTransparency});if(u.setTextureParameter(I.f5.DiffuseColorTexture,D),this._checkRnGltfLoaderOptionsExist(r)&&(null===(C=r.asset.extras)||void 0===C||null===(P=C.rnLoaderOptions)||void 0===P?void 0:P.loaderExtension)){var B=r.asset.extras.rnLoaderOptions.loaderExtension;B.setUVTransformToTexture&&B.setUVTransformToTexture(u,R.samplerObject)}}if(O.Is.exist(null==a?void 0:a.diffuseColorFactor)){var N=null==a?void 0:a.diffuseColorFactor;u.setParameter(I.f5.DiffuseColorFactor,v.Lt.fromCopyArray4(N))}var L=null==a?void 0:a.normalTexture;if(null!=L&&O.Is.falsy(l)){var F,G=e._createTexture(L.texture,r);u.setTextureParameter(I.f5.NormalTexture,G),parseFloat(null===(F=r.asset)||void 0===F?void 0:F.version)>=2&&(null!=L.texCoord&&u.setParameter(I.f5.NormalTexcoordIndex,L.texCoord),null!=L.scale&&u.setParameter(I.f5.NormalScale,L.scale))}if(e._setupTextureTransform(L,u,I.f5.NormalTextureTransform,I.f5.NormalTextureRotation),this._checkRnGltfLoaderOptionsExist(r)){var V,z,k=null===(V=r.asset.extras)||void 0===V||null===(z=V.rnLoaderOptions)||void 0===z?void 0:z.loaderExtension;null!=(null==k?void 0:k.setupMaterial)&&k.setupMaterial(r,a,u)}return u},e._createTexture=function(e,t){var n,r,o,i,a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=s.autoDetectTransparency,l=void 0!==c&&c,u=null===(n=t.asset.extras)||void 0===n?void 0:n.rnLoaderOptions,f=new m.x;f.autoDetectTransparency=l,f.autoResize=!0===(null==u?void 0:u.autoResizeTexture);var _={magFilter:O.Is.exist(null===(r=e.samplerObject)||void 0===r?void 0:r.magFilter)?B.d.from(e.samplerObject.magFilter):B.d.Linear,minFilter:O.Is.exist(null===(o=e.samplerObject)||void 0===o?void 0:o.minFilter)?B.d.from(e.samplerObject.minFilter):B.d.Linear,wrapS:O.Is.exist(null===(i=e.samplerObject)||void 0===i?void 0:i.wrapS)?B.d.from(e.samplerObject.wrapS):B.d.Repeat,wrapT:O.Is.exist(null===(a=e.samplerObject)||void 0===a?void 0:a.wrapT)?B.d.from(e.samplerObject.wrapT):B.d.Repeat},h=e.image;if(h.image){var d,v=h.image,p=N.F.getWebGLResourceRepository(),y=!(null===(d=p.currentWebGLContextWrapper)||void 0===d?void 0:d.isWebGL2);y&&!this.__sizeIsPowerOfTwo(v)&&this.__needResizeToPowerOfTwoOnWebGl1(_)&&(f.autoResize=!0),f.generateTextureFromImage(v,_)}else h.basis?f.generateTextureFromBasis(h.basis,_):h.ktx2&&f.generateTextureFromKTX2(h.ktx2,_);if(h.uri)f.name=h.uri;else{var A,b=null===(A=h.mimeType)||void 0===A?void 0:A.split("/")[1];f.name=h.name+".".concat(b)}return f},e.__needResizeToPowerOfTwoOnWebGl1=function(e){return e.wrapS!==B.d.ClampToEdge||e.wrapT!==B.d.ClampToEdge||e.minFilter!==B.d.Linear&&e.minFilter!==B.d.Nearest},e.__sizeIsPowerOfTwo=function(e){var t=e.width,n=e.height;return 0==(t&t-1)&&0==(n&n-1)},e.__needParameterInitialization=function(e,t){return null!=e&&(null!=t.match(/PbrUber/)||null!=t.match(/ClassicUber/))},e._checkRnGltfLoaderOptionsExist=function(e){var t;return!!(null===(t=e.asset.extras)||void 0===t?void 0:t.rnLoaderOptions)},e.__rewrapWithTypedArray=function(e,t,n,r){return new e(t.buffer,n+t.byteOffset,r)},e._checkBytesPerComponent=function(e){var t=0;switch(e.componentType){case 5120:case 5121:t=1;break;case 5122:case 5123:t=2;break;case 5124:case 5125:case 5126:t=4}return t},e._checkComponentNumber=function(e){var t=0;switch(e.type){case"SCALAR":t=1;break;case"VEC2":t=2;break;case"VEC3":t=3;break;case"VEC4":t=4;break;case"MAT4":t=16}return t},e._checkDataViewMethod=function(e){var t="";switch(e.componentType){case 5120:t="getInt8";break;case 5121:t="getUint8";break;case 5122:t="getInt16";break;case 5123:t="getUint16";break;case 5124:t="getInt32";break;case 5125:t="getUint32";break;case 5126:t="getFloat32"}return t},e._isSystemLittleEndian=function(){return!!new Uint8Array(new Uint16Array([255]).buffer)[0]},e._readBinaryFromAccessorAndSetItToAccessorExtras=function(t,n){var r,o,i,a=t.bufferViewObject,s=(null!==(o=a.byteOffset)&&void 0!==o?o:0)+(null!==(i=t.byteOffset)&&void 0!==i?i:0),c=a.bufferObject.buffer,l=this._checkComponentNumber(t),u=this._checkBytesPerComponent(t),f=this._checkDataViewMethod(t);O.Is.not.exist(t.extras)&&(t.extras={attributeName:"",toGetAsTypedArray:!0,typedDataArray:new Float32Array,componentN:0,componentBytes:4,dataViewMethod:""}),t.extras.componentN=O.Is.exist(null===(r=t.extras)||void 0===r?void 0:r.weightsArrayLength)?t.extras.weightsArrayLength:l,t.extras.componentBytes=u,t.extras.dataViewMethod=f;var _=u*l*t.count;if(O.Is.exist(n)){var h=n[t.bufferViewObject.buffer],d=this.__getRnBufferView(a,h);c=this.__getRnAccessor(t,d).getUint8Array(),s=0}var m=new Float32Array,v=[];if(e._isSystemLittleEndian()){var p=new Float32Array;"getFloat32"===f?p=this.__rewrapWithTypedArray(Float32Array,c,s,_/u):"getInt8"===f?p=new Int8Array(c,s,_/u):"getUint8"===f?p=new Uint8Array(c,s,_/u):"getInt16"===f?p=this.__rewrapWithTypedArray(Int16Array,c,s,_/u):"getUint16"===f?p=this.__rewrapWithTypedArray(Uint16Array,c,s,_/u):"getInt32"===f?p=this.__rewrapWithTypedArray(Int32Array,c,s,_/u):"getUint32"===f&&(p=this.__rewrapWithTypedArray(Uint32Array,c,s,_/u)),m=this.__normalizeTypedArrayToFloat32Array(f,p)}else{for(var y=new DataView(c.buffer,s+c.byteOffset,_),A=u*l,b=!0,g=0;g<_;g+=A)switch(t.type){case"SCALAR":v.push(y[f](g,b));break;case"VEC2":v.push(y[f](g,b)),v.push(y[f](g+u,b));break;case"VEC3":v.push(y[f](g,b)),v.push(y[f](g+u,b)),v.push(y[f](g+2*u,b));break;case"VEC4":for(var x=0;x<4;x++)v.push(y[f](g+u*x,b));break;case"MAT4":for(var I=0;I<16;I++)v.push(y[f](g+u*I,b))}m=this.__normalizeTypedArrayToFloat32Array(f,v)}return t.extras.typedDataArray=m,m},e.__normalizeTypedArrayToFloat32Array=function(e,t){return"getInt8"===e?L.j.normalizedInt8ArrayToFloat32Array(t):"getUint8"===e?L.j.normalizedUint8ArrayToFloat32Array(t):"getInt16"===e?L.j.normalizedInt16ArrayToFloat32Array(t):"getUint16"===e?L.j.normalizedUint16ArrayToFloat32Array(t):"getInt32"===e||"getUint32"===e?(console.error("Not considered"),new Float32Array):"getFloat32"===e?new Float32Array(t):(console.error("Not considered"),new Float32Array)},e.__addOffsetToIndices=function(e){for(var t=e.mesh.getPrimitiveNumber(),n=0,r=0;r<t;r++){var o=e.mesh.getPrimitiveAt(r).indicesAccessor;if(o){for(var i=o.elementCount,a=0;a<i;a++){var s=o.getScalar(a,{});o.setScalar(a,s+n,{})}n+=i}}},e.__getRnAccessor=function(e,t){var n,r=t.takeAccessorWithByteOffset({compositionType:f.d.fromString(e.type),componentType:_.r.from(e.componentType),count:e.count,byteOffsetInBufferView:null!==(n=e.byteOffset)&&void 0!==n?n:0,byteStride:e.byteStride,max:e.max,min:e.min,normalized:e.normalized}).unwrapForce();return O.Is.exist(e.sparse)&&this.setSparseAccessor(e,r),r},e.__getRnBufferViewAndRnAccessor=function(e,t){var n=e.bufferViewObject,r=this.__getRnBufferView(n,t);return this.__getRnAccessor(e,r)},e.__copyRnAccessorAndBufferView=function(e){var t=3*e.elementCount*4,n=D.B.getInstance().createOrGetBuffer(R.$.GPUVertexData).takeBufferView({byteLengthToNeed:t,byteStride:12}).unwrapForce().takeAccessor({compositionType:f.d.Vec3,componentType:_.r.Float,count:e.elementCount,max:e.max,min:e.min,normalized:e.normalized}).unwrapForce();return n.copyBuffer(e),n},e.__takeRnBufferViewAndRnAccessorForDraco=function(e,t,n){var r=n.takeBufferView({byteLengthToNeed:e.count*t*4,byteStride:0}).unwrapForce();return this.__getRnAccessor(e,r)},e.__getRnBufferView=function(e,t){var n,r;return t.takeBufferViewWithByteOffset({byteLengthToNeed:e.byteLength,byteStride:null!==(n=e.byteStride)&&void 0!==n?n:0,byteOffset:null!==(r=e.byteOffset)&&void 0!==r?r:0}).unwrapForce()},e.__getGeometryFromDracoBuffer=function(e,t,n){var r=new e.DecoderBuffer;r.Init(new Int8Array(n),n.byteLength);var o,i,a=t.GetEncodedGeometryType(r);if(a===e.TRIANGULAR_MESH?(o=new e.Mesh,i=t.DecodeBufferToMesh(r,o)):a===e.POINT_CLOUD?(o=new e.PointCloud,i=t.DecodeBufferToPointCloud(r,o)):console.error("Unknown geometry type."),o.geometryType=a,!i.ok()||0===o.ptr){var s="Decoding failed: ";return s+=i.error_msg(),console.error(s),e.destroy(t),void e.destroy(o)}return e.destroy(r),o},e.__getIndicesFromDraco=function(e,t,n,r){if(n.geometryType===e.TRIANGULAR_MESH){var o;if(r){var i=new e.DracoInt32Array;t.GetTriangleStripsFromMesh(n,i),o=new Uint32Array(i.size());for(var a=0;a<i.size();++a)o[a]=i.GetValue(a);e.destroy(i)}else{var s=n.num_faces();o=new Uint32Array(3*s);for(var c=new e.DracoInt32Array,l=0;l<s;++l){t.GetFaceFromMesh(n,l,c);var u=3*l;o[u]=c.GetValue(0),o[u+1]=c.GetValue(1),o[u+2]=c.GetValue(2)}e.destroy(c)}return o}},e.__decodeDraco=function(e,t,n,r){var o=n.bufferViews[e.extensions.KHR_draco_mesh_compression.bufferView],i=this.__getRnBufferView(o,t[o.buffer]),a=new Uint8Array(i.getUint8Array()).buffer,s=new DracoDecoderModule,c=new s.Decoder,l=this.__getGeometryFromDracoBuffer(s,c,a);if(null==l)return s.destroy(l),void s.destroy(c);var _=l.num_points(),d=this.__createBufferForDecompressedData(e,_),m=!1;u.T.from(e.mode)===u.T.TriangleStrip&&(m=!0);for(var v=this.__getIndicesFromDraco(s,c,l,m),p=this.__takeRnBufferViewAndRnAccessorForDraco(e.indicesObject,1,d),y=0;y<v.length;y++)p.setScalar(y,v[y],{});for(var A in e.attributes){var b=e.extensions.KHR_draco_mesh_compression.attributes[A],g=e.attributesObjects[A],x=void 0;if(O.Is.not.exist(b))x=this.__getRnBufferViewAndRnAccessor(g,t[g.bufferViewObject.buffer]);else{var I=f.d.fromString(g.type).getNumberOfComponents();x=this.__takeRnBufferViewAndRnAccessorForDraco(g,I,d);var E=c.GetAttributeByUniqueId(l,b),w=new s.DracoFloat32Array;c.GetAttributeFloatForAllPoints(l,E,w);for(var S=0;S<_;S++)1===I?x.setScalar(S,w.GetValue(S*I),{}):2===I?x.setVec2(S,w.GetValue(S*I),w.GetValue(S*I+1),{}):3===I?x.setVec3(S,w.GetValue(S*I),w.GetValue(S*I+1),w.GetValue(S*I+2),{}):4===I&&x.setVec4(S,w.GetValue(S*I),w.GetValue(S*I+1),w.GetValue(S*I+2),w.GetValue(S*I+3),{});s.destroy(w)}O.Is.exist(g.sparse)&&this.setSparseAccessor(g,x);var T=h.T.toVertexAttributeSemanticJoinedStringAsGltfStyle(h.T.fromString(g.extras.attributeName));r.set(T,x)}return s.destroy(l),s.destroy(c),p},e._setupTextureTransform=function(e,t,n,r){var o;if(null==e||null===(o=e.extensions)||void 0===o?void 0:o.KHR_texture_transform){var i=T.xQ.fromCopyArray([1,1,0,0]),a=0,s=e.extensions.KHR_texture_transform;null!=s.scale&&(i.x=s.scale[0],i.y=s.scale[1]),null!=s.offset&&(i.z=s.offset[0],i.w=s.offset[1]),null!=s.rotation&&(a=s.rotation),t.setParameter(n,i),t.setParameter(r,a)}},e.__createBufferForDecompressedData=function(e,t){var n=0;O.Is.exist(e.indices)&&(n+=4*e.indicesObject.count);var r=e.extensions.KHR_draco_mesh_compression.attributes;for(var o in e.attributes)if(null!=r[o]){var i=e.attributesObjects[o];n+=t*f.d.fromString(i.type).getNumberOfComponents()*4}return new l.l({byteLength:n,buffer:new ArrayBuffer(n),name:"Draco",byteAlign:4})},e.__generateVrmNormalizedSkeleton=function(e,t){var n=[],r=function(t,o){if(O.Is.exist(t.children)){var i=!0,a=!1,s=void 0;try{for(var c,l=t.children[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var u=c.value,f=n[u];O.Is.exist(f)&&(o.getSceneGraph().addChild(f.getSceneGraph()),r(e.nodes[u],f))}}catch(e){a=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}}},o=!0,i=!1,a=void 0;try{for(var c,l=e.nodes[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value;if(O.Is.exist(u.skinObject)){var f=u.skinObject.joints,_=!0,h=!1,d=void 0;try{for(var m,v=f[Symbol.iterator]();!(_=(m=v.next()).done);_=!0){var p=m.value,y=t[p],A=G._.createGroupEntity();A.getTransform().localMatrix=y.getTransform().localMatrix,n[p]=A}}catch(e){h=!0,d=e}finally{try{_||null==v.return||v.return()}finally{if(h)throw d}}}}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}var b=!0,g=!1,x=void 0;try{for(var I,E=e.nodes[Symbol.iterator]();!(b=(I=E.next()).done);b=!0){var w=I.value;if(O.Is.exist(w.skinObject)){var S=n[w.skinObject.joints[0]];r(w.skinObject.jointsObjects[0],S)}}}catch(e){g=!0,x=e}finally{try{b||null==E.return||E.return()}finally{if(g)throw x}}for(var T=0;T<e.nodes.length;T++){var C=e.nodes[T];if(O.Is.exist(C.skinObject)){var P=C.skinObject.joints,R=!0,D=!1,M=void 0;try{for(var B,N=P[Symbol.iterator]();!(R=(B=N.next()).done);R=!0)t[B.value].getTransform().localMatrix=s.J.identity()}catch(e){D=!0,M=e}finally{try{R||null==N.return||N.return()}finally{if(D)throw M}}var L=!0,F=!1,V=void 0;try{for(var z,k=P[Symbol.iterator]();!(L=(z=k.next()).done);L=!0){var U=z.value,j=t[U],W=Q.e.identity();n[U].getSceneGraph().parent&&(W=n[U].getSceneGraph().parent.matrix.invert()),j.getTransform().localPosition=W.multiplyVector3(n[U].getSceneGraph().position)}}catch(e){F=!0,V=e}finally{try{L||null==k.return||k.return()}finally{if(F)throw V}}}}for(var X=0;X<e.nodes.length;X++){var H=e.nodes[X];if(O.Is.exist(H.skinObject)){var q=H.skinObject.joints,Y=t[X].tryToGetSkeletal();if(O.Is.exist(Y))for(var K=Y.getInverseBindMatricesAccessor(),J=0;J<q.length;J++){var Z=t[q[J]];K.setMat4AsMatrix44(J,Z.getSceneGraph().matrix.invert(),{})}}}},e}();function X(e,t,n,r,o){var a,s=null!=(null===(a=o.extensions)||void 0===a?void 0:a.KHR_materials_unlit),c=e.baseColorFactor;null!=c&&t.setParameter(I.f5.BaseColorFactor,v.Lt.fromCopyArray4(c));var l=e.baseColorTexture;if(null!=l){var u=W._createTexture(l.texture,n,{autoDetectTransparency:null==r?void 0:r.autoDetectTextureTransparency});t.setTextureParameter(I.f5.BaseColorTexture,u),null!=l.texCoord&&t.setParameter(I.f5.BaseColorTexcoordIndex,l.texCoord)}var f=o.occlusionTexture;if(null!=f&&O.Is.falsy(s)){var _=W._createTexture(f.texture,n);t.setTextureParameter(I.f5.OcclusionTexture,_),null!=f.texCoord&&t.setParameter(I.f5.OcclusionTexcoordIndex,f.texCoord),null!=f.strength&&t.setParameter(I.f5.OcclusionStrength,f.strength),W._setupTextureTransform(f,t,I.f5.OcclusionTextureTransform,I.f5.OcclusionTextureRotation)}var h=e.metallicFactor;h=s?0:null!=h?h:1;var d=e.roughnessFactor;d=s?1:null!=d?d:1,t.setParameter(I.f5.MetallicRoughnessFactor,E.FM.fromCopyArray2([h,d]));var m=e.metallicRoughnessTexture;if(null!=m&&O.Is.falsy(s)){var p=W._createTexture(m.texture,n);t.setTextureParameter(I.f5.MetallicRoughnessTexture,p),null!=m.texCoord&&t.setParameter(I.f5.MetallicRoughnessTexcoordIndex,m.texCoord)}!function(e,t,n){var r,o=null==e||null===(r=e.extensions)||void 0===r?void 0:r.KHR_materials_clearcoat;if(O.Is.exist(o)){var i=O.Is.exist(o.clearcoatFactor)?o.clearcoatFactor:0;t.setParameter(I.f5.ClearCoatFactor,i);var a=o.clearcoatTexture;if(null!=a){var s=W._createTexture(a.texture,n);t.setTextureParameter(I.f5.ClearCoatTexture,s),null!=a.texCoord&&t.setParameter(I.f5.ClearCoatTexcoordIndex,a.texCoord),W._setupTextureTransform(a,t,I.f5.ClearCoatTextureTransform,I.f5.ClearCoatTextureRotation)}var c=O.Is.exist(o.clearcoatRoughnessFactor)?o.clearcoatRoughnessFactor:0;t.setParameter(I.f5.ClearCoatRoughnessFactor,c);var l=o.clearcoatRoughnessTexture;if(null!=l){var u=W._createTexture(l.texture,n);t.setTextureParameter(I.f5.ClearCoatRoughnessTexture,u),null!=l.texCoord&&t.setParameter(I.f5.ClearCoatRoughnessTexcoordIndex,l.texCoord),W._setupTextureTransform(l,t,I.f5.ClearCoatRoughnessTextureTransform,I.f5.ClearCoatRoughnessTextureRotation)}var f=o.clearcoatNormalTexture;if(null!=f){var _=W._createTexture(f.texture,n);t.setTextureParameter(I.f5.ClearCoatNormalTexture,_),null!=f.texCoord&&t.setParameter(I.f5.ClearCoatNormalTexcoordIndex,f.texCoord),W._setupTextureTransform(f,t,I.f5.ClearCoatNormalTextureTransform,I.f5.ClearCoatNormalTextureRotation)}}}(o,t,n);var y=function(e,t,n){var r,o=null===(r=e.extensions)||void 0===r?void 0:r.KHR_materials_transmission;if(O.Is.exist(o)){var i=O.Is.exist(o.transmissionFactor)?o.transmissionFactor:0;t.setParameter(I.f5.TransmissionFactor,i);var a=o.transmissionTexture;if(O.Is.exist(a)){var s=W._createTexture(a.texture,n);t.setTextureParameter(I.f5.TransmissionTexture,s)}return!0}return!1}(o,t,n);r.transmission||(r.transmission=y),function(e,t,n){var r,o=null==e||null===(r=e.extensions)||void 0===r?void 0:r.KHR_materials_volume;if(O.Is.exist(o)){var i=o.thicknessFactor?o.thicknessFactor:0;null!=i&&t.setParameter(I.f5.ThicknessFactor,i);var a=o.thicknessTexture;if(null!=a){var s=W._createTexture(a.texture,n);t.setTextureParameter(I.f5.ThicknessTexture,s)}var c=o.attenuationDistance?o.attenuationDistance:0;null!=c&&t.setParameter(I.f5.AttenuationDistance,c);var l=o.attenuationColor?U.Z.Vector3.fromCopyArray3(o.attenuationColor):U.Z.Vector3.fromCopy3(1,1,1);null!=l&&t.setParameter(I.f5.AttenuationColor,l)}}(o,t,n),function(e,t,n){var r,o=null==e||null===(r=e.extensions)||void 0===r?void 0:r.KHR_materials_sheen;if(O.Is.exist(o)){var a=O.Is.exist(o.sheenColorFactor)?o.sheenColorFactor:[0,0,0];t.setParameter(I.f5.SheenColorFactor,i.P.fromCopyArray3(a));var s=o.sheenColorTexture;if(null!=s){var c=W._createTexture(s.texture,n);t.setTextureParameter(I.f5.SheenColorTexture,c)}var l=O.Is.exist(o.sheenRoughnessFactor)?o.sheenRoughnessFactor:0;t.setParameter(I.f5.SheenRoughnessFactor,l);var u=o.sheenRoughnessTexture;if(null!=u){var f=W._createTexture(u.texture,n);t.setTextureParameter(I.f5.SheenRoughnessTexture,f)}}}(o,t,n),function(e,t,n){var r,o=null==e||null===(r=e.extensions)||void 0===r?void 0:r.KHR_materials_specular;if(O.Is.exist(o)){var a=O.Is.exist(o.specularFactor)?o.specularFactor:1;t.setParameter(I.f5.SpecularFactor,a);var s=o.specularTexture;if(null!=s){var c=W._createTexture(s.texture,n);t.setTextureParameter(I.f5.SpecularTexture,c)}var l=O.Is.exist(o.SpecularColorFactor)?o.SpecularColorFactor:[1,1,1];t.setParameter(I.f5.SpecularColorFactor,i.P.fromCopyArray3(l));var u=o.SpecularColorTexture;if(null!=u){var f=W._createTexture(u.texture,n);t.setTextureParameter(I.f5.SpecularColorTexture,f)}}}(o,t,n),function(e,t,n){var r,o=null==e||null===(r=e.extensions)||void 0===r?void 0:r.KHR_materials_ior;if(O.Is.exist(o)){var i=O.Is.exist(o.ior)?o.ior:1.5;t.setParameter(I.f5.Ior,i)}}(o,t),function(e,t,n){var r,o=null==e||null===(r=e.extensions)||void 0===r?void 0:r.KHR_materials_iridescence;if(O.Is.exist(o)){var i=O.Is.exist(o.iridescenceFactor)?o.iridescenceFactor:0;t.setParameter(I.f5.IridescenceFactor,i);var a=o.iridescenceTexture;if(null!=a){var s=W._createTexture(a.texture,n);t.setTextureParameter(I.f5.IridescenceTexture,s)}var c=O.Is.exist(o.iridescenceIor)?o.iridescenceIor:1.3;t.setParameter(I.f5.IridescenceIor,c);var l=O.Is.exist(o.iridescenceThicknessMinimum)?o.iridescenceThicknessMinimum:100;t.setParameter(I.f5.IridescenceThicknessMinimum,l);var u=O.Is.exist(o.iridescenceThicknessMaximum)?o.iridescenceThicknessMaximum:400;t.setParameter(I.f5.IridescenceThicknessMaximum,u);var f=o.iridescenceThicknessTexture;if(null!=f){var _=W._createTexture(f.texture,n);t.setTextureParameter(I.f5.IridescenceThicknessTexture,_)}}}(o,t,n),function(e,t,n){W._setupTextureTransform(e,t,I.f5.BaseColorTextureTransform,I.f5.BaseColorTextureRotation),W._setupTextureTransform(n,t,I.f5.MetallicRoughnessTextureTransform,I.f5.MetallicRoughnessTextureRotation)}(l,t,m)}},4398:(e,t,n)=>{n.d(t,{z:()=>l});var r=n(5737),o=n(1905),i=n(2342),a=n(9076),s=n(5479),c=n(9197),l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.importBillboard=function(e,t){if(!c.Is.not.exist(e.extensionsUsed)&&-1!==e.extensionsUsed.findIndex((function(e){return"RHODONITE_billboard"===e})))for(var n in e.nodes){var r=t[n],o=e.nodes[n],i=r.getSceneGraph();void 0!==o.extensions&&void 0!==o.extensions.RHODONITE_billboard&&!0===o.extensions.RHODONITE_billboard.isBillboard&&(i.isBillboard=!0)}},e.importEffect=function(e,t){if(!c.Is.not.exist(e.extensions)&&!c.Is.not.exist(e.extensions.RHODONITE_effekseer)&&-1!==e.extensionsUsed.findIndex((function(e){return"RHODONITE_effekseer"===e}))){var l=t.getTagValue("rnEntities"),u=e.extensions.RHODONITE_effekseer.effects,f=!0,_=!1,h=void 0;try{for(var d,m=function(){var t=d.value,u=l[t.node],f=i.g.addComponentToEntity(r.D,u),_=f.getEffekseer();_.playJustAfterLoaded=!0,_.isLoop=!0,c.Is.exist(t.bufferView)?e.buffers[0].bufferPromise.then((function(n){var r=s.j.createUint8ArrayFromBufferViewInfo(e,t.bufferView,n);_.arrayBuffer=r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength),_.type="efkpkg"})):c.Is.exist(t.uri)?(_.uri=t.uri,_.type="efk"):console.error("No real effect data."),function(e,t){var n=e.getComponentByComponentTID(o.zz.EffekseerComponentTID);if(c.Is.exist(n)&&(n.playJustAfterLoaded=!0,n.isLoop=!0,c.Is.exist(t.timelines))){var r=t.timelines,s=!0,l=!1,u=void 0;try{for(var f,_=r[Symbol.iterator]();!(s=(f=_.next()).done);s=!0){var h=f.value,d=h.values,m=h.name,v=d.map((function(e){return{input:e.input,event:e.event}})),p=e.tryToGetAnimation(),y=void 0;c.Is.not.exist(p)&&(y=i.g.addComponentToEntity(o.cw,e)),(p=y.getAnimation()).setAnimation(c.Is.exist(m)?m:"Default","effekseer",new Float32Array(v.map((function(e){return e.input}))),new Float32Array(v.map((function(e){return"play"===e.event?1:(e.event,0)}))),1,a.kO.Step,!0)}}catch(e){l=!0,u=e}finally{try{s||null==_.return||_.return()}finally{if(l)throw u}}}}(f,t);var h=n(6893).Zlib.Unzip;r.D.Unzip=h},v=u[Symbol.iterator]();!(f=(d=v.next()).done);f=!0)m()}catch(e){_=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(_)throw h}}}},e}()},1442:(e,t,n)=>{n.d(t,{mNG:()=>D.mN,qfN:()=>rt.q,lam:()=>a.l,bCT:()=>D.bC,mC0:()=>r.m,PxB:()=>Ln.P,XAY:()=>D.XA,lJH:()=>D.lJ,VI2:()=>Qn,yEY:()=>Hi.y,OxW:()=>D.Ox,U_s:()=>Ui.U,yd$:()=>tr,FvO:()=>m.Fv,tVY:()=>$t,sdx:()=>m.sd,cwg:()=>a.cw,kOi:()=>m.kO,Sy_:()=>ar,JRY:()=>fr,RDh:()=>ye,l6R:()=>m.l6,xTt:()=>a.xT,afv:()=>pr,fgK:()=>Ir,Nh_:()=>m.Nh,lWr:()=>Qi.l,$HW:()=>m.$H,qP0:()=>ji.q,FOu:()=>ht.F,CtF:()=>ut.Ct,Myt:()=>a.My,SPq:()=>a.SP,MyC:()=>m.My,iM5:()=>m.iM,h_U:()=>yi.h,sZ3:()=>D.sZ,tWC:()=>D.tW,et4:()=>Je,wA2:()=>s.w,C2e:()=>c.C,reR:()=>m.re,dh2:()=>m.dh,bfi:()=>m.bf,DeH:()=>l.D,SGm:()=>D.SG,zUz:()=>D.zU,igI:()=>D.ig,HOX:()=>D.HO,R1o:()=>D.R1,p8_:()=>D.p8,GYQ:()=>D.GY,cV0:()=>D.cV,n9W:()=>D.n9,GFx:()=>Pr,Xv:()=>Ae.X,BtG:()=>Bt.B,fZl:()=>Ai.f,j4H:()=>ut.j4,Q5_:()=>bi.Q,tlJ:()=>gi.t,jLO:()=>Nr,c5O:()=>an,Lfs:()=>Xi.Lf,_QQ:()=>Xi._Q,lOB:()=>Xi.lO,k$j:()=>Xi.k$,zUJ:()=>Xi.zU,ak0:()=>Xi.ak,n9:()=>Xi.n9,k4:()=>Xi.k4,vE_:()=>Xi.vE,cG$:()=>Xi.cG,Sss:()=>Xi.Ss,q7F:()=>Xi.q7,cAE:()=>Xi.cA,fAB:()=>Xi.fA,SGU:()=>Xi.SG,cEP:()=>Xi.cE,cSB:()=>Xi.cS,lcf:()=>Xi.lc,RyN:()=>Xi.Ry,_6o:()=>Xi._6,UB9:()=>Xi.UB,Cfj:()=>Xi.Cf,ROv:()=>Xi.RO,hDl:()=>Xi.hD,VS3:()=>Xi.VS,Ywc:()=>Xi.Yw,pt8:()=>Xi.pt,p22:()=>Xi.p2,jPE:()=>Xi.jP,lv:()=>Xi.lv,adG:()=>Xi.ad,oM$:()=>Xi.oM,jXG:()=>Xi.jX,fAN:()=>Xi.KA,KP1:()=>Xi.KP,hdu:()=>Xi.hd,uso:()=>Xi.us,yyZ:()=>Xi.yy,Rz4:()=>Xi.Rz,JHW:()=>u.J,_nU:()=>ct._,gIQ:()=>f.g,zFq:()=>xi.z,Jxr:()=>ut.Jx,Zfh:()=>Mi,UGl:()=>ut.UG,U7Y:()=>Wi.U,A2z:()=>Nt.A,Tv5:()=>m.Tv,n8g:()=>Ht,RQC:()=>Ot.R,uLm:()=>xt,iWj:()=>Ze.i,bLY:()=>Bi.b,Dy6:()=>k,jll:()=>U,Dbu:()=>z,ESz:()=>V,S5k:()=>Q,_Bd:()=>Ni._,WLX:()=>Oi.W,swI:()=>v,tb4:()=>ot.t,$jt:()=>_.$,B5B:()=>a.B5,xzS:()=>a.xz,ObQ:()=>j,Zb6:()=>un.Z,j6Y:()=>Nn,imh:()=>Vr,rjZ:()=>we,czt:()=>m.cz,jOP:()=>Xi.jO,K2G:()=>Xi.K2,KQz:()=>Xi.KQ,Tr1:()=>Xi.Tr,ALp:()=>_e.A,cmF:()=>D.cm,aqQ:()=>D.aq,uP$:()=>Wr,LkB:()=>ut.Lk,$tz:()=>Xi.$t,Is:()=>ut.Is,V5:()=>ut.V5,d90:()=>Me,r0A:()=>a.r0,vBC:()=>m.vB,x12:()=>ze,klP:()=>it.k,lW:()=>D.lW,fQ$:()=>Li.f,Svh:()=>Fi.S,F5T:()=>jn.F,G$p:()=>lt.G,rFg:()=>Wn.r,Db6:()=>D.Db,kj:()=>D.kj,ak:()=>D.ak,haE:()=>D.h,Jeh:()=>D.Je,B_3:()=>h.B,Kj0:()=>$e.K,$tA:()=>a.$t,tVI:()=>_t,YZ_:()=>a.YZ,KfE:()=>ut.Kf,eDb:()=>Kt.e,xJl:()=>Vt.x,P4J:()=>Kr,CEM:()=>D.CE,l$X:()=>D.l$,f7L:()=>D.f7,xkj:()=>D.xk,ecr:()=>D.ec,yGy:()=>D.yG,DUM:()=>D.DU,EtM:()=>D.Et,$_9:()=>D.$_,NRp:()=>D.NR,elw:()=>D.el,th1:()=>D.th,d6n:()=>D.d6,I18:()=>D.I1,oVE:()=>D.oV,xQg:()=>D.xQ,e2p:()=>D.e2,hnX:()=>D.hn,Hq9:()=>ut.Hq,fbG:()=>to,dHi:()=>ao,Ok:()=>ut.Ok,Wxm:()=>ut.Wx,jfW:()=>o.j,y8Z:()=>_o,Nus:()=>yo,ZeV:()=>a.Ze,VIj:()=>m.VI,JOQ:()=>ke.J,WV0:()=>et.W,TcR:()=>m.Tc,Qob:()=>He.Qo,xzx:()=>He.xz,aKP:()=>He.aK,IMH:()=>He.IM,V_R:()=>He.V_,Y1P:()=>He.Y1,Yxr:()=>He.Yx,BHz:()=>He.BH,V7o:()=>m.V7,yvy:()=>m.yv,Iqz:()=>m.Iq,DEK:()=>Io,_fP:()=>D._f,NiD:()=>Rt,G22:()=>m.G2,CDd:()=>Lt.C,$Og:()=>Yt,_iX:()=>mt._,L0o:()=>Dt,zYy:()=>On.z,MrI:()=>ut.Mr,S7_:()=>d.S,niV:()=>ut.ni,Rus:()=>D.Ru,udm:()=>Co,apw:()=>D.ap,kOh:()=>D.kO,que:()=>at.q,aj7:()=>a.aj,dBk:()=>Yn,Zp7:()=>m.Zp,f5e:()=>m.f5,wyA:()=>m.wy,HoG:()=>m.Ho,LvG:()=>m.Lv,axw:()=>m.ax,unQ:()=>Gi.u,QIo:()=>Kn.Q,DAE:()=>m.DA,l6Z:()=>m.J1,RKA:()=>Vi.R,OCV:()=>nt,YbW:()=>a.Yb,bDM:()=>ut.bD,aLr:()=>Xe,BMK:()=>dn,bsk:()=>ut.bs,dob:()=>zi.d,xP7:()=>Gt.x,xEZ:()=>fn.x,h36:()=>qi.h,IW4:()=>No,dIQ:()=>m.dI,qpU:()=>ut.qp,WQ0:()=>D.WQ,Uvn:()=>a.Uv,ug2:()=>st.u,X1h:()=>zo,Dit:()=>mn,UUB:()=>bn,tM2:()=>_n.t,Q_Q:()=>ki.Q,hLT:()=>Xo,H9W:()=>Jo,FM8:()=>D.FM,pV:()=>D.pV,EYs:()=>D.EY,Pa4:()=>D.P,TaZ:()=>ni,pg_:()=>D.pg,UJ:()=>D.UJ,Ltg:()=>D.Lt,rEL:()=>D.rE,Tjf:()=>D.Tj,j8u:()=>D.j8,TaT:()=>m.T,x$u:()=>m.x$,fO1:()=>ia,UaW:()=>si,EEb:()=>m.EE,ao$:()=>wn,ZAV:()=>a.ZA,pbL:()=>Pn,IsZ:()=>i.I,Lq7:()=>ut.Lq,lIh:()=>ut.lI,Bxs:()=>ut.Bx,zzN:()=>a.zz,sqk:()=>_i,KRN:()=>pi,lim:()=>ut.li,cuJ:()=>ut.cu,bmc:()=>ut.bm,VlM:()=>m.Vl,ULo:()=>m.UL,Zzs:()=>D.Zz,TLr:()=>D.TL,sZE:()=>D.RZ,jIe:()=>D.jI,F5f:()=>D.F5,vPp:()=>D.vP,_zI:()=>ut._z,efS:()=>f.e,to5:()=>D.to,wrt:()=>D.wr,Waq:()=>ut.W,dKe:()=>ut.dK,ZzZ:()=>ut.Zz,Z65:()=>ut.Z6,UDi:()=>ut.UD,Kyk:()=>m.Ky,U28:()=>ut.U2,ABp:()=>ut.AB,CTh:()=>ie,OHV:()=>C,j37:()=>ut.j3,vAU:()=>a.vA,LSm:()=>ut.LS,Dhi:()=>cn,jeP:()=>ln,CWu:()=>ut.CW,$z2:()=>ut.$z,OTk:()=>y,nnL:()=>D.nn,w08:()=>D.w0,GWg:()=>D.GW,t5w:()=>D.t5,vk8:()=>D.vk,PFe:()=>D.PF,Ffi:()=>D.Ff,Upt:()=>D.Up,Dq2:()=>D.Dq,VIV:()=>D.VI,hxV:()=>D.hx,JIQ:()=>D.JI,EYp:()=>Xi.EY,fKE:()=>D.fK,lxk:()=>D.lx,tSN:()=>ut.tS,JxS:()=>ut.WF,t0P:()=>ut.t0,fK9:()=>ut.fK,OBD:()=>ut.OB,bhs:()=>ut.bh,ZsA:()=>ut.Zs,fYc:()=>ut.fY,eD0:()=>ut.eD,QjB:()=>ut.Qj,nsy:()=>D.ns,p8g:()=>D.eI,n5i:()=>D.n5,QUJ:()=>D.QU,XgD:()=>D.Xg,vVE:()=>ut.vV,YUA:()=>ut.YU,ozT:()=>ut.oz,EY5:()=>ut.EY,Rlh:()=>D.Rl,_7O:()=>D._7,wv6:()=>ut.wv,kSU:()=>ut.kS});var r=n(4275),o=n(7576),i=n(8430),a=n(1905),s=n(1410),c=n(6383),l=n(9977),u=n(3856),f=n(2342),_=n(9481),h=n(4395),d=n(9315),m=n(9076),v=Symbol();var p=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__raw=t};Object.defineProperty(p.prototype,"getComponentFromEntities",{enumerable:!1,writable:!1,configurable:!0,value:function(e){var t=this.__raw,n=[];return t.forEach((function(t){var r=t.getComponentByComponentTID(e.componentTID);null!=r&&n.push(r)})),n}});var y=function(){Object.defineProperty(Array.prototype,"Rn",{enumerable:!1,configurable:!1,get:function(){return new p(this)}})},A=n(7416),b=n(9197),g=n(3884),x=n(2535),I=n(5479),E=n(92),w=n(3932),S=n(429),T=n(6174);function C(e,t){for(var n=!1,r=e.extras.bufferViewByteLengthAccumulatedArray.length-1,o=[],i=0;i<t.length;i++){var a=t[i].getComponentByComponentTID(T.z.EffekseerComponentTID);if(b.Is.exist(a)){n=!0;var s={node:i,name:a.uniqueName};if(b.Is.exist(a.arrayBuffer)){var c=ie(e,r,new Uint8Array(a.arrayBuffer));s.bufferView=e.bufferViews.indexOf(c)}else b.Is.exist(a.uri)?s.uri=a.uri:console.error("no real effect data.");P(a.entity,s),o.push(s)}}n&&(e.extensions.RHODONITE_effekseer={version:"1.0",effects:o},e.extensionsUsed.push("RHODONITE_effekseer"))}function P(e,t){var n=e.tryToGetAnimation();if(b.Is.exist(n)){var r=n.getAnimationTrackNames(),o=[],i=!0,a=!1,s=void 0;try{for(var c,l=r[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var u=c.value;if(n.hasAnimation(u,"effekseer")){var f=n.getAnimationChannelsOfTrack(u);if(b.Is.exist(f)){var _=f.values(),h=!0,d=!1,m=void 0;try{for(var v,p=_[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var y=v.value;if("effekseer"===y.target.pathName){for(var A=y.sampler.input,g=[],x=0;x<A.length;x++){var I={input:A[x],event:y.sampler.output[x]>.5?"play":"pause"};g.push(I)}var E={name:u,values:g};o.push(E)}}}catch(e){d=!0,m=e}finally{try{h||null==p.return||p.return()}finally{if(d)throw m}}}}}}catch(e){a=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}t.timelines=o}}var R=n(6264),D=n(1855);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){B(i,r,o,a,s,"next",e)}function s(e){B(i,r,o,a,s,"throw",e)}a(void 0)}))}}function O(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}var F=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},G=n(5337).Z,V="glTF",z="glTF-Binary",k="glTF-Draco",U="glTF-Embedded",Q="No-Download",j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.exportGlbAsArrayBuffer=function(){},e.export=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{entities:void 0,type:z},n=this;return N((function(){var r,o,i,a,s,c,l,u;return F(this,(function(f){switch(f.label){case 0:return r=n.__collectEntities(t),o=r.collectedEntities,i=r.topLevelEntities,a=n.__createJsonBase(e),s=a.json,c=a.fileName,n.__createBufferViewsAndAccessors(s,o),n.__createNodes(s,o,i),[4,n.__createMaterials(s,o,t)];case 1:return f.sent(),C(s,o),l=n.__createBinary(s),n.__deleteEmptyArrays(s),u=W(s,l),t.type===z?n.__downloadGlb(s,c,u):t.type===V&&n.__downloadGltf(s,c,l),[2,u]}}))}))()},e.__deleteEmptyArrays=function(e){0===e.accessors.length&&delete e.accessors,0===e.bufferViews.length&&delete e.bufferViews,0===e.materials.length&&delete e.materials,0===e.meshes.length&&delete e.meshes,0===e.skins.length&&delete e.skins,0===e.textures.length&&delete e.textures,0===e.images.length&&delete e.images,0===e.animations.length&&delete e.animations,b.Is.exist(e.extensionsUsed)&&0===e.extensionsUsed.length&&delete e.extensionsUsed,0===e.cameras.length&&delete e.cameras,delete e.extras},e.__collectEntities=function(e){var t=function(t){if(b.Is.exist(e)&&b.Is.exist(e.excludeTags)){var n=!0,r=!1,o=void 0;try{for(var i,a=e.excludeTags[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;if(t.matchTag(s.tag,s.value))return!1}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}if(t.matchTag("Being","gizmo"))return!0}return!0},n=function(t){if(b.Is.exist(e)&&b.Is.exist(e.excludeTags)){var n=!0,r=!1,o=void 0;try{for(var i,a=e.excludeTags[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;if(t.matchTag(s.tag,s.value))return[]}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}return[t]},r=function(e,t){var o=e.getSceneGraph();if(o.children.length>0){for(var i=t?[]:n(e),a=0;a<o.children.length;a++){var s=o.children[a];Array.prototype.push.apply(i,r(s.entity,!1))}return i}return t?[]:n(e)};if(b.Is.exist(e)&&b.Is.exist(e.entities)&&e.entities.length>0){var o=e.entities.flatMap((function(e){return r(e,!0)})),i=[];e.entities.forEach((function(e){-1===o.indexOf(e)&&t(e)&&i.push(e)}));var a=e.entities.concat();return Array.prototype.push.apply(a,o),a=O(new Set(a)),0===i.length&&(i=a),{collectedEntities:a,topLevelEntities:i}}var s=f.g._getEntities();s=s.filter((function(e){return t(e)}));var c=S.a.getTopLevelComponents().flatMap((function(e){return e.entity}));return c=c.filter((function(e){return t(e)})),s=s.flatMap((function(e){return r(e,!0)})),Array.prototype.push.apply(s,c),{collectedEntities:s=O(new Set(s)),topLevelEntities:c}},e.__createJsonBase=function(e){var t=e||"Rhodonite_"+(new Date).getTime();return{json:{asset:{version:"2.0",generator:"Rhodonite (".concat(G.version,")")},buffers:[{uri:t+".bin",byteLength:0}],bufferViews:[],accessors:[],animations:[],meshes:[],skins:[],materials:[{pbrMetallicRoughness:{baseColorFactor:[1,1,1,1]}}],textures:[],images:[],extensionsUsed:[],extensions:{},extras:{rnSkins:[],bufferViewByteLengthAccumulatedArray:[]},cameras:[],samplers:[]},fileName:t}},e.__createBufferViewsAndAccessors=function(e,t){var n=[],r=[],o=[];!function(e,t,n,r,o){for(var i=0;i<t.length;i++){var a=t[i],s=a.tryToGetMesh();if(b.Is.exist(s)&&s.mesh){for(var c={primitives:[]},l=s.mesh.getPrimitiveNumber(),u=0;u<l;u++){var f=s.mesh.getPrimitiveAt(u),_={attributes:{},mode:f.primitiveMode.index},h=f.indicesAccessor;if(b.Is.exist(h)){var d=ce(e,n,r,h.bufferView,E.hAw),m=le(e,e.bufferViews.indexOf(d),o,h),v=e.accessors.indexOf(m);_.indices=v}for(var p=f.attributeAccessors,y=0;y<p.length;y++){var A=f.attributeSemantics[y].split(".")[0];if("BARY_CENTRIC_COORD"!==A){var g=p[y],x=H(e,n,r,g.bufferView,g),I=le(e,e.bufferViews.indexOf(x),o,g),w=e.accessors.indexOf(I);_.attributes[A]=w}}X(a,f,_,e,n,r,o),c.primitives[u]=_}e.meshes.push(c)}}}(e,t,n,r,o),function(e,t){for(var n=0,r=e.extras.bufferViewByteLengthAccumulatedArray.length,o=0;o<t.length;o++){var i=t[o].tryToGetAnimation();if(b.Is.exist(i)){var a=i.getAnimationTrackNames(),s=!0,c=!1,l=void 0;try{for(var u,f=a[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var _=u.value,h={channels:[],samplers:[]};e.animations.push(h);var d=0,m=i.getAnimationChannelsOfTrack(_);if(b.Is.exist(m)){var v=m.values(),p=!0,y=!1,A=void 0;try{for(var g,x=v[Symbol.iterator]();!(p=(g=x.next()).done);p=!0){var I=g.value;if("effekseer"!==I.target.pathName){var E=ee(e,I,r,n),w=E.inputAccessorIdx,S=te(e,I,r,n+=E.inputBufferViewByteLengthAccumulated),T=S.outputAccessorIdx;n+=S.outputBufferViewByteLengthAccumulated,d=Z(I,d,h,o),$(w,T,I,h)}}}catch(e){y=!0,A=e}finally{try{p||null==x.return||x.return()}finally{if(y)throw A}}}}}catch(e){c=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw l}}}}e.extras.bufferViewByteLengthAccumulatedArray.push(n)}(e,t),function(e,t,n,r,o){for(var i=function(i){var a=t[i].tryToGetSkeletal();if(b.Is.not.exist(a))return"continue";e.extras.rnSkins.push(a.entity);var s=a.getJoints(),c=[],l=!0,u=!1,f=void 0;try{for(var _,h=function(){var e=_.value;t.forEach((function(t,n){e.entity===t&&c.push(n)}))},d=s[Symbol.iterator]();!(l=(_=d.next()).done);l=!0)h()}catch(e){u=!0,f=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw f}}var m=a.getInverseBindMatricesAccessor();b.Is.exist(m)&&(ce(e,n,r,m.bufferView),le(e,e.bufferViews.length-1,o,m));var v=a.topOfJointsHierarchy,p=a._bindShapeMatrix,y=-1;if(b.Is.exist(v)){var A=v.entity;y=t.indexOf(A)}else y=c[0];var g={joints:c,inverseBindMatrices:e.accessors.length-1,skeleton:y>=0?y:void 0,bindShapeMatrix:null==p?void 0:p.flattenAsArray()};e.skins.push(g)},a=0;a<t.length;a++)i(a)}(e,t,n,r,o)},e.__createNodes=function(e,t,n){e.nodes=[],e.scenes=[{nodes:[]}];for(var r=e.scenes[0],o=0;o<t.length;o++)t[o].gltfNodeIndex=o;for(var i=0,a=0;a<t.length;a++){var s=t[a];e.nodes[a]={};var c=e.nodes[a];c.name=s.uniqueName;var l=s.getSceneGraph(),u=l.children;if(u.length>0){c.children=[];for(var f=0;f<u.length;f++){var _=u[f];b.Is.exist(_.entity.gltfNodeIndex)&&c.children.push(_.entity.gltfNodeIndex)}}l.isBillboard&&(c.extensions={RHODONITE_billboard:{isBillboard:!0}},-1===e.extensionsUsed.indexOf("RHODONITE_billboard")&&e.extensionsUsed.push("RHODONITE_billboard"));var h=s.getTransform();c.rotation=[h.localRotationInner.x,h.localRotationInner.y,h.localRotationInner.z,h.localRotationInner.w],c.scale=[h.localScaleInner.x,h.localScaleInner.y,h.localScaleInner.z],c.translation=[h.localPositionInner.x,h.localPositionInner.y,h.localPositionInner.z];var d=s.tryToGetMesh();b.Is.exist(d)&&b.Is.exist(d.mesh)&&(c.mesh=i++);var v=s.tryToGetBlendShape();if(b.Is.exist(v)){var p=v.weights;p.length>0&&(c.weights=p)}var y=s.tryToGetSkeletal();if(b.Is.exist(y)){var A=e.extras.rnSkins.indexOf(y.entity);A>=0&&(c.skin=A)}var g=s.tryToGetCamera();if(b.Is.exist(g)){var x=void 0;if(g.type===m.iM.Perspective){var I=g.getTagValue("OriginalAspect"),E=g.getTagValue("OriginalFovY");x={name:g.entity.uniqueName,type:"perspective",perspective:{aspectRatio:b.Is.exist(I)?I:g.aspect,yfov:b.Is.exist(E)?D.kj.degreeToRadian(E):D.kj.degreeToRadian(g.fovy),znear:g.zNear,zfar:g.zFar}}}else if(g.type===m.iM.Orthographic){var w=g.getTagValue("OriginalXMag"),S=g.getTagValue("OriginalYMag");x={name:g.entity.uniqueName,type:"orthographic",orthographic:{xmag:b.Is.exist(w)?w:g.xMag,ymag:b.Is.exist(S)?S:g.yMag,znear:g.zNear,zfar:g.zFar}}}e.cameras.push(x),c.camera=e.cameras.length-1}}n.forEach((function(e,n){var o=t.indexOf(e);o>=0&&r.nodes.push(o)}))},e.__createMaterials=function(e,t,n){return N((function(){var r,o,i,a,s;return F(this,(function(c){for(r=function(r){var s=t[r].tryToGetMesh();if(s&&s.mesh)for(var c=function(t){var r=s.mesh.getPrimitiveAt(t),o=l.primitives[t],c=r.material,u={pbrMetallicRoughness:{metallicFactor:1,roughnessFactor:1}},f=void 0;if(b.Is.exist(c)){b.Is.false(c.isLighting)&&(b.Is.not.exist(u.extensions)&&(u.extensions={}),u.extensions.KHR_materials_unlit={},e.extensionsUsed.indexOf("KHR_materials_unlit")<0&&e.extensionsUsed.push("KHR_materials_unlit")),f=c.getParameter(A.f5.BaseColorFactor),b.Is.not.exist(f)?(f=c.getParameter(A.f5.DiffuseColorFactor),b.Is.not.exist(f)&&(f=R.Lt.fromCopy4(1,1,1,1))):(u.pbrMetallicRoughness.metallicFactor=c.getParameter(A.f5.MetallicRoughnessFactor).x,u.pbrMetallicRoughness.roughnessFactor=c.getParameter(A.f5.MetallicRoughnessFactor).y),u.pbrMetallicRoughness.baseColorFactor=Array.prototype.slice.call(f._v),u.alphaMode=c.alphaMode.toGltfString();var _=[],h=function(t){if(t&&t.width>1&&t.height>1){for(var r=e.images.length,o=!1,s=0;s<e.images.length;s++){var c=e.images[s];b.Is.exist(c.rnTextureUID)&&c.rnTextureUID===t.textureUID&&(r=s,o=!0)}var l=-1,u={magFilter:t.magFilter.index,minFilter:t.minFilter.index,wrapS:t.wrapS.index,wrapT:t.wrapT.index};if(-1===(l=e.samplers.findIndex((function(e){return(0,g.C)(u,e)})))&&(e.samplers.push(u),l=e.samplers.length-1),!o){var f={uri:t.name};f.rnTextureUID=t.textureUID,-1!==_.indexOf(t.name)&&(f.uri+="_"+t.textureUID),_.push(f.uri),b.Is.not.exist(f.uri.match(/\.(png)/))&&(f.uri+=".png");var h=t.htmlCanvasElement;if(h){var d=new Promise((function(t,r){h.toBlob((function(o){if(!b.Is.exist(o))throw Error("canvas to blob error!");!function(e,t,n,r,o,i,a){oe.apply(this,arguments)}(e,a,o,n,f,t,r)}))}));i.push(d)}e.images.push(f)}var m={sampler:l,source:r};return-1===e.textures.indexOf(m)&&e.textures.push(m),e.textures.indexOf(m)}},d=c.getParameter(A.f5.BaseColorTexture),m=void 0;if(null!=d)null!=(m=h(d[1]))&&(u.pbrMetallicRoughness.baseColorTexture={index:m});else if(null!=(d=c.getParameter(A.f5.DiffuseColorTexture))){var v=h(d[1]);null!=v&&(u.pbrMetallicRoughness.diffuseColorTexture={index:v})}(d=c.getParameter(A.f5.MetallicRoughnessTexture))&&null!=(m=h(d[1]))&&(u.pbrMetallicRoughness.metallicRoughnessTexture={index:m}),(d=c.getParameter(A.f5.NormalTexture))&&null!=(m=h(d[1]))&&(u.normalTexture={index:m}),(d=c.getParameter(A.f5.OcclusionTexture))&&null!=(m=h(d[1]))&&(u.occlusionTexture={index:m}),(d=c.getParameter(A.f5.EmissiveTexture))&&null!=(m=h(d[1]))&&(u.emissiveTexture={index:m})}-1===e.materials.indexOf(u)&&e.materials.push(u),o.material=e.materials.indexOf(u)},l=e.meshes[o++],u=s.mesh.getPrimitiveNumber(),f=0;f<u;f++)c(f)},o=0,i=[],e.extras.bufferViewByteLengthAccumulatedArray.push(0),a=e.extras.bufferViewByteLengthAccumulatedArray.length-1,s=0;s<t.length;s++)r(s);return[2,Promise.all(i)]}))}))()},e.__createBinary=function(e){if(b.Is.undefined(e.accessors)||b.Is.undefined(e.bufferViews))return new ArrayBuffer(0);var t=e.extras.bufferViewByteLengthAccumulatedArray.reduce((function(e,t){return e+t}));t>0&&(e.buffers[0].byteLength=t+I.j.calcPaddingBytes(t,4));for(var n=new ArrayBuffer(e.buffers[0].byteLength),r=0,o=0;o<e.bufferViews.length;o++){var i=e.bufferViews[o],a=i.extras.uint8Array;delete i.extras;var s=r;I.j.copyArrayBufferWithPadding({src:a.buffer,dist:n,srcByteOffset:a.byteOffset,copyByteLength:a.byteLength,distByteOffset:s}),r+=I.j.addPaddingBytes(a.byteLength,4),i.byteOffset=s,i.buffer=0}return n},e.__downloadGlb=function(e,t,n){var r=document.createElement("a");r.download=t+".glb";var o=new Blob([n],{type:"octet/stream"}),i=URL.createObjectURL(o);r.href=i;var a=new MouseEvent("click");r.dispatchEvent(a)},e.__downloadGltf=function(e,t,n){var r=document.createElement("a");r.download=t+".gltf";var o=JSON.stringify(e,null,2);r.href="data:application/octet-stream,"+encodeURIComponent(o);var i=new MouseEvent("click");r.dispatchEvent(i);var a=document.createElement("a");a.download=t+".bin";var s=new Blob([n],{type:"octet/stream"}),c=URL.createObjectURL(s);a.href=c;var l=new MouseEvent("click");a.dispatchEvent(l)},e}();function W(e,t){delete e.buffers[0].uri;var n=JSON.stringify(e,null,2),r=I.j.stringToBuffer(n),o=I.j.calcPaddingBytes(r.byteLength,4);if(o>0){for(var i=0;i<o;i++)n+=" ";r=I.j.stringToBuffer(n)}var a=r.byteLength,s=20+a,c=s+4+4+t.byteLength,l=new ArrayBuffer(c),u=new DataView(l);return u.setUint32(0,1179937895,!0),u.setUint32(4,2,!0),u.setUint32(8,c,!0),u.setUint32(12,r.byteLength,!0),u.setUint32(16,1313821514,!0),I.j.copyArrayBufferAs4Bytes({src:r,dist:l,srcByteOffset:0,copyByteLength:r.byteLength,distByteOffset:20}),I.j.copyArrayBufferAs4Bytes({src:t,dist:l,srcByteOffset:0,copyByteLength:t.byteLength,distByteOffset:20+a+8}),u.setUint32(s,t.byteLength,!0),u.setUint32(s+4,5130562,!0),l}function X(e,t,n,r,o,i,a){var s,c,l=e.tryToGetBlendShape();if(b.Is.exist(l)){var u=t.getBlendShapeTargets();b.Is.not.exist(n.targets)&&(n.targets=[]);var f=!0,_=!1,h=void 0;try{for(var d,m=u[Symbol.iterator]();!(f=(d=m.next()).done);f=!0){var v=d.value,p={},y=!0,A=!1,g=void 0;try{for(var x,I=v.entries()[Symbol.iterator]();!(y=(x=I.next()).done);y=!0){var w=(s=x.value,c=2,function(e){if(Array.isArray(e))return e}(s)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(s,c)||L(s,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),S=w[0],T=w[1],C=ce(r,o,i,T.bufferView,E.TdU),P=le(r,r.bufferViews.indexOf(C),a,T),R=r.accessors.indexOf(P);p[S.split(".")[0]]=R}}catch(e){A=!0,g=e}finally{try{y||null==I.return||I.return()}finally{if(A)throw g}}n.targets.push(p)}}catch(e){_=!0,h=e}finally{try{f||null==m.return||m.return()}finally{if(_)throw h}}}}function H(e,t,n,r,o){var i=q(n,r);if(-1===i){var a=Y(t,r.buffer),s={buffer:a,byteLength:r.byteLength,byteOffset:r.byteOffsetInBuffer,extras:{uint8Array:r.getUint8Array()}};return s.target=E.TdU,e.extras.bufferViewByteLengthAccumulatedArray[a]=K(e.extras.bufferViewByteLengthAccumulatedArray,a,s),b.Is.exist(s.target)&&(s.byteStride=o.elementSizeInBytes),n.push(r),e.bufferViews.push(s),s}return e.bufferViews[i]}function q(e,t){return e.findIndex((function(e){return e.isSame(t)}))}function Y(e,t){0===e.length&&e.push(t);var n=e.findIndex((function(e){return e.isSame(t)})),r=-1===n?e.length:n;return-1===n&&e.push(t),r}function K(e,t,n){return b.Is.exist(e[t])?e[t]+I.j.addPaddingBytes(n.byteLength,4):I.j.addPaddingBytes(n.byteLength,4)}function J(e){switch(e){case"translate":return"translation";case"quaternion":return"rotation";case"scale":return"scale";case"weights":return"weights";default:throw new Error("Invalid Path Name")}}function Z(e,t,n,r){var o={sampler:t++,target:{path:J(e.target.pathName),node:r}};return n.channels.push(o),t}function $(e,t,n,r){var o={input:e,output:t,interpolation:n.sampler.interpolationMethod.GltfString};r.samplers.push(o)}function ee(e,t,n,r){var o=x.r.fromTypedArray(ArrayBuffer.isView(t.sampler.input)?t.sampler.input:new Float32Array(t.sampler.input)),i=t.sampler.input.length,a=ae({bufferIdx:n,bufferViewByteOffset:r,accessorByteOffset:0,accessorCount:i,bufferViewByteStride:x.r.Float.getSizeInBytes(),componentType:o,compositionType:w.d.Scalar,uint8Array:new Uint8Array(ArrayBuffer.isView(t.sampler.input)?t.sampler.input.buffer:new Float32Array(t.sampler.input).buffer)});e.bufferViews.push(a);var s=se({bufferViewIdx:e.bufferViews.indexOf(a),accessorByteOffset:0,componentType:o,count:i,compositionType:w.d.Scalar,min:[t.sampler.input[0]],max:[t.sampler.input[t.sampler.input.length-1]]});return e.accessors.push(s),r=ne(0,a),{inputAccessorIdx:e.accessors.indexOf(s),inputBufferViewByteLengthAccumulated:r}}function te(e,t,n,r){var o=x.r.fromTypedArray(ArrayBuffer.isView(t.sampler.output)?t.sampler.output:new Float32Array(t.sampler.output)),i=t.target.pathName,a=w.d.toGltf2AnimationAccessorCompositionType(t.sampler.outputComponentN),s=t.sampler.output.length/t.sampler.outputComponentN;"weights"===i&&(a=w.d.Scalar,s=t.sampler.output.length);var c=ae({bufferIdx:n,bufferViewByteOffset:r,accessorByteOffset:0,accessorCount:s,bufferViewByteStride:o.getSizeInBytes()*t.sampler.outputComponentN,componentType:o,compositionType:a,uint8Array:new Uint8Array(ArrayBuffer.isView(t.sampler.output)?t.sampler.output.buffer:new Float32Array(t.sampler.output).buffer)});e.bufferViews.push(c);var l=se({bufferViewIdx:e.bufferViews.indexOf(c),accessorByteOffset:0,componentType:o,count:s,compositionType:a});return e.accessors.push(l),r=ne(0,c),{outputAccessorIdx:e.accessors.indexOf(l),outputBufferViewByteLengthAccumulated:r}}function ne(e,t){return t.byteLength+I.j.calcPaddingBytes(t.byteLength,4)}function re(e){return e%4==0?e:e+(4-e%4)}function oe(){return(oe=N((function(e,t,n,r,o,i,a){var s;return F(this,(function(c){return r.type===V?(setTimeout((function(){var e=document.createElement("a"),t=new MouseEvent("click");e.href=URL.createObjectURL(n),e.download=o.uri,e.dispatchEvent(t),URL.revokeObjectURL(e.href)}),5e3*Math.random()),i()):((s=new FileReader).addEventListener("load",(function(){var n=s.result,r=ie(e,t,new Uint8ClampedArray(n));o.bufferView=e.bufferViews.indexOf(r),o.mimeType="image/png",delete o.uri,i()})),s.addEventListener("error",(function(){a(s.error)})),s.readAsArrayBuffer(n)),[2]}))}))).apply(this,arguments)}function ie(e,t,n){var r=e.extras.bufferViewByteLengthAccumulatedArray[t],o={buffer:t,byteLength:n.byteLength,byteOffset:r,extras:{uint8Array:n}},i=I.j.addPaddingBytes(o.byteLength,4)+r;return e.bufferViews.push(o),e.extras.bufferViewByteLengthAccumulatedArray[t]=i,o}function ae(e){var t=e.bufferIdx,n=e.bufferViewByteOffset,r=e.accessorByteOffset,o=e.accessorCount,i=e.bufferViewByteStride,a=e.componentType,s=e.compositionType,c=e.uint8Array,l=function(e){var t=e.accessorByteOffset,n=e.accessorCount,r=e.bufferViewByteStride,o=e.bufferViewByteOffset,i=e.sizeOfComponent,a=e.numberOfComponents,s=0===r?i*a:r;if(r%i!=0)throw Error("glTF2: When byteStride is defined, it MUST be a multiple of the size of the accessors component type.");var c,l=(4,(c=s)%4==0?c:c+(4-c%4)),u=re(t),f=i*a;return{fixedBufferViewByteLength:u+l*(n-1)+i*a,fixedBufferViewByteOffset:re(o+(f-(u+o)%f))}}({accessorByteOffset:re(r),accessorCount:o,bufferViewByteStride:i,bufferViewByteOffset:n,sizeOfComponent:a.getSizeInBytes(),numberOfComponents:s.getNumberOfComponents()});return{buffer:t,byteLength:l.fixedBufferViewByteLength,byteOffset:l.fixedBufferViewByteOffset,extras:{uint8Array:c}}}function se(e){var t=e.bufferViewIdx,n=e.accessorByteOffset,r=e.componentType,o=e.count,i=e.compositionType,a=e.min,s=e.max;return{bufferView:t,byteOffset:re(n),componentType:x.r.toGltf2AccessorComponentType(r),count:o,type:i.str,min:a,max:s,extras:{}}}function ce(e,t,n,r,o){var i=q(n,r);if(-1===i){var a=Y(t,r.buffer),s={buffer:a,byteLength:r.byteLength,byteOffset:r.byteOffsetInBuffer,extras:{uint8Array:r.getUint8Array()}};return b.Is.exist(o)&&(s.target=o),e.extras.bufferViewByteLengthAccumulatedArray[a]=K(e.extras.bufferViewByteLengthAccumulatedArray,a,s),n.push(r),e.bufferViews.push(s),s}return e.bufferViews[i]}function le(e,t,n,r){var o=function(e,t){return e.findIndex((function(e){return e.isSame(t)}))}(n,r);if(-1===o){var i={bufferView:t,byteOffset:r.byteOffsetInBufferView,componentType:x.r.toGltf2AccessorComponentType(r.componentType),count:r.elementCount,type:w.d.toGltf2AccessorCompositionTypeString(r.compositionType.getNumberOfComponents()),extras:{uint8Array:void 0}};return r.compositionType.getNumberOfComponents()<=4&&(i.max=r.max,i.min=r.min),n.push(r),e.accessors.push(i),i}return e.accessors[o]}var ue=n(6221),fe=n(361),_e=n(485);function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e){return de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},de(e)}function me(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e,t){return ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ve(e,t)}var pe=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=de(t);if(n){var o=de(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return me(this,e)});function o(){return he(this,o),r.apply(this,arguments)}return o.prototype.generate=function(e){var t,n={length:null!==(t=e.length)&&void 0!==t?t:1,material:e.material},r=[new Float32Array([0,0,0,n.length,0,0,0,0,0,0,n.length,0,0,0,0,0,0,n.length]),new Float32Array([1,0,0,1,0,0,0,1,0,0,1,0,0,0,1,0,0,1])],o=[ue.T.Position.XYZ,ue.T.Color0.XYZ];this.copyVertexData({attributes:r,attributeSemantics:o,primitiveMode:fe.T.Lines,material:n.material})},o}(_e.A),Ae=n(189);function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e){return ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ge(e)}function xe(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ie(e,t){return Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ie(e,t)}var Ee=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var we=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=ge(t);if(n){var o=ge(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return xe(this,e)});function o(){return be(this,o),r.apply(this,arguments)}return o.prototype.generate=function(e){for(var t,n,r,o,i,a={length:null!==(t=e.length)&&void 0!==t?t:1,division:null!==(n=e.division)&&void 0!==n?n:10,isXY:null===(r=e.isXY)||void 0===r||r,isXZ:null===(o=e.isXZ)||void 0===o||o,isYZ:null===(i=e.isYZ)||void 0===i||i,material:e.material},s=[],c=0;c<2*a.division+3;c++){var l=-a.length,u=a.length/(a.division+1);a.isXZ&&(s.push(-a.length,0,l+u*c),s.push(a.length,0,l+u*c),s.push(l+u*c,0,-a.length),s.push(l+u*c,0,a.length)),a.isXY&&(s.push(-a.length,l+u*c,0),s.push(a.length,l+u*c,0),s.push(l+u*c,-a.length,0),s.push(l+u*c,a.length,0)),a.isYZ&&(s.push(0,-a.length,l+u*c),s.push(0,a.length,l+u*c),s.push(0,l+u*c,-a.length),s.push(0,l+u*c,a.length))}var f=[new Float32Array(s)],_=[ue.T.Position.XYZ];this.copyVertexData({attributes:f,attributeSemantics:_,primitiveMode:fe.T.Lines,material:null==a?void 0:a.material})},o}(_e.A),Se=n(6860);function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e){return Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ce(e)}function Pe(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Re(e,t){return Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Re(e,t)}var De=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Ce(t);if(n){var o=Ce(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Pe(this,e)});function o(){var e;return Te(this,o),(e=r.apply(this,arguments)).__worldPositionOfThisJoint=Se.P.fromCopyArray3([0,0,1]),e.__worldPositionOfParentJoint=Se.P.fromCopyArray3([0,0,0]),e.__width=1,e}return o.prototype.generate=function(e){var t=Se.P.lengthBtw(this.__worldPositionOfThisJoint,this.__worldPositionOfParentJoint),n=this.__width,r=t-t/7.5,o=Se.P.subtract(this.__worldPositionOfParentJoint,this.__worldPositionOfThisJoint),i=Se.P.fromCopyArray3([0,1,0]);o.isEqual(Se.P.zero())||(i=Se.P.normalize(Se.P.subtract(this.__worldPositionOfParentJoint,this.__worldPositionOfThisJoint)));var a=Se.P.add(this.__worldPositionOfThisJoint,Se.P.multiply(i,r)),s=Se.P.fromCopyArray3([0,1,0]),c=Se.P.fromCopyArray3([0,-1,0]);Math.abs(Se.P.dot(i,s))>.4&&(s=Se.P.fromCopyArray3([1,0,0]),c=Se.P.fromCopyArray3([-1,0,0])),Math.abs(Se.P.dot(i,s))>.4&&(s=Se.P.fromCopyArray3([0,0,1]),c=Se.P.fromCopyArray3([0,0,-1]));var l=Se.P.multiply(Se.P.normalize(Se.P.cross(i,s)),n),u=Se.P.multiply(Se.P.normalize(Se.P.cross(i,l)),n),f=Se.P.multiply(Se.P.normalize(Se.P.cross(i,c)),n),_=Se.P.multiply(Se.P.normalize(Se.P.cross(i,f)),n),h=Se.P.add(a,l),d=Se.P.add(a,u),m=Se.P.add(a,f),v=Se.P.add(a,_),p=[];p.push(this.__worldPositionOfThisJoint),p.push(h),p.push(this.__worldPositionOfThisJoint),p.push(d),p.push(this.__worldPositionOfThisJoint),p.push(m),p.push(this.__worldPositionOfThisJoint),p.push(v),p.push(h),p.push(d),p.push(d),p.push(m),p.push(m),p.push(v),p.push(v),p.push(h),p.push(this.__worldPositionOfParentJoint),p.push(h),p.push(this.__worldPositionOfParentJoint),p.push(d),p.push(this.__worldPositionOfParentJoint),p.push(m),p.push(this.__worldPositionOfParentJoint),p.push(v);var y=[];p.map((function(e){Array.prototype.push.apply(y,e.flattenAsArray())}));var A=[new Float32Array(y)],b=[ue.T.Position.XYZ];this.copyVertexData({attributes:A,attributeSemantics:b,primitiveMode:fe.T.Lines,material:null==e?void 0:e.material})},o}(_e.A);function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(e)}function Le(e,t){return!t||"object"!==Ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fe(e,t){return Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Fe(e,t)}function Ge(e){return function(e){if(Array.isArray(e))return Be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Be(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ve=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Oe(t);if(n){var o=Oe(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Le(this,e)});function o(){return Ne(this,o),r.apply(this,arguments)}return o.prototype.generate=function(e){var t,n,r,o,i,a={startPos:null!==(r=e.startPos)&&void 0!==r?r:Se.P.fromCopy3(0,0,0),endPos:null!==(o=e.endPos)&&void 0!==o?o:Se.P.fromCopy3(1,0,0),hasTerminalMark:null===(i=e.hasTerminalMark)||void 0===i||i,material:e.material},s=[];if((t=s).push.apply(t,Ge(a.startPos.flattenAsArray())),(n=s).push.apply(n,Ge(a.endPos.flattenAsArray())),a.hasTerminalMark){var c=.1*a.startPos.lengthTo(a.endPos);s.push(a.startPos.x-c,a.startPos.y,a.startPos.z),s.push(a.startPos.x+c,a.startPos.y,a.startPos.z),s.push(a.startPos.x,a.startPos.y,a.startPos.z-c),s.push(a.startPos.x,a.startPos.y,a.startPos.z+c),s.push(a.endPos.x-c,a.endPos.y,a.endPos.z),s.push(a.endPos.x+c,a.endPos.y,a.endPos.z),s.push(a.endPos.x,a.endPos.y,a.endPos.z-c),s.push(a.endPos.x,a.endPos.y,a.endPos.z+c)}var l=[new Float32Array(s)],u=[ue.T.Position.XYZ];this.copyVertexData({attributes:l,attributeSemantics:u,primitiveMode:fe.T.Lines,material:a.material})},o}(_e.A),ke=n(3999);function Ue(e){return Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ue(e)}function Qe(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function je(e,t){return je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},je(e,t)}var We=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Ue(t);if(n){var o=Ue(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Qe(this,e)});function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r.call(this)}return o.prototype.generate=function(e){var t,n,r,o={radius:null!==(t=e.radius)&&void 0!==t?t:1,widthSegments:null!==(n=e.widthSegments)&&void 0!==n?n:10,heightSegments:null!==(r=e.heightSegments)&&void 0!==r?r:10,material:e.material},i=[],a=[],s=[];Math.abs(o.radius)<Number.EPSILON&&(console.warn("The argument radius is zero / nearly zero. Rn will take the radius as 0.001 for safety. Check your code."),o.radius=.001);for(var c=0;c<=o.heightSegments;c++)for(var l=c*Math.PI/o.heightSegments+1e-5,u=Math.sin(l),f=Math.cos(l),_=0;_<=o.widthSegments;_++){var h=2*_*Math.PI/o.widthSegments,d=Math.sin(h),m=Math.cos(h),v=o.radius*m*u,p=o.radius*f,y=o.radius*d*u,A=Se.P.fromCopyArray([v,p,y]);i.push(v),i.push(p),i.push(y);var b=1-_/o.widthSegments,g=c/o.heightSegments;a.push(b),a.push(g);var x=Se.P.normalize(A);s.push(x.x),s.push(x.y),s.push(x.z)}for(var I=[],E=0;E<o.heightSegments;E++)for(var w=0;w<o.widthSegments;w++){var S=E*(o.widthSegments+1)+w,T=S+o.widthSegments+1;I.push(S+1),I.push(T),I.push(S),I.push(S+1),I.push(T+1),I.push(T)}var C=[ue.T.Position.XYZ,ue.T.Normal.XYZ,ue.T.Texcoord0.XY],P=fe.T.Triangles,R=[new Float32Array(i),new Float32Array(s),new Float32Array(a)];this.copyVertexData({attributes:R,attributeSemantics:C,primitiveMode:P,indices:new Uint16Array(I),material:o.material})},o}(_e.A),He=n(5653);function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Je=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__components=[],this.__offsets=[],this.__semantic=t,this.__offsets=[],this.__components=[];var r=!0,o=!1,i=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)for(var c=Ke(a.value,2),l=c[0],u=c[1],f=l.split(","),_=0;_<f.length;_++){var h=f[_];h===t.X&&(this.__offsets[0]=_,this.__components[0]=u),h===t.Y&&(this.__offsets[1]=_,this.__components[1]=u),h===t.Z&&(this.__offsets[2]=_,this.__components[2]=u),h===t.W&&(this.__offsets[3]=_,this.__components[3]=u)}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}var t,n,r=e.prototype;return r.getScalarAsArray=function(e,t){return[this.__components[0].getScalarAt(e,this.__offsets[0],t)]},r.getVec2AsArray=function(e,t){return[this.__components[0].getScalarAt(e,this.__offsets[0],t),this.__components[1].getScalarAt(e,this.__offsets[1],t)]},r.getVec3AsArray=function(e,t){return[this.__components[0].getScalarAt(e,this.__offsets[0],t),this.__components[1].getScalarAt(e,this.__offsets[1],t),this.__components[2].getScalarAt(e,this.__offsets[2],t)]},r.getVec4AsArray=function(e,t){return[this.__components[0].getScalarAt(e,this.__offsets[0],t),this.__components[1].getScalarAt(e,this.__offsets[1],t),this.__components[2].getScalarAt(e,this.__offsets[2],t),this.__components[3].getScalarAt(e,this.__offsets[3],t)]},t=e,(n=[{key:"semantic",get:function(){return this.__semantic}}])&&Ye(t.prototype,n),e}(),Ze=n(1560),$e=n(6601),et=n(8118);function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nt=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__semantic=t,this.__accessor=n}var t,n,r=e.prototype;return r.getScalarAsArray=function(e,t){return[this.__accessor.getScalar(e,t)]},r.getVec2AsArray=function(e,t){return this.__accessor.getVec2AsArray(e,t)},r.getVec3AsArray=function(e,t){return this.__accessor.getVec3AsArray(e,t)},r.getVec4AsArray=function(e,t){return this.__accessor.getVec4AsArray(e,t)},t=e,(n=[{key:"semantic",get:function(){return this.__semantic}}])&&tt(t.prototype,n),e}(),rt=n(706),ot=n(5478),it=n(139),at=n(5914),st=n(3206),ct=n(524),lt=n(6382),ut=n(7690);function ft(e){var t=ct._.createMeshEntity(),n=t.getMesh(),r=new $e.K;return r.addPrimitive(e),n.setMesh(r),t}var _t=Object.freeze({createPlane:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new ke.J;t.generate(e);var n=ft(t);return ut.Is.not.exist(e.direction)&&(e.direction="xz"),"xy"===e.direction?n.localEulerAngles=Se.P.fromCopy3(Math.PI/2,0,0):"yz"===e.direction&&(n.localEulerAngles=Se.P.fromCopy3(0,0,Math.PI/2)),n},createLine:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new ze;t.generate(e);var n=ft(t);return n},createGrid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new we;t.generate(e);var n=ft(t);return n},createCube:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Ae.X;t.generate(e);var n=ft(t);return n},createSphere:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Xe;t.generate(e);var n=ft(t);return n},createJoint:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Me;t.generate(e);var n=ft(t);return n},createAxis:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new ye;t.generate(e);var n=ft(t);return n},createShape:ft}),ht=n(4021),dt=n(7952),mt=n(9978);function vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e){return pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},pt(e)}function yt(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function At(e,t){return!t||"object"!==gt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bt(e,t){return bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},bt(e,t)}var gt=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=pt(t);if(n){var o=pt(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return At(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).__colorAttachments=[],e.cgApiResourceUid=ht.F.InvalidCGAPIResourceUid,e.width=0,e.height=0,e.__colorAttachmentMap=new Map,e}var i,a,s=o.prototype;return s.getColorAttachedRenderTargetTexture=function(e){return null!=this.__colorAttachments[e]&&yt(this.__colorAttachments[e],mt._)?this.__colorAttachments[e]:void 0},s.getDepthAttachedRenderTargetTexture=function(){return yt(this.__depthAttachment,mt._)?this.__depthAttachment:void 0},s.create=function(e,t){this.width=e,this.height=t;var n=ht.F.getWebGLResourceRepository();return this.cgApiResourceUid=n.createFrameBufferObject(),this.cgApiResourceUid},s.setColorAttachmentAt=function(e,t){return t.width===this.width&&t.height===this.height&&(this.__colorAttachments[e]=t,ht.F.getWebGLResourceRepository().attachColorBufferToFrameBufferObject(this,e,t),this.__colorAttachmentMap.set(dt.G.from(e),t),!0)},s.setDepthAttachment=function(e){return e.width===this.width&&e.height===this.height&&(this.__depthAttachment=e,ht.F.getWebGLResourceRepository().attachDepthBufferToFrameBufferObject(this,e),!0)},s.setStencilAttachment=function(e){return e.width===this.width&&e.height===this.height&&(this.__stencilAttachment=e,ht.F.getWebGLResourceRepository().attachStencilBufferToFrameBufferObject(this,e),!0)},s.setDepthStencilAttachment=function(e){return e.width===this.width&&e.height===this.height&&(this.__depthStencilAttachment=e,ht.F.getWebGLResourceRepository().attachDepthStencilBufferToFrameBufferObject(this,e),!0)},s.resize=function(e,t){ht.F.getWebGLResourceRepository().deleteFrameBufferObject(this.cgApiResourceUid),this.cgApiResourceUid=ht.F.InvalidCGAPIResourceUid,this.width=0,this.height=0,this.create(e,t),this.depthAttachment&&(this.depthAttachment.resize(e,t),this.setDepthAttachment(this.depthAttachment)),this.depthStencilAttachment&&(this.depthStencilAttachment.resize(e,t),this.setDepthStencilAttachment(this.depthStencilAttachment)),this.stencilAttachment&&(this.stencilAttachment.resize(e,t),this.setStencilAttachment(this.stencilAttachment));for(var n=0;n<this.colorAttachments.length;n++)this.colorAttachments[n].resize(e,t),this.setColorAttachmentAt(n,this.colorAttachments[n])},s.destroy3DAPIResources=function(){ht.F.getWebGLResourceRepository().deleteFrameBufferObject(this.cgApiResourceUid),this.cgApiResourceUid=ht.F.InvalidCGAPIResourceUid,this.width=0,this.height=0,this.depthAttachment&&(this.depthAttachment.destroy3DAPIResources(),this.__depthAttachment=void 0),this.depthStencilAttachment&&(this.depthStencilAttachment.destroy3DAPIResources(),this.__depthStencilAttachment=void 0),this.stencilAttachment&&(this.stencilAttachment.destroy3DAPIResources(),this.__stencilAttachment=void 0);var e=!0,t=!1,n=void 0;try{for(var r,o=this.colorAttachments[Symbol.iterator]();!(e=(r=o.next()).done);e=!0)r.value.destroy3DAPIResources()}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}this.__colorAttachmentMap=new Map},s.whichColorAttachment=function(e){return this.__colorAttachments.indexOf(e)},i=o,(a=[{key:"colorAttachmentsRenderBufferTargets",get:function(){return Array.from(this.__colorAttachmentMap.keys())}},{key:"colorAttachments",get:function(){return this.__colorAttachments}},{key:"depthAttachment",get:function(){return this.__depthAttachment}},{key:"stencilAttachment",get:function(){return this.__stencilAttachment}},{key:"depthStencilAttachment",get:function(){return this.__depthStencilAttachment}},{key:"framebufferUID",get:function(){return this.cgApiResourceUid}}])&&vt(i.prototype,a),o}(d.S),It=n(7102),Et=n(4543);function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function St(e){return St=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},St(e)}function Tt(e,t){return!t||"object"!==Pt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ct(e,t){return Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ct(e,t)}var Pt=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var Rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ct(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=St(t);if(n){var o=St(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Tt(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).width=0,e.height=0,e.__internalFormat=It.d.Depth24,e._textureResourceUid=-1,e.__isMSAA=!1,e.__sampleCountMSAA=4,e}var i,a,s=o.prototype;return s.create=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.isMSAA,i=void 0!==o&&o,a=r.sampleCountMSAA,s=void 0===a?this.__sampleCountMSAA:a;this.width=e,this.height=t,this.__isMSAA=i,this.__sampleCountMSAA=s,this.__internalFormat=n;var c=ht.F.getWebGLResourceRepository();this._textureResourceUid=c.createRenderBuffer(e,t,n,i,s)},s.resize=function(e,t){this.destroy3DAPIResources(),this.create(e,t,this.__internalFormat,{isMSAA:this.__isMSAA})},s.destroy3DAPIResources=function(){return this.width=0,this.height=0,ht.F.getWebGLResourceRepository().deleteRenderBuffer(this._textureResourceUid),this._textureResourceUid=ht.F.InvalidCGAPIResourceUid,!0},i=o,(a=[{key:"_fbo",set:function(e){this.__fbo=e}},{key:"fbo",get:function(){return this.__fbo}}])&&wt(i.prototype,a),o}(d.S),Dt=Object.freeze({createTexturesForRenderTarget:function(e,t,n,r){var o=r.level,i=void 0===o?0:o,a=r.internalFormat,s=void 0===a?It.d.RGBA8:a,c=r.format,l=void 0===c?Et.V.RGBA:c,u=r.type,f=void 0===u?x.r.UnsignedByte:u,_=r.magFilter,h=void 0===_?It.d.Linear:_,d=r.minFilter,m=void 0===d?It.d.Linear:d,v=r.wrapS,p=void 0===v?It.d.ClampToEdge:v,y=r.wrapT,A=void 0===y?It.d.ClampToEdge:y,b=r.createDepthBuffer,g=void 0===b||b,I=r.isMSAA,E=void 0!==I&&I,w=r.sampleCountMSAA,S=void 0===w?4:w,T=r.anisotropy,C=void 0!==T&&T,P=new xt;P.create(e,t);for(var R=0;R<n;R++){var D=new mt._;D.create({width:e,height:t,level:i,internalFormat:s,format:l,type:f,magFilter:h,minFilter:m,wrapS:p,wrapT:A,anisotropy:C}),P.setColorAttachmentAt(R,D)}if(g){var M=new Rt;M.create(e,t,It.d.Depth24,{isMSAA:E,sampleCountMSAA:S}),P.setDepthAttachment(M)}if(E){var B=new Rt;B.create(e,t,It.d.RGBA8,{isMSAA:E,sampleCountMSAA:S}),P.setColorAttachmentAt(0,B)}return P},createDepthBuffer:function(e,t,n){var r=n.level,o=void 0===r?0:r,i=n.internalFormat,a=void 0===i?It.d.Depth32F:i,s=n.format,c=void 0===s?Et.V.DepthComponent:s,l=n.type,u=void 0===l?x.r.Float:l,f=n.magFilter,_=void 0===f?It.d.Linear:f,h=n.minFilter,d=void 0===h?It.d.Linear:h,m=n.wrapS,v=void 0===m?It.d.ClampToEdge:m,p=n.wrapT,y=void 0===p?It.d.ClampToEdge:p,A=new xt;A.create(e,t);var b=new mt._;return b.create({width:e,height:t,level:o,type:u,internalFormat:a,format:c,magFilter:_,minFilter:d,wrapS:v,wrapT:y,anisotropy:!1}),A.setDepthAttachment(b),A}}),Mt=n(2879),Bt=n(5983),Nt=n(8426),Ot=n(3663),Lt=n(2374),Ft=n(3116),Gt=n(425),Vt=n(178);function zt(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function kt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){zt(i,r,o,a,s,"next",e)}function s(e){zt(i,r,o,a,s,"throw",e)}a(void 0)}))}}function Ut(e){return Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ut(e)}function Qt(e,t){return!t||"object"!==Wt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jt(e,t){return jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jt(e,t)}var Wt=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var Xt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Ht=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Ut(t);if(n){var o=Ut(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Qt(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).__width=0,e.__height=0,e.__isShadow=!1,e.__shadowMapSize=1024,e.__oFrame=new Mt.Hq,e.__oFrameDepthMoment=new Mt.Hq,e.__oFrameBufferMsaa=new Mt.Hq,e.__oFrameBufferResolve=new Mt.Hq,e.__oFrameBufferResolveForReference=new Mt.Hq,e.__oInitialExpression=new Mt.Hq,e.__expressions=[],e.__depthMomentExpressions=[],e.__oMsaaResolveExpression=new Mt.Hq,e.__oGammaExpression=new Mt.Hq,e.__transparentOnlyExpressions=[],e.__oGammaBoardEntity=new Mt.Hq,e.__oWebXRSystem=new Mt.Hq,e.__oDrawFunc=new Mt.Hq,e.__oDiffuseCubeTexture=new Mt.Hq,e.__oSpecularCubeTexture=new Mt.Hq,e}var i=o.prototype;return i.setup=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.isShadow,o=void 0!==r&&r,i=n.shadowMapSize,a=void 0===i?1024:i,s=this;return kt((function(){var n,r,i,c,l,u,f,_,h;return Xt(this,(function(d){switch(d.label){case 0:return s.__width=e,s.__height=t,s.__shadowMapSize=a,s.__oFrame.has()?[2,new Ft.UG({message:"Already setup",error:void 0})]:(n=new Mt.bD(new Ot.R),s.__oFrame=n,r=s.__createRenderTargets(e,t),i=r.framebufferMsaa,c=r.framebufferResolve,l=r.framebufferResolveForReference,o&&(s.__isShadow=!0,s.__oFrameDepthMoment=s.__setupDepthMomentFramebuffer(a)),u=s.__setupInitialExpression(i,s.__oFrameDepthMoment),s.__oInitialExpression=new Mt.bD(u),f=s.__setupMsaaResolveExpression(n,i,c,l),s.__oMsaaResolveExpression=new Mt.bD(f),s.__oFrameBufferMsaa=new Mt.bD(i),s.__oFrameBufferResolve=new Mt.bD(c),s.__oFrameBufferResolveForReference=new Mt.bD(l),_=s.__setupGammaExpression(n,c,e/t),s.__oGammaExpression=new Mt.bD(_),[4,Vt.x.getInstance().getModule("xr")]);case 1:return h=d.sent(),b.Is.exist(h)&&(s.__oWebXRSystem=new Mt.bD(h.WebXRSystem.getInstance())),[2,new Ft.Ok]}}))}))()},i.setExpressions=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isTransmission:!0};this.__setExpressionsInner(e,{isTransmission:t.isTransmission});var n=e.map((function(e){return e.clone()}));t.isTransmission&&this.__setTransparentExpressionsForTransmission(n),this.__setDepthTextureToEntityMaterials()},i.__setDepthTextureToEntityMaterials=function(){if(!b.Is.false(this.__isShadow)){this.__depthMomentExpressions=[];var e=!0,t=!1,n=void 0;try{for(var r,o=this.__expressions[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;this.__depthMomentExpressions.push(i.clone())}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}var a=lt.G.createDepthMomentEncodeMaterial(),s=!0,c=!1,l=void 0;try{for(var u,f=this.__depthMomentExpressions[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var _=u.value,h=!0,d=!1,m=void 0;try{for(var v,p=_.renderPasses[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var y=v.value;y.setFramebuffer(this.__oFrameDepthMoment.unwrapForce()),y.toClearColorBuffer=!0,y.toClearDepthBuffer=!0,y.toRenderTransparentPrimitives=!1,y.setMaterial(a)}}catch(e){d=!0,m=e}finally{try{h||null==p.return||p.return()}finally{if(d)throw m}}}}catch(e){c=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw l}}var g=!0,x=!1,I=void 0;try{for(var E,w=this.__expressions[Symbol.iterator]();!(g=(E=w.next()).done);g=!0){var S=E.value,T=!0,C=!1,P=void 0;try{for(var R,D=S.renderPasses[Symbol.iterator]();!(T=(R=D.next()).done);T=!0){var M=R.value.entities,B=!0,N=!1,O=void 0;try{for(var L,F=M[Symbol.iterator]();!(B=(L=F.next()).done);B=!0){var G=L.value.tryToGetMesh();if(b.Is.exist(G)){var V=G.mesh;if(b.Is.exist(V)){var z=V.primitives,k=!0,U=!1,Q=void 0;try{for(var j,W=z[Symbol.iterator]();!(k=(j=W.next()).done);k=!0)j.value.material.setTextureParameter(A.f5.DepthTexture,this.__oFrameDepthMoment.unwrapForce().getColorAttachedRenderTargetTexture(0))}catch(e){U=!0,Q=e}finally{try{k||null==W.return||W.return()}finally{if(U)throw Q}}}}}}catch(e){N=!0,O=e}finally{try{B||null==F.return||F.return()}finally{if(N)throw O}}}}catch(e){C=!0,P=e}finally{try{T||null==D.return||D.return()}finally{if(C)throw P}}}}catch(e){x=!0,I=e}finally{try{g||null==w.return||w.return()}finally{if(x)throw I}}this.__setDepthMomentRenderPassesAndDepthTextureToEntityMaterials()}},i.startRenderLoop=function(e){var t=this;return this.__oFrame.doesNotHave()?new Ft.UG({message:"not initialized.",error:void 0}):(this.__oDrawFunc=new Mt.bD(e),Gt.x.startRenderLoop((function(){t.__setExpressions(),e(t.__oFrame.unwrapForce())})),new Ft.Ok)},i.draw=function(){this.__oDrawFunc.unwrapForce()(this.__oFrame.unwrapForce())},i.resize=function(e,t){if(this.__oFrame.doesNotHave())return new Ft.UG({message:"not initialized.",error:void 0});(0,Mt.Zz)(this.__oFrame),(0,Mt.Zz)(this.__oFrameBufferMsaa),(0,Mt.Zz)(this.__oFrameBufferResolve),(0,Mt.Zz)(this.__oFrameBufferResolveForReference),(0,Mt.Zz)(this.__oGammaExpression),(0,Mt.Zz)(this.__oGammaBoardEntity);var n=this.__oWebXRSystem.unwrapOrUndefined();return b.Is.exist(n)&&n.isWebXRMode&&(e=n.getCanvasWidthForVr(),t=n.getCanvasHeightForVr()),Gt.x.resizeCanvas(e,t),this.__oFrame.get().setViewport(R.Lt.fromCopy4(0,0,e,t)),this.__oFrameDepthMoment.has()&&this.__oFrameDepthMoment.get().resize(Math.floor(this.__shadowMapSize*(this.__width/this.__height)),this.__shadowMapSize),this.__oFrameBufferMsaa.get().resize(e,t),this.__oFrameBufferResolve.get().resize(e,t),this.__oFrameBufferResolveForReference.get().resize(e,t),this.__oGammaExpression.get().renderPasses[0].setViewport(R.Lt.fromCopy4(0,0,e,t)),new Ft.Ok},i.setIBL=function(e){var t=new Bt.B;t.baseUriToLoad=e.diffuse.baseUri,t.hdriFormat=e.diffuse.hdriFormat,t.isNamePosNeg=e.diffuse.isNamePosNeg,t.mipmapLevelNumber=e.diffuse.mipmapLevelNumber,t.loadTextureImagesAsync(),this.__oDiffuseCubeTexture=new Mt.bD(t);var n=new Bt.B;n.baseUriToLoad=e.specular.baseUri,n.isNamePosNeg=e.specular.isNamePosNeg,n.hdriFormat=e.specular.hdriFormat,n.mipmapLevelNumber=e.specular.mipmapLevelNumber,n.loadTextureImagesAsync(),this.__oSpecularCubeTexture=new Mt.bD(n),this.__setIblInner(),this.__setIblInnerForTransparentOnly()},i.setIBLTextures=function(e,t){this.__oDiffuseCubeTexture=new Mt.bD(e),this.__oSpecularCubeTexture=new Mt.bD(t),this.__setIblInner(),this.__setIblInnerForTransparentOnly()},i.getInitialExpression=function(){return this.__oInitialExpression.unwrapOrUndefined()},i.getMsaaResolveExpression=function(){return this.__oMsaaResolveExpression.unwrapOrUndefined()},i.getGammaExpression=function(){return this.__oGammaExpression.unwrapOrUndefined()},i.setDiffuseIBLContribution=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.__expressions[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=!0,c=!1,l=void 0;try{for(var u,f=a.renderPasses[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var _=u.value,h=!0,d=!1,m=void 0;try{for(var v,p=_.entities[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var y=v.value.tryToGetMeshRenderer();b.Is.exist(y)&&(y.diffuseCubeMapContribution=e)}}catch(e){d=!0,m=e}finally{try{h||null==p.return||p.return()}finally{if(d)throw m}}}}catch(e){c=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw l}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}var A=!0,g=!1,x=void 0;try{for(var I,E=this.__transparentOnlyExpressions[Symbol.iterator]();!(A=(I=E.next()).done);A=!0){var w=I.value,S=!0,T=!1,C=void 0;try{for(var P,R=w.renderPasses[Symbol.iterator]();!(S=(P=R.next()).done);S=!0){var D=P.value,M=!0,B=!1,N=void 0;try{for(var O,L=D.entities[Symbol.iterator]();!(M=(O=L.next()).done);M=!0){var F=O.value.tryToGetMeshRenderer();b.Is.exist(F)&&(F.diffuseCubeMapContribution=e)}}catch(e){B=!0,N=e}finally{try{M||null==L.return||L.return()}finally{if(B)throw N}}}}catch(e){T=!0,C=e}finally{try{S||null==R.return||R.return()}finally{if(T)throw C}}}}catch(e){g=!0,x=e}finally{try{A||null==E.return||E.return()}finally{if(g)throw x}}},i.setSpecularIBLContribution=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.__expressions[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=!0,c=!1,l=void 0;try{for(var u,f=a.renderPasses[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var _=u.value,h=!0,d=!1,m=void 0;try{for(var v,p=_.entities[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var y=v.value.tryToGetMeshRenderer();b.Is.exist(y)&&(y.specularCubeMapContribution=e)}}catch(e){d=!0,m=e}finally{try{h||null==p.return||p.return()}finally{if(d)throw m}}}}catch(e){c=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw l}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}var A=!0,g=!1,x=void 0;try{for(var I,E=this.__transparentOnlyExpressions[Symbol.iterator]();!(A=(I=E.next()).done);A=!0){var w=I.value,S=!0,T=!1,C=void 0;try{for(var P,R=w.renderPasses[Symbol.iterator]();!(S=(P=R.next()).done);S=!0){var D=P.value,M=!0,B=!1,N=void 0;try{for(var O,L=D.entities[Symbol.iterator]();!(M=(O=L.next()).done);M=!0){var F=O.value.tryToGetMeshRenderer();b.Is.exist(F)&&(F.specularCubeMapContribution=e)}}catch(e){B=!0,N=e}finally{try{M||null==L.return||L.return()}finally{if(B)throw N}}}}catch(e){T=!0,C=e}finally{try{S||null==R.return||R.return()}finally{if(T)throw C}}}}catch(e){g=!0,x=e}finally{try{A||null==E.return||E.return()}finally{if(g)throw x}}},i.setIBLRotation=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.__expressions[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=!0,c=!1,l=void 0;try{for(var u,f=a.renderPasses[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var _=u.value,h=!0,d=!1,m=void 0;try{for(var v,p=_.entities[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var y=v.value.tryToGetMeshRenderer();b.Is.exist(y)&&(y.rotationOfCubeMap=e)}}catch(e){d=!0,m=e}finally{try{h||null==p.return||p.return()}finally{if(d)throw m}}}}catch(e){c=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw l}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},i.setCameraComponentOfLight=function(e){if(this.__isShadow){var t=!0,n=!1,r=void 0;try{for(var o,i=this.__depthMomentExpressions[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=!0,c=!1,l=void 0;try{for(var u,f=a.renderPasses[Symbol.iterator]();!(s=(u=f.next()).done);s=!0)u.value.cameraComponent=e}catch(e){c=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw l}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}var _=!0,h=!1,d=void 0;try{for(var m,v=this.__expressions[Symbol.iterator]();!(_=(m=v.next()).done);_=!0){var p=m.value,y=!0,g=!1,x=void 0;try{for(var I,E=function(){var t=I.value;t.setPostRenderFunction((function(){var n=t.entities,r=!0,o=!1,i=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value.tryToGetMesh();if(b.Is.exist(c)){var l=c.mesh;if(b.Is.exist(l)){var u=l.primitives,f=!0,_=!1,h=void 0;try{for(var d,m=u[Symbol.iterator]();!(f=(d=m.next()).done);f=!0)d.value.material.setParameter(A.f5.DepthBiasPV,e.biasViewProjectionMatrix)}catch(e){_=!0,h=e}finally{try{f||null==m.return||m.return()}finally{if(_)throw h}}}}}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}))},w=p.renderPasses[Symbol.iterator]();!(y=(I=w.next()).done);y=!0)E()}catch(e){g=!0,x=e}finally{try{y||null==w.return||w.return()}finally{if(g)throw x}}}}catch(e){h=!0,d=e}finally{try{_||null==v.return||v.return()}finally{if(h)throw d}}}},i.__setExpressionsInner=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isTransmission:!0},n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,c=!0,l=!1,u=void 0;try{for(var f,_=s.renderPasses[Symbol.iterator]();!(c=(f=_.next()).done);c=!0){var h=f.value;h.toRenderOpaquePrimitives=!0,t.isTransmission?h.toRenderTransparentPrimitives=!1:h.toRenderTransparentPrimitives=!0,h.toClearDepthBuffer=!1,h.setFramebuffer(this.__oFrameBufferMsaa.unwrapForce())}}catch(e){l=!0,u=e}finally{try{c||null==_.return||_.return()}finally{if(l)throw u}}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}this.__expressions=e,this.__setIblInner()},i.__setTransparentExpressionsForTransmission=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;a.tryToSetUniqueName("modelTransparentForTransmission",!0);var s=!0,c=!1,l=void 0;try{for(var u,f=a.renderPasses[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var _=u.value;_.toRenderOpaquePrimitives=!1,_.toRenderTransparentPrimitives=!0,_.toClearDepthBuffer=!1,_.setFramebuffer(this.__oFrameBufferMsaa.unwrapForce());var h=!0,d=!1,m=void 0;try{for(var v,p=_.entities[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var y=v.value.tryToGetMesh();if(b.Is.exist(y)){var g=y.mesh;if(b.Is.exist(g))for(var x=0;x<g.getPrimitiveNumber();x++)g.getPrimitiveAt(x).material.setTextureParameter(A.f5.BackBufferTexture,this.__oFrameBufferResolveForReference.unwrapForce().getColorAttachedRenderTargetTexture(0))}}}catch(e){d=!0,m=e}finally{try{h||null==p.return||p.return()}finally{if(d)throw m}}}}catch(e){c=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw l}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}this.__transparentOnlyExpressions=e,this.__setIblInnerForTransparentOnly()},i.__setupInitialExpression=function(e,t){var n=new Nt.A;n.tryToSetUniqueName("Initial",!0);var r=new Lt.C;r.clearColor=R.Lt.fromCopyArray4([0,0,0,0]),r.toClearColorBuffer=!0,r.toClearDepthBuffer=!0;var o=new Lt.C;if(o.clearColor=R.Lt.fromCopyArray4([0,0,0,0]),o.toClearColorBuffer=!0,o.toClearDepthBuffer=!0,o.setFramebuffer(e),n.addRenderPasses([r,o]),t.has()){var i=t.unwrapForce(),a=new Lt.C;a.clearColor=R.Lt.fromCopyArray4([1,1,1,1]),a.toClearColorBuffer=!0,a.toClearDepthBuffer=!0,a.setFramebuffer(i),n.addRenderPasses([a])}return n},i.__createRenderTargets=function(e,t){var n=Dt.createTexturesForRenderTarget(e,t,0,{isMSAA:!0,sampleCountMSAA:4});n.tryToSetUniqueName("FramebufferTargetOfGammaMsaa",!0);var r=Dt.createTexturesForRenderTarget(e,t,1,{createDepthBuffer:!0});r.tryToSetUniqueName("FramebufferTargetOfGammaResolve",!0);var o=Dt.createTexturesForRenderTarget(e,t,1,{createDepthBuffer:!1,minFilter:It.d.LinearMipmapLinear});return o.tryToSetUniqueName("FramebufferTargetOfGammaResolveForReference",!0),{framebufferMsaa:n,framebufferResolve:r,framebufferResolveForReference:o}},i.__setupMsaaResolveExpression=function(e,t,n,r){var o=new Nt.A;o.tryToSetUniqueName("Resolve",!0);var i=new Lt.C;return o.addRenderPasses([i]),i.toClearDepthBuffer=!1,i.setFramebuffer(t),i.setResolveFramebuffer(n),i.setResolveFramebuffer2(r),i.setPostRenderFunction((function(){this.getResolveFramebuffer2().getColorAttachedRenderTargetTexture(0).generateMipmap()})),e.unwrapForce().addExpression(o),o},i.__setupGammaExpression=function(e,t,n){var r=new Nt.A,o=lt.G.createGammaCorrectionMaterial({noUseCameraTransform:!0}),i=_t.createPlane({width:2,height:2,uSpan:1,vSpan:1,isUVRepeat:!1,flipTextureCoordinateY:!1,direction:"xy",material:o});i.tryToSetUniqueName("Gamma Plane",!0),i.tryToSetTag({tag:"type",value:"background-assets"}),o.setTextureParameter(A.f5.BaseColorTexture,t.getColorAttachedRenderTargetTexture(0)),this.__oGammaBoardEntity=new Mt.bD(i);var a=new Lt.C;a.tryToSetUniqueName("renderPassGamma",!0),a.toClearColorBuffer=!1,a.toClearDepthBuffer=!1,a.isDepthTest=!1,a.clearColor=R.Lt.fromCopyArray4([0,0,0,0]),a.addEntities([i]),a.isVrRendering=!1,a.isOutputForVr=!1;var s=new Lt.C;return s.tryToSetUniqueName("renderPassGammaVr",!0),s.toClearColorBuffer=!1,s.toClearDepthBuffer=!1,s.isDepthTest=!1,s.clearColor=R.Lt.fromCopyArray4([0,0,0,0]),s.addEntities([i]),s.isVrRendering=!1,s.isOutputForVr=!0,r.addRenderPasses([a,s]),r},i.__setupSatExpression=function(){var e=lt.G.createSummedAreaTableMaterial({noUseCameraTransform:!0});Yt.createScreenDrawRenderPass(e)},i.__setupDepthMomentFramebuffer=function(e){return new Mt.bD(Dt.createTexturesForRenderTarget(e,e,1,{level:0,internalFormat:It.d.RGBA8,format:m.VI.RGBA,type:m.re.UnsignedByte,magFilter:It.d.Linear,minFilter:It.d.Linear,wrapS:It.d.ClampToEdge,wrapT:It.d.ClampToEdge,createDepthBuffer:!0,isMSAA:!1,sampleCountMSAA:1,anisotropy:!1}))},i.__setIblInner=function(){0===this.__expressions.length&&console.warn("No effect because there are no expressions to set IBL yet. call setExpressions before this method.");var e=!0,t=!1,n=void 0;try{for(var r,o=this.__expressions[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value,a=!0,s=!1,c=void 0;try{for(var l,u=i.renderPasses[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var f=l.value,_=!0,h=!1,d=void 0;try{for(var m,v=f.entities[Symbol.iterator]();!(_=(m=v.next()).done);_=!0){var p=m.value.tryToGetMeshRenderer();b.Is.exist(p)&&(p.specularCubeMap=this.__oSpecularCubeTexture.unwrapOrUndefined(),p.diffuseCubeMap=this.__oDiffuseCubeTexture.unwrapOrUndefined())}}catch(e){h=!0,d=e}finally{try{_||null==v.return||v.return()}finally{if(h)throw d}}}}catch(e){s=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw c}}}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}},i.__setIblInnerForTransparentOnly=function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.__transparentOnlyExpressions[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value,a=!0,s=!1,c=void 0;try{for(var l,u=i.renderPasses[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var f=l.value,_=!0,h=!1,d=void 0;try{for(var m,v=f.entities[Symbol.iterator]();!(_=(m=v.next()).done);_=!0){var p=m.value.tryToGetMeshRenderer();b.Is.exist(p)&&(p.specularCubeMap=this.__oSpecularCubeTexture.unwrapOrUndefined(),p.diffuseCubeMap=this.__oDiffuseCubeTexture.unwrapOrUndefined())}}catch(e){h=!0,d=e}finally{try{_||null==v.return||v.return()}finally{if(h)throw d}}}}catch(e){s=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw c}}}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}},i.__setExpressions=function(){var e=this.__oFrame.unwrapForce();e.clearExpressions(),e.addExpression(this.getInitialExpression());var t=!0,n=!1,r=void 0;try{for(var o,i=this.__depthMomentExpressions[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.addExpression(a)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}var s=!0,c=!1,l=void 0;try{for(var u,f=this.__expressions[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var _=u.value;e.addExpression(_)}}catch(e){c=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw l}}e.addExpression(this.getMsaaResolveExpression());var h=!0,d=!1,m=void 0;try{for(var v,p=this.__transparentOnlyExpressions[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var y=v.value;e.addExpression(y)}}catch(e){d=!0,m=e}finally{try{h||null==p.return||p.return()}finally{if(d)throw m}}e.addExpression(this.getMsaaResolveExpression()),e.addExpression(this.getGammaExpression())},i.__setDepthMomentRenderPassesAndDepthTextureToEntityMaterials=function(){if(!b.Is.false(this.__isShadow)){this.__depthMomentExpressions=[];var e=!0,t=!1,n=void 0;try{for(var r,o=this.__expressions[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;this.__depthMomentExpressions.push(i.clone())}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}var a=lt.G.createDepthMomentEncodeMaterial(),s=!0,c=!1,l=void 0;try{for(var u,f=this.__depthMomentExpressions[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var _=u.value,h=!0,d=!1,m=void 0;try{for(var v,p=_.renderPasses[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var y=v.value;y.setFramebuffer(this.__oFrameDepthMoment.unwrapForce()),y.toClearColorBuffer=!1,y.toClearDepthBuffer=!1,y.toRenderTransparentPrimitives=!1,y.setMaterial(a),y.setPostRenderFunction((function(){}))}}catch(e){d=!0,m=e}finally{try{h||null==p.return||p.return()}finally{if(d)throw m}}}}catch(e){c=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw l}}var g=!0,x=!1,I=void 0;try{for(var E,w=this.__expressions[Symbol.iterator]();!(g=(E=w.next()).done);g=!0){var S=E.value,T=!0,C=!1,P=void 0;try{for(var R,D=S.renderPasses[Symbol.iterator]();!(T=(R=D.next()).done);T=!0){var M=R.value.entities,B=!0,N=!1,O=void 0;try{for(var L,F=M[Symbol.iterator]();!(B=(L=F.next()).done);B=!0){var G=L.value.tryToGetMesh();if(b.Is.exist(G)){var V=G.mesh;if(b.Is.exist(V)){var z=V.primitives,k=!0,U=!1,Q=void 0;try{for(var j,W=z[Symbol.iterator]();!(k=(j=W.next()).done);k=!0)j.value.material.setTextureParameter(A.f5.DepthTexture,this.__oFrameDepthMoment.unwrapForce().getColorAttachedRenderTargetTexture(0))}catch(e){U=!0,Q=e}finally{try{k||null==W.return||W.return()}finally{if(U)throw Q}}}}}}catch(e){N=!0,O=e}finally{try{B||null==F.return||F.return()}finally{if(N)throw O}}}}catch(e){C=!0,P=e}finally{try{T||null==D.return||D.return()}finally{if(C)throw P}}}}catch(e){x=!0,I=e}finally{try{g||null==w.return||w.return()}finally{if(x)throw I}}}},o}(d.S),qt=void 0,Yt=Object.freeze({createScreenDrawRenderPass:function(e){ut.Is.not.exist(qt)&&(qt=_t.createPlane({width:2,height:2,uSpan:1,vSpan:1,isUVRepeat:!1,flipTextureCoordinateY:!1,direction:"xy",material:e}));var t=new Lt.C;return t.toClearColorBuffer=!1,t.addEntities([qt]),t}}),Kt=n(9645),Jt=n(5054),Zt=n(9611),$t=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t=e.prototype;return t.assignAnimation=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"none",i=arguments.length>5?arguments[5]:void 0;return this.__setupAnimationForSameSkeleton(e,t,n,r,o,i),e},t.__getCorrespondingEntity=function(e,t,n,r,o,i){if(i){var a=e.getTagValue("rnEntitiesByNames"),s=t.nodes[r];return a.get(s.name)}if(b.Is.exist(n.extensions.VRM)){var c,l=n.extensions.VRM.humanoid.humanBones,u=new Map,f=new Map,_=!0,h=!1,d=void 0;try{for(var m,v=l[Symbol.iterator]();!(_=(m=v.next()).done);_=!0){var p=m.value;u.set(p.node,p.bone),f.set(p.name,p.bone)}}catch(e){h=!0,d=e}finally{try{_||null==v.return||v.return()}finally{if(h)throw d}}null!=o&&null==(c=f.get(o))&&(c=u.get(r));var y=e.getTagValue("humanoid_map_name_nodeId").get(c);return null!=y?e.getTagValue("rnEntities")[y]:void console.log("humanoidBoneName: ".concat(c,", nodeIndex: ").concat(r,", nodeName: ").concat(o))}if(b.Is.exist(n.extensions.VRMC_vrm)){var A,g=n.extensions.VRMC_vrm.humanoid.humanBones,x=new Map;for(var I in g){var E=g[I];x.set(E.node,I)}null!=o&&(A=x.get(r));var w=e.getTagValue("humanoid_map_name_nodeId").get(A);return null!=w?e.getTagValue("rnEntities")[w]:void console.log("humanoidBoneName: ".concat(A,", nodeIndex: ").concat(r,", nodeName: ").concat(o))}},t.__isHips=function(e,t,n){var r=new Map;if(b.Is.exist(t.extensions.VRM)){var o=t.extensions.VRM.humanoid.humanBones,i=!0,a=!1,s=void 0;try{for(var c,l=o[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var u=c.value;r.set(u.node,u.bone)}}catch(e){a=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}}else if(b.Is.exist(t.extensions.VRMC_vrm)){var f=t.extensions.VRMC_vrm.humanoid.humanBones;for(var _ in f){var h=f[_];r.set(h.node,_)}}return e.getTagValue("humanoid_map_name_nodeId"),"hips"===r.get(n)},t.__setupAnimationForSameSkeleton=function(e,t,n,r,o,i){if(t.animations){var s=!0,c=!1,l=void 0;try{for(var u,_=t.animations[Symbol.iterator]();!(s=(u=_.next()).done);s=!0){var h=u.value,d=!0,m=!1,v=void 0;try{for(var p,y=h.samplers[Symbol.iterator]();!(d=(p=y.next()).done);d=!0){var A=p.value;Kt.e._readBinaryFromAccessorAndSetItToAccessorExtras(A.inputObject),Kt.e._readBinaryFromAccessorAndSetItToAccessorExtras(A.outputObject)}}catch(e){m=!0,v=e}finally{try{d||null==y.return||y.return()}finally{if(m)throw v}}}}catch(e){c=!0,l=e}finally{try{s||null==_.return||_.return()}finally{if(c)throw l}}}if(t.animations&&t.animations.length>0){var g=!0,x=!1,I=void 0;try{for(var E,w=t.animations[Symbol.iterator]();!(g=(E=w.next()).done);g=!0){var S=E.value,T=!0,C=!1,P=void 0;try{for(var R,D=S.channels[Symbol.iterator]();!(T=(R=D.next()).done);T=!0){var M,B,N,O,L=R.value,F=null===(M=L.samplerObject)||void 0===M||null===(B=M.inputObject)||void 0===B?void 0:B.extras.typedDataArray,G=null===(N=L.samplerObject)||void 0===N||null===(O=N.outputObject)||void 0===O?void 0:O.extras.typedDataArray,V=null!=L.samplerObject.interpolation?L.samplerObject.interpolation:"LINEAR",z=t.nodes[L.target.node],k=this.__getCorrespondingEntity(e,t,n,L.target.node,z.name,r);if(k){var U,Q=f.g.addComponentToEntity(Jt.c,k).getAnimation();if("quaternion"===(U="translation"===L.target.path?"translate":"rotation"===L.target.path?"quaternion":L.target.path)?Q.setAnimation(b.Is.exist(S.name)?S.name:"Untitled",U,F,G,4,Zt.k.fromString(V)):"translate"===U&&this.__isHips(e,n,L.target.node)&&Q.setAnimation(b.Is.exist(S.name)?S.name:"Untitled",U,F,G,3,Zt.k.fromString(V)),"none"!==o&&b.Is.exist(i)){var j=t.extras.rnEntities[L.target.node],W=void 0;if("global"===o)W=new a.B5(j);else if("global2"===o)W=new a.xz(j);else{if("absolute"!==o)throw new Error("unknown retarget mode");W=new a.l(j)}Q._animationRetarget=W}}}}catch(e){C=!0,P=e}finally{try{T||null==D.return||D.return()}finally{if(C)throw P}}}}catch(e){x=!0,I=e}finally{try{g||null==w.return||w.return()}finally{if(x)throw I}}}},e.getInstance=function(){return this.__instance||(this.__instance=new e),this.__instance},e}(),en=n(3363),tn=n(1274);function nn(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function rn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){nn(i,r,o,a,s,"next",e)}function s(e){nn(i,r,o,a,s,"throw",e)}a(void 0)}))}}var on=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},an=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t=e.prototype;return t.importPointCloud=function(e,t){var n=this;return rn((function(){var r,o,i,a,s,c,l,u,f;return on(this,(function(_){switch(_.label){case 0:if(r=e.substring(0,e.lastIndexOf("/"))+"/",o=I.j.createDefaultGltfOptions(),!t||!t.files)return[3,4];for(a in i=[],t.files)i.push(a);s=0,_.label=1;case 1:return s<i.length?(c=i[s],"drc"!==I.j.getExtension(c)?[3,3]:[4,n.__decodeDraco(t.files[c],o,r,t)]):[3,4];case 2:return l=_.sent(),[2,new Ft.Ok(l)];case 3:return s++,[3,1];case 4:return[4,I.j.fetchArrayBuffer(e)];case 5:return(u=_.sent()).isErr()?[2,new Ft.UG({message:"fetchArrayBuffer failed",error:u})]:[4,n.__decodeDraco(u.unwrapForce(),o,r,t)];case 6:return f=_.sent(),[2,new Ft.Ok(f)]}}))}))()},t.importArrayBuffer=function(e,t,n){var r=e.substring(0,e.lastIndexOf("/"))+"/",o=I.j.createDefaultGltfOptions();return this.__decodeDraco(t,o,r,n).catch((function(e){console.log("__loadFromArrayBuffer error",e)}))},t.__loadFromArrayBuffer=function(e,t,n,r){var o=this;return rn((function(){var i,a,s,c,l;return on(this,(function(u){switch(u.label){case 0:return i=new DataView(e,0,20),a=!0,1179937895===i.getUint32(0,a)?[3,2]:(c=I.j.arrayBufferToString(e),l=JSON.parse(c),[4,o._loadAsTextJson(l,r,t,n).catch((function(e){console.log("this.__loadAsTextJson error",e)}))]);case 1:return s=u.sent(),[3,4];case 2:return[4,o._loadAsBinaryJson(i,a,e,r,t,n).catch((function(e){console.log("this.__loadAsBinaryJson error",e)}))];case 3:s=u.sent(),u.label=4;case 4:return[2,s]}}))}))()},t._getOptions=function(e,t,n){if(t.asset&&t.asset.extras&&t.asset.extras.rnLoaderOptions)for(var r in t.asset.extras.rnLoaderOptions)e[r]=t.asset.extras.rnLoaderOptions[r];for(var o in n)e[o]=n[o];return n&&n.loaderExtensionName&&"string"==typeof n.loaderExtensionName&&(null!=Rn[n.loaderExtensionName]?e.loaderExtension=Rn[n.loaderExtensionName].getInstance():(console.error("".concat(n.loaderExtensionName," not found!")),e.loaderExtension=void 0)),e},t._loadAsBinaryJson=function(e,t,n,r,o,i){var a=this;return rn((function(){var s,c,l,u,f,_;return on(this,(function(h){switch(h.label){case 0:if(s=e.getUint32(12,t),1313821514!==e.getUint32(16,t))throw new Error("invalid chunkType of chunk0 in this binary glTF file.");c=new Uint8Array(n,20,s),l=I.j.uint8ArrayToString(c),u=JSON.parse(l),r=a._getOptions(o,u,r),f=new Uint8Array(n,20+s+8),void 0===u.asset.extras&&(u.asset.extras={fileType:"glTF",version:"2"}),a._mergeExtendedJson(u,r.extendedJson),u.asset.extras.rnLoaderOptions=r,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,a._loadInner(f,i,u,r)];case 2:return h.sent(),[3,4];case 3:return _=h.sent(),console.log("this._loadInner error in _loadAsBinaryJson",_),[3,4];case 4:return[2,u]}}))}))()},t._loadAsTextJson=function(e,t,n,r){var o=this;return rn((function(){var i;return on(this,(function(a){switch(a.label){case 0:void 0===e.asset.extras&&(e.asset.extras={fileType:"glTF",version:"2"}),t=o._getOptions(n,e,t),o._mergeExtendedJson(e,t.extendedJson),e.asset.extras.rnLoaderOptions=t,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,o._loadInner(void 0,r,e,t)];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),console.log("this._loadInner error in _loadAsTextJson",i),[3,4];case 4:return[2,e]}}))}))()},t._loadInner=function(e,t,n,r){var o=this,i=[];return i.push(this._loadResources(e,t,n,r,{shaders:[],buffers:[],images:[]})),i.push(new Promise((function(e,t){o._loadJsonContent(n,r),e()}))),Promise.all(i)},t._loadJsonContent=function(e,t){this._loadDependenciesOfScenes(e),this._loadDependenciesOfNodes(e),this._loadDependenciesOfMeshes(e),this._loadDependenciesOfMaterials(e),this._loadDependenciesOfTextures(e),this._loadDependenciesOfJoints(e),this._loadDependenciesOfAnimations(e),this._loadDependenciesOfAccessors(e),this._loadDependenciesOfBufferViews(e),void 0===e.asset.extras&&(e.asset.extras={})},t._loadDependenciesOfScenes=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e.scenes[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;for(var s in a.nodes)a.nodesObjects[s]=e.nodes[a.nodes[s]]}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},t._loadDependenciesOfNodes=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e.nodes[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(a.children)for(var s in b.Is.not.exist(a.childrenObjects)&&(a.childrenObjects=[]),a.children)a.childrenObjects[s]=e.nodes[a.children[s]];void 0!==a.mesh&&void 0!==e.meshes&&(a.meshObject=e.meshes[a.mesh]),void 0!==a.skin&&void 0!==e.skins&&(a.skinObject=e.skins[a.skin],void 0===a.meshObject.extras&&(a.meshObject.extras={}),a.meshObject.extras._skin=a.skin),void 0!==a.camera&&void 0!==e.cameras&&(a.cameraObject=e.cameras[a.camera]),void 0!==a.extensions&&void 0!==e.extensions&&void 0!==e.extensions.KHR_lights_punctual&&(a.extensions.KHR_lights_punctual.lightIndex=a.extensions.KHR_lights_punctual.light,a.extensions.KHR_lights_punctual.light=e.extensions.KHR_lights_punctual.lights[a.extensions.KHR_lights_punctual.lightIndex])}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},t._loadDependenciesOfMeshes=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e.meshes[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=!0,c=!1,l=void 0;try{for(var u,f=a.primitives[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var _=u.value;for(var h in void 0!==_.material&&(_.materialObject=e.materials[_.material]),_.attributes){var d=_.attributes[h],m=e.accessors[d];m.extras={toGetAsTypedArray:!0,attributeName:h},_.attributesObjects[h]=m}if(null!=_.indices&&(_.indicesObject=e.accessors[_.indices]),null!=_.targets){_.targetsObjects=[];var v=!0,p=!1,y=void 0;try{for(var A,b=_.targets[Symbol.iterator]();!(v=(A=b.next()).done);v=!0){var g=A.value,x={};for(var I in g){var E=g[I];if(E>=0){var w=e.accessors[E];w.extras={toGetAsTypedArray:!0,attributeName:I},x[I]=w}}_.targetsObjects.push(x)}}catch(e){p=!0,y=e}finally{try{v||null==b.return||b.return()}finally{if(p)throw y}}}}}catch(e){c=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw l}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},t._checkRnGltfLoaderOptionsExist=function(e){return!(!e.asset.extras||!e.asset.extras.rnLoaderOptions)},t._loadDependenciesOfMaterials=function(e){if(e.textures||(e.textures=[]),e.materials){var t=!0,n=!1,r=void 0;try{for(var o,i=e.materials[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(a.pbrMetallicRoughness){var s=a.pbrMetallicRoughness.baseColorTexture;void 0!==s&&(s.texture=e.textures[s.index]);var c=a.pbrMetallicRoughness.metallicRoughnessTexture;void 0!==c&&(c.texture=e.textures[c.index])}var l=a.normalTexture;void 0!==l&&(l.texture=e.textures[l.index]);var u=a.occlusionTexture;void 0!==u&&(u.texture=e.textures[u.index]);var f=a.emissiveTexture;void 0!==f&&(f.texture=e.textures[f.index]),this._checkRnGltfLoaderOptionsExist(e)&&e.asset.extras.rnLoaderOptions.loaderExtension&&e.asset.extras.rnLoaderOptions.loaderExtension.setTextures&&e.asset.extras.rnLoaderOptions.loaderExtension.setTextures(e,a)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},t._loadDependenciesOfTextures=function(e){if(e.textures){var t=!0,n=!1,r=void 0;try{for(var o,i=function(){var t=o.value;(0,tn.Jx)((function(n){t.samplerObject=e.samplers[n]}),t.sampler),void 0!==t.source&&(t.image=e.images[t.source])},a=e.textures[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)i()}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},t._loadDependenciesOfJoints=function(e){if(e.skins){var t=!0,n=!1,r=void 0;try{for(var o,i=function(){var t=o.value;if(b.Is.exist(t.skeleton)){t.skeletonObject=e.nodes[t.skeleton],(0,tn.Jx)((function(n){return t.inverseBindMatricesObject=e.accessors[n]}),t.inverseBindMatrices),(0,tn.fY)((function(){return t.skeletonObject=e.nodes[t.joints[0]]}),t.skeleton),t.jointsObjects=[];var n=!0,r=!1,i=void 0;try{for(var a,s=t.joints[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;t.jointsObjects.push(e.nodes[c])}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}},a=e.skins[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)i()}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},t._loadDependenciesOfAnimations=function(e){if(e.animations){var t=!0,n=!1,r=void 0;try{for(var o,i=e.animations[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,s=!0,c=!1,l=void 0;try{for(var u,f=a.channels[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var _=u.value;_.samplerObject=a.samplers[_.sampler],_.target.nodeObject=e.nodes[_.target.node]}}catch(e){c=!0,l=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw l}}var h=!0,d=!1,m=void 0;try{for(var v,p=a.channels[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var y=v.value;if(b.Is.exist(y.samplerObject)&&(y.samplerObject.inputObject=e.accessors[y.samplerObject.input],y.samplerObject.outputObject=e.accessors[y.samplerObject.output],void 0===y.samplerObject.outputObject.extras&&(y.samplerObject.outputObject.extras={}),"rotation"===y.target.path&&(y.samplerObject.outputObject.extras.quaternionIfVec4=!0),"weights"===y.target.path)){var A=y.samplerObject.outputObject.count/y.samplerObject.inputObject.count;y.samplerObject.outputObject.extras.weightsArrayLength=A}}}catch(e){d=!0,m=e}finally{try{h||null==p.return||p.return()}finally{if(d)throw m}}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},t._loadDependenciesOfAccessors=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e.accessors[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(null==a.bufferView&&(a.bufferView=0),a.bufferViewObject=e.bufferViews[a.bufferView],null!=a.sparse){var s=a.sparse;s.indices.bufferViewObject=e.bufferViews[s.indices.bufferView],s.values.bufferViewObject=e.bufferViews[s.values.bufferView]}}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},t._loadDependenciesOfBufferViews=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e.bufferViews[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;void 0!==a.buffer&&(a.bufferObject=e.buffers[a.buffer])}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},t._mergeExtendedJson=function(e,t){var n,r,o=null;if(n=t,null!=(r=ArrayBuffer)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](n):n instanceof r){var i=I.j.arrayBufferToString(t);o=JSON.parse(i)}else"string"==typeof t?o=JSON.parse(t):"object"==typeof t&&(o=t);Object.assign(e,o)},t._loadResources=function(e,t,n,r,o){var i,a=function(a){var s=n.buffers[a],l=void 0,u=void 0;s.uri&&(l=s.uri.split("/"),u=l[l.length-1]),i=void 0===s.uri?new en.n((function(t,n){o.buffers[a]=e,s.buffer=e,t(e)})):s.uri.match(/^data:application\/(.*);base64,/)?new en.n((function(e,t){var n=I.j.dataUriToArrayBuffer(s.uri);o.buffers[a]=new Uint8Array(n),s.buffer=new Uint8Array(n),e(n)})):r.files&&r.files[u]?new en.n((function(e,t){var n=r.files[u];o.buffers[a]=new Uint8Array(n),s.buffer=new Uint8Array(n),e(n)})):new en.n(I.j.loadResourceAsync(t+s.uri,!0,(function(e,t){o.buffers[a]=new Uint8Array(t),s.buffer=new Uint8Array(t),e(t)}),(function(e,t){}))),s.bufferPromise=i,c.push(i)},s=function(i){var a=i,s=n.images[a],l=void 0;if(void 0===s.uri){null==e&&n.bufferViews[s.bufferView].bufferObject.buffer;var u=I.j.createUint8ArrayFromBufferViewInfo(n,s.bufferView,e);l=I.j.createBlobImageUriFromUint8Array(u,s.mimeType)}else{var f=s.uri,_=f.split("/"),h=_[_.length-1];if(r.files&&r.files[h]){var d=r.files[h];l=I.j.createBlobImageUriFromUint8Array(new Uint8Array(d),s.mimeType)}else l=f.match(/^data:/)?f:t+f}var m=I.j.createImageFromUri(l,s.mimeType).then((function(e){e.crossOrigin="Anonymous",o.images[a]=e,s.image=e}));c.push(m)},c=[];for(var l in n.buffers)a(l);for(var u in n.images)s(u);if(r.defaultTextures){var f=r.defaultTextures.basePath,_=r.defaultTextures.textureInfos,h=!0,d=!1,m=void 0;try{for(var v,p=function(){var e=v.value,t=e.fileName,n=f+t,r=I.j.getExtension(t),o=I.j.getMimeTypeFromExtension(r),i=I.j.createImageFromUri(n,o).then((function(t){t.crossOrigin="Anonymous",e.image={image:t}}));c.push(i)},y=_[Symbol.iterator]();!(h=(v=y.next()).done);h=!0)p()}catch(e){d=!0,m=e}finally{try{h||null==y.return||y.return()}finally{if(d)throw m}}}return Promise.all(c).catch((function(e){console.log("Promise.all error",e)}))},t.__decodeDraco=function(e,t,n,r){var o=this;return this.__decodeBuffer(e).then((function(e){var i=JSON.stringify(e),a=JSON.parse(i);return o._loadAsTextJson(a,r,t,n).catch((function(e){console.log("this.__loadAsTextJson error",e)}))}))},t.__decodeBuffer=function(e){var t=new DracoDecoderModule,n=new t.Decoder,r=this.__getGeometryFromDracoBuffer(t,n,e);if(null==r)throw new Error("invalid dracoGeometry.");if(r.geometryType!==t.POINT_CLOUD)throw new Error("invalid geometryType of drc file.");if(-1===n.GetAttributeId(r,t.POSITION))throw t.destroy(n),t.destroy(r),new Error("Draco: No position attribute found.");for(var o=["POSITION","NORMAL","COLOR","TEX_COORD","GENERIC"],i=r.num_points(),a=[],s=[],c=0,l=0;l<o.length;l++){var u=n.GetAttributeId(r,t[o[l]]);if(-1!==u){var f=n.GetAttribute(r,u),_=new t.DracoFloat32Array;n.GetAttributeFloatForAllPoints(r,f,_),a[l]=_;var h=f.num_components();s[l]=h,"COLOR"===o[l]?c+=4*i:c+=i*h}else o.splice(l,1),l--}for(var d=new Float32Array(c),m=0,v=0;m<o.length;m++){if("COLOR"===o[m]&&3===s[m])for(var p=0;p<i;v+=4,p+=3)d[v]=a[m].GetValue(p),d[v+1]=a[m].GetValue(p+1),d[v+2]=a[m].GetValue(p+2),d[v+3]=1;else if("TEX_COORD"===o[m])for(var y=0;y<i;v+=2,y++)d[v]=a[m].GetValue(2*y),d[v+1]=1-a[m].GetValue(2*y+1);else for(var A=0;A<i*s[m];v++,A++)d[v]=a[m].GetValue(A);t.destroy(a[m])}return t.destroy(n),t.destroy(r),this.__decodedBufferToJSON(d,i,o,s)},t.__decodedBufferToJSON=function(e,t,n,r){var o=this;return rn((function(){var i;return on(this,(function(a){switch(a.label){case 0:return i={asset:{version:"2.0"},extensionsUsed:["KHR_materials_unlit"],extensionsRequired:["KHR_materials_unlit"],nodes:[{name:"Node",mesh:0}],scenes:[{nodes:[0]}],materials:[{name:"point-cloud_material",pbrMetallicRoughness:{baseColorFactor:[1,1,1,1]},extensions:{KHR_materials_unlit:{}}}]},[4,o.__setBuffersToJSON(e,i)];case 1:return a.sent(),o.__setAccessorsAndBufferViewsToJSON(t,n,r,i),o.__setMeshesToJSON(n,i),[2,new Promise((function(e,t){e(i)}))]}}))}))()},t.__setBuffersToJSON=function(e,t){return this.__convertBufferToURI(e.buffer).then((function(n){t.buffers=[{name:"input",byteLength:e.byteLength,uri:n}]})).catch((function(e){console.log("this.__convertBufferToURI error:",e)}))},t.__convertBufferToURI=function(e){return new Promise((function(t,n){var r=new Blob([e],{type:"application/octet-stream"}),o=new FileReader;o.onload=function(){t(o.result)},o.onerror=function(){n(o.error)},o.readAsDataURL(r)}))},t.__setAccessorsAndBufferViewsToJSON=function(e,t,n,r){for(var o=[],i=[],a=0,s=0,c=0;s<t.length;c++){var l,u=n[s];l=1===u?"SCALAR":"VEC"+u;for(var f=0,_=t[s];s<t.length&&(o.push({name:"point-cloud_"+_+"_"+s,componentType:5126,count:e,type:l,bufferView:c,byteOffset:f}),"COLOR"===t[s]?f+=4*e*4:f+=e*u*4,_==t[++s]););i[c]={name:"bufferView_"+_,buffer:0,byteLength:f,byteOffset:a,byteStride:4*u,target:34962},a+=f}r.accessors=o,r.bufferViews=i},t.__setMeshesToJSON=function(e,t){for(var n={},r=0;r<e.length;r++)"TEX_COORD"===e[r]?n.TEXCOORD_0=r:"GENERIC"===e[r]?n.TANGENT=r:n[e[r]]=r;var o={name:"Node-Mesh",primitives:[{mode:0,material:0,attributes:n}]};t.meshes=[o]},t.importPointCloudToPrimitive=function(e){var t=this;return rn((function(){var n;return on(this,(function(r){switch(r.label){case 0:return[4,I.j.fetchArrayBuffer(e)];case 1:return n=r.sent(),[2,t.__decodeDracoToPrimitive(n.unwrapForce())]}}))}))()},t.__decodeDracoToPrimitive=function(e){var t=new DracoDecoderModule,n=new t.Decoder,r=this.__getGeometryFromDracoBuffer(t,n,e);if(null==r)throw new Error("invalid dracoGeometry.");if(r.geometryType!==t.POINT_CLOUD)throw new Error("invalid geometryType of drc file.");var o=[],i=[],a=[];this.__getPositions(t,n,r,o,i,a),this.__getColors(t,n,r,o,i,a),this.__getNormals(t,n,r,o,i,a),this.__getTextureCoords(t,n,r,o,i,a);var s=et.W.createPrimitive({attributeSemantics:i,attributes:a,material:lt.G.createClassicUberMaterial({isSkinning:!1,isLighting:!0}),primitiveMode:fe.T.Points});return t.destroy(n),t.destroy(r),s},t.__getGeometryFromDracoBuffer=function(e,t,n){var r=new e.DecoderBuffer;r.Init(new Int8Array(n),n.byteLength);var o,i,a=t.GetEncodedGeometryType(r);if(a===e.TRIANGULAR_MESH?(o=new e.Mesh,i=t.DecodeBufferToMesh(r,o)):a===e.POINT_CLOUD?(o=new e.PointCloud,i=t.DecodeBufferToPointCloud(r,o)):console.error("Unknown geometry type."),o.geometryType=a,!i.ok()||0==o.ptr){var s="Decoding failed: ";return s+=i.error_msg(),console.error(s),e.destroy(t),void e.destroy(o)}return e.destroy(r),o},t.__getPositions=function(e,t,n,r,o,i){var a=t.GetAttributeId(n,e.POSITION);if(-1===a)throw e.destroy(t),e.destroy(n),new Error("Draco: No position attribute found.");var s=t.GetAttribute(n,a),c=new e.DracoFloat32Array;t.GetAttributeFloatForAllPoints(n,s,c);for(var l=3*n.num_points(),u=new Float32Array(l),f=0;f<l;f+=1)u[f]=c.GetValue(f);return r.push(w.d.Vec3),o.push(ue.T.Position.XYZ),i.push(u),e.destroy(c),u},t.__getColors=function(e,t,n,r,o,i){var a=t.GetAttributeId(n,e.COLOR);if(-1===a)return null;var s=t.GetAttribute(n,a),c=new e.DracoFloat32Array;t.GetAttributeFloatForAllPoints(n,s,c);for(var l=n.num_points(),u=s.num_components(),f=4*l,_=new Float32Array(f),h=0;h<f;h+=u)_[h]=c.GetValue(h),_[h+1]=c.GetValue(h+1),_[h+2]=c.GetValue(h+2),_[h+3]=4==u?c.GetValue(h+3):1;return r.push(w.d.Vec3),o.push(ue.T.Color0.XYZ),i.push(_),e.destroy(c),_},t.__getNormals=function(e,t,n,r,o,i){var a=t.GetAttributeId(n,e.NORMAL);if(-1===a)return null;var s=t.GetAttribute(n,a),c=new e.DracoFloat32Array;t.GetAttributeFloatForAllPoints(n,s,c);for(var l=3*n.num_points(),u=new Float32Array(l),f=0;f<l;f+=1)u[f]=c.GetValue(f);return r.push(w.d.Vec3),o.push(ue.T.Normal.XYZ),i.push(u),e.destroy(c),u},t.__getTextureCoords=function(e,t,n,r,o,i){var a=t.GetAttributeId(n,e.TEX_COORD);if(-1===a)return null;var s=t.GetAttribute(n,a),c=new e.DracoFloat32Array;t.GetAttributeFloatForAllPoints(n,s,c);for(var l=2*n.num_points(),u=new Float32Array(l),f=0;f<l;f+=1)u[f]=c.GetValue(f);return r.push(w.d.Vec2),o.push(ue.T.Texcoord0.XY),i.push(u),e.destroy(c),u},e.getInstance=function(){return this.__instance||(this.__instance=new e),this.__instance},e}(),sn=n(5274);function cn(e){for(var t in e){var n=I.j.getExtension(t);if("gltf"===n)return sn.T.Gltf;if("glb"===n)return sn.T.GltfBinary;if("vrm"===n)return sn.T.VRM;if("drc"===n)return sn.T.Draco}return sn.T.Unknown}function ln(e){var t=e.split("."),n=t[t.length-1];return"efk"===n?"Effekseer":"drc"===n?"Draco":"vrm"===n?"VRM":"gltf"===n?"glTF":"Unknown"}var un=n(5936),fn=n(9294),_n=n(3022),hn=n(2670),dn=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.position=Se.P.zero(),this.radius=0},mn=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.colliders=[]};function vn(e){return vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},vn(e)}function pn(e,t){return!t||"object"!==An(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yn(e,t){return yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},yn(e,t)}var An=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var bn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yn(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=vn(t);if(n){var o=vn(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return pn(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).stiffnessForce=.5,e.gravityPower=0,e.gravityDir=Se.P.fromCopyArray([0,-1,0]),e.dragForce=.05,e.hitRadius=.02,e.rootBones=[],e.colliderGroupIndices=[],e}return o}(d.S),gn=n(8169);function xn(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function In(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){xn(i,r,o,a,s,"next",e)}function s(e){xn(i,r,o,a,s,"throw",e)}a(void 0)}))}}var En=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},wn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.importFromUri=function(t,n){var r=this;return In((function(){var o,i,a,s,c,l,u,f,_;return En(this,(function(h){switch(h.label){case 0:return n=r._getOptions(n),[4,un.Z.importFromUri(t,n)];case 1:return(a=h.sent()).isErr()?[2,new Ft.UG({message:"Failed to import VRM file.",error:a})]:((0,Ft.UD)(a),s=a.get(),c=e._createTextures(s),l=null===(o=s.asset.extras)||void 0===o||null===(i=o.rnLoaderOptions)||void 0===i?void 0:i.defaultMaterialHelperArgumentArray,b.Is.exist(l)&&(l[0].textures=c),e._initializeMaterialProperties(s,c.length),f=Kt.e.convertToRhodoniteObject(s),e._existOutlineMaterial(s.extensions.VRM)?(b.Is.exist(l)&&(l[0].isOutline=!0),_=Kt.e.convertToRhodoniteObject(s),u=[f,_]):u=[f],e._readSpringBone(s),e._readVRMHumanoidInfo(s,f),[2,new Ft.Ok(u)])}}))}))()},e.importJsonOfVRM=function(t,n){var r=this;return In((function(){var o,i;return En(this,(function(a){switch(a.label){case 0:return n=r._getOptions(n),[4,un.Z.importFromUri(t,n)];case 1:return(o=a.sent()).isErr()?[2,new Ft.UG({message:"Failed to import VRM file.",error:o})]:((0,Ft.UD)(o),i=o.get(),e._readVRMHumanoidInfo(i),[2,new Ft.Ok(i)])}}))}))()},e.__importVRM0x=function(e,t){var n=this;return In((function(){var r,o,i,a,s,c,l,u,f;return En(this,(function(_){return i=null===(r=e.asset.extras)||void 0===r||null===(o=r.rnLoaderOptions)||void 0===o?void 0:o.defaultMaterialHelperArgumentArray,a=n._createTextures(e),b.Is.exist(i)&&(i[0].textures=null!==(s=i[0].textures)&&void 0!==s?s:a,i[0].isLighting=null===(c=i[0].isLighting)||void 0===c||c),n._initializeMaterialProperties(e,a.length),n._existOutlineMaterial(e.extensions.VRM)?(t[1]=null!==(u=t[1])&&void 0!==u?u:new Lt.C,(f=t[1]).toClearColorBuffer=!1,f.toClearDepthBuffer=!1,e.extensions.VRM.rnExtension={renderPassOutline:f},l=Kt.e.convertToRhodoniteObject(e),f.addEntities([l])):l=Kt.e.convertToRhodoniteObject(e),t[0].addEntities([l]),n._readSpringBone(e),n._readVRMHumanoidInfo(e,l),n._readBlendShapeGroup(e,l),[2]}))}))()},e._readBlendShapeGroup=function(e,t){var n=[],r=e.extensions.VRM.blendShapeMaster.blendShapeGroups,o=!0,i=!1,a=void 0;try{for(var s,c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value,u={name:l.presetName,isBinary:l.isBinary,binds:l.binds.map((function(t){for(var n=0;n<e.nodes.length;n++)if(e.nodes[n].mesh===t.mesh)return{entityIdx:e.extras.rnEntities[n].entityUID,blendShapeIdx:t.index,weight:t.weight/100};throw new Error("Not Found node in blendShapeGroup Process")}))};n.push(u)}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}f.g.addComponentToEntity(gn.Z,t).getVrm().setVrmExpressions(n)},e._readVRMHumanoidInfo=function(e,t){var n=e.extensions.VRM.humanoid.humanBones,r=new Map,o=!0,i=!1,a=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value;r.set(l.bone,l.node);var u=e.nodes[l.node];l.name=u.name}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}null!=t&&t.tryToSetTag({tag:"humanoid_map_name_nodeId",value:r})},e._readSpringBone=function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,a=e.extensions.VRM.secondaryAnimation.boneGroups[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,c=new bn;for(var l in c.tryToSetUniqueName(s.comment,!0),c.dragForce=s.dragForce,c.stiffnessForce=s.stiffiness,c.gravityPower=s.gravityPower,c.gravityDir=Se.P.fromCopyArray([s.gravityDir.x,s.gravityDir.y,s.gravityDir.z]),c.colliderGroupIndices=s.colliderGroups,c.hitRadius=s.hitRadius,s.bones){var u=s.bones[l],_=e.asset.extras.rnEntities[u];c.rootBones.push(_.getSceneGraph())}t.push(c)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}_n.t.setBoneGroups(t);var h=!0,d=!1,m=void 0;try{for(var v,p=t[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var y=v.value,A=!0,b=!1,g=void 0;try{for(var x,I=y.rootBones[Symbol.iterator]();!(A=(x=I.next()).done);A=!0){var E=x.value;this.__addPhysicsComponentRecursively(f.g,E)}}catch(e){b=!0,g=e}finally{try{A||null==I.return||I.return()}finally{if(b)throw g}}}}catch(e){d=!0,m=e}finally{try{h||null==p.return||p.return()}finally{if(d)throw m}}var w=[];for(var S in e.extensions.VRM.secondaryAnimation.colliderGroups){var T=e.extensions.VRM.secondaryAnimation.colliderGroups[S],C=new mn;w.push(C);var P=[],R=!0,D=!1,M=void 0;try{for(var B,N=T.colliders[Symbol.iterator]();!(R=(B=N.next()).done);R=!0){var O=B.value,L=new dn;L.position=Se.P.fromCopyArray([O.offset.x,O.offset.y,O.offset.z]),L.radius=O.radius,P.push(L)}}catch(e){D=!0,M=e}finally{try{R||null==N.return||N.return()}finally{if(D)throw M}}C.colliders=P;var F=e.asset.extras.rnEntities[T.node].getSceneGraph();C.baseSceneGraph=F,_n.t.addColliderGroup(parseInt(S),C)}},e.__addPhysicsComponentRecursively=function(e,t){var n=t.entity;if(f.g.addComponentToEntity(hn.Z,n),_n.t.initialize(t),t.children.length>0){var r=!0,o=!1,i=void 0;try{for(var a,s=t.children[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;this.__addPhysicsComponentRecursively(e,c)}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}},e._createTextures=function(e){e.textures||(e.textures=[]);for(var t=e.textures,n=[],r=0;r<t.length;r++){var o=Kt.e._createTexture(t[r],e);n[r]=o}var i=new fn.x;i.generate1x1TextureFrom(),n.push(i);var a=new fn.x;return a.generate1x1TextureFrom("rgba(0, 0, 0, 1)"),n.push(a),n},e._existOutlineMaterial=function(e){var t=e.materialProperties;if(null!=t){var n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0)if(0!==i.value.floatProperties._OutlineWidthMode)return!0}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}return!1},e._initializeMaterialProperties=function(e,t){var n=e.extensions.VRM.materialProperties,r=!0,o=!1,i=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)if("VRM/MToon"===a.value.shader){this.__initializeMToonMaterialProperties(e,t);break}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}},e.__initializeMToonMaterialProperties=function(e,t){for(var n=e.extensions.VRM.materialProperties,r=t-2,o=t-1,i=0;i<n.length;i++){var a=n[i].floatProperties;this.__initializeForUndefinedProperty(a,"_BlendMode",0),this.__initializeForUndefinedProperty(a,"_BumpScale",1),this.__initializeForUndefinedProperty(a,"_CullMode",2),this.__initializeForUndefinedProperty(a,"_Cutoff",.5),this.__initializeForUndefinedProperty(a,"_DebugMode",0),this.__initializeForUndefinedProperty(a,"_DstBlend",0),this.__initializeForUndefinedProperty(a,"_IndirectLightIntensity",.1),this.__initializeForUndefinedProperty(a,"_LightColorAttenuation",0),this.__initializeForUndefinedProperty(a,"_OutlineColorMode",0),this.__initializeForUndefinedProperty(a,"_OutlineCullMode",1),this.__initializeForUndefinedProperty(a,"_OutlineLightingMix",1),this.__initializeForUndefinedProperty(a,"_OutlineScaledMaxDistance",1),this.__initializeForUndefinedProperty(a,"_OutlineWidth",.5),this.__initializeForUndefinedProperty(a,"_OutlineWidthMode",0),this.__initializeForUndefinedProperty(a,"_ReceiveShadowRate",1),this.__initializeForUndefinedProperty(a,"_RimFresnelPower",1),this.__initializeForUndefinedProperty(a,"_RimLift",0),this.__initializeForUndefinedProperty(a,"_RimLightingMix",0),this.__initializeForUndefinedProperty(a,"_ShadeShift",0),this.__initializeForUndefinedProperty(a,"_ShadeToony",.9),this.__initializeForUndefinedProperty(a,"_ShadingGradeRate",1),this.__initializeForUndefinedProperty(a,"_SrcBlend",1),this.__initializeForUndefinedProperty(a,"_ZWrite",1);var s=n[i].vectorProperties;this.__initializeForUndefinedProperty(s,"_Color",[1,1,1,1]),this.__initializeForUndefinedProperty(s,"_EmissionColor",[0,0,0]),this.__initializeForUndefinedProperty(s,"_OutlineColor",[0,0,0,1]),this.__initializeForUndefinedProperty(s,"_ShadeColor",[.97,.81,.86,1]),this.__initializeForUndefinedProperty(s,"_RimColor",[0,0,0]);var c=n[i].textureProperties;this.__initializeForUndefinedProperty(c,"_BumpMap",r),this.__initializeForUndefinedProperty(c,"_EmissionMap",o),this.__initializeForUndefinedProperty(c,"_MainTex",r),this.__initializeForUndefinedProperty(c,"_OutlineWidthTexture",r),this.__initializeForUndefinedProperty(c,"_ReceiveShadowTexture",r),this.__initializeForUndefinedProperty(c,"_RimTexture",o),this.__initializeForUndefinedProperty(c,"_ShadeTexture",r),this.__initializeForUndefinedProperty(c,"_ShadingGradeTexture",r),this.__initializeForUndefinedProperty(c,"_SphereAdd",o)}},e.__initializeForUndefinedProperty=function(e,t,n){null==e[t]&&(e[t]=n)},e._getOptions=function(e){if(null!=e){for(var t in e.files){var n=t.split(".vrm")[0];if(n){var r=e.files[t];e.files[n+".glb"]=r,delete e.files[t]}}e.__isImportVRM0x=!0,null==e.defaultMaterialHelperArgumentArray&&(e.defaultMaterialHelperArgumentArray=[{}]),e.defaultMaterialHelperArgumentArray[0].isMorphing||(e.maxMorphTargetNumber=0)}else e={files:{},loaderExtension:void 0,defaultMaterialHelperName:void 0,defaultMaterialHelperArgumentArray:[{isLighting:!0,isMorphing:!0,isSkinning:!0}],statesOfElements:[{targets:[],states:{enable:[],functions:{}},isTransparent:!0,opacity:1,isTextureImageToLoadPreMultipliedAlpha:!1}],__isImportVRM0x:!0,__importedType:"vrm0x"};return e},e}();function Sn(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function Tn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Sn(i,r,o,a,s,"next",e)}function s(e){Sn(i,r,o,a,s,"throw",e)}a(void 0)}))}}var Cn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Pn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.__importVRM=function(e,t){var n=this;return Tn((function(){var r,o,i,a,s,c,l,u,f;return Cn(this,(function(_){return i=null===(r=e.asset.extras)||void 0===r||null===(o=r.rnLoaderOptions)||void 0===o?void 0:o.defaultMaterialHelperArgumentArray,a=n._createTextures(e),b.Is.exist(i)&&(i[0].textures=null!==(s=i[0].textures)&&void 0!==s?s:a,i[0].isLighting=null===(c=i[0].isLighting)||void 0===c||c),n.__initializeMToonMaterialProperties(e,a.length)?(t[1]=null!==(u=t[1])&&void 0!==u?u:new Lt.C,(f=t[1]).toClearColorBuffer=!1,f.toClearDepthBuffer=!1,e.extensions.VRM={},e.extensions.VRM.rnExtension={renderPassOutline:f},l=Kt.e.convertToRhodoniteObject(e),f.addEntities([l])):l=Kt.e.convertToRhodoniteObject(e),t[0].addEntities([l]),n._readSpringBone(e),n._readVRMHumanoidInfo(e,l),[2]}))}))()},e._readVRMHumanoidInfo=function(e,t){var n=e.extensions.VRMC_vrm.humanoid.humanBones,r=new Map;for(var o in n){var i=n[o];r.set(o,i.node)}null!=t&&t.tryToSetTag({tag:"humanoid_map_name_nodeId",value:r})},e._readSpringBone=function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,a=e.extensions.VRMC_springBone.springs[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,c=new bn;for(var l in c.tryToSetUniqueName(s.name,!0),c.colliderGroupIndices=b.Is.exist(s.colliderGroups)?s.colliderGroups:[],s.joints){var u=s.joints[l];c.dragForce=u.dragForce,c.stiffnessForce=u.stiffness,c.gravityPower=b.Is.exist(u.gravityPower)?u.gravityPower:1,c.gravityDir=b.Is.exist(u.gravityDir)?Se.P.fromCopyArray3([u.gravityDir[0],u.gravityDir[1],u.gravityDir[2]]):Se.P.fromCopyArray3([0,-1,0]),c.hitRadius=u.hitRadius;var _=e.asset.extras.rnEntities[u.node];c.rootBones.push(_.getSceneGraph())}t.push(c)}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}_n.t.setBoneGroups(t);var h=!0,d=!1,m=void 0;try{for(var v,p=t[Symbol.iterator]();!(h=(v=p.next()).done);h=!0){var y=v.value,A=!0,g=!1,x=void 0;try{for(var I,E=y.rootBones[Symbol.iterator]();!(A=(I=E.next()).done);A=!0){var w=I.value;this.__addPhysicsComponentRecursively(f.g,w)}}catch(e){g=!0,x=e}finally{try{A||null==E.return||E.return()}finally{if(g)throw x}}}}catch(e){d=!0,m=e}finally{try{h||null==p.return||p.return()}finally{if(d)throw m}}var S=[];for(var T in e.extensions.VRMC_springBone.colliderGroups){var C=e.extensions.VRMC_springBone.colliderGroups[T],P=new mn;S.push(P);var R=[],D=!0,M=!1,B=void 0;try{for(var N,O=C.colliders[Symbol.iterator]();!(D=(N=O.next()).done);D=!0){var L=N.value,F=e.extensions.VRMC_springBone.colliders[L];if(F.shape.sphere){var G=new dn;G.position=Se.P.fromCopyArray([F.shape.sphere.offset[0],F.shape.sphere.offset[1],F.shape.sphere.offset[2]]),G.radius=F.shape.sphere.radius,R.push(G);var V=e.asset.extras.rnEntities[F.node].getSceneGraph();G.baseSceneGraph=V,P.baseSceneGraph=V}}}catch(e){M=!0,B=e}finally{try{D||null==O.return||O.return()}finally{if(M)throw B}}P.colliders=R,_n.t.addColliderGroup(parseInt(T),P)}},e.__addPhysicsComponentRecursively=function(e,t){var n=t.entity;if(f.g.addComponentToEntity(hn.Z,n),_n.t.initialize(t),t.children.length>0){var r=!0,o=!1,i=void 0;try{for(var a,s=t.children[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;this.__addPhysicsComponentRecursively(e,c)}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}},e._createTextures=function(e){e.textures||(e.textures=[]);for(var t=e.textures,n=[],r=0;r<t.length;r++){var o=Kt.e._createTexture(t[r],e);n[r]=o}var i=new fn.x;i.generate1x1TextureFrom(),n.push(i);var a=new fn.x;return a.generate1x1TextureFrom("rgba(0, 0, 0, 1)"),n.push(a),n},e.__initializeMToonMaterialProperties=function(e,t){var n=!1,r=!0,o=!1,i=void 0;try{for(var a,s=e.materials[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c,l,u,f=a.value,_=null===(c=f.extensions)||void 0===c?void 0:c.VRMC_materials_mtoon;if(null!=_){var h=t-2,d=t-1,m={name:"vrm0xMaterialProperty",renderQueue:0,shader:"VRM/MToon",floatProperties:{_BlendMode:b.Is.not.exist(f.alphaMode)||"OPAQUE"===f.alphaMode?0:"MASK"===f.alphaMode?1:"BLEND"===f.alphaMode?2:3,_CullMode:b.Is.not.exist(f.doubleSided)?2:f.doubleSided?0:2,_BumpScale:1,_Cutoff:b.Is.not.exist(f.alphaCutoff)?.5:f.alphaCutoff,_DebugMode:0,_SrcBlend:5,_DstBlend:10,_IndirectLightIntensity:.1,_LightColorAttenuation:0,_OutlineColorMode:1,_OutlineCullMode:1,_OutlineLightingMix:_.outlineLightingMixFactor,_OutlineScaledMaxDistance:1,_OutlineWidth:_.outlineWidthFactor,_OutlineWidthMode:"worldCoordinates"===_.outlineWidthMode?1:"screenCoordinates"===_.outlineWidthMode?2:0,_ReceiveShadowRate:1,_RimFresnelPower:_.parametricRimFresnelPowerFactor,_RimLift:_.parametricRimLiftFactor,_RimLightingMix:_.parametricRimLiftFactor,_ShadeShift:_.shadingShiftFactor,_ShadeToony:_.shadingToonyFactor,_ShadingGradeRate:1,_ZWrite:_.transparentWithZWrite?1:0},vectorProperties:{_Color:b.Is.not.exist(null===(l=f.pbrMetallicRoughness)||void 0===l?void 0:l.baseColorFactor)?[1,1,1,1]:f.pbrMetallicRoughness.baseColorFactor,_EmissionColor:b.Is.not.exist(f.emissiveFactor)?[0,0,0]:f.emissiveFactor,_OutlineColor:_.outlineColorFactor,_ShadeColor:_.shadeColorFactor,_RimColor:_.parametricRimColorFactor,_BumpMap:[0,0,1,1],_EmissionMap:[0,0,1,1],_MainTex:[0,0,1,1],_OutlineWidthTexture:[0,0,1,1],_ReceiveShadowTexture:[0,0,1,1],_ShadeTexture:[0,0,1,1],_ShadingGradeTexture:[0,0,1,1],_SphereAdd:[0,0,1,1]},textureProperties:{_BumpMap:b.Is.not.exist(f.normalTexture)?h:f.normalTexture.index,_EmissionMap:b.Is.not.exist(f.emissiveTexture)?d:f.emissiveTexture.index,_MainTex:b.Is.not.exist(null===(u=f.pbrMetallicRoughness)||void 0===u?void 0:u.baseColorTexture)?h:f.pbrMetallicRoughness.baseColorTexture.index,_OutlineWidthTexture:b.Is.not.exist(_.outlineWidthMultiplyTexture)?h:_.outlineWidthMultiplyTexture.index,_ReceiveShadowTexture:h,_ShadeTexture:b.Is.not.exist(_.shadeMultiplyTexture)?h:_.shadeMultiplyTexture.index,_RimTexture:b.Is.not.exist(_.rimMultiplyTexture)?h:_.rimMultiplyTexture.index,_ShadingGradeTexture:h,_SphereAdd:d}};b.Is.not.exist(f.extras)&&(f.extras={}),f.extras.vrm0xMaterialProperty=m,"none"!==_.outlineWidthMode&&(n=!0)}}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n},e._getOptions=function(e){if(null!=e){for(var t in e.files){var n=t.split(".vrm")[0];if(n){var r=e.files[t];e.files[n+".glb"]=r,delete e.files[t]}}e.__isImportVRM0x=!0,null==e.defaultMaterialHelperArgumentArray&&(e.defaultMaterialHelperArgumentArray=[{}]),e.defaultMaterialHelperArgumentArray[0].isMorphing||(e.maxMorphTargetNumber=0)}else e={files:{},loaderExtension:void 0,defaultMaterialHelperName:void 0,defaultMaterialHelperArgumentArray:[{isLighting:!0,isMorphing:!0,isSkinning:!0}],statesOfElements:[{targets:[],states:{enable:[],functions:{}},isTransparent:!0,opacity:1,isTextureImageToLoadPreMultipliedAlpha:!1}],__isImportVRM0x:!0,__importedType:"vrm1"};return e},e.importJsonOfVRM=function(t,n){var r=this;return Tn((function(){var o,i;return Cn(this,(function(a){switch(a.label){case 0:return n=r._getOptions(n),[4,un.Z.importFromUri(t,n)];case 1:return(o=a.sent()).isErr()?[2,new Ft.UG({message:"Failed to import VRM file.",error:o})]:((0,Ft.UD)(o),i=o.get(),e._readVRMHumanoidInfo(i),[2,new Ft.Ok(i)])}}))}))()},e.__importVRM0x=function(e,t){var n=this;return Tn((function(){var r,o,i,a,s,c,l,u,f;return Cn(this,(function(_){return i=null===(r=e.asset.extras)||void 0===r||null===(o=r.rnLoaderOptions)||void 0===o?void 0:o.defaultMaterialHelperArgumentArray,a=n._createTextures(e),b.Is.exist(i)&&(i[0].textures=null!==(s=i[0].textures)&&void 0!==s?s:a,i[0].isLighting=null===(c=i[0].isLighting)||void 0===c||c),n.__initializeMToonMaterialProperties(e,a.length)?(t[1]=null!==(u=t[1])&&void 0!==u?u:new Lt.C,(f=t[1]).toClearColorBuffer=!1,f.toClearDepthBuffer=!1,e.extensions.VRM.rnExtension={renderPassOutline:f},l=Kt.e.convertToRhodoniteObject(e),f.addEntities([l])):l=Kt.e.convertToRhodoniteObject(e),t[0].addEntities([l]),n._readSpringBone(e),n._readVRMHumanoidInfo(e,l),[2]}))}))()},e}();function Dn(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function Mn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Dn(i,r,o,a,s,"next",e)}function s(e){Dn(i,r,o,a,s,"throw",e)}a(void 0)}))}}var Bn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Nn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.importFromUri=function(e,t,n){var r=this;return Mn((function(){var o,i,a,s,c,l,u,f,_;return Bn(this,(function(h){switch(h.label){case 0:return t=r.__initOptions(t),0===(i=(null===(o=t.expression)||void 0===o?void 0:o.renderPasses)||[]).length&&i.push(new Lt.C),[4,I.j.fetchArrayBuffer(e)];case 1:return(a=h.sent()).isErr()?[2,new Ft.UG({message:"Failed to fetch array buffer",error:a})]:((0,Ft.UD)(a),t.files[e]=a.get(),[4,r.__detectTheModelFileTypeAndImport(e,i,t,e,n)]);case 2:if(h.sent(),t&&t.cameraComponent){s=!0,c=!1,l=void 0;try{for(u=i[Symbol.iterator]();!(s=(f=u.next()).done);s=!0)f.value.cameraComponent=t.cameraComponent}catch(e){c=!0,l=e}finally{try{s||null==u.return||u.return()}finally{if(c)throw l}}}return _=r.__setRenderPassesToExpression(i,t),[2,new Ft.Ok(_)]}}))}))()},e.importFromArrayBuffers=function(e,t,n){var r=this;return Mn((function(){var o,i,a,s,c,l,u,f,_,h,d,m,v;return Bn(this,(function(p){switch(p.label){case 0:for(s in t=r.__initOptions(t),0===(i=(null===(o=t.expression)||void 0===o?void 0:o.renderPasses)||[]).length&&i.push(new Lt.C),a=[],e)a.push(s);c=0,p.label=1;case 1:return c<a.length?(l=a[c],u=I.j.getExtension(l),r.__isValidExtension(u)?[4,r.__detectTheModelFileTypeAndImport(l,i,t,l,n)]:[3,3]):[3,4];case 2:p.sent(),p.label=3;case 3:return c++,[3,1];case 4:if(t&&t.cameraComponent){f=!0,_=!1,h=void 0;try{for(d=i[Symbol.iterator]();!(f=(m=d.next()).done);f=!0)m.value.cameraComponent=t.cameraComponent}catch(e){_=!0,h=e}finally{try{f||null==d.return||d.return()}finally{if(_)throw h}}}return v=r.__setRenderPassesToExpression(i,t),[2,new Ft.Ok(v)]}}))}))()},e.__initOptions=function(e){if(null==e)e=I.j.createDefaultGltfOptions();else{for(var t in null==e.files&&(e.files={}),e.files)if(null!=t.match(/.*\.vrm$/)){var n=t.split(".vrm")[0];if(n){var r=e.files[t];e.files[n+".glb"]=r,delete e.files[t]}}!1===Array.isArray(e.defaultMaterialHelperArgumentArray)?e.defaultMaterialHelperArgumentArray=[{}]:!1===e.defaultMaterialHelperArgumentArray[0].isMorphing&&(e.maxMorphTargetNumber=0)}return e},e.__setRenderPassesToExpression=function(e,t){var n,r=null!==(n=t.expression)&&void 0!==n?n:new Nt.A;return r.renderPasses!==e&&(r.clearRenderPasses(),r.addRenderPasses(e)),r},e.__isValidExtension=function(e){return"gltf"===e||"glb"===e||"vrm"===e||"drc"===e},e.__isGlb=function(e){return 1179937895===new DataView(e,0,20).getUint32(0,!0)},e.__getGlbVersion=function(e){return new DataView(e,0,20).getUint32(4,!0)},e.__getGltfVersion=function(e){var t,n;return"2"===(null===(t=e.asset)||void 0===t||null===(n=t.version)||void 0===n?void 0:n.charAt(0))?2:1},e.__detectTheModelFileTypeAndImport=function(e,t,n,r,o){var i=this;return Mn((function(){var a,s,c,l,u,f,_,h,d,m,v,p,y;return Bn(this,(function(A){switch(A.label){case 0:switch(a=n.fileType,s=i.__getFileTypeFromFilePromise(e,n,a),c=n.files[e],n.__isImportVRM0x=!1,s){case sn.T.Gltf:return[3,1];case sn.T.GltfBinary:return[3,3];case sn.T.Draco:return[3,5];case sn.T.VRM:return[3,7]}return[3,14];case 1:return l=I.j.arrayBufferToString(c),u=JSON.parse(l),i.__getGltfVersion(u),[4,un.Z._importGltf(u,n.files,n,e,o)];case 2:return f=A.sent(),_=Kt.e.convertToRhodoniteObject(f),t[0].addEntities([_]),n.__importedType="gltf2",[2,new Ft.Ok];case 3:return i.__getGlbVersion(c),[4,un.Z._importGlb(c,n.files,n)];case 4:return h=A.sent(),d=Kt.e.convertToRhodoniteObject(h),t[0].addEntities([d]),n.__importedType="glb2",[2,new Ft.Ok];case 5:return[4,an.getInstance().importArrayBuffer(r,c,n)];case 6:return null==(m=A.sent())?[2,new Ft.UG({message:"importArrayBuffer error is occurred",error:void 0})]:(n.__importedType="draco",v=Kt.e.convertToRhodoniteObject(m),t[0].addEntities([v]),[2,new Ft.Ok]);case 7:return n.__isImportVRM0x=!0,[4,un.Z._importGltfOrGlbFromArrayBuffers(c,n.files,n)];case 8:return(p=A.sent()).isOk()?(y=p.get()).extensionsUsed.indexOf("VRMC_vrm")>0?(n.__isImportVRM0x=!1,y.asset.extras.rnLoaderOptions.__isImportVRM0x=!1,n.__importedType="vrm1",[4,Pn.__importVRM(y,t)]):[3,10]:[3,13];case 9:return A.sent(),[3,12];case 10:return y.extensionsUsed.indexOf("VRM")>0?(n.__importedType="vrm0x",[4,wn.__importVRM0x(y,t)]):[3,12];case 11:A.sent(),A.label=12;case 12:return[2,new Ft.Ok];case 13:return(0,Ft.Z6)(p),[2,new Ft.UG({message:p.getRnError().message,error:void 0})];case 14:return[2,new Ft.UG({message:"detect invalid format",error:void 0})];case 15:return[2]}}))}))()},e.__getFileTypeFromFilePromise=function(e,t,n){return null!=n?sn.T.fromString(n):cn((r={},o=e,i=t.files[e],o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,r));var r,o,i},e}(),On=n(4398),Ln=n(7011);function Fn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vn(e){return Vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Vn(e)}function zn(e,t){return!t||"object"!==Un(t)&&"function"!=typeof t?Fn(e):t}function kn(e,t){return kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},kn(e,t)}var Un=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var Qn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kn(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Vn(t);if(n){var o=Vn(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return zn(this,e)});function o(e,t,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(i=r.call(this)).__inputs=[],i.__outputs=[],i.__inputConnections=[],i.__shaderFunctionName=e,i.__shaderCode=t,i.__shaderNodeUid=++o.__invalidShaderNodeCount,o._shaderNodes[o.__invalidShaderNodeCount]=Fn(i),i.__shader=n,i}var i,a,s=o.prototype;return s.addInputConnection=function(e,t,n){this.__inputConnections.push({shaderNodeUid:e.shaderNodeUid,outputNameOfPrev:t,inputNameOfThis:n})},s.getInput=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.__inputs[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(a.name===e)return a}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},s.getInputs=function(){return this.__inputs},s.getOutput=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.__outputs[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(a.name===e)return a}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},s.getOutputs=function(){return this.__outputs},i=o,(a=[{key:"shaderFunctionName",get:function(){return this.__shaderFunctionName}},{key:"shaderCode",get:function(){return this.__shaderCode}},{key:"shaderNodeUid",get:function(){return this.__shaderNodeUid}},{key:"inputConnections",get:function(){return this.__inputConnections}},{key:"shader",get:function(){return this.__shader}}])&&Gn(i.prototype,a),o}(d.S);Qn._shaderNodes=[],Qn.__invalidShaderNodeCount=-1;var jn=n(790),Wn=n(2603),Xn=n(5685),Hn=n(8808);const qn="const float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n";var Yn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.createVertexShaderCode=function(t){var n,r=t.concat(),o=this.__findBeginNode(r),i=this.__sortTopologically(o,r),a="",s="attribute";(null===(n=ht.F.getWebGLResourceRepository().currentWebGLContextWrapper)||void 0===n?void 0:n.isWebGL2)&&(s="in"),a+="\n#version 300 es\nprecision highp float;\nprecision highp int;\n".concat(qn,"\n\n    ").concat(s," vec4 a_instanceInfo;\n"),a+="\nuniform bool u_vertexAttributesExistenceArray[".concat(ue.T.AttributeTypeNumber,"];\n"),a+="/* shaderity: @{matricesGetters} */",a+="/* shaderity: @{getters} */";var c="";return c+=e.getFunctionDefinition(i,Xn.H.VertexShader),{shader:a+(c+=e.__constructShaderWithNodes(i)),shaderBody:c}},e.createPixelShaderCode=function(t){var n=t.concat(),r=this.__findBeginNode(n),o=this.__sortTopologically(r,n),i="";i+="\n#version 300 es\nprecision highp float;\nprecision highp int;\n".concat(qn,"\n"),i+="/* shaderity: @{getters} */",i+="layout(location = 0) out vec4 rt0;";var a="";return a+=e.getFunctionDefinition(o,Xn.H.PixelShader),{shader:i+(a+=e.__constructShaderWithNodes(o)),shaderBody:a}},e.__findBeginNode=function(e){for(var t,n=0;n<e.length;n++){var r=e[n];0===r.inputConnections.length&&(t=r)}return t},e.__sortTopologically=function(e,t){var n=function(){var e=void 0;t.forEach((function(t){var n=0,o=!0,i=!1,a=void 0;try{for(var s,c=t.inputConnections[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value;-1===r.indexOf(l.shaderNodeUid)&&n++}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}0===n&&(e=t)})),o.push(e),r.push(e.shaderNodeUid),t.splice(t.indexOf(e),1)},r=[e.shaderNodeUid],o=[e];t.splice(t.indexOf(e),1);do{n()}while(0!==t.length);return o},e.getFunctionDefinition=function(e,t){for(var n="",r=[],o=0;o<e.length;o++){var i=e[o];-1===r.indexOf(i.shaderFunctionName)&&(i.shaderCode?n+=i.shaderCode:t===Xn.H.VertexShader?n+=i.shader.vertexShaderDefinitions:n+=i.shader.pixelShaderDefinitions,r.push(i.shaderFunctionName))}return n},e.__constructShaderWithNodes=function(e){var t="",n=function(e){return e.compositionType===w.d.Unknown||e.componentType===x.r.Unknown};t+=Hn.m.glslMainBegin,t+="#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n";for(var r=[],o=[],i=[],a=[],s=new Map,c=1;c<e.length;c++){var l=e[c];null==r[c]&&(r[c]=[]),c-1>=0&&null==o[c-1]&&(o[c-1]=[]);for(var u=l.inputConnections,f=0;f<u.length;f++){var _=u[f],h=Qn._shaderNodes[_.shaderNodeUid];if(!n(l.getInputs()[f])){var d=h.getOutput(_.outputNameOfPrev),m=l.getInput(_.inputNameOfThis),v="".concat(d.name,"_").concat(_.shaderNodeUid,"_to_").concat(l.shaderNodeUid);if(-1===i.indexOf(h.shaderNodeUid)){var p=m.compositionType.getGlslStr(m.componentType),y=m.compositionType.getGlslInitialValue(m.componentType);t+="".concat(p," ").concat(v," = ").concat(y,";\n")}var A=s.get(h.shaderNodeUid);r[c].push(A||v),i.push(_.shaderNodeUid)}}for(var b=c;b<e.length;b++)for(var g=e[b],I=e[c-1],E=g.inputConnections,S=0;S<E.length;S++){var T=E[S];if((null==I?void 0:I.shaderNodeUid)===T.shaderNodeUid){var C=Qn._shaderNodes[T.shaderNodeUid];if(!n(g.getInputs()[S])){if(-1===a.indexOf(C.shaderNodeUid)){var P=C.getOutput(T.outputNameOfPrev),R="".concat(P.name,"_").concat(T.shaderNodeUid,"_to_").concat(g.shaderNodeUid);c-1>=0&&o[c-1].push(R),s.set(T.shaderNodeUid,R)}a.push(T.shaderNodeUid)}}}}for(var D="",M=0;M<e.length;M++){var B=e[M],N=B.shaderFunctionName;null==r[M]&&(r[M]=[]),null==o[M]&&(o[M]=[]);var O="";if("ifStatement"===N)D=r[M][0];else{if(N.match(/^blockBegin_/)&&(O+="if (".concat(D,") {\n"),D=""),B.getInputs().length!==r[M].length||B.getOutputs().length!==o[M].length)continue;var L=r[M].concat(o[M]);if(L.length>0){O+="".concat(N,"(");for(var F=0;F<L.length;F++)null!=L[F]&&(0!==F&&(O+=", "),O+=L[F]);O+=");\n"}N.match(/^blockEnd_/)&&(O+="}\n")}t+=O}return t+Hn.m.glslMainEnd},e}(),Kn=n(6670);function Jn(e){return Jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Jn(e)}function Zn(e,t){return!t||"object"!==er(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $n(e,t){return $n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$n(e,t)}var er=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var tr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$n(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Jn(t);if(n){var o=Jn(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Zn(this,e)});function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,"add","\nvoid add(in float lfs, in float rhs, out float outValue) {\n  outValue = lfs + rhs;\n}\nvoid add(in int lfs, in int rhs, out int outValue) {\n  outValue = lfs + rhs;\n}\nvoid add(in vec2 lfs, in vec2 rhs, out vec2 outValue) {\n  outValue = lfs + rhs;\n}\nvoid add(in vec3 lfs, in vec3 rhs, out vec3 outValue) {\n  outValue = lfs + rhs;\n}\nvoid add(in vec4 lfs, in vec4 rhs, out vec4 outValue) {\n  outValue = lfs + rhs;\n}\n")).__inputs.push({compositionType:e,componentType:t,name:"lhs"}),n.__inputs.push({compositionType:e,componentType:x.r.Float,name:"rhs"}),n.__outputs.push({compositionType:e,componentType:t,name:"outValue"}),n}return o}(Qn);function nr(e){return nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},nr(e)}function rr(e,t){return!t||"object"!==ir(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function or(e,t){return or=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},or(e,t)}var ir=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var ar=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&or(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=nr(t);if(n){var o=nr(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return rr(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,"attributeNormal","\nin vec3 a_normal;\n\nvoid attributeNormal(out vec3 outValue) {\n  outValue = a_normal;\n}\n")).__outputs.push({compositionType:w.d.Vec3,componentType:x.r.Float,name:"outValue"}),e}return o}(Qn);function sr(e){return sr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},sr(e)}function cr(e,t){return!t||"object"!==ur(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lr(e,t){return lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},lr(e,t)}var ur=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var fr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lr(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=sr(t);if(n){var o=sr(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return cr(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,"attributePosition","\nin vec4 a_position;\n\nvoid attributePosition(out vec4 outValue) {\n  outValue = a_position;\n}\n")).__outputs.push({compositionType:w.d.Vec4,componentType:x.r.Float,name:"outValue"}),e}return o}(Qn),_r=n(4387);function hr(e){return hr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},hr(e)}function dr(e,t){return!t||"object"!==vr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mr(e,t){return mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},mr(e,t)}var vr=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var pr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mr(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=hr(t);if(n){var o=hr(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return dr(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,"blockBegin")).__valueInputs=[],e.__valueOutputs=[],e.__shaderFunctionName+="_"+e.__shaderNodeUid,e.__shader=new _r.I(e.__shaderFunctionName,e.__valueInputs,e.__valueOutputs),e.__inputs.push({compositionType:w.d.Scalar,componentType:x.r.Bool,name:"blockStart"}),e}return o.prototype.addInputAndOutput=function(e,t){var n={compositionType:e,componentType:t,name:"value_".concat(this.__valueInputs.length)},r={compositionType:e,componentType:t,name:"outValue_".concat(this.__valueOutputs.length)};this.__inputs.push(n),this.__outputs.push(r),this.__valueInputs.push(n),this.__valueOutputs.push(r)},o}(Qn),yr=n(1256);function Ar(e){return Ar=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ar(e)}function br(e,t){return!t||"object"!==xr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gr(e,t){return gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},gr(e,t)}var xr=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var Ir=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gr(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Ar(t);if(n){var o=Ar(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return br(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,"blockEnd")).__shaderFunctionName+="_"+e.__shaderNodeUid,e.__shader=new yr.$(e.__shaderFunctionName,e.__inputs,e.__outputs),e}return o.prototype.addInputAndOutput=function(e,t){var n={compositionType:e,componentType:t,name:"value_".concat(this.__inputs.length)},r={compositionType:e,componentType:t,name:"outValue_".concat(this.__outputs.length)};this.__inputs.push(n),this.__outputs.push(r)},o}(Qn),Er=n(3389);function wr(e){return wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},wr(e)}function Sr(e,t){return!t||"object"!==Cr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tr(e,t){return Tr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Tr(e,t)}var Cr=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var Pr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tr(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=wr(t);if(n){var o=wr(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Sr(this,e)});function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,"constantVariable",void 0,void 0)).__shaderFunctionName+="_"+n.__shaderNodeUid,n.__shader=new Er.i(n.__shaderFunctionName,e,t),n.__outputs.push({compositionType:e,componentType:t,name:"outValue"}),n}return o.prototype.setDefaultInputValue=function(e,t){"value"===e&&this.__shader.setConstantValue(t)},o}(Qn);function Rr(e){return Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Rr(e)}function Dr(e,t){return!t||"object"!==Br(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mr(e,t){return Mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Mr(e,t)}var Br=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var Nr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mr(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Rr(t);if(n){var o=Rr(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Dr(this,e)});function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,"dotProduct","\nvoid dotProduct(in vec2 lfs, in vec2 rhs, out float outValue) {\n  outValue = dot(lfs, rhs);\n}\nvoid dotProduct(in vec3 lfs, in vec3 rhs, out float outValue) {\n  outValue = dot(lfs, rhs);\n}\nvoid dotProduct(in vec4 lfs, in vec4 rhs, out float outValue) {\n  outValue = dot(lfs, rhs);\n}\n")).__inputs.push({compositionType:e,componentType:t,name:"lhs"}),n.__inputs.push({compositionType:e,componentType:x.r.Float,name:"rhs"}),n.__outputs.push({compositionType:w.d.Scalar,componentType:t,name:"outValue"}),n}return o}(Qn);function Or(e){return Or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Or(e)}function Lr(e,t){return!t||"object"!==Gr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fr(e,t){return Fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Fr(e,t)}var Gr=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var Vr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fr(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Or(t);if(n){var o=Or(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Lr(this,e)});function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,"greater","\nvoid greater(in float lhs, in float rhs, out bool outValue) {\n  outValue = lhs > rhs;\n}\n\nvoid greater(in int lhs, in int rhs, out bool outValue) {\n  outValue = lhs > rhs;\n}\n")).__inputs.push({compositionType:e,componentType:t,name:"lhs"}),n.__inputs.push({compositionType:e,componentType:x.r.Float,name:"rhs"}),n.__outputs.push({compositionType:w.d.Scalar,componentType:x.r.Bool,name:"outValue"}),n}return o}(Qn),zr=n(6080);function kr(e){return kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},kr(e)}function Ur(e,t){return!t||"object"!==jr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qr(e,t){return Qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Qr(e,t)}var jr=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var Wr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qr(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=kr(t);if(n){var o=kr(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Ur(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,"ifStatement",void 0,new zr.p)).__inputs.push({compositionType:w.d.Scalar,componentType:x.r.Bool,name:"condition"}),e.__outputs.push({compositionType:w.d.Unknown,componentType:x.r.Unknown,name:"ifStart"}),e}return o}(Qn);function Xr(e){return Xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Xr(e)}function Hr(e,t){return!t||"object"!==Yr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qr(e,t){return qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},qr(e,t)}var Yr=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var Kr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qr(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Xr(t);if(n){var o=Xr(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Hr(this,e)});function o(e,t,n,i){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=r.call(this,"multiply","\nvoid multiply(in float lfs, in float rhs, out float outValue) {\n  outValue = lfs * rhs;\n}\nvoid multiply(in int lfs, in int rhs, out int outValue) {\n  outValue = lfs * rhs;\n}\nvoid multiply(in mat2 lfs, in mat2 rhs, out mat2 outValue) {\n  outValue = lfs * rhs;\n}\nvoid multiply(in mat3 lfs, in mat3 rhs, out mat3 outValue) {\n  outValue = lfs * rhs;\n}\nvoid multiply(in mat4 lfs, in mat4 rhs, out mat4 outValue) {\n  outValue = lfs * rhs;\n}\nvoid multiply(in mat3 lfs, in vec3 rhs, out vec3 outValue) {\n  outValue = lfs * rhs;\n}\nvoid multiply(in mat4 lfs, in vec4 rhs, out vec4 outValue) {\n  outValue = lfs * rhs;\n}\n\n");var s=w.d.Unknown;return e===w.d.Mat4&&n===w.d.Mat4?s=w.d.Mat4:e===w.d.Mat4&&n===w.d.Vec4?s=w.d.Vec4:e===w.d.Scalar&&n===w.d.Scalar&&(s=w.d.Scalar),a.__inputs.push({compositionType:e,componentType:t,name:"lhs"}),a.__inputs.push({compositionType:n,componentType:i,name:"rhs"}),a.__outputs.push({compositionType:s,componentType:t,name:"outValue"}),a}return o}(Qn);function Jr(e){return Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Jr(e)}function Zr(e,t){return!t||"object"!==eo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $r(e,t){return $r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$r(e,t)}var eo=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var to=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$r(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Jr(t);if(n){var o=Jr(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Zr(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,"normalMatrix","\nvoid normalMatrix(out mat3 outValue) {\n  outValue = get_normalMatrix(a_instanceInfo.x);\n}\n")).__outputs.push({compositionType:w.d.Mat3,componentType:x.r.Float,name:"outValue"}),e}return o}(Qn);function no(e){return no=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},no(e)}function ro(e,t){return!t||"object"!==io(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oo(e,t){return oo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},oo(e,t)}var io=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var ao=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oo(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=no(t);if(n){var o=no(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return ro(this,e)});function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,"normalize","\nvoid normalize(in vec2 value, out vec2 outValue) {\n  outValue = normalize(value);\n}\n\nvoid normalize(in vec3 value, out vec3 outValue) {\n  outValue = normalize(value);\n}\n\nvoid normalize(in vec4 value, out vec4 outValue) {\n  outValue = normalize(value);\n}\n")).__inputs.push({compositionType:e,componentType:t,name:"value"}),n.__outputs.push({compositionType:e,componentType:t,name:"outValue"}),n}return o}(Qn),so=n(6114);function co(e){return co=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},co(e)}function lo(e,t){return!t||"object"!==fo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uo(e,t){return uo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},uo(e,t)}var fo=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var _o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uo(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=co(t);if(n){var o=co(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return lo(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,"outColor",void 0,so.x.getInstance())).__inputs.push({compositionType:w.d.Vec4,componentType:x.r.Float,name:"value"}),e}return o}(Qn);function ho(e){return ho=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ho(e)}function mo(e,t){return!t||"object"!==po(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vo(e,t){return vo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vo(e,t)}var po=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var yo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vo(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=ho(t);if(n){var o=ho(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return mo(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,"outPosition",void 0,so.x.getInstance())).__inputs.push({compositionType:w.d.Vec4,componentType:x.r.Float,name:"value"}),e}return o}(Qn);function Ao(e){return Ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ao(e)}function bo(e,t){return!t||"object"!==xo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function go(e,t){return go=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},go(e,t)}var xo=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var Io=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&go(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Ao(t);if(n){var o=Ao(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return bo(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,"projectionMatrix","\nvoid projectionMatrix(out mat4 outValue) {\n  float cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID}*/];\n  outValue = get_projectionMatrix(cameraSID, 0);\n}\n")).__outputs.push({compositionType:w.d.Mat4,componentType:x.r.Float,name:"outValue"}),e}return o}(Qn);function Eo(e){return Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Eo(e)}function wo(e,t){return!t||"object"!==To(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function So(e,t){return So=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},So(e,t)}var To=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var Co=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&So(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Eo(t);if(n){var o=Eo(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return wo(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,"scalarToVector4","\nvoid scalarToVector4(in float x, in float y, in float z, in float w, out vec4 outValue) {\n  outValue.x = x;\n  outValue.y = y;\n  outValue.z = z;\n  outValue.w = w;\n}\n")).__inputs.push({compositionType:w.d.Scalar,componentType:x.r.Float,name:"x"}),e.__inputs.push({compositionType:w.d.Scalar,componentType:x.r.Float,name:"y"}),e.__inputs.push({compositionType:w.d.Scalar,componentType:x.r.Float,name:"z"}),e.__inputs.push({compositionType:w.d.Scalar,componentType:x.r.Float,name:"w"}),e.__outputs.push({compositionType:w.d.Vec4,componentType:x.r.Float,name:"outValue"}),e}return o}(Qn),Po=n(2489);function Ro(e){return Ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ro(e)}function Do(e,t){return!t||"object"!==Bo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mo(e,t){return Mo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Mo(e,t)}var Bo=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var No=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mo(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Ro(t);if(n){var o=Ro(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Do(this,e)});function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,new Po.S,"textureFetch")).generalTextureMaterialNodeUID=new A.wy({str:"generalTexture_".concat(e.materialNodeUid)});var t=[{semantic:e.generalTextureMaterialNodeUID,componentType:x.r.Int,compositionType:w.d.Texture2D,stage:Xn.H.PixelShader,isCustomSetting:!1,soloDatum:!1,min:0,max:Number.MAX_SAFE_INTEGER}];return e.setShaderSemanticsInfoArray(t),e.__vertexInputs.push({compositionType:w.d.Vec2,componentType:x.r.Float,name:"texcoord"}),e.__vertexOutputs.push({compositionType:w.d.Vec4,componentType:x.r.Float,name:"outColor"}),e}return o}(Ln.P),Oo=n(4200);function Lo(e){return Lo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Lo(e)}function Fo(e,t){return!t||"object"!==Vo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Go(e,t){return Go=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Go(e,t)}var Vo=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var zo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Go(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Lo(t);if(n){var o=Lo(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Fo(this,e)});function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,"uniformData")).__shaderFunctionName+="_"+n.__shaderNodeUid,n.__shader=new Oo.$(n.__shaderFunctionName,e,t),n.__outputs.push({compositionType:e,componentType:t,name:"outValue"}),n}var i=o.prototype;return i.setDefaultInputValue=function(e,t){"value"===e&&this.__shader.setDefaultValue(t)},i.setUniformDataName=function(e){this.__shader.setVariableName(e)},o}(Qn),ko=n(2850);function Uo(e){return Uo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Uo(e)}function Qo(e,t){return!t||"object"!==Wo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jo(e,t){return jo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jo(e,t)}var Wo=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var Xo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jo(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Uo(t);if(n){var o=Uo(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Qo(this,e)});function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,"varyingInVariable")).__shaderFunctionName+="_"+n.__shaderNodeUid,n.__shader=new ko.e(n.__shaderFunctionName,e,t),n.__outputs.push({compositionType:e,componentType:t,name:"outValue",isClosed:!0}),n}return o.prototype.setVaryingVariableName=function(e){this.__shader.setVariableName(e)},o}(Qn);function Ho(e){return Ho=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ho(e)}function qo(e,t){return!t||"object"!==Ko(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yo(e,t){return Yo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Yo(e,t)}var Ko=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var Jo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yo(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Ho(t);if(n){var o=Ho(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return qo(this,e)});function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,"varyingOutVariable")).__shaderFunctionName+="_"+n.__shaderNodeUid,n.__shader=new ko.e(n.__shaderFunctionName,e,t),n.__inputs.push({compositionType:e,componentType:t,name:"value"}),n}return o.prototype.setVaryingVariableName=function(e){this.__shader.setVariableName(e)},o}(Qn);function Zo(e){return Zo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Zo(e)}function $o(e,t){return!t||"object"!==ti(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ei(e,t){return ei=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ei(e,t)}var ti=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var ni=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ei(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Zo(t);if(n){var o=Zo(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return $o(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,"vector3AndScalarToVector4","\nvoid vector3AndScalarToVector4(in vec3 xyz, in float w, out vec4 outValue) {\n  outValue.x = xyz.x;\n  outValue.y = xyz.y;\n  outValue.z = xyz.z;\n  outValue.w = w;\n}\n")).__inputs.push({compositionType:w.d.Vec3,componentType:x.r.Float,name:"xyz"}),e.__inputs.push({compositionType:w.d.Scalar,componentType:x.r.Float,name:"w"}),e.__outputs.push({compositionType:w.d.Vec4,componentType:x.r.Float,name:"outValue"}),e}return o}(Qn);function ri(e){return ri=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ri(e)}function oi(e,t){return!t||"object"!==ai(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ii(e,t){return ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ii(e,t)}var ai=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var si=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ii(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=ri(t);if(n){var o=ri(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return oi(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,"viewMatrix","\nvoid viewMatrix(out mat4 outValue) {\n  float cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID}*/];\n  outValue = get_viewMatrix(cameraSID, 0);\n}\n")).__outputs.push({compositionType:w.d.Mat4,componentType:x.r.Float,name:"outValue"}),e}return o}(Qn);function ci(e){return ci=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ci(e)}function li(e,t){return!t||"object"!==fi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ui(e,t){return ui=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ui(e,t)}var fi=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var _i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ui(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=ci(t);if(n){var o=ci(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return li(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,"wireframe","bool wireframe(\n  in vec4 existingFragColor,\n  in vec4 wireframeColor,\n  out vec4 outColor\n) {\n  vec3 wireframeInfo = get_wireframe(a_instanceInfo.x);\n\n  // Wireframe\n  float threshold = 0.001;\n  float wireframeWidthInner = wireframeInfo.z;\n  float wireframeWidthRelativeScale = 1.0;\n  if (wireframeInfo.x > 0.5 && wireframeInfo.y < 0.5) {\n    outColor.a = 0.0;\n  }\n  vec4 wireframeResult = existingFragColor;\n  float edgeRatio = edge_ratio(v_baryCentricCoord, wireframeWidthInner, wireframeWidthRelativeScale);\n  float edgeRatioModified = mix(step(threshold, edgeRatio), clamp(edgeRatio*4.0, 0.0, 1.0), wireframeWidthInner / wireframeWidthRelativeScale/4.0);\n  // if r0.a is 0.0, it is wireframe not on shaded\n  wireframeResult.rgb = wireframeColor.rgb * edgeRatioModified + existingFragColor.rgb * (1.0 - edgeRatioModified);\n  wireframeResult.a = max(existingFragColor.a, wireframeColor.a * mix(edgeRatioModified, pow(edgeRatioModified, 100.0), wireframeWidthInner / wireframeWidthRelativeScale/1.0));\n\n  if (wireframeInfo.x > 0.5) {\n    outColor = wireframeResult;\n    if (wireframeInfo.y < 0.5 && existingFragColor.a == 0.0) {\n      discard;\n    }\n  }\n}\n")).__inputs.push({compositionType:w.d.Vec4,componentType:x.r.Float,name:"existingFragColor"}),e.__inputs.push({compositionType:w.d.Vec4,componentType:x.r.Float,name:"wireframeColor"}),e.__outputs.push({compositionType:w.d.Vec4,componentType:x.r.Float,name:"outColor"}),e}return o}(Qn);function hi(e){return hi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},hi(e)}function di(e,t){return!t||"object"!==vi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mi(e,t){return mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},mi(e,t)}var vi=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var pi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mi(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=hi(t);if(n){var o=hi(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return di(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this,"worldMatrix","\nvoid worldMatrix(out mat4 outValue) {\n  outValue = get_worldMatrix(a_instanceInfo.x);\n}\n")).__outputs.push({compositionType:w.d.Mat4,componentType:x.r.Float,name:"outValue"}),e}return o}(Qn),yi=n(3297),Ai=n(6165),bi=n(9305),gi=n(5995),xi=n(7403),Ii=n(1811),Ei=n(3279),wi=n(678),Si=n(5757),Ti=n(4878);function Ci(e){return Ci=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ci(e)}function Pi(e,t){return!t||"object"!==Di(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ri(e,t){return Ri=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ri(e,t)}var Di=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var Mi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ri(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=Ci(t);if(n){var o=Ci(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return Pi(this,e)});function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=r.call(this,null,"envConstantShading",{},Si.Z,Ti.Z);var t=[{semantic:o.EnvHdriFormat,componentType:x.r.Int,compositionType:w.d.Scalar,stage:Xn.H.PixelShader,isCustomSetting:!1,updateInterval:wi.a.EveryTime,soloDatum:!1,initialValue:Ii.Ru.fromCopyNumber(0),min:0,max:5},{semantic:o.envRotation,componentType:x.r.Float,compositionType:w.d.Scalar,stage:Xn.H.PixelShader,isCustomSetting:!1,updateInterval:wi.a.EveryTime,soloDatum:!1,initialValue:Ii.Ru.fromCopyNumber(0),min:-Math.PI,max:Math.PI},{semantic:A.f5.DiffuseColorFactor,componentType:x.r.Float,compositionType:w.d.Vec4,stage:Xn.H.PixelShader,isCustomSetting:!1,updateInterval:wi.a.EveryTime,soloDatum:!1,initialValue:R.Lt.fromCopyArray([1,1,1,1]),min:0,max:2},{semantic:A.f5.ColorEnvTexture,componentType:x.r.Int,compositionType:w.d.TextureCube,stage:Xn.H.PixelShader,isCustomSetting:!1,updateInterval:wi.a.EveryTime,initialValue:[0,Ln.P.__dummyBlackCubeTexture],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:A.f5.MakeOutputSrgb,compositionType:w.d.Scalar,componentType:x.r.Bool,stage:Xn.H.PixelShader,min:0,max:1,isCustomSetting:!1,updateInterval:wi.a.FirstTimeOnly,initialValue:Ii.Ru.fromCopyNumber(1)}];return e.setShaderSemanticsInfoArray(t),e}return o.prototype._setCustomSettingParametersToGpu=function(e){e.material;var t=e.shaderProgram,n=(e.firstTime,e.args);n.setUniform&&(this.setWorldMatrix(t,n.worldMatrix),this.setNormalMatrix(t,n.normalMatrix));var r=n.renderPass.cameraComponent;null==r&&(r=c.C.getComponent(Ei.M,Ei.M.current)),r&&(this.setViewInfo(t,r,n.isVr,n.displayIdx),this.setProjection(t,r,n.isVr,n.displayIdx))},o}(Ln.P);Mi.envRotation=new A.wy({str:"envRotation"}),Mi.EnvHdriFormat=new A.wy({str:"envHdriFormat"});var Bi=n(8563),Ni=n(1668),Oi=n(1349),Li=n(6105),Fi=n(1181),Gi=n(3673),Vi=n(7862),zi=n(2653),ki=n(9573),Ui=n(8355),Qi=n(5527),ji=n(4341),Wi=n(7906),Xi=n(5511),Hi=(n(2612),n(4356)),qi=n(1138);function Yi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ki(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function Ji(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ki(e,t,"get"))}function Zi(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ki(e,t,"set"),n),n}function $i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ea(e){return ea=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ea(e)}function ta(e,t){return!t||"object"!==ra(t)&&"function"!=typeof t?Yi(e):t}function na(e,t){return na=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},na(e,t)}var ra=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var oa=new WeakMap,ia=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&na(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=ea(t);if(n){var o=ea(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return ta(this,e)});function o(){var e,t,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).autoResize=!0,e.autoDetectTransparency=!1,t=Yi(e),i={writable:!0,value:void 0},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,n=oa),n.set(t,i),e}var i,a,s=o.prototype;return s.__getResizedCanvas=function(e,t){var n=document.createElement("canvas"),r=I.j.getNearestPowerOfTwo(e.width),o=I.j.getNearestPowerOfTwo(e.height),i=o/r,a=0,s=0;r>o?s=(a=Math.min(r,t))*i:a=(s=Math.min(o,t))/i,n.width=a,n.height=s;var c=n.getContext("2d");if(c.drawImage(e,0,0,e.width,e.height,0,0,a,s),this.autoDetectTransparency){this.__imageData=c.getImageData(0,0,a,s);for(var l=0;l<s;l++)for(var u=0;u<a;u++)if(this.__imageData.data[4*(u+l*a)+3]<1)return this.__hasTransparentPixels=!0,n;this.__hasTransparentPixels=!1}return n},s.generateTextureFromVideo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.level,r=void 0===n?0:n,o=t.internalFormat,i=void 0===o?It.d.RGBA8:o,a=t.format,s=void 0===a?Et.V.RGBA:a,c=t.type,l=void 0===c?x.r.UnsignedByte:c,u=t.magFilter,f=void 0===u?It.d.Linear:u,_=t.minFilter,h=void 0===_?It.d.Linear:_,d=t.wrapS,m=void 0===d?It.d.ClampToEdge:d,v=t.wrapT,p=void 0===v?It.d.ClampToEdge:v,y=t.generateMipmap,A=void 0!==y&&y,b=t.anisotropy,g=void 0!==b&&b,I=t.isPremultipliedAlpha,E=void 0!==I&&I,w=t.mutedAutoPlay,S=void 0===w||w;this.__startedToLoad=!0,Zi(this,oa,e),S&&(e.autoplay=!0,e.muted=!0);var T=e;this.__width=T.videoWidth,this.__height=T.videoHeight;var C=ht.F.getWebGLResourceRepository(),P=C.createTextureFromImageBitmapData(T,{level:r,internalFormat:i,width:this.__width,height:this.__height,border:0,format:s,type:l,magFilter:f,minFilter:h,wrapS:m,wrapT:p,generateMipmap:A,anisotropy:g,isPremultipliedAlpha:E}),R=P.textureHandle;P.samplerHandle,this._textureResourceUid=R,this.__isTextureReady=!0,this.__uri=e.src,Hi.y.__textureMap.set(R,this)},s.generateTextureFromUri=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.level,r=void 0===n?0:n,o=t.internalFormat,i=void 0===o?It.d.RGBA8:o,a=t.format,s=void 0===a?Et.V.RGBA:a,c=t.type,l=void 0===c?x.r.UnsignedByte:c,u=t.magFilter,f=void 0===u?It.d.Linear:u,_=t.minFilter,h=void 0===_?It.d.Linear:_,d=t.wrapS,m=void 0===d?It.d.ClampToEdge:d,v=t.wrapT,p=void 0===v?It.d.ClampToEdge:v,y=t.generateMipmap,A=void 0!==y&&y,b=t.anisotropy,g=void 0!==b&&b,I=t.isPremultipliedAlpha,E=void 0!==I&&I,w=t.mutedAutoPlay,S=void 0===w||w,T=t.playButtonDomElement,C=void 0===T?void 0:T,P=this;return this.__uri=e,this.__startedToLoad=!0,new Promise((function(t,n){var o=function(){P.__width=a.videoWidth,P.__height=a.videoHeight;var e=ht.F.getWebGLResourceRepository().createTextureFromImageBitmapData(a,{level:r,internalFormat:i,width:P.__width,height:P.__height,border:0,format:s,type:l,magFilter:f,minFilter:h,wrapS:m,wrapT:p,generateMipmap:A,anisotropy:g,isPremultipliedAlpha:E}),n=e.textureHandle;e.samplerHandle,P._textureResourceUid=n,P.__isTextureReady=!0,t()};null==C||C.addEventListener("click",(function(){o(),a.play()}),!0);var a=document.createElement("video");a.crossOrigin="anonymous",a.setAttribute("playsinline","playsinline"),S&&(a.autoplay=!0,a.muted=!0),a.preload="auto",Zi(P,oa,a),a.addEventListener("canplaythrough",(function(){o(),a.play()}),!0),a.addEventListener("ended",(function(){a.play()}),!0),a.src=e}))},s.updateTexture=function(){var e=ht.F.getWebGLResourceRepository();this.__isTextureReady&&Ji(this,oa)&&e.updateTexture(this._textureResourceUid,Ji(this,oa),{level:0,xoffset:0,yoffset:0,width:this.__width,height:this.__height,format:Et.V.RGBA,type:x.r.UnsignedByte})},s.getCurrentFramePixelData=function(){var e=void 0,t=ht.F.getWebGLResourceRepository();return this.__isTextureReady&&Ji(this,oa)&&(e=t.getPixelDataFromTexture(this._textureResourceUid,0,0,this.width,this.height)),[e,this.width,this.height]},s.play=function(){var e;null===(e=Ji(this,oa))||void 0===e||e.play()},s.pause=function(){Ji(this,oa).pause()},i=o,(a=[{key:"playbackRate",get:function(){var e,t=null===(e=Ji(this,oa))||void 0===e?void 0:e.playbackRate;return null!=t?t:1},set:function(e){Ji(this,oa)&&(Ji(this,oa).playbackRate=e)}}])&&$i(i.prototype,a),o}(Hi.y);ia.__loadedBasisFunc=!1},3297:(e,t,n)=>{n.d(t,{h:()=>g});var r=n(4356),o=n(3279),i=n(3932),a=n(6383),s=n(2535),c=n(7416),l=n(5685),u=n(678),f=n(9294),_=n(7102),h=n(7011);const d={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\nin vec4 a_instanceInfo;\nin vec2 a_texcoord;\nin vec3 a_position;\n\nout vec2 v_texcoord;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nvoid main(){\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\nmat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n\n#ifdef RN_NO_CAMERA_TRANSFORM\n  gl_Position = worldMatrix * vec4(a_position, 1.0);\n#else\n\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  gl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\n\n#endif\n\n\n  v_texcoord = a_texcoord;\n}\n",shaderStage:"vertex",isFragmentShader:!1},m={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\nin vec2 v_texcoord;\n\n/* shaderity: @{renderTargetBegin} */\n\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\nvoid main ()\n{\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  vec4 textureColor = texture(u_baseColorTexture, v_texcoord);\n\n  float r = textureColor.r;\n  float g = textureColor.g;\n  float b = textureColor.b;\n  float r16 = r * 15.0;\n  float g16 = g * 15.0;\n  float b16 = b * 15.0;\n  float rInt = floor(r16);\n  float gInt = floor(g16);\n  float bInt = floor(b16);\n\n  float rRate, gRate, bRate;\n  float rIntAdjust, gIntAdjust, bIntAdjust;\n\n  vec3 newColor = vec3(0.0);\n  for(int i=0; i<8; i++){\n    rRate = 1.0 - fract(r16);\n    gRate = 1.0 - fract(g16);\n    bRate = 1.0 - fract(b16);\n    rIntAdjust = rInt;\n    gIntAdjust = gInt;\n    bIntAdjust = bInt;\n\n    if(fract(float(i) / 2.0) != 0.0){\n      rIntAdjust += 1.0;\n      rRate = 1.0 - rRate;\n    }\n    if(fract(float(i / 2) / 2.0) != 0.0){\n      gIntAdjust += 1.0;\n      gRate = 1.0 - gRate;\n    }\n    if(fract(float(i / 4) / 2.0) != 0.0){\n      bIntAdjust += 1.0;\n      bRate = 1.0 - bRate;\n    }\n\n    if( rRate * gRate * bRate != 0.0){\n      newColor += texture(u_lookupTableTexture, vec2(rIntAdjust / 256.0 + bIntAdjust / 16.0  + 1.0 / 512.0, gIntAdjust / 16.0 + 1.0 / 32.0)).rgb * rRate * gRate * bRate;\n    }\n  }\n\n  rt0 = vec4(newColor, 1.0);\n/* shaderity: @{renderTargetEnd} */\n\n}\n",shaderStage:"fragment",isFragmentShader:!0};function v(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function y(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e,t){return A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},A(e,t)}var b=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(g,e);var t,n,b=(t=g,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return y(this,e)});function g(e,t,n,o){var a,p;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),a=b.call(this,null,"colorGradingUsingLUTsShading",{},d,m);var y,A,x,I,E,w=e.getFramebuffer();null!=w&&null!=w.colorAttachments[t]?p=w.colorAttachments[t]:(p=h.P.__dummyBlackTexture,null!=w?console.warn("renderPass does not have framebuffer.colorAttachments["+t+"]"):console.warn("renderPass does not have framebuffer")),"string"==typeof n?(y=new f.x,(I=function(e){return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(t){switch(t.label){case 0:return[4,y.generateTextureFromUri(e,{minFilter:_.d.Nearest,magFilter:_.d.Nearest,wrapS:_.d.ClampToEdge,wrapT:_.d.ClampToEdge,type:s.r.UnsignedByte,anisotropy:!1})];case 1:return t.sent(),[2]}}))},E=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=I.apply(e,t);function i(e){v(o,n,r,i,a,"next",e)}function a(e){v(o,n,r,i,a,"throw",e)}i(void 0)}))},function(e){return E.apply(this,arguments)})(n)):(A=o,(null!=(x=r.y)&&"undefined"!=typeof Symbol&&x[Symbol.hasInstance]?x[Symbol.hasInstance](A):A instanceof x)?y=o:(console.warn("no LUT texture is specified"),y=h.P.__dummyBlackTexture));var S=[{semantic:c.f5.BaseColorTexture,componentType:s.r.Int,compositionType:i.d.Texture2D,stage:l.H.PixelShader,isCustomSetting:!1,updateInterval:u.a.EveryTime,initialValue:[0,p],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:g.lookupTableTexture,componentType:s.r.Int,compositionType:i.d.Texture2D,stage:l.H.PixelShader,isCustomSetting:!1,updateInterval:u.a.EveryTime,initialValue:[1,y],min:0,max:Number.MAX_SAFE_INTEGER}];return a.setShaderSemanticsInfoArray(S),a}return g.prototype._setCustomSettingParametersToGpu=function(e){e.material;var t=e.shaderProgram,n=(e.firstTime,e.args);n.setUniform&&this.setWorldMatrix(t,n.worldMatrix);var r=n.renderPass.cameraComponent;null==r&&(r=a.C.getComponent(o.M,o.M.current)),r&&(this.setViewInfo(t,r,n.isVr,n.displayIdx),this.setProjection(t,r,n.isVr,n.displayIdx))},g}(h.P);g.lookupTableTexture=new c.wy({str:"lookupTableTexture"})},6165:(e,t,n)=>{n.d(t,{f:()=>m});var r=n(7416),o=n(7011),i=n(5685),a=n(6383),s=n(3279),c=n(6558),l=n(6670),u=n(9481);function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function _(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var d=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(d,e);var t,n,u=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f(t);if(n){var o=f(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return _(this,e)});function d(e){var t,n=e.name,r=e.isMorphing,a=e.isSkinning,s=e.isLighting,c=e.isClearCoat,f=e.isTransmission,_=e.isVolume,h=e.isSheen,m=e.isSpecular,v=e.isIridescence,p=e.isShadow,y=e.useTangentAttribute,A=e.useNormalTexture,b=e.vertexShader,g=e.pixelShader,x=e.noUseCameraTransform,I=e.additionalShaderSemanticInfo;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),t=u.call(this,null,n+(r?"+morphing":"")+(a?"+skinning":"")+(s?"":"-lighting")+(c?"+clearcoat":"")+(f?"+transmission":"")+(_?"+volume":"")+(m?"+specular":"")+(h?"+sheen":"")+(v?"+iridescence":"")+(y?"+tangentAttribute":""),{isMorphing:r,isSkinning:a,isLighting:s});var E=l.Q.getShaderDataReflection(b,o.P.__semanticsMap.get(t.shaderFunctionName)),w=l.Q.getShaderDataReflection(g,o.P.__semanticsMap.get(t.shaderFunctionName));t.__vertexShaderityObject=E.shaderityObject,t.__pixelShaderityObject=w.shaderityObject;var S=[],T=!0,C=!1,P=void 0;try{for(var R,D=E.shaderSemanticsInfoArray[Symbol.iterator]();!(T=(R=D.next()).done);T=!0){var M=R.value;M.stage=i.H.VertexShader,S.push(M)}}catch(e){C=!0,P=e}finally{try{T||null==D.return||D.return()}finally{if(C)throw P}}var B=!0,N=!1,O=void 0;try{for(var L,F=function(){var e=L.value,t=S.find((function(t){return t.semantic.str===e.semantic.str}));t?t.stage=i.H.VertexAndPixelShader:(e.stage=i.H.PixelShader,S.push(e))},G=w.shaderSemanticsInfoArray[Symbol.iterator]();!(B=(L=G.next()).done);B=!0)F()}catch(e){N=!0,O=e}finally{try{B||null==G.return||G.return()}finally{if(N)throw O}}return s&&(t.__definitions+="#define RN_IS_LIGHTING\n"),a&&(t.__definitions+="#define RN_IS_SKINNING\n"),r&&(t.__definitions+="#define RN_IS_MORPHING\n"),c&&(t.__definitions+="#define RN_USE_CLEARCOAT\n"),f&&(t.__definitions+="#define RN_USE_TRANSMISSION\n"),_&&(t.__definitions+="#define RN_USE_VOLUME\n"),h&&(t.__definitions+="#define RN_USE_SHEEN\n"),m&&(t.__definitions+="#define RN_USE_SPECULAR\n"),v&&(t.__definitions+="#define RN_USE_IRIDESCENCE\n"),p&&(t.__definitions+="#define RN_USE_SHADOW_MAPPING\n"),y&&(t.__definitions+="#define RN_USE_TANGENT_ATTRIBUTE\n"),A&&(t.__definitions+="#define RN_USE_NORMAL_TEXTURE\n"),x&&(t.__definitions+="#define RN_NO_CAMERA_TRANSFORM\n"),t.setShaderSemanticsInfoArray(S.concat(I)),t}return d.prototype._setCustomSettingParametersToGpu=function(e){var t=e.material,n=e.shaderProgram,i=e.firstTime,c=e.args;if(c.setUniform){if(this.setWorldMatrix(n,c.worldMatrix),this.setNormalMatrix(n,c.normalMatrix),this.setIsBillboard(n,c.isBillboard),i||c.isVr){var l=c.renderPass.cameraComponent;null==l&&(l=a.C.getComponent(s.M,s.M.current)),this.setViewInfo(n,l,c.isVr,c.displayIdx),this.setProjection(n,l,c.isVr,c.displayIdx)}i&&this.setLightsInfo(n,c.lightComponents,t,c.setUniform);var u=c.entity.tryToGetSkeletal();this.setSkinning(n,c.setUniform,u)}if(c.diffuseCube&&c.diffuseCube.isTextureReady?this.__webglResourceRepository.setUniformValue(n,r.f5.DiffuseEnvTexture.str,i,[5,c.diffuseCube]):this.__webglResourceRepository.setUniformValue(n,r.f5.DiffuseEnvTexture.str,i,[5,o.P.__dummyBlackCubeTexture]),c.specularCube&&c.specularCube.isTextureReady?this.__webglResourceRepository.setUniformValue(n,r.f5.SpecularEnvTexture.str,i,[6,c.specularCube]):this.__webglResourceRepository.setUniformValue(n,r.f5.SpecularEnvTexture.str,i,[6,o.P.__dummyBlackCubeTexture]),c.setUniform){if(i){var f=d.__setupHdriParameters(c),_=f.mipmapLevelNumber,h=f.meshRenderComponent,m=f.diffuseHdriType,v=f.specularHdriType;this.__webglResourceRepository.setUniformValue(n,r.f5.IBLParameter.str,i,{x:_,y:h.diffuseCubeMapContribution,z:h.specularCubeMapContribution,w:h.rotationOfCubeMap}),this.__webglResourceRepository.setUniformValue(n,r.f5.HDRIFormat.str,i,{x:m,y:v})}}else{var p=d.__setupHdriParameters(c),y=p.mipmapLevelNumber,A=p.meshRenderComponent,b=p.diffuseHdriType,g=p.specularHdriType,x=o.P.__tmp_vector4;x.x=y,x.y=A.diffuseCubeMapContribution,x.z=A.specularCubeMapContribution,x.w=A.rotationOfCubeMap,t.setParameter(r.f5.IBLParameter,x);var I=o.P.__tmp_vector2;I.x=b,I.y=g,t.setParameter(r.f5.HDRIFormat,I)}var E=c.entity.tryToGetBlendShape();this.setMorphInfo(n,c.entity.getMesh(),c.primitive,E);var w=c.glw.canvas.width,S=c.glw.canvas.height,T=d.__globalDataRepository.getValue(r.f5.BackBufferTextureSize,0);T._v[0]=w,T._v[1]=S,n._gl.uniform2fv(n.backBufferTextureSize,T._v);var C=d.__globalDataRepository.getValue(r.f5.VrState,0);C._v[0]=c.isVr?1:0,C._v[1]=c.displayIdx,n._gl.uniform2iv(n.vrState,C._v)},d.__setupHdriParameters=function(e){var t=1;e.specularCube&&(t=e.specularCube.mipmapLevelNumber);var n=e.entity.getMeshRenderer(),r=c.c.LDR_SRGB.index,o=c.c.LDR_SRGB.index;return n.diffuseCubeMap&&(r=n.diffuseCubeMap.hdriFormat.index),n.specularCubeMap&&(o=n.specularCubeMap.hdriFormat.index),{mipmapLevelNumber:t,meshRenderComponent:n,diffuseHdriType:r,specularHdriType:o}},d}(o.P);m.__globalDataRepository=u.$.getInstance()},9305:(e,t,n)=>{n.d(t,{Q:()=>A});var r=n(7011),o=n(3279),i=n(6383),a=n(2535),s=n(3932),c=n(1811),l=n(7416),u=n(5685),f=n(678),_=n(6860);const h={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec4 a_instanceInfo;\nin vec4 a_joint;\nin vec4 a_weight;\n\nout vec3 v_normal_inWorld;\nout vec4 v_position_inLocal;\nout vec4 v_position_inWorld;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat4 viewMatrix,\n  in bool isBillboard,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n  mat4 worldMatrixInner = worldMatrix;\n  if (isBillboard) {\n    mat4 inverseViewMatrix = inverse(viewMatrix);\n    inverseViewMatrix[3][0] = 0.0;//worldMatrix[3][0];\n    inverseViewMatrix[3][1] = 0.0;//worldMatrix[3][1];\n    inverseViewMatrix[3][2] = 0.0;//worldMatrix[3][2];\n    worldMatrixInner = inverseViewMatrix * worldMatrix;\n  }\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrixInner * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main(){\n\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  mat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  mat3 normalMatrix = get_normalMatrix(a_instanceInfo.x);\n\n  // Skeletal\n  processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    viewMatrix,\n    false,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n  v_position_inLocal = gl_Position;\n\n// #ifdef RN_IS_POINTSPRITE\n\nvec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\nvec3 viewPosition = get_viewPosition(cameraSID, 0);\nfloat distanceFromCamera = length(position_inWorld.xyz - viewPosition);\nvec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\nfloat distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\nfloat maxPointSize = get_pointSize(materialSID, 0);\ngl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\n\n// #endif\n\n\n}\n",shaderStage:"vertex",isFragmentShader:!1},d={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\nin vec4 v_position_inLocal;\n\n/* shaderity: @{renderTargetBegin} */\n\n\n/* shaderity: @{getters} */\n\nvec4 encodeDepthToRGBA(float depth){\n  float r = depth;\n  float g = fract(r * 255.0);\n  float b = fract(g * 255.0);\n  float a = fract(b * 255.0);\n  float coef = 1.0 / 255.0;\n  r -= g * coef;\n  g -= b * coef;\n  b -= a * coef;\n  return vec4(r, g, b, a);\n}\n\nvoid main (){\n\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n  float depth;\n  bool isPointLight = get_isPointLight(materialSID, 0);\n  if(isPointLight){\n    float zNear = get_zNearInner(materialSID, 0);\n    float zFar = get_zFarInner(materialSID, 0);\n    float normalizationCoefficient = 1.0 / (zFar - zNear);\n    depth = normalizationCoefficient * length(v_position_inLocal);\n  }else{\n    depth = gl_FragCoord.z;\n  }\n\n  float depthPow = get_depthPow(materialSID, 0);\n  float depthData = pow(depth, depthPow);\n  vec4 encodedDepth = encodeDepthToRGBA(depthData);\n\n  rt0 = encodedDepth;\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n",shaderStage:"fragment",isFragmentShader:!0};function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function v(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}var y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(y,e);var t,n,r=(t=y,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=m(t);if(n){var o=m(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return v(this,e)});function y(e,t){var n,o=t.isSkinning;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(n=r.call(this,null,"depthEncodeShading"+(o?"+skinning":""),{isMorphing:!1,isSkinning:o,isLighting:!1},h,d)).__lastZNear=0,n.__lastZFar=0;var i=[{semantic:y.zNearInner,componentType:a.r.Float,compositionType:s.d.Scalar,stage:u.H.PixelShader,isCustomSetting:!0,updateInterval:f.a.FirstTimeOnly,soloDatum:!1,initialValue:c.Ru.fromCopyNumber(.1),min:1e-4,max:Number.MAX_SAFE_INTEGER},{semantic:y.zFarInner,componentType:a.r.Float,compositionType:s.d.Scalar,stage:u.H.PixelShader,isCustomSetting:!0,updateInterval:f.a.FirstTimeOnly,soloDatum:!1,initialValue:c.Ru.fromCopyNumber(1e4),min:1e-4,max:Number.MAX_SAFE_INTEGER},{semantic:y.isPointLight,componentType:a.r.Bool,compositionType:s.d.Scalar,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!1,initialValue:c.Ru.fromCopyNumber(1),min:0,max:1},{semantic:y.depthPow,componentType:a.r.Float,compositionType:s.d.Scalar,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!1,initialValue:c.Ru.fromCopyNumber(e),min:1,max:2},{semantic:l.f5.PointSize,componentType:a.r.Float,compositionType:s.d.Scalar,stage:u.H.VertexShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!0,initialValue:c.Ru.fromCopyNumber(30),min:0,max:100},{semantic:l.f5.PointDistanceAttenuation,componentType:a.r.Float,compositionType:s.d.Vec3,stage:u.H.VertexShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!0,initialValue:_.P.fromCopyArray([0,.1,.01]),min:0,max:1}];return o&&(n.__definitions+="#define RN_IS_SKINNING"),n.setShaderSemanticsInfoArray(i),n}return y.prototype._setCustomSettingParametersToGpu=function(e){var t=e.material,n=e.shaderProgram,r=e.firstTime,a=e.args,s=a.renderPass.cameraComponent;null==s&&(s=i.C.getComponent(o.M,o.M.current)),a.setUniform?(this.setWorldMatrix(n,a.worldMatrix),this.setNormalMatrix(n,a.normalMatrix),this.setViewInfo(n,s,a.isVr,a.displayIdx),this.setProjection(n,s,a.isVr,a.displayIdx),(r||this.__lastZNear!==s.zNearInner)&&(n._gl.uniform1f(n.zNearInner,s.zNearInner),this.__lastZNear=s.zNearInner),this.__lastZFar!==s.zFarInner&&(n._gl.uniform1f(n.zFarInner,s.zFarInner),this.__lastZFar=s.zFarInner)):(t.setParameter(y.zNearInner,s.zNearInner),t.setParameter(y.zFarInner,s.zFarInner));var c=a.entity.tryToGetSkeletal();this.setSkinning(n,a.setUniform,c)},y}(r.P);A.zNearInner=new l.wy({str:"zNearInner"}),A.zFarInner=new l.wy({str:"zFarInner"}),A.isPointLight=new l.wy({str:"isPointLight"}),A.depthPow=new l.wy({str:"depthPow"})},5995:(e,t,n)=>{n.d(t,{t:()=>y});var r=n(7416),o=n(3932),i=n(2535),a=n(5685),s=n(678),c=n(6383),l=n(3279),u=n(1811),f=n(7011);const _={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\nin vec4 a_instanceInfo;\nin vec3 a_position;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nvoid main(){\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\nmat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n\n#ifdef RN_NO_CAMERA_TRANSFORM\n  gl_Position = worldMatrix * vec4(a_position, 1.0);\n#else\n\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  gl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\n\n#endif\n\n}\n",shaderStage:"vertex",isFragmentShader:!1},h={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{renderTargetBegin} */\n\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\nvoid main ()\n{\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  float framebufferWidth = get_framebufferWidth(materialSID, 0);\n\tfloat tFrag = 1.0 / framebufferWidth;\n  vec2 offset = gl_FragCoord.st;\n  vec4 baseColor = texture(u_baseColorTexture, offset * tFrag);\n\n  float luminance = length(baseColor);\n\n  float luminanceCriterion = get_luminanceCriterion(materialSID, 0);\n  if(luminance < luminanceCriterion){\n    baseColor = vec4(0.0);\n  }else{\n    float luminanceReduce = get_luminanceReduce(materialSID, 0);\n    baseColor.rgb = pow(baseColor.rgb, vec3(luminanceReduce));\n  }\n\n  rt0 = baseColor;\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n",shaderStage:"fragment",isFragmentShader:!0};function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function m(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}var p=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(y,e);var t,n,p=(t=y,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var o=d(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return m(this,e)});function y(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),n=p.call(this,null,"HighLuminanceDetectShading",{},_,h);var c,l,d=[{semantic:y.LuminanceCriterion,componentType:i.r.Float,compositionType:o.d.Scalar,stage:a.H.PixelShader,isCustomSetting:!1,updateInterval:s.a.FirstTimeOnly,soloDatum:!1,initialValue:u.Ru.fromCopyNumber(2),min:0,max:Number.MAX_VALUE},{semantic:y.LuminanceReduce,componentType:i.r.Float,compositionType:o.d.Scalar,stage:a.H.PixelShader,isCustomSetting:!1,updateInterval:s.a.FirstTimeOnly,soloDatum:!1,initialValue:u.Ru.fromCopyNumber(.25),min:0,max:1}],m=e.getFramebuffer();return null!=m&&null!=m.colorAttachments[t]?(c=m.colorAttachments[t],l=m.width):(c=f.P.__dummyBlackTexture,l=1,null!=m?console.warn("renderPass does not have framebuffer.colorAttachments["+t+"]"):console.warn("renderPass does not have framebuffer")),d.push({semantic:r.f5.FramebufferWidth,componentType:i.r.Float,compositionType:o.d.Scalar,stage:a.H.PixelShader,isCustomSetting:!1,updateInterval:s.a.EveryTime,soloDatum:!1,initialValue:u.Ru.fromCopyNumber(l),min:0,max:Number.MAX_VALUE},{semantic:r.f5.BaseColorTexture,componentType:i.r.Int,compositionType:o.d.Texture2D,stage:a.H.PixelShader,isCustomSetting:!1,updateInterval:s.a.EveryTime,initialValue:[0,c],min:0,max:Number.MAX_SAFE_INTEGER}),n.setShaderSemanticsInfoArray(d),n}return y.prototype._setCustomSettingParametersToGpu=function(e){e.material;var t=e.shaderProgram,n=(e.firstTime,e.args);n.setUniform&&this.setWorldMatrix(t,n.worldMatrix);var r=n.renderPass.cameraComponent;null==r&&(r=c.C.getComponent(l.M,l.M.current)),r&&(this.setViewInfo(t,r,n.isVr,n.displayIdx),this.setProjection(t,r,n.isVr,n.displayIdx))},y}(f.P);y.LuminanceCriterion=new r.wy({str:"luminanceCriterion"}),y.LuminanceReduce=new r.wy({str:"luminanceReduce"}),y.FramebufferWidth=new r.wy({str:"framebufferWidth"})},7403:(e,t,n)=>{n.d(t,{z:()=>g});var r=n(7416),o=n(7011),i=n(3932),a=n(2535),s=n(6860),c=n(5685),l=n(1811),u=n(678),f=n(6383),_=n(3279),h=n(8289),d=n(2863);const m={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec3 a_position;\nin vec3 a_color;\nin vec3 a_normal;\nin vec4 a_instanceInfo;\nin vec2 a_texcoord_0;\nin vec4 a_joint;\nin vec4 a_weight;\nout vec3 v_color;\nout vec3 v_normal_inWorld;\nout vec4 v_position_inWorld;\nout vec2 v_texcoord_0;\nout float v_instanceInfo;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat4 viewMatrix,\n  in bool isBillboard,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n  mat4 worldMatrixInner = worldMatrix;\n  if (isBillboard) {\n    mat4 inverseViewMatrix = inverse(viewMatrix);\n    inverseViewMatrix[3][0] = 0.0;//worldMatrix[3][0];\n    inverseViewMatrix[3][1] = 0.0;//worldMatrix[3][1];\n    inverseViewMatrix[3][2] = 0.0;//worldMatrix[3][2];\n    worldMatrixInner = inverseViewMatrix * worldMatrix;\n  }\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrixInner * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\n\nvoid main()\n{\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  mat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  mat3 normalMatrix = get_normalMatrix(a_instanceInfo.x);\n\n  // Skeletal\n  processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    viewMatrix,\n    false,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n// #ifdef RN_IS_POINTSPRITE\n\nvec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\nvec3 viewPosition = get_viewPosition(cameraSID, 0);\nfloat distanceFromCamera = length(position_inWorld.xyz - viewPosition);\nvec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\nfloat distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\nfloat maxPointSize = get_pointSize(materialSID, 0);\ngl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\n\n// #endif\n\n\n  v_instanceInfo = a_instanceInfo.x;\n}\n",shaderStage:"vertex",isFragmentShader:!1},v={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\nin vec3 v_normal_inWorld;\nin vec4 v_position_inWorld;\nin float v_instanceInfo;\n\n\n/* shaderity: @{renderTargetBegin} */\n\n\n/* shaderity: @{getters} */\n\nconst vec4 bitEnc = vec4(1.,255.,65025.,16581375.);\nconst vec4 bitDec = 1./bitEnc;\n\nvec4 encodeFloatRGBA(float v) {\n  float val = v;\n  float r = mod(val, 255.0);\n  val -= r;\n  float g = mod(val, 65025.0);\n  val -= g;\n  float b = mod(val, 16581375.0);\n  return vec4(r/255.0, g/65025.0, b/16581375.0, 1.0);\n}\n\n\nvoid main ()\n{\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  rt0 = encodeFloatRGBA(v_instanceInfo);\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n",shaderStage:"fragment",isFragmentShader:!0};function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function y(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e,t){return A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},A(e,t)}var b=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(b,e);var t,n,o=(t=b,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=p(t);if(n){var o=p(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return y(this,e)});function b(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),e=o.call(this,null,"entityUidOutputShading+skinning-lighting",{isMorphing:!1,isSkinning:!0,isLighting:!1},m,v);var t=[{semantic:r.f5.WorldMatrix,isComponentData:!0,compositionType:i.d.Mat4,componentType:a.r.Float,stage:c.H.VertexShader,min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isCustomSetting:!0,updateInterval:u.a.EveryTime,initialValue:h.e.zero()},{semantic:r.f5.NormalMatrix,isComponentData:!0,compositionType:i.d.Mat3,componentType:a.r.Float,stage:c.H.VertexShader,min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isCustomSetting:!0,updateInterval:u.a.EveryTime,initialValue:d.x.zero()},{semantic:r.f5.PointSize,componentType:a.r.Float,compositionType:i.d.Scalar,stage:c.H.VertexShader,isCustomSetting:!1,updateInterval:u.a.FirstTimeOnly,soloDatum:!0,initialValue:l.Ru.fromCopyNumber(30),min:0,max:100},{semantic:r.f5.PointDistanceAttenuation,componentType:a.r.Float,compositionType:i.d.Vec3,stage:c.H.VertexShader,isCustomSetting:!1,updateInterval:u.a.FirstTimeOnly,soloDatum:!0,initialValue:s.P.fromCopyArray([0,.1,.01]),min:0,max:1}];return e.__definitions+="#define RN_IS_SKINNING\n",e.setShaderSemanticsInfoArray(t),e}return b.prototype._setCustomSettingParametersToGpu=function(e){var t=e.material,n=e.shaderProgram,r=(e.firstTime,e.args);r.setUniform&&(this.setWorldMatrix(n,r.worldMatrix),this.setNormalMatrix(n,r.normalMatrix));var o=r.renderPass.cameraComponent;null==o&&(o=f.C.getComponent(_.M,_.M.current)),this.setViewInfo(n,o,r.isVr,r.displayIdx),this.setProjection(n,o,r.isVr,r.displayIdx);var i=r.entity.tryToGetSkeletal();this.setSkinning(n,r.setUniform,i),this.setLightsInfo(n,r.lightComponents,t,r.setUniform)},b}(o.P)},8563:(e,t,n)=>{n.d(t,{b:()=>A});var r=n(2535),o=n(3932),i=n(1811),a=n(7416),s=n(5685),c=n(678),l=n(8020),u=n(7011),f=n(6383),_=n(3279);const h={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec4 a_instanceInfo;\nin vec2 a_texcoord;\nin vec3 a_position;\nin vec3 a_color;\nin vec3 a_normal;\nin vec4 a_joint;\nin vec4 a_weight;\n\nout vec2 v_texcoord;\nout vec3 v_normal_inWorld;\nout vec4 v_position_inWorld;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat4 viewMatrix,\n  in bool isBillboard,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n  mat4 worldMatrixInner = worldMatrix;\n  if (isBillboard) {\n    mat4 inverseViewMatrix = inverse(viewMatrix);\n    inverseViewMatrix[3][0] = 0.0;//worldMatrix[3][0];\n    inverseViewMatrix[3][1] = 0.0;//worldMatrix[3][1];\n    inverseViewMatrix[3][2] = 0.0;//worldMatrix[3][2];\n    worldMatrixInner = inverseViewMatrix * worldMatrix;\n  }\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrixInner * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main(){\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\nmat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n\n#ifdef RN_NO_CAMERA_TRANSFORM\n  gl_Position = worldMatrix * vec4(a_position, 1.0);\n#else\n\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  gl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\n\n#endif\n\n\n  mat3 normalMatrix = get_normalMatrix(a_instanceInfo.x);\n  v_normal_inWorld = normalMatrix * a_normal;\n  v_position_inWorld = worldMatrix * vec4(a_position, 1.0);\n  v_texcoord = a_texcoord;\n\n}\n",shaderStage:"vertex",isFragmentShader:!1},d={code:'\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\nin vec2 v_texcoord;\nin vec3 v_normal_inWorld;\nin vec4 v_position_inWorld;\n\n/* shaderity: @{renderTargetBegin} */\n\n\n\n/* shaderity: @{getters} */\n\n#define MATH_PI 3.141592\n\n// These codes are referenced from https://github.com/knarkowicz/FurnaceTest\nfloat roughnessRemap(float userRoughness) {\n  return userRoughness * userRoughness;\n}\n\n// GGX NDF\nfloat d_ggx(float userRoughness, float NH) {\n  float alphaRoughness = userRoughness * userRoughness;\n  float roughnessSqr = alphaRoughness * alphaRoughness;\n  float f = (roughnessSqr - 1.0) * NH * NH + 1.0;\n  return roughnessSqr / (MATH_PI * f * f);\n}\n\n// this is from https://www.unrealengine.com/blog/physically-based-shading-on-mobile\nvec2 envBRDFApprox( float Roughness, float NoV ) {\n  const vec4 c0 = vec4(-1, -0.0275, -0.572, 0.022 );\n  const vec4 c1 = vec4(1, 0.0425, 1.04, -0.04 );\n  vec4 r = Roughness * c0 + c1;\n  float a004 = min( r.x * r.x, exp2( -9.28 * NoV ) ) * r.x + r.y;\n  vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n  return AB;\n}\n\nfloat specularIBL(float userRoughness, float NV, float f0) {\n  /// Use specular BRDF LUT\n  // vec3 brdf = texture(u_brdfLutTexture, vec2(NV, 1.0 - userRoughness)).rgb;\n  // float specular = 1.0 * (f0 * brdf.x + brdf.y);\n\n  /// Use specular BRDF Approx\n  vec2 f_ab = envBRDFApprox(userRoughness, NV);\n  vec3 specular = vec3(f0) * f_ab.x + f_ab.y;\n  return specular.x;\n}\n\n// The Schlick Approximation to Fresnel\nfloat fresnel(float f0, float VH) {\n  return f0 + (1.0 - f0) * pow(1.0 - VH, 5.0);\n}\n\nfloat smithG1(float roughness, float NoV)\n{\n\tfloat a = roughnessRemap( roughness );\n\tfloat a2 = a * a;\n\tfloat NoV2 = NoV * NoV;\n\tfloat lambda = (-1.0 + sqrt(1.0 + a2 * (1.0 - NoV2) / NoV2)) * 0.5;\n\treturn 1.0 / (1.0 + lambda);\n}\n\nfloat smithG(float roughness, float NoV, float NoL)\n{\n\tfloat a = roughnessRemap( roughness );\n\tfloat a2 = a * a;\n\tfloat NoV2 = NoV * NoV;\n\tfloat NoL2 = NoL * NoL;\n\tfloat lambdaV = (-1.0 + sqrt(1.0 + a2 * (1.0 - NoV2) / NoV2)) * 0.5;\n\tfloat lambdaL = (-1.0 + sqrt(1.0 + a2 * (1.0 - NoL2) / NoL2)) * 0.5;\n\treturn 1.0 / (1.0 + lambdaV + lambdaL);\n}\n\nfloat g_shieldingForWeak(float alphaRoughness, float NV, float NL) {\n  float r = alphaRoughness;\n\n  // Local Masking using "Schlick-Smith" Masking Function\n  float localMasking = 2.0 * NV / (NV + sqrt(r * r + (1.0 - r * r) * (NV * NV)));\n\n  return localMasking;\n}\n\n\nfloat g_shielding(float roughness, float NV, float NL) {\n  float a = roughnessRemap( roughness );\n  float r = a;\n\n  // Local Shadowing using "Schlick-Smith" Masking Function\n  float localShadowing = 2.0 * NL / (NL + sqrt(r * r + (1.0 - r * r) * (NL * NL)));\n\n  // Local Masking using "Schlick-Smith" Masking Function\n  float localMasking = 2.0 * NV / (NV + sqrt(r * r + (1.0 - r * r) * (NV * NV)));\n\n  return localShadowing * localMasking;\n}\n\nfloat v_SmithGGXCorrelatedForWeak(float roughness, float NV, float NL) {\n  float a = roughnessRemap( roughness );\n  float a2 = a * a;\n  float GGXV = NL * sqrt(NV * NV * (1.0 - a2) + a2);\n  return 0.5 / (GGXV);\n}\n\nfloat v_SmithGGXCorrelated(float roughness, float NV, float NL) {\n  float a = roughnessRemap( roughness );\n  float a2 = a * a;\n  float GGXV = NL * sqrt(NV * NV * (1.0 - a2) + a2);\n  float GGXL = NV * sqrt(NL * NL * (1.0 - a2) + a2);\n  return 0.5 / (GGXV + GGXL);\n}\n\n// this is from https://learnopengl.com/PBR/IBL/Specular-IBL\nfloat vanDerCorpus(int n, int base)\n{\n    float invBase = 1.0 / float(base);\n    float denom   = 1.0;\n    float result  = 0.0;\n\n    for(int i = 0; i < 32; ++i)\n    {\n        if(n > 0)\n        {\n            denom   = mod(float(n), 2.0);\n            result += denom * invBase;\n            invBase = invBase / 2.0;\n            n       = int(float(n) / 2.0);\n        }\n    }\n\n    return result;\n}\n\nvec2 hammersleyNoBitOps(int i, int N)\n{\n  return vec2(float(i)/float(N), vanDerCorpus(i, 2));\n}\n\nfloat radicalInverse_VdC(uint bits)\n{\n    bits = (bits << 16u) | (bits >> 16u);\n    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\n    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\n    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\n    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\n    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\n}\n// ----------------------------------------------------------------------------\nvec2 hammersley(uint i, uint N)\n{\n    return vec2(float(i)/float(N), radicalInverse_VdC(i));\n}\n\nvec3 sampleHemisphereGGX(vec2 Xi, float roughness) {\n  float a = roughnessRemap(roughness);\n\tfloat a2 = a * a;\n\n  float phi = 2.0 * MATH_PI * Xi.x;\n  float cosPhi = cos(phi);\n  float sinPhi = sin(phi);\n  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a2 - 1.0) * Xi.y)); // GGX\n  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\n\n  return vec3(sinTheta * cos(phi), sinTheta * sin(phi), cosTheta);\n}\n\nfloat weakWhiteFurnaceTest(float roughness, float NoV, float f0, int g_type, int disable_fresnel)\n{\n\tfloat vx = sqrt(1.0 - NoV * NoV);\n\tfloat vy = 0.0;\n\tfloat vz = NoV;\n\n\tfloat integral = 0.0;\n\tconst uint sampleNum = 2048u;\n\tfor (uint i = 0u; i < sampleNum; ++i)\n\t{\n    vec2 Xi = hammersley(i, sampleNum);\n\n    vec3 hvec = sampleHemisphereGGX(Xi, roughness);\n\n\t\tfloat VoHUnsat = vx * hvec.x + vy * hvec.y + vz * hvec.z;\n\n    float lz = 2.0 * VoHUnsat * hvec.z - vz;\n\n    float NoL = max(lz, 0.0);\n\t\tfloat NoH = max(hvec.z, 0.0);\n\t\tfloat VoH = max(VoHUnsat, 0.0);\n\n    float f = fresnel(f0, VoH);\n\n    float g1 = 0.0;\n    if (g_type == 0) {\n      g1 = smithG1(roughness, NoV);\n    } else if (g_type == 1) {\n      g1 = g_shieldingForWeak(roughness, NoV, NoL);\n    } else if (g_type == 2) {\n      g1 = v_SmithGGXCorrelatedForWeak(roughness, NoV, NoL) * 4.0 * NoV * NoL;\n    }\n\n    float pdf = 4.0 * VoH / NoH;\n    float integralValue = (g1 * pdf) / (4.0 * NoV);\n    if (disable_fresnel == 0) {\n      integralValue *= f;\n    }\n    // integralValue *= 0.5; // Set furnace color 0.5\n\n    integral += integralValue;\n\n\t}\n\tintegral /= float(sampleNum);\n\treturn clamp(integral, 0.0, 1.0);\n}\n\nfloat whiteFurnaceTest(float roughness, float NoV, float f0, int g_type, int disable_fresnel)\n{\n\tfloat vx = sqrt(1.0 - NoV * NoV);\n\tfloat vy = 0.0;\n\tfloat vz = NoV;\n\n\tfloat integral = 0.0;\n\tconst uint sampleNum = 4096u;\n\tfor (uint i = 0u; i < sampleNum; ++i)\n\t{\n\n    vec2 Xi = hammersley(i, sampleNum);\n\n    vec3 hvec = sampleHemisphereGGX(Xi, roughness);\n\n\t\tfloat VoHUnsat = vx * hvec.x + vy * hvec.y + vz * hvec.z;\n\t\tfloat lx = 2.0 * VoHUnsat * hvec.x - vx;\n\t\tfloat ly = 2.0 * VoHUnsat * hvec.y - vy;\n\t\tfloat lz = 2.0 * VoHUnsat * hvec.z - vz;\n\n\t\tfloat NoL = max(lz, 0.0);\n\t\tfloat NoH = max(hvec.z, 0.0);\n    float VoH = max(VoHUnsat, 0.0);\n\n    float f = fresnel(f0, VoH);\n\n    float g = 0.0;\n    if (g_type == 0) {\n      g = smithG(roughness, NoV, NoL);\n    } else if (g_type == 1){\n      g = g_shielding(roughness, NoV, NoL);\n    } else if (g_type == 2){\n      g = v_SmithGGXCorrelated(roughness, NoV, NoL) * (4.0 * NoV * NoL);\n    } else if (g_type == 3) {\n      g = 0.0;\n    }\n\n    float pdf = 4.0 * VoH / NoH;\n    float integralValue = (g * pdf) / (4.0 * NoV);\n    if (disable_fresnel == 0 && g_type != 3) {\n      integralValue *= f;\n    }\n    // integralValue *= 0.5; // Set furnace color 0.5\n    integral += integralValue;\n\t}\n  integral /= float(sampleNum);\n  if (g_type == 3) {\n    integral = specularIBL(roughness, NoV, f0);\n  }\n\treturn clamp(integral, 0.0, 1.0);\n}\n\nvoid main ()\n{\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  vec2 quadSizeInPixel = get_screenInfo(materialSID, 0);\n  float roughness = 0.0;\n  float NoV = 0.0; // normal dot view vector\n\n  // 2D mode\n  int mode = get_mode(materialSID, 0);\n  if (mode == 0) {\n    roughness = (gl_FragCoord.y) / quadSizeInPixel.y;\n    NoV = (gl_FragCoord.x) / quadSizeInPixel.x;\n  } else {\n    // object mode\n    // Roughness\n    const float c_MinRoughness = 0.04;\n    vec2 metallicRoughnessFactor = get_metallicRoughnessFactor(materialSID, 0);\n    float userRoughness = metallicRoughnessFactor.y;\n    float metallic = metallicRoughnessFactor.x;\n\n    vec4 ormTexel = texture(u_metallicRoughnessTexture, v_texcoord);\n    userRoughness = ormTexel.g * userRoughness;\n    userRoughness = clamp(userRoughness, c_MinRoughness, 1.0);\n    roughness = userRoughness;\n\n    // vec3 viewVector = normalize(vec3(0.0, 0.0, 10.0) - v_position_inWorld.xyz);\n    // vec3 viewVector = normalize(u_viewPosition - v_position_inWorld.xyz);\n    vec3 viewVector = vec3(0.0, 0.0, 1.0);\n    NoV = dot(v_normal_inWorld, viewVector);\n  }\n\n  int debugView = get_debugView(materialSID, 0);\n  float f0 = get_f0(materialSID, 0);\n  int g_type = get_g_type(materialSID, 0);\n  int disable_fresnel = get_disable_fresnel(materialSID, 0);\n\n  if (debugView == 0) {\n    float whiteFurnaceResult = whiteFurnaceTest(roughness, NoV, f0, g_type, disable_fresnel);\n    rt0 = vec4(whiteFurnaceResult, whiteFurnaceResult, whiteFurnaceResult, 1.0);\n\n  } else if (debugView == 1) {\n    float weakWhiteFurnaceResult = weakWhiteFurnaceTest(roughness, NoV, f0, g_type, disable_fresnel);\n    rt0 = vec4(weakWhiteFurnaceResult, weakWhiteFurnaceResult, weakWhiteFurnaceResult, 1.0);\n\n  } else if (debugView == 2){\n    float nn = NoV*0.5+0.5;\n    rt0 = vec4(nn, nn, nn, 1.0);\n\n  } else if (debugView == 3){\n    rt0 = vec4(v_normal_inWorld.xyz, 1.0);\n\n  } else if (debugView == 4){\n    float whiteFurnaceResult = whiteFurnaceTest(roughness, NoV, f0, g_type, disable_fresnel);\n    float weakWhiteFurnaceResult = weakWhiteFurnaceTest(roughness, NoV, f0, g_type, disable_fresnel);\n    rt0 = vec4(whiteFurnaceResult, weakWhiteFurnaceResult, 0.0, 1.0);\n\n  } else if (debugView == 5){\n    rt0 = vec4(roughness, NoV, 0.0, 1.0);\n\n  } else {\n    rt0 = vec4(1.0, 1.0, 1.0, 1.0);\n  }\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n',shaderStage:"fragment",isFragmentShader:!0};function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function v(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}var y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(A,e);var t,n,y=(t=A,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=m(t);if(n){var o=m(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return v(this,e)});function A(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,A),e=y.call(this,null,"FurnaceTestShading",{},h,d);var t=[{semantic:A.debugView,componentType:r.r.Int,compositionType:o.d.Scalar,stage:s.H.PixelShader,isCustomSetting:!1,updateInterval:c.a.FirstTimeOnly,soloDatum:!1,initialValue:i.Ru.fromCopyNumber(0),min:0,max:1},{semantic:A.disable_fresnel,componentType:r.r.Int,compositionType:o.d.Scalar,stage:s.H.PixelShader,isCustomSetting:!1,updateInterval:c.a.FirstTimeOnly,soloDatum:!1,initialValue:i.Ru.fromCopyNumber(0),min:0,max:1},{semantic:A.f0,componentType:r.r.Float,compositionType:o.d.Scalar,stage:s.H.PixelShader,isCustomSetting:!1,updateInterval:c.a.FirstTimeOnly,soloDatum:!1,initialValue:i.Ru.fromCopyNumber(1),min:0,max:1},{semantic:A.g_type,componentType:r.r.Int,compositionType:o.d.Scalar,stage:s.H.PixelShader,isCustomSetting:!1,updateInterval:c.a.FirstTimeOnly,soloDatum:!1,initialValue:i.Ru.fromCopyNumber(0),min:0,max:3},{semantic:A.mode,componentType:r.r.Int,compositionType:o.d.Scalar,stage:s.H.PixelShader,isCustomSetting:!1,updateInterval:c.a.FirstTimeOnly,soloDatum:!1,initialValue:i.Ru.fromCopyNumber(0),min:0,max:1},{semantic:a.f5.ScreenInfo,componentType:r.r.Float,compositionType:o.d.Vec2,stage:s.H.PixelShader,isCustomSetting:!1,updateInterval:c.a.FirstTimeOnly,soloDatum:!1,initialValue:l.FM.fromCopyArray2([0,0]),min:0,max:Number.MAX_SAFE_INTEGER},{semantic:a.f5.MetallicRoughnessFactor,componentType:r.r.Float,compositionType:o.d.Vec2,stage:s.H.PixelShader,isCustomSetting:!1,updateInterval:c.a.FirstTimeOnly,soloDatum:!1,initialValue:l.FM.fromCopyArray2([1,1]),min:0,max:2},{semantic:a.f5.MetallicRoughnessTexture,componentType:r.r.Int,compositionType:o.d.Texture2D,stage:s.H.PixelShader,isCustomSetting:!1,updateInterval:c.a.FirstTimeOnly,initialValue:[1,u.P.__dummyWhiteTexture],min:0,max:Number.MAX_SAFE_INTEGER}];return e.setShaderSemanticsInfoArray(t),e}return A.prototype._setCustomSettingParametersToGpu=function(e){var t=e.material,n=e.shaderProgram,r=e.firstTime,o=e.args;if(o.setUniform&&(this.setWorldMatrix(n,o.worldMatrix),this.setNormalMatrix(n,o.normalMatrix),r)){var i=o.renderPass.cameraComponent;null==i&&(i=f.C.getComponent(_.M,_.M.current)),this.setViewInfo(n,i,o.isVr,o.displayIdx),this.setProjection(n,i,o.isVr,o.displayIdx),this.setLightsInfo(n,o.lightComponents,t,o.setUniform)}},A}(u.P);A.mode=new a.wy({str:"mode"}),A.debugView=new a.wy({str:"debugView"}),A.g_type=new a.wy({str:"g_type"}),A.disable_fresnel=new a.wy({str:"disable_fresnel"}),A.f0=new a.wy({str:"f0"})},1668:(e,t,n)=>{n.d(t,{_:()=>A});var r=n(3279),o=n(3932),i=n(6383),a=n(2535),s=n(1811),c=n(7416),l=n(5685),u=n(678),f=n(7011),_=n(2175);const h={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\nin vec4 a_instanceInfo;\nin vec3 a_position;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nvoid main(){\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\nmat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n\n#ifdef RN_NO_CAMERA_TRANSFORM\n  gl_Position = worldMatrix * vec4(a_position, 1.0);\n#else\n\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  gl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\n\n#endif\n\n}\n",shaderStage:"vertex",isFragmentShader:!1},d={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{renderTargetBegin} */\n\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\nfloat decodeRGBAToDepth(vec4 RGBA){\n  const float rMask = 1.0;\n  const float gMask = 1.0 / 255.0;\n  const float bMask = 1.0 / (255.0 * 255.0);\n  const float aMask = 1.0 / (255.0 * 255.0 * 255.0);\n  float depth = dot(RGBA, vec4(rMask, gMask, bMask, aMask));\n  return depth;\n}\n\nvec4 encodeDepthToRGBA(float depth){\n  float r = depth;\n  float g = fract(r * 255.0);\n  float b = fract(g * 255.0);\n  float a = fract(b * 255.0);\n  float coef = 1.0 / 255.0;\n  r -= g * coef;\n  g -= b * coef;\n  b -= a * coef;\n  return vec4(r, g, b, a);\n}\n\nvoid main ()\n{\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  float framebufferWidth = get_framebufferWidth(materialSID, 0);\n\tfloat tFrag = 1.0 / framebufferWidth;\n  vec2 offset = gl_FragCoord.st;\n\n  vec2 blurDirection;\n  bool isHorizontal = get_isHorizontal(materialSID, 0);\n  if(isHorizontal){\n    blurDirection = vec2(1.0,0.0);\n  }else{\n    blurDirection = vec2(0.0,1.0);\n  }\n\n  float depth = 0.0;\n  int gaussianKernelSize = get_gaussianKernelSize(materialSID, 0);\n  float minStrideLength = -float(gaussianKernelSize - 1) / 2.0;\n\n  for(int i=0; i < 30; i++) {\n    if(gaussianKernelSize == i) {\n      break;\n    }\n\n    float strideLength = minStrideLength + float(i);\n    vec2 stride = strideLength * blurDirection;\n    float depthData = decodeRGBAToDepth(texture(u_baseColorTexture, (offset + stride) * tFrag));\n    if(depthData > 1.0) depthData = 1.0;\n\n    float gaussianRatio = u_gaussianRatio[i];\n    depth +=  depthData * gaussianRatio;\n  }\n\n  rt0 = encodeDepthToRGBA(depth);\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n",shaderStage:"fragment",isFragmentShader:!0};function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function v(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}var y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(A,e);var t,n,y=(t=A,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=m(t);if(n){var o=m(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return v(this,e)});function A(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,A),(e=y.call(this,null,"gaussianBlurForEncodedDepthShading",{},h,d)).frameBufferWidth=0;var t=new Float32Array(30);t[0]=1;var n=[{semantic:A.IsHorizontal,componentType:a.r.Bool,compositionType:o.d.Scalar,stage:l.H.PixelShader,isCustomSetting:!1,updateInterval:u.a.FirstTimeOnly,soloDatum:!1,initialValue:s.Ru.fromCopyNumber(1),min:0,max:1},{semantic:A.GaussianRatio,componentType:a.r.Float,compositionType:o.d.ScalarArray,arrayLength:30,stage:l.H.PixelShader,isCustomSetting:!1,updateInterval:u.a.FirstTimeOnly,soloDatum:!1,initialValue:new _.j(t),min:0,max:1,needUniformInDataTextureMode:!0},{semantic:A.GaussianKernelSize,componentType:a.r.Int,compositionType:o.d.Scalar,stage:l.H.PixelShader,isCustomSetting:!1,updateInterval:u.a.FirstTimeOnly,soloDatum:!1,initialValue:s.Ru.fromCopyNumber(1),min:1,max:30},{semantic:c.f5.FramebufferWidth,componentType:a.r.Float,compositionType:o.d.Scalar,stage:l.H.PixelShader,isCustomSetting:!1,updateInterval:u.a.FirstTimeOnly,soloDatum:!1,initialValue:s.Ru.fromCopyNumber(1),min:0,max:Number.MAX_SAFE_INTEGER},{semantic:c.f5.BaseColorTexture,componentType:a.r.Int,compositionType:o.d.Texture2D,stage:l.H.PixelShader,isCustomSetting:!1,updateInterval:u.a.EveryTime,initialValue:[0,f.P.__dummyBlackTexture],min:0,max:Number.MAX_SAFE_INTEGER}];return e.setShaderSemanticsInfoArray(n),e}return A.prototype._setCustomSettingParametersToGpu=function(e){var t=e.material,n=e.shaderProgram,o=(e.firstTime,e.args),a=t.getParameter(c.f5.BaseColorTexture)[1];a.width!==this.frameBufferWidth&&(t.setParameter(c.f5.FramebufferWidth,a.width),this.frameBufferWidth=a.width),o.setUniform?this.setWorldMatrix(n,o.worldMatrix):n._gl.uniform1fv(n.gaussianRatio,t.getParameter(A.GaussianRatio)._v);var s=o.renderPass.cameraComponent;null==s&&(s=i.C.getComponent(r.M,r.M.current)),s&&(this.setViewInfo(n,s,o.isVr,o.displayIdx),this.setProjection(n,s,o.isVr,o.displayIdx))},A}(f.P);A.GaussianKernelSize=new c.wy({str:"gaussianKernelSize"}),A.GaussianRatio=new c.wy({str:"gaussianRatio"}),A.IsHorizontal=new c.wy({str:"isHorizontal"})},1349:(e,t,n)=>{n.d(t,{W:()=>A});var r=n(3279),o=n(3932),i=n(6383),a=n(2535),s=n(1811),c=n(7416),l=n(5685),u=n(678),f=n(7011),_=n(2175);const h={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\nin vec4 a_instanceInfo;\nin vec3 a_position;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nvoid main(){\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\nmat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n\n#ifdef RN_NO_CAMERA_TRANSFORM\n  gl_Position = worldMatrix * vec4(a_position, 1.0);\n#else\n\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  gl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\n\n#endif\n\n\n}\n",shaderStage:"vertex",isFragmentShader:!1},d={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{renderTargetBegin} */\n\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\nvoid main ()\n{\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  float framebufferWidth = get_framebufferWidth(materialSID, 0);\n\tfloat tFrag = 1.0 / framebufferWidth;\n  vec2 offset = gl_FragCoord.st;\n\n  vec2 blurDirection;\n  bool isHorizontal = get_isHorizontal(materialSID, 0);\n  if(isHorizontal){\n    blurDirection = vec2(1.0,0.0);\n  }else{\n    blurDirection = vec2(0.0,1.0);\n  }\n\n  vec4 color = vec4(0.0);\n  int gaussianKernelSize = get_gaussianKernelSize(materialSID, 0);\n  float minStrideLength = -float(gaussianKernelSize - 1) / 2.0;\n\n  for(int i=0; i < 30; i++) {\n    if(gaussianKernelSize == i) {\n      break;\n    }\n\n    float strideLength = minStrideLength + float(i);\n    vec2 stride = strideLength * blurDirection;\n\n    float gaussianRatio = u_gaussianRatio[i];\n    color += texture(u_baseColorTexture, (offset + stride) * tFrag) * gaussianRatio;\n  }\n\n  rt0 = color;\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n",shaderStage:"fragment",isFragmentShader:!0};function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function v(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}var y=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(A,e);var t,n,y=(t=A,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=m(t);if(n){var o=m(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return v(this,e)});function A(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,A),(e=y.call(this,null,"GaussianBlurShading",{},h,d)).frameBufferWidth=0;var t=new Float32Array(30);t[0]=1;var n=[{semantic:A.IsHorizontal,componentType:a.r.Bool,compositionType:o.d.Scalar,stage:l.H.PixelShader,isCustomSetting:!1,updateInterval:u.a.FirstTimeOnly,soloDatum:!1,initialValue:s.Ru.fromCopyNumber(1),min:0,max:1},{semantic:A.GaussianRatio,componentType:a.r.Float,compositionType:o.d.ScalarArray,arrayLength:30,stage:l.H.PixelShader,isCustomSetting:!1,updateInterval:u.a.FirstTimeOnly,soloDatum:!1,initialValue:new _.j(t),min:0,max:1,needUniformInDataTextureMode:!0},{semantic:A.GaussianKernelSize,componentType:a.r.Int,compositionType:o.d.Scalar,stage:l.H.PixelShader,isCustomSetting:!1,updateInterval:u.a.FirstTimeOnly,soloDatum:!1,initialValue:s.Ru.fromCopyNumber(1),min:1,max:30},{semantic:c.f5.FramebufferWidth,componentType:a.r.Float,compositionType:o.d.Scalar,stage:l.H.PixelShader,isCustomSetting:!1,updateInterval:u.a.FirstTimeOnly,soloDatum:!1,initialValue:s.Ru.fromCopyNumber(1),min:0,max:Number.MAX_SAFE_INTEGER},{semantic:c.f5.BaseColorTexture,componentType:a.r.Int,compositionType:o.d.Texture2D,stage:l.H.PixelShader,isCustomSetting:!1,updateInterval:u.a.EveryTime,initialValue:[0,f.P.__dummyBlackTexture],min:0,max:Number.MAX_SAFE_INTEGER}];return e.setShaderSemanticsInfoArray(n),e}return A.prototype._setCustomSettingParametersToGpu=function(e){var t=e.material,n=e.shaderProgram,o=(e.firstTime,e.args),a=t.getParameter(c.f5.BaseColorTexture)[1];a.width!==this.frameBufferWidth&&(t.setParameter(c.f5.FramebufferWidth,a.width),this.frameBufferWidth=a.width),o.setUniform?this.setWorldMatrix(n,o.worldMatrix):n._gl.uniform1fv(n.gaussianRatio,t.getParameter(A.GaussianRatio)._v);var s=o.renderPass.cameraComponent;null==s&&(s=i.C.getComponent(r.M,r.M.current)),s&&(this.setViewInfo(n,s,o.isVr,o.displayIdx),this.setProjection(n,s,o.isVr,o.displayIdx))},A}(f.P);A.GaussianKernelSize=new c.wy({str:"gaussianKernelSize"}),A.GaussianRatio=new c.wy({str:"gaussianRatio"}),A.IsHorizontal=new c.wy({str:"isHorizontal"})},6105:(e,t,n)=>{n.d(t,{f:()=>w});var r=n(7011),o=n(3650),i=n(3279),a=n(4021),s=n(6383),c=n(2535),l=n(3932),u=n(9977),f=n(1811),_=n(7416),h=n(5685),d=n(678),m=n(6860),v=n(6264),p=n(2175),y=n(2166);const A={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n  #ifdef WEBXR_MULTI_VIEW_VIEW_NUM_2\nlayout(num_views=2) in;\n  #endif\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\n// This shader is based on https://github.com/Santarh/MToon\n\nin vec4 a_instanceInfo;\nin vec2 a_texcoord_0;\nin vec3 a_position;\nin vec3 a_normal;\nin vec4 a_baryCentricCoord;\nin vec4 a_joint;\nin vec4 a_weight;\n\nout vec2 v_texcoord_0;\nout vec3 v_baryCentricCoord;\nout vec3 v_normal_inView;\nout vec3 v_normal_inWorld;\nout vec4 v_position_inWorld;\n\n#ifdef RN_USE_TANGENT_ATTRIBUTE\nin vec4 a_tangent;\nout vec3 v_tangent_inWorld;\nout vec3 v_binormal_inWorld; // bitangent_inWorld\n#endif\n\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat4 viewMatrix,\n  in bool isBillboard,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n  mat4 worldMatrixInner = worldMatrix;\n  if (isBillboard) {\n    mat4 inverseViewMatrix = inverse(viewMatrix);\n    inverseViewMatrix[3][0] = 0.0;//worldMatrix[3][0];\n    inverseViewMatrix[3][1] = 0.0;//worldMatrix[3][1];\n    inverseViewMatrix[3][2] = 0.0;//worldMatrix[3][2];\n    worldMatrixInner = inverseViewMatrix * worldMatrix;\n  }\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrixInner * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main(){\n  #ifdef RN_MTOON_IS_OUTLINE\n    #ifdef RN_MTOON_OUTLINE_NONE\n      return;\n    #endif\n  #endif\n\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  mat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat3 normalMatrix = get_normalMatrix(a_instanceInfo.x);\n  bool isSkinning = false;\n  isSkinning = processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    viewMatrix,\n    false,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n\n  v_normal_inView = vec3(viewMatrix * vec4(v_normal_inWorld, 0.0));\n\n  #ifndef RN_MTOON_IS_OUTLINE\n    gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n  #else\n    #if defined(RN_MTOON_HAS_OUTLINE_WIDTH_TEXTURE)\n      float outlineTex = texture(u_outlineWidthTexture, a_texcoord_0).r;\n    #else\n      float outlineTex = 1.0;\n    #endif\n\n    #if defined(RN_MTOON_OUTLINE_WIDTH_WORLD)\n      float outlineWidth = get_outlineWidth(materialSID, 0);\n      vec3 outlineOffset = 0.01 * outlineWidth * outlineTex * a_normal;\n      vec4 worldOutlineOffset = worldMatrix * vec4(outlineOffset, 0.0);\n      gl_Position = projectionMatrix * viewMatrix * (v_position_inWorld + worldOutlineOffset);\n\n    #elif defined(RN_MTOON_OUTLINE_WIDTH_SCREEN)\n      vec4 vertex = projectionMatrix * viewMatrix * v_position_inWorld;\n\n      vec3 clipNormal = (projectionMatrix * vec4(v_normal_inView, 1.0)).xyz;\n      vec2 projectedNormal = normalize(clipNormal.xy);\n      float outlineScaledMaxDistance = get_outlineScaledMaxDistance(materialSID, 0);\n      projectedNormal *= min(vertex.w, outlineScaledMaxDistance);\n      float aspect = abs(get_aspect(0.0, 0)); //solo datum\n      projectedNormal.x *= aspect;\n\n      float outlineWidth = get_outlineWidth(materialSID, 0);\n      vertex.xy += 0.01 * outlineWidth * outlineTex * projectedNormal * clamp(1.0 - abs(v_normal_inView.z), 0.0, 1.0); // ignore offset when normal toward camera\n\n      gl_Position = vertex;\n    #else\n      gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n    #endif\n  #endif\n\n  #ifdef RN_USE_TANGENT_ATTRIBUTE\n    v_tangent_inWorld = normalMatrix * a_tangent.xyz;\n    v_binormal_inWorld = cross(v_normal_inWorld, v_tangent_inWorld) * a_tangent.w;\n  #endif\n\n  v_texcoord_0 = a_texcoord_0;\n  v_baryCentricCoord = a_baryCentricCoord.xyz;\n}\n",shaderStage:"vertex",isFragmentShader:!1},b={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\nconst float EPS_COL = 0.00001;\n\nin vec2 v_texcoord_0;\nin vec3 v_baryCentricCoord;\nin vec3 v_normal_inView;\nin vec3 v_normal_inWorld;\nin vec4 v_position_inWorld;\n#ifdef RN_USE_TANGENT_ATTRIBUTE\n  in vec3 v_tangent_inWorld;\n  in vec3 v_binormal_inWorld; // bitangent_inWorld\n#endif\n\n/* shaderity: @{renderTargetBegin} */\n\n\n/* shaderity: @{getters} */\n\nstruct Light {\n  int type; // 0 = directional, 1 = point, 2 = spot\n  vec3 position;\n  vec3 intensity;\n  vec3 attenuatedIntensity;\n  vec3 directionOfLightObject;\n  vec3 direction; // direction of light vector, equal to normalize(light.pointToLight)\n  vec3 pointToLight; // not normalized\n  float spotAngleScale;\n  float spotAngleOffset;\n  float effectiveRange;\n};\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Khronos/KHR_lights_punctual/README.md#range-property\nfloat getRangeAttenuation(Light light)\n{\n  float distance = length(light.pointToLight);\n  // means no range limit\n  if (light.effectiveRange <= 0.0)\n  {\n    return 1.0 / pow(distance, 2.0);\n  }\n  return max(min(1.0 - pow(distance / light.effectiveRange, 4.0), 1.0), 0.0) / pow(distance, 2.0);\n}\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Khronos/KHR_lights_punctual/README.md#inner-and-outer-cone-angles\nfloat getSpotAttenuation(Light light)\n{\n\n  float cd = dot(light.directionOfLightObject, light.direction);\n  float angularAttenuation = clamp(cd * light.spotAngleScale + light.spotAngleOffset, 0.0, 1.0);\n  return angularAttenuation;\n}\n\nvoid getLightAttenuated(Light light) {\n  light.attenuatedIntensity = light.intensity;\n  // if (light.type == 0) { // Directional Light\n    // Directional Light don't attenuate geometically\n  // }\n\n  // Point Light and Spot Light\n  if (light.type != 0)\n  {\n    light.attenuatedIntensity *= getRangeAttenuation(light);\n  }\n  // Spot light\n  if (light.type == 2)\n  {\n    light.attenuatedIntensity *= getSpotAttenuation(light);\n  }\n}\n\nLight getLight(int lightIdx, vec3 v_position_inWorld) {\n  vec3 lightPosition = get_lightPosition(0.0, lightIdx);\n  vec3 direction_and_w_of_LightObject = get_lightDirection(0.0, lightIdx);\n  vec3 lightIntensity = get_lightIntensity(0.0, lightIdx);\n  vec4 lightProperty = get_lightProperty(0.0, lightIdx);\n  Light light;\n  light.directionOfLightObject = direction_and_w_of_LightObject;\n  float lightType = lightProperty.x;\n  light.effectiveRange = lightProperty.y;\n  light.spotAngleScale = lightProperty.z;\n  light.spotAngleOffset = lightProperty.w;\n\n  light.intensity = lightIntensity;\n  light.position = lightPosition;\n  if (lightType < -0.5) { // disabled light\n    light.intensity = vec3(0.0);\n    light.type = -1;\n  } else if (0.75 < lightType) { // is pointlight or spotlight\n    light.pointToLight = lightPosition - v_position_inWorld;\n    light.direction = normalize(light.pointToLight);\n    light.type = 1;\n  } else { // is Directional Light\n    light.type = 0;\n    light.direction = normalize(light.directionOfLightObject * -1.0);\n  }\n\n  if (lightType > 1.75) { // is spotlight\n    light.type = 2;\n  }\n\n  const float M_PI = 3.141592653589793;\n  light.intensity *= M_PI; // Punctual Light\n\n  // Attenuation\n  light.attenuatedIntensity = light.intensity;\n  getLightAttenuated(light);\n\n  return light;\n}\n\n\nfloat edge_ratio(vec3 bary3, float wireframeWidthInner, float wireframeWidthRelativeScale) {\n  vec3 d = fwidth(bary3);\n  vec3 x = bary3+vec3(1.0 - wireframeWidthInner)*d;\n  vec3 a3 = smoothstep(vec3(0.0), d, x);\n  float factor = min(min(a3.x, a3.y), a3.z);\n\n  return clamp((1.0 - factor), 0.0, 1.0);\n}\n\nvec3 linearToSrgb(vec3 linearColor) {\n  return pow(linearColor, vec3(1.0/2.2));\n}\n\nvec3 srgbToLinear(vec3 srgbColor) {\n  return pow(srgbColor, vec3(2.2));\n}\n\n#ifdef RN_USE_TANGENT_ATTRIBUTE\n  vec3 perturb_normal(vec3 normal_inWorld, vec3 viewVector, vec2 texcoord, vec3 normalTex) {\n    vec3 tangent_inWorld = normalize(v_tangent_inWorld);\n    vec3 binormal_inWorld = normalize(v_binormal_inWorld);\n    mat3 tbnMat_tangent_to_world = mat3(tangent_inWorld, binormal_inWorld, normal_inWorld);\n\n    return normalize(tbnMat_tangent_to_world * normalTex);\n  }\n#else\n  #ifdef RN_IS_SUPPORTING_STANDARD_DERIVATIVES\n    // This is based on http://www.thetenthplanet.de/archives/1180\n    mat3 cotangent_frame(vec3 normal_inWorld, vec3 position, vec2 uv) {\n      uv = gl_FrontFacing ? uv : -uv;\n\n      // get edge vectors of the pixel triangle\n      vec3 dp1 = dFdx(position);\n      vec3 dp2 = dFdy(position);\n      vec2 duv1 = dFdx(uv);\n      vec2 duv2 = dFdy(uv);\n\n      // solve the linear system\n      vec3 dp2perp = cross(dp2, normal_inWorld);\n      vec3 dp1perp = cross(normal_inWorld, dp1);\n      vec3 tangent = dp2perp * duv1.x + dp1perp * duv2.x;\n      vec3 bitangent = dp2perp * duv1.y + dp1perp * duv2.y;\n      bitangent *= -1.0;\n\n      // construct a scale-invariant frame\n      float invMat = inversesqrt(max(dot(tangent, tangent), dot(bitangent, bitangent)));\n      return mat3(tangent * invMat, bitangent * invMat, normal_inWorld);\n    }\n\n    vec3 perturb_normal(vec3 normal_inWorld, vec3 viewVector, vec2 texcoord, vec3 normalTex) {\n      mat3 tbnMat_tangent_to_world = cotangent_frame(normal_inWorld, -viewVector, texcoord);\n      if (texcoord.x > 0.0 || texcoord.y > 0.0) {\n        return normalize(tbnMat_tangent_to_world * normalTex);\n      } else {\n        return normal_inWorld;\n      }\n    }\n  #else\n    vec3 perturb_normal(vec3 normal_inWorld, vec3 viewVector, vec2 texcoord, vec3 normalTex) {\n      return normal_inWorld;\n    }\n  #endif\n#endif\n\n\nvoid main (){\n  #ifdef RN_MTOON_IS_OUTLINE\n    #ifdef RN_MTOON_OUTLINE_NONE\n      discard;\n    #endif\n  #endif\n\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n\n  // TODO\n  // uv transform\n\n  // TODO\n  // uv animation\n\n  // main color\n  vec4 litTextureColor = texture(u_litColorTexture, v_texcoord_0);\n  vec4 litColorFactor = get_litColor(materialSID, 0);\n\n  // alpha\n  float alpha = 1.0;\n\n  #ifdef RN_ALPHATEST_ON\n    alpha = litTextureColor.a * litColorFactor.a;\n    float cutoff = get_cutoff(materialSID, 0);\n    if(alpha < cutoff) discard;\n  #elif defined(RN_ALPHABLEND_ON)\n    alpha = litTextureColor.a * litColorFactor.a;\n  #endif\n\n  if (alpha < 0.01) {\n    discard;\n  }else{\n    rt0.w = alpha;\n  }\n\n\n  #ifdef RN_MTOON_IS_OUTLINE\n    #ifdef RN_MTOON_OUTLINE_COLOR_FIXED\n      vec3 outlineColor = get_outlineColor(materialSID, 0);\n      rt0.xyz = outlineColor;\n\n      rt0.xyz = srgbToLinear(rt0.xyz);\n/* shaderity: @{renderTargetEnd} */\n\n      return;\n    #endif\n  #endif\n\n  // view vector\n  vec3 viewPosition = get_viewPosition(cameraSID, 0);\n  vec3 viewVector = viewPosition - v_position_inWorld.xyz;\n\n  // Normal\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\n  #ifdef RN_MTOON_HAS_BUMPMAP\n    vec3 normal = texture(u_normalTexture, v_texcoord_0).xyz * 2.0 - 1.0;\n    normal_inWorld = perturb_normal(normal_inWorld, viewVector, v_texcoord_0, normal);\n  #endif\n\n  #ifdef RN_MTOON_IS_OUTLINE\n    normal_inWorld *= -1.0;\n  #endif\n\n\n  // Lighting, Direct Light\n\n  float shadowAttenuation = 1.0;\n  // TODO: shadowmap computation\n\n  float receiveShadowRate = get_receiveShadowRate(materialSID, 0);\n  float lightAttenuation = shadowAttenuation * mix(1.0, shadowAttenuation, receiveShadowRate * texture(u_receiveShadowTexture, v_texcoord_0).r);\n\n  float shadingGradeRate = get_shadingGradeRate(materialSID, 0);\n  float shadingGrade = 1.0 - shadingGradeRate * (1.0 - texture(u_shadingGradeTexture, v_texcoord_0).r);\n  float lightColorAttenuation = get_lightColorAttenuation(materialSID, 0);\n\n  vec3 shadeColorFactor = get_shadeColor(materialSID, 0);\n  vec3 shadeColor = shadeColorFactor * texture(u_shadeColorTexture, v_texcoord_0).xyz;\n  shadeColor.xyz = srgbToLinear(shadeColor.xyz);\n\n  vec3 litColor = litColorFactor.xyz * litTextureColor.xyz;\n  litColor.xyz = srgbToLinear(litColor.xyz);\n\n\n  float shadeShift = get_shadeShift(materialSID, 0);\n  float shadeToony = get_shadeToony(materialSID, 0);\n\n  vec3 lightings[/* shaderity: @{Config.maxLightNumberInShader} */];\n  #ifdef RN_MTOON_DEBUG_LITSHADERATE\n    float lightIntensities[/* shaderity: @{Config.maxLightNumberInShader} */];\n  #endif\n  for (int i = 0; i < /* shaderity: @{Config.maxLightNumberInShader} */; i++) {\n    if (i >= lightNumber) {\n      break;\n    }\n\n    // Light\n    Light light = getLight(i, v_position_inWorld.xyz);\n\n    // lightAttenuation *= distanceAttenuation * spotEffect;\n    float dotNL = dot(light.direction, normal_inWorld);\n    float lightIntensity = dotNL * 0.5 + 0.5; // from [-1, +1] to [0, 1]\n    lightIntensity = lightIntensity * lightAttenuation; // TODO: receive shadow\n    lightIntensity = lightIntensity * shadingGrade; // darker\n    lightIntensity = lightIntensity * 2.0 - 1.0; // from [0, 1] to [-1, +1]\n\n    // tooned. mapping from [minIntensityThreshold, maxIntensityThreshold] to [0, 1]\n    float maxIntensityThreshold = mix(1.0, shadeShift, shadeToony);\n    float minIntensityThreshold = shadeShift;\n    lightIntensity = clamp((lightIntensity - minIntensityThreshold) / max(EPS_COL, (maxIntensityThreshold - minIntensityThreshold)), 0.0, 1.0);\n    #ifdef RN_MTOON_DEBUG_LITSHADERATE\n      lightIntensities[i] = lightIntensity;\n    #endif\n\n    // Albedo color\n    vec3 col = mix(shadeColor, litColor, lightIntensity);\n\n    // Direct Light\n    vec3 lighting = light.attenuatedIntensity;\n    lighting = mix(lighting, vec3(max(EPS_COL, max(lighting.x, max(lighting.y, lighting.z)))), lightColorAttenuation); // color atten\n\n\n    if(i > 0){\n      lighting *= 0.5; // darken if additional light.\n      lighting *= min(0.0, dotNL) + 1.0; // darken dotNL < 0 area by using half lambert\n      // lighting *= shadowAttenuation; // darken if receiving shadow\n      #ifdef RN_ALPHABLEND_ON\n        lighting *= step(0.0, dotNL); // darken if transparent. Because Unity's transparent material can't receive shadowAttenuation.\n      #endif\n    }\n\n    col *= lighting;\n    lightings[i] = lighting;\n\n    rt0.xyz += col;\n\n    lightAttenuation = 1.0;\n  }\n\n\n  // Indirect Light\n  vec3 indirectLighting = get_ambientColor(materialSID, 0);\n  indirectLighting = srgbToLinear(indirectLighting);\n  indirectLighting = mix(indirectLighting, vec3(max(EPS_COL, max(indirectLighting.x, max(indirectLighting.y, indirectLighting.z)))), lightColorAttenuation); // color atten\n  // TODO: use ShadeIrad in www.ppsloan.org/publications/StupidSH36.pdf\n\n  rt0.xyz += indirectLighting * litColor;\n  rt0.xyz = min(rt0.xyz, litColor); // comment out if you want to PBR absolutely.\n\n\n  #ifdef RN_MTOON_IS_OUTLINE\n    #ifdef RN_MTOON_OUTLINE_COLOR_MIXED\n      vec3 outlineColor = get_outlineColor(materialSID, 0);\n      outlineColor = srgbToLinear(outlineColor);\n      float outlineLightingMix = get_outlineLightingMix(materialSID, 0);\n      rt0.xyz = outlineColor * mix(vec3(1.0), rt0.xyz, outlineLightingMix);\n    #endif\n  #else\n    vec3 viewDirection = normalize(viewVector);\n\n    float rimFresnelPower = get_rimFresnelPower(materialSID, 0);\n    float rimLift = get_rimLift(materialSID, 0);\n    vec3 rimColorFactor = get_rimColor(materialSID, 0);\n    vec3 rimTextureColor = texture(u_rimTexture, v_texcoord_0).xyz;\n    vec3 rimColor = srgbToLinear(rimColorFactor * rimTextureColor);\n    vec3 rim = pow(clamp(1.0 - dot(normal_inWorld, viewDirection) + rimLift, 0.0, 1.0), rimFresnelPower) * rimColor;\n\n    float staticRimLighting = 1.0;\n    float rimLightingMix = get_rimLightingMix(materialSID, 0);\n    for (int i = 0; i < /* shaderity: @{Config.maxLightNumberInShader} */; i++) {\n      if (i >= lightNumber) break;\n\n      if(i > 0) staticRimLighting = 0.0;\n\n      vec3 rimLighting = mix(vec3(staticRimLighting), lightings[i], vec3(rimLightingMix));\n      rt0.xyz += rim * rimLighting;\n    }\n\n    // additive matcap\n    vec3 cameraUp = get_cameraUp(0.0, 0); //solo datum\n    vec3 worldViewUp = normalize(cameraUp - viewDirection * dot(viewDirection, cameraUp));\n    vec3 worldViewRight = normalize(cross(viewDirection, worldViewUp));\n    vec2 matcapUv = vec2(dot(worldViewRight, normal_inWorld), dot(worldViewUp, normal_inWorld)) * 0.5 + 0.5;\n    vec3 matCapColor = srgbToLinear(texture(u_matCapTexture, matcapUv).xyz);\n    rt0.xyz += matCapColor;\n\n\n    // Emission\n    vec3 emissionColor = get_emissionColor(materialSID, 0);\n    vec3 emission = srgbToLinear(texture(u_emissionTexture, v_texcoord_0).xyz) * emissionColor;\n    rt0.xyz += emission;\n  #endif\n\n\n  // debug\n  #ifdef RN_MTOON_DEBUG_NORMAL\n    rt0 = vec4(normal_inWorld * 0.5 + 0.5, alpha);\n\n    rt0.xyz = srgbToLinear(rt0.xyz);\n/* shaderity: @{renderTargetEnd} */\n\n    return;\n  #elif defined(RN_MTOON_DEBUG_LITSHADERATE)\n    rt0 = vec4(0.0);\n    for (int i = 0; i < /* shaderity: @{Config.maxLightNumberInShader} */; i++) {\n      if (i >= lightNumber) break;\n      rt0 += vec4(lightIntensities[i] * lightings[i], alpha);\n    }\n\n    rt0.xyz = srgbToLinear(rt0.xyz);\n/* shaderity: @{renderTargetEnd} */\n\n    return;\n  #endif\n\n\n  // Wireframe\n  float threshold = 0.001;\n  vec3 wireframe = get_wireframe(materialSID, 0);\n  float wireframeWidthInner = wireframe.z;\n  float wireframeWidthRelativeScale = 1.0;\n  if (wireframe.x > 0.5 && wireframe.y < 0.5) {\n    rt0.a = 0.0;\n  }\n  vec4 wireframeResult = rt0;\n  vec4 wireframeColor = vec4(0.2, 0.75, 0.0, 1.0);\n  float edgeRatio = edge_ratio(v_baryCentricCoord, wireframeWidthInner, wireframeWidthRelativeScale);\n  float edgeRatioModified = mix(step(threshold, edgeRatio), clamp(edgeRatio*4.0, 0.0, 1.0), wireframeWidthInner / wireframeWidthRelativeScale/4.0);\n  // if r0.a is 0.0, it is wireframe not on shaded\n  wireframeResult.rgb = wireframeColor.rgb * edgeRatioModified + rt0.rgb * (1.0 - edgeRatioModified);\n  wireframeResult.a = max(rt0.a, wireframeColor.a * mix(edgeRatioModified, pow(edgeRatioModified, 100.0), wireframeWidthInner / wireframeWidthRelativeScale/1.0));\n\n  if (wireframe.x > 0.5) {\n    rt0 = wireframeResult;\n    if (wireframe.y < 0.5 && rt0.a == 0.0) {\n      discard;\n    }\n  }\n\nfloat makeOutputSrgb = float(get_makeOutputSrgb(materialSID, 0));\nrt0.rgb = mix(rt0.rgb, linearToSrgb(rt0.rgb), makeOutputSrgb);\n\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n",shaderStage:"fragment",isFragmentShader:!0};function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function x(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e,t){return I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},I(e,t)}var E=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(w,e);var t,n,E=(t=w,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=g(t);if(n){var o=g(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return x(this,e)});function w(e,t,n,o,i,a,s,y,g){var x;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),(x=E.call(this,null,"MToonShading"+(o?"+morphing":"")+(i?"+skinning":"")+(a?"":"-lighting")+(s?"+tangentAttribute":""),{isMorphing:o,isSkinning:i,isLighting:a},A,b)).__OutlineWidthModeIsScreen=!1,x.__floatProperties={},x.__vectorProperties={},x.__textureProperties={};var I=[];switch(null!=t?(x.__floatProperties=t.floatProperties,x.__vectorProperties=t.vectorProperties,x.__textureProperties=t.textureProperties):(x.__floatProperties._BlendMode=0,x.__floatProperties._BumpScale=1,x.__floatProperties._CullMode=2,x.__floatProperties._Cutoff=.5,x.__floatProperties._DebugMode=0,x.__floatProperties._DstBlend=0,x.__floatProperties._IndirectLightIntensity=.1,x.__floatProperties._LightColorAttenuation=0,x.__floatProperties._OutlineColorMode=0,x.__floatProperties._OutlineCullMode=1,x.__floatProperties._OutlineLightingMix=1,x.__floatProperties._OutlineScaledMaxDistance=1,x.__floatProperties._OutlineWidth=.5,x.__floatProperties._OutlineWidthMode=0,x.__floatProperties._ReceiveShadowRate=1,x.__floatProperties._RimFresnelPower=1,x.__floatProperties._RimLift=0,x.__floatProperties._RimLightingMix=0,x.__floatProperties._ShadeShift=0,x.__floatProperties._ShadeToony=.9,x.__floatProperties._ShadingGradeRate=1,x.__floatProperties._SrcBlend=1,x.__floatProperties._ZWrite=1,x.__vectorProperties._Color=[1,1,1,1],x.__vectorProperties._EmissionColor=[0,0,0],x.__vectorProperties._OutlineColor=[0,0,0,1],x.__vectorProperties._ShadeColor=[.97,.81,.86,1],x.__vectorProperties._RimColor=[0,0,0],x.__textureProperties._BumpMap=0,x.__textureProperties._EmissionMap=1,x.__textureProperties._MainTex=0,x.__textureProperties._OutlineWidthTexture=0,x.__textureProperties._ReceiveShadowTexture=0,x.__textureProperties._RimTexture=1,x.__textureProperties._ShadeTexture=0,x.__textureProperties._ShadingGradeTexture=0,x.__textureProperties._SphereAdd=1,n=[r.P.__dummyWhiteTexture,r.P.__dummyBlackTexture]),y&&(x.__floatProperties._DebugMode=y),I.push({semantic:w._Cutoff,componentType:c.r.Float,compositionType:l.d.Scalar,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:f.Ru.fromCopyNumber(x.__floatProperties._Cutoff),min:0,max:1},{semantic:w._Color,componentType:c.r.Float,compositionType:l.d.Vec4,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:v.Lt.fromCopyArray(x.__vectorProperties._Color),min:0,max:1},{semantic:w._ShadeColor,componentType:c.r.Float,compositionType:l.d.Vec3,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:m.P.fromCopyArray(x.__vectorProperties._ShadeColor),min:0,max:1},{semantic:w._BumpScale,componentType:c.r.Float,compositionType:l.d.Scalar,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:f.Ru.fromCopyNumber(x.__floatProperties._BumpScale),min:0,max:1},{semantic:w._ReceiveShadowRate,componentType:c.r.Float,compositionType:l.d.Scalar,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:f.Ru.fromCopyNumber(x.__floatProperties._ReceiveShadowRate),min:0,max:1},{semantic:w._ShadingGradeRate,componentType:c.r.Float,compositionType:l.d.Scalar,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:f.Ru.fromCopyNumber(x.__floatProperties._ShadingGradeRate),min:0,max:1},{semantic:w._ShadeShift,componentType:c.r.Float,compositionType:l.d.Scalar,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:f.Ru.fromCopyNumber(x.__floatProperties._ShadeShift),min:0,max:1},{semantic:w._ShadeToony,componentType:c.r.Float,compositionType:l.d.Scalar,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:f.Ru.fromCopyNumber(x.__floatProperties._ShadeToony),min:0,max:1},{semantic:w._LightColorAttenuation,componentType:c.r.Float,compositionType:l.d.Scalar,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:f.Ru.fromCopyNumber(x.__floatProperties._LightColorAttenuation),min:0,max:1},{semantic:w._AmbientColor,componentType:c.r.Float,compositionType:l.d.Vec3,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:m.P.fromCopyArray([.5785,.5785,.5785]),min:0,max:1},{semantic:w._RimColor,componentType:c.r.Float,compositionType:l.d.Vec3,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:m.P.fromCopyArray(x.__vectorProperties._RimColor),min:0,max:1},{semantic:w._RimLightingMix,componentType:c.r.Float,compositionType:l.d.Scalar,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:f.Ru.fromCopyNumber(x.__floatProperties._RimLightingMix),min:0,max:1},{semantic:w._RimFresnelPower,componentType:c.r.Float,compositionType:l.d.Scalar,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:f.Ru.fromCopyNumber(x.__floatProperties._RimFresnelPower),min:0,max:1},{semantic:w._RimLift,componentType:c.r.Float,compositionType:l.d.Scalar,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:f.Ru.fromCopyNumber(x.__floatProperties._RimLift),min:0,max:1},{semantic:w.CameraUp,componentType:c.r.Float,compositionType:l.d.Vec3,stage:h.H.PixelShader,isCustomSetting:!0,soloDatum:!0,initialValue:m.P.fromCopyArray([0,1,0]),min:0,max:1},{semantic:w._EmissionColor,componentType:c.r.Float,compositionType:l.d.Vec3,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:m.P.fromCopyArray(x.__vectorProperties._EmissionColor),min:0,max:1},{semantic:_.f5.Wireframe,componentType:c.r.Float,compositionType:l.d.Vec3,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:m.P.fromCopyArray([0,0,1]),min:0,max:10},{semantic:_.f5.MakeOutputSrgb,compositionType:l.d.Scalar,componentType:c.r.Bool,stage:h.H.PixelShader,min:0,max:1,isCustomSetting:!1,updateInterval:d.a.FirstTimeOnly,initialValue:f.Ru.fromCopyNumber(g?1:0)}),x.__floatProperties._DebugMode){case 1:x.__definitions+="#define RN_MTOON_DEBUG_NORMAL\n";break;case 2:x.__definitions+="#define RN_MTOON_DEBUG_LITSHADERATE\n"}if(e){switch(x.__definitions+="#define RN_MTOON_IS_OUTLINE\n",x.__floatProperties._OutlineWidthMode){case 0:x.__definitions+="#define RN_MTOON_OUTLINE_NONE\n";break;case 1:x.__definitions+="#define RN_MTOON_OUTLINE_WIDTH_WORLD\n";break;case 2:x.__definitions+="#define RN_MTOON_OUTLINE_WIDTH_SCREEN\n",x.__OutlineWidthModeIsScreen=!0}switch(x.__floatProperties._OutlineColorMode){case 0:x.__definitions+="#define RN_MTOON_OUTLINE_COLOR_FIXED\n";break;case 1:x.__definitions+="#define RN_MTOON_OUTLINE_COLOR_MIXED\n"}I.push({semantic:w._OutlineWidth,componentType:c.r.Float,compositionType:l.d.Scalar,stage:h.H.VertexShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:f.Ru.fromCopyNumber(x.__floatProperties._OutlineWidth),min:0,max:1},{semantic:w._OutlineScaledMaxDistance,componentType:c.r.Float,compositionType:l.d.Scalar,stage:h.H.VertexShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:f.Ru.fromCopyNumber(x.__floatProperties._OutlineScaledMaxDistance),min:0,max:1},{semantic:w._OutlineColor,componentType:c.r.Float,compositionType:l.d.Vec3,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:m.P.fromCopyArray(x.__vectorProperties._OutlineColor),min:0,max:1},{semantic:w._OutlineLightingMix,componentType:c.r.Float,compositionType:l.d.Scalar,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,soloDatum:!1,initialValue:f.Ru.fromCopyNumber(x.__floatProperties._OutlineLightingMix),min:0,max:1},{semantic:w.Aspect,componentType:c.r.Float,compositionType:l.d.Scalar,stage:h.H.VertexShader,isCustomSetting:!0,soloDatum:!0,initialValue:f.Ru.fromCopyNumber(1),min:0,max:1})}return a&&(x.__definitions+="#define RN_IS_LIGHTING\n"),i&&(x.__definitions+="#define RN_IS_SKINNING\n"),o&&(x.__definitions+="#define RN_IS_MORPHING\n",I.push({semantic:_.f5.MorphTargetNumber,componentType:c.r.Int,compositionType:l.d.Scalar,stage:h.H.VertexShader,isCustomSetting:!0,soloDatum:!0,initialValue:f.Ru.fromCopyNumber(0),min:0,max:u.D.maxVertexMorphNumberInShader,needUniformInDataTextureMode:!0},{semantic:_.f5.DataTextureMorphOffsetPosition,componentType:c.r.Int,compositionType:l.d.ScalarArray,arrayLength:u.D.maxVertexMorphNumberInShader,stage:h.H.VertexShader,isCustomSetting:!0,soloDatum:!0,initialValue:new p.j(new Int32Array(u.D.maxVertexMorphNumberInShader)),min:-Number.MAX_VALUE,max:Number.MAX_VALUE,needUniformInDataTextureMode:!0},{semantic:_.f5.MorphWeights,componentType:c.r.Float,compositionType:l.d.ScalarArray,arrayLength:u.D.maxVertexMorphNumberInShader,stage:h.H.VertexShader,isCustomSetting:!0,soloDatum:!0,initialValue:new p.j(new Float32Array(u.D.maxVertexMorphNumberInShader)),min:-Number.MAX_VALUE,max:Number.MAX_VALUE,needUniformInDataTextureMode:!0})),s&&(x.__definitions+="#define RN_USE_TANGENT_ATTRIBUTE\n"),x.__setTextures(n,I,e),x.setShaderSemanticsInfoArray(I),x}var S=w.prototype;return S.__setTextures=function(e,t,n){t.push({semantic:w._MainTex,componentType:c.r.Int,compositionType:l.d.Texture2D,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,initialValue:[0,e[this.__textureProperties._MainTex]],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:w._ShadeTexture,componentType:c.r.Int,compositionType:l.d.Texture2D,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,initialValue:[1,e[this.__textureProperties._ShadeTexture]],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:w._ReceiveShadowTexture,componentType:c.r.Int,compositionType:l.d.Texture2D,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,initialValue:[2,e[this.__textureProperties._ReceiveShadowTexture]],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:w._ShadingGradeTexture,componentType:c.r.Int,compositionType:l.d.Texture2D,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,initialValue:[3,e[this.__textureProperties._ShadingGradeTexture]],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:w._RimTexture,componentType:c.r.Int,compositionType:l.d.Texture2D,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,initialValue:[4,e[this.__textureProperties._RimTexture]],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:w._SphereAdd,componentType:c.r.Int,compositionType:l.d.Texture2D,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,initialValue:[5,e[this.__textureProperties._SphereAdd]],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:w._EmissionMap,componentType:c.r.Int,compositionType:l.d.Texture2D,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,initialValue:[6,e[this.__textureProperties._EmissionMap]],min:0,max:Number.MAX_SAFE_INTEGER});var r=y.x.getInstance().currentWebGLContextWrapper.getRawContext();r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS)>9&&(t.push({semantic:w._BumpMap,componentType:c.r.Int,compositionType:l.d.Texture2D,stage:h.H.PixelShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,initialValue:[8,e[this.__textureProperties._BumpMap]],min:0,max:Number.MAX_SAFE_INTEGER}),this.__textureProperties._BumpMap!==e.length-2&&(this.__definitions+="#define RN_MTOON_HAS_BUMPMAP\n"),n&&(t.push({semantic:w._OutlineWidthTexture,componentType:c.r.Int,compositionType:l.d.Texture2D,stage:h.H.VertexShader,isCustomSetting:!1,updateInterval:d.a.EveryTime,initialValue:[9,e[this.__textureProperties._OutlineWidthTexture]],min:0,max:Number.MAX_SAFE_INTEGER}),this.__textureProperties._OutlineWidthTexture!==e.length-2&&(this.__definitions+="#define RN_MTOON_HAS_OUTLINE_WIDTH_TEXTURE\n")))},S.setMaterialParameters=function(e,t){if(null==w.usableBlendEquationModeAlpha&&w.__initializeUsableBlendEquationModeAlpha(),0!==this.__floatProperties._BlendMode){switch(this.__floatProperties._BlendMode){case 1:this.__definitions+="#define RN_ALPHATEST_ON\n",e.alphaMode=o.F.Mask;break;case 2:case 3:this.__definitions+="#define RN_ALPHABLEND_ON\n",e.alphaMode=o.F.Translucent}var n=w.usableBlendEquationModeAlpha,r=w.unityBlendEnumCorrespondence(this.__floatProperties._SrcBlend),i=w.unityBlendEnumCorrespondence(this.__floatProperties._DstBlend);e.setBlendEquationMode(32774,n),e.setBlendFuncFactor(r,i)}if(t)switch(this.__floatProperties._OutlineCullMode){case 0:e.cullFace=!1;break;case 1:e.cullFace=!0,e.cullFrontFaceCCW=!1;break;case 2:e.cullFace=!0,e.cullFrontFaceCCW=!0}else switch(this.__floatProperties._CullMode){case 0:e.cullFace=!1;break;case 1:e.cullFace=!0,e.cullFrontFaceCCW=!1;break;case 2:e.cullFace=!0,e.cullFrontFaceCCW=!0}},S._setCustomSettingParametersToGpu=function(e){var t=e.material,n=e.shaderProgram,r=(e.firstTime,e.args),o=r.renderPass.cameraComponent;if(null==o&&(o=s.C.getComponent(i.M,i.M.current)),r.setUniform){this.setWorldMatrix(n,r.worldMatrix),this.setNormalMatrix(n,r.normalMatrix),this.setViewInfo(n,o,r.isVr,r.displayIdx),this.setProjection(n,o,r.isVr,r.displayIdx);var a=r.entity.tryToGetSkeletal();this.setSkinning(n,r.setUniform,a),this.setLightsInfo(n,r.lightComponents,t,r.setUniform),n._gl.uniform3fv(n.cameraUp,o.upInner._v),this.__OutlineWidthModeIsScreen&&n._gl.uniform1f(n.aspect,o.aspect)}else t.setParameter(w.CameraUp,o.upInner),this.__OutlineWidthModeIsScreen&&t.setParameter(w.Aspect,o.aspect);var c=r.entity.tryToGetBlendShape();this.setMorphInfo(n,r.entity.getMesh(),r.primitive,c)},w.__initializeUsableBlendEquationModeAlpha=function(){var e=a.F.getWebGLResourceRepository().currentWebGLContextWrapper,t=e.getRawContextAsWebGL2();e.isWebGL2?w.usableBlendEquationModeAlpha=t.MAX:e.webgl1ExtBM?w.usableBlendEquationModeAlpha=e.webgl1ExtBM.MAX_EXT:w.usableBlendEquationModeAlpha=t.FUNC_ADD},w.unityBlendEnumCorrespondence=function(e){var t=a.F.getWebGLResourceRepository().currentWebGLContextWrapper.getRawContext(),n=t.ZERO;switch(e){case 0:n=t.ZERO;break;case 1:n=t.ONE;break;case 2:n=t.DST_COLOR;break;case 3:n=t.SRC_COLOR;break;case 4:n=t.ONE_MINUS_DST_COLOR;break;case 5:n=t.SRC_ALPHA;break;case 6:n=t.ONE_MINUS_SRC_COLOR;break;case 7:n=t.DST_ALPHA;break;case 8:n=t.ONE_MINUS_DST_ALPHA;break;case 9:n=t.SRC_ALPHA_SATURATE;break;case 10:n=t.ONE_MINUS_SRC_ALPHA}return n},w}(r.P);w._Cutoff=new _.wy({str:"cutoff"}),w._Color=new _.wy({str:"litColor"}),w._ShadeColor=new _.wy({str:"shadeColor"}),w._MainTex=new _.wy({str:"litColorTexture"}),w._ShadeTexture=new _.wy({str:"shadeColorTexture"}),w._BumpScale=new _.wy({str:"normalScale"}),w._BumpMap=new _.wy({str:"normalTexture"}),w._ReceiveShadowRate=new _.wy({str:"receiveShadowRate"}),w._ReceiveShadowTexture=new _.wy({str:"receiveShadowTexture"}),w._ShadingGradeRate=new _.wy({str:"shadingGradeRate"}),w._ShadingGradeTexture=new _.wy({str:"shadingGradeTexture"}),w._ShadeShift=new _.wy({str:"shadeShift"}),w._ShadeToony=new _.wy({str:"shadeToony"}),w._LightColorAttenuation=new _.wy({str:"lightColorAttenuation"}),w._AmbientColor=new _.wy({str:"ambientColor"}),w._RimTexture=new _.wy({str:"rimTexture"}),w._RimColor=new _.wy({str:"rimColor"}),w._RimLightingMix=new _.wy({str:"rimLightingMix"}),w._RimFresnelPower=new _.wy({str:"rimFresnelPower"}),w._RimLift=new _.wy({str:"rimLift"}),w._SphereAdd=new _.wy({str:"matCapTexture"}),w._EmissionColor=new _.wy({str:"emissionColor"}),w._EmissionMap=new _.wy({str:"emissionTexture"}),w._OutlineWidthTexture=new _.wy({str:"outlineWidthTexture"}),w._OutlineWidth=new _.wy({str:"outlineWidth"}),w._OutlineScaledMaxDistance=new _.wy({str:"outlineScaledMaxDistance"}),w._OutlineColor=new _.wy({str:"outlineColor"}),w._OutlineLightingMix=new _.wy({str:"outlineLightingMix"}),w.Aspect=new _.wy({str:"aspect"}),w.CameraUp=new _.wy({str:"cameraUp"})},1181:(e,t,n)=>{n.d(t,{S:()=>I});var r=n(4356),o=n(3279),i=n(6383),a=n(2535),s=n(3932),c=n(1811),l=n(7416),u=n(5685),f=n(678),_=n(9294),h=n(7102),d=n(6860),m=n(7011);const v={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec4 a_instanceInfo;\nin vec3 a_baryCentricCoord;\nin vec3 a_position;\nin vec3 a_normal;\nin vec4 a_joint;\nin vec4 a_weight;\n\nout vec3 v_baryCentricCoord;\nout vec3 v_normal_inView;\nout vec3 v_normal_inWorld;\nout vec4 v_position_inWorld;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat4 viewMatrix,\n  in bool isBillboard,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n  mat4 worldMatrixInner = worldMatrix;\n  if (isBillboard) {\n    mat4 inverseViewMatrix = inverse(viewMatrix);\n    inverseViewMatrix[3][0] = 0.0;//worldMatrix[3][0];\n    inverseViewMatrix[3][1] = 0.0;//worldMatrix[3][1];\n    inverseViewMatrix[3][2] = 0.0;//worldMatrix[3][2];\n    worldMatrixInner = inverseViewMatrix * worldMatrix;\n  }\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrixInner * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main(){\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  mat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n  mat3 normalMatrix = get_normalMatrix(a_instanceInfo.x);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n\n  bool isSkinning = false;\n  isSkinning = processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    viewMatrix,\n    false,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n  v_normal_inView = vec3(viewMatrix * vec4(normalMatrix * a_normal, 0.0));\n\n// #ifdef RN_IS_POINTSPRITE\n\nvec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\nvec3 viewPosition = get_viewPosition(cameraSID, 0);\nfloat distanceFromCamera = length(position_inWorld.xyz - viewPosition);\nvec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\nfloat distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\nfloat maxPointSize = get_pointSize(materialSID, 0);\ngl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\n\n// #endif\n\n\n  v_baryCentricCoord = a_baryCentricCoord;\n\n}\n",shaderStage:"vertex",isFragmentShader:!1},p={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\nin vec3 v_baryCentricCoord;\nin vec3 v_normal_inView;\n\n/* shaderity: @{renderTargetBegin} */\n\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\nfloat edge_ratio(vec3 bary3, float wireframeWidthInner, float wireframeWidthRelativeScale) {\n  vec3 d = fwidth(bary3);\n  vec3 x = bary3+vec3(1.0 - wireframeWidthInner)*d;\n  vec3 a3 = smoothstep(vec3(0.0), d, x);\n  float factor = min(min(a3.x, a3.y), a3.z);\n\n  return clamp((1.0 - factor), 0.0, 1.0);\n}\n\nvoid main ()\n{\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  vec3 normal_inView = normalize(v_normal_inView);\n  normal_inView.y *= -1.0;\n  vec2 normalUVCordinate = normal_inView.xy * 0.5 + 0.5;\n  vec4 matCapColor = texture(u_matCapTexture, normalUVCordinate);\n  rt0 = matCapColor;\n\n  // Wireframe\n  float threshold = 0.001;\n  vec3 wireframe = get_wireframe(materialSID, 0);\n  float wireframeWidthInner = wireframe.z;\n  float wireframeWidthRelativeScale = 1.0;\n  if (wireframe.x > 0.5 && wireframe.y < 0.5) {\n    rt0.a = 0.0;\n  }\n  vec4 wireframeResult = rt0;\n  vec4 wireframeColor = vec4(0.2, 0.75, 0.0, 1.0);\n  float edgeRatio = edge_ratio(v_baryCentricCoord, wireframeWidthInner, wireframeWidthRelativeScale);\n  float edgeRatioModified = mix(step(threshold, edgeRatio), clamp(edgeRatio*4.0, 0.0, 1.0), wireframeWidthInner / wireframeWidthRelativeScale/4.0);\n  // if r0.a is 0.0, it is wireframe not on shaded\n  wireframeResult.rgb = wireframeColor.rgb * edgeRatioModified + rt0.rgb * (1.0 - edgeRatioModified);\n  wireframeResult.a = max(rt0.a, wireframeColor.a * mix(edgeRatioModified, pow(edgeRatioModified, 100.0), wireframeWidthInner / wireframeWidthRelativeScale/1.0));\n\n  if (wireframe.x > 0.5) {\n    rt0 = wireframeResult;\n    if (wireframe.y < 0.5 && rt0.a == 0.0) {\n      discard;\n    }\n  }\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n",shaderStage:"fragment",isFragmentShader:!0};function y(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function b(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}var x=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(I,e);var t,n,x=(t=I,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=A(t);if(n){var o=A(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return b(this,e)});function I(e,t,n){var o,i,A,b,g,E;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,I),o=x.call(this,null,"MatCapShading"+(e?"+skinning":""),{isSkinning:e},v,p),"string"==typeof t?(i=new _.x,(g=function(e){return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(t){switch(t.label){case 0:return[4,i.generateTextureFromUri(e,{minFilter:h.d.Nearest,magFilter:h.d.Nearest,wrapS:h.d.ClampToEdge,wrapT:h.d.ClampToEdge,type:a.r.UnsignedByte,anisotropy:!1})];case 1:return t.sent(),[2]}}))},E=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=g.apply(e,t);function i(e){y(o,n,r,i,a,"next",e)}function a(e){y(o,n,r,i,a,"throw",e)}i(void 0)}))},function(e){return E.apply(this,arguments)})(t)):(A=n,(null!=(b=r.y)&&"undefined"!=typeof Symbol&&b[Symbol.hasInstance]?b[Symbol.hasInstance](A):A instanceof b)?i=n:(console.warn("no matcap texture"),i=m.P.__dummyBlackTexture));var w=[];return w.push({semantic:l.f5.Wireframe,componentType:a.r.Float,compositionType:s.d.Vec3,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.EveryTime,soloDatum:!1,initialValue:d.P.fromCopyArray([0,0,1]),min:0,max:10}),w.push({semantic:l.f5.PointSize,componentType:a.r.Float,compositionType:s.d.Scalar,stage:u.H.VertexShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!0,initialValue:c.Ru.fromCopyNumber(30),min:0,max:100},{semantic:l.f5.PointDistanceAttenuation,componentType:a.r.Float,compositionType:s.d.Vec3,stage:u.H.VertexShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!0,initialValue:d.P.fromCopyArray([0,.1,.01]),min:0,max:1}),e&&(o.__definitions+="#define RN_IS_SKINNING\n"),w.push({semantic:I.MatCapTexture,componentType:a.r.Int,compositionType:s.d.Texture2D,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.EveryTime,initialValue:[0,i],min:0,max:Number.MAX_SAFE_INTEGER}),o.setShaderSemanticsInfoArray(w),o}return I.prototype._setCustomSettingParametersToGpu=function(e){e.material;var t=e.shaderProgram,n=(e.firstTime,e.args);n.setUniform&&(this.setWorldMatrix(t,n.worldMatrix),this.setNormalMatrix(t,n.normalMatrix));var r=n.renderPass.cameraComponent;null==r&&(r=i.C.getComponent(o.M,o.M.current)),this.setViewInfo(t,r,n.isVr,n.displayIdx),this.setProjection(t,r,n.isVr,n.displayIdx);var a=n.entity.tryToGetSkeletal();this.setSkinning(t,n.setUniform,a)},I}(m.P);I.MatCapTexture=new l.wy({str:"matCapTexture"})},3673:(e,t,n)=>{n.d(t,{u:()=>d});var r=n(7416),o=n(7011),i=n(6670),a=n(5685),s=n(6383),c=n(3279),l=n(9481);function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function f(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}var h=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(d,e);var t,n,h=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=u(t);if(n){var o=u(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return f(this,e)});function d(e){var t,n=e.name,r=e.vertexShaderityObj,s=e.pixelShaderityObj;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),t=h.call(this,null,n,{});var c=i.Q.getShaderDataReflection(r,o.P.__semanticsMap.get(t.shaderFunctionName)),l=i.Q.getShaderDataReflection(s,o.P.__semanticsMap.get(t.shaderFunctionName));t.__vertexShaderityObject=r,t.__pixelShaderityObject=s;var u=c.shaderSemanticsInfoArray.concat(),f=!0,_=!1,m=void 0;try{for(var v,p=function(){var e=v.value,t=u.find((function(t){return t.semantic.str===e.semantic.str}));t?t.stage=a.H.VertexAndPixelShader:u.push(e)},y=l.shaderSemanticsInfoArray[Symbol.iterator]();!(f=(v=y.next()).done);f=!0)p()}catch(e){_=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(_)throw m}}return d.__removeUselessShaderSemantics(u),t.setShaderSemanticsInfoArray(u),t}return d.prototype._setCustomSettingParametersToGpu=function(e){var t=e.material,n=e.shaderProgram,r=e.firstTime,o=e.args;if(o.setUniform){if(this.setWorldMatrix(n,o.worldMatrix),this.setNormalMatrix(n,o.normalMatrix),r||o.isVr){var i=o.renderPass.cameraComponent;null==i&&(i=s.C.getComponent(c.M,c.M.current)),this.setViewInfo(n,i,o.isVr,o.displayIdx),this.setProjection(n,i,o.isVr,o.displayIdx)}r&&this.setLightsInfo(n,o.lightComponents,t,o.setUniform);var a=o.entity.tryToGetSkeletal();this.setSkinning(n,o.setUniform,a)}var l=o.entity.tryToGetBlendShape();this.setMorphInfo(n,o.entity.getMesh(),o.primitive,l)},d.__removeUselessShaderSemantics=function(e){var t=l.$.getInstance().getGlobalProperties(),n=!0,o=!1,i=void 0;try{for(var a,s=function(){var t=a.value.shaderSemanticsInfo,n=e.findIndex((function(e){return e.semantic.str===t.semantic.str}));-1!==n&&e.splice(n,1)},c=t[Symbol.iterator]();!(n=(a=c.next()).done);n=!0)s()}catch(e){o=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}var u=[r.f5.VertexAttributesExistenceArray,r.f5.WorldMatrix,r.f5.NormalMatrix,r.f5.PointSize,r.f5.PointDistanceAttenuation],f=!0,_=!1,h=void 0;try{for(var d,m=function(){var t=d.value,n=e.findIndex((function(e){return e.semantic.str===t.str}));-1!==n&&e.splice(n,1)},v=u[Symbol.iterator]();!(f=(d=v.next()).done);f=!0)m()}catch(e){_=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(_)throw h}}},d}(o.P)},7862:(e,t,n)=>{n.d(t,{R:()=>w});var r=n(7416),o=n(7011),i=n(3932),a=n(2535),s=n(6264),c=n(6860),l=n(7364),u=n(5685),f=n(678),_=n(6383),h=n(3279),d=n(2175),m=n(1811),v=n(9977),p=n(4021),y=n(8289);const A={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec3 a_position;\nin vec3 a_color;\nin vec3 a_normal;\nin vec4 a_instanceInfo;\nin vec2 a_texcoord_0;\nin vec2 a_texcoord_1;\nin vec4 a_joint;\nin vec4 a_weight;\nout vec3 v_color;\nout vec3 v_normal_inWorld;\nout vec4 v_position_inWorld;\nout vec2 v_texcoord_0;\nout vec4 v_texcoord_1;\nout vec4 v_projPosition_from_light;\n\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat4 viewMatrix,\n  in bool isBillboard,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n  mat4 worldMatrixInner = worldMatrix;\n  if (isBillboard) {\n    mat4 inverseViewMatrix = inverse(viewMatrix);\n    inverseViewMatrix[3][0] = 0.0;//worldMatrix[3][0];\n    inverseViewMatrix[3][1] = 0.0;//worldMatrix[3][1];\n    inverseViewMatrix[3][2] = 0.0;//worldMatrix[3][2];\n    worldMatrixInner = inverseViewMatrix * worldMatrix;\n  }\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrixInner * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main(){\n\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  mat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  mat3 normalMatrix = get_normalMatrix(a_instanceInfo.x);\n\n  // Skeletal\n  processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    viewMatrix,\n    false,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n// #ifdef RN_IS_POINTSPRITE\n\nvec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\nvec3 viewPosition = get_viewPosition(cameraSID, 0);\nfloat distanceFromCamera = length(position_inWorld.xyz - viewPosition);\nvec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\nfloat distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\nfloat maxPointSize = get_pointSize(materialSID, 0);\ngl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\n\n// #endif\n\n\n  // Shadow mapping\n  mat4 lightViewProjectionMatrix = get_lightViewProjectionMatrix(materialSID, 0);\n  v_projPosition_from_light = lightViewProjectionMatrix * v_position_inWorld;\n\n  // Following tMatrix is based on https://wgld.org/d/webgl/w051.html\n  mat4 tMatrix = mat4(\n    0.5, 0.0, 0.0, 0.0,\n    0.0, 0.5, 0.0, 0.0,\n    0.0, 0.0, 1.0, 0.0,\n    0.5, 0.5, 0.0, 1.0\n  );\n  v_texcoord_1 = tMatrix * v_projPosition_from_light;\n\n  v_color = a_color;\n  v_normal_inWorld = normalMatrix * a_normal;\n  v_texcoord_0 = a_texcoord_0;\n\n}\n",shaderStage:"vertex",isFragmentShader:!1},b={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\nin vec3 v_color;\nin vec3 v_normal_inWorld;\nin vec4 v_position_inWorld;\nin vec2 v_texcoord_0;\nin vec4 v_texcoord_1;\nin vec4 v_projPosition_from_light;\n\n/* shaderity: @{renderTargetBegin} */\n\n\n/* shaderity: @{getters} */\n\nstruct Light {\n  int type; // 0 = directional, 1 = point, 2 = spot\n  vec3 position;\n  vec3 intensity;\n  vec3 attenuatedIntensity;\n  vec3 directionOfLightObject;\n  vec3 direction; // direction of light vector, equal to normalize(light.pointToLight)\n  vec3 pointToLight; // not normalized\n  float spotAngleScale;\n  float spotAngleOffset;\n  float effectiveRange;\n};\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Khronos/KHR_lights_punctual/README.md#range-property\nfloat getRangeAttenuation(Light light)\n{\n  float distance = length(light.pointToLight);\n  // means no range limit\n  if (light.effectiveRange <= 0.0)\n  {\n    return 1.0 / pow(distance, 2.0);\n  }\n  return max(min(1.0 - pow(distance / light.effectiveRange, 4.0), 1.0), 0.0) / pow(distance, 2.0);\n}\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Khronos/KHR_lights_punctual/README.md#inner-and-outer-cone-angles\nfloat getSpotAttenuation(Light light)\n{\n\n  float cd = dot(light.directionOfLightObject, light.direction);\n  float angularAttenuation = clamp(cd * light.spotAngleScale + light.spotAngleOffset, 0.0, 1.0);\n  return angularAttenuation;\n}\n\nvoid getLightAttenuated(Light light) {\n  light.attenuatedIntensity = light.intensity;\n  // if (light.type == 0) { // Directional Light\n    // Directional Light don't attenuate geometically\n  // }\n\n  // Point Light and Spot Light\n  if (light.type != 0)\n  {\n    light.attenuatedIntensity *= getRangeAttenuation(light);\n  }\n  // Spot light\n  if (light.type == 2)\n  {\n    light.attenuatedIntensity *= getSpotAttenuation(light);\n  }\n}\n\nLight getLight(int lightIdx, vec3 v_position_inWorld) {\n  vec3 lightPosition = get_lightPosition(0.0, lightIdx);\n  vec3 direction_and_w_of_LightObject = get_lightDirection(0.0, lightIdx);\n  vec3 lightIntensity = get_lightIntensity(0.0, lightIdx);\n  vec4 lightProperty = get_lightProperty(0.0, lightIdx);\n  Light light;\n  light.directionOfLightObject = direction_and_w_of_LightObject;\n  float lightType = lightProperty.x;\n  light.effectiveRange = lightProperty.y;\n  light.spotAngleScale = lightProperty.z;\n  light.spotAngleOffset = lightProperty.w;\n\n  light.intensity = lightIntensity;\n  light.position = lightPosition;\n  if (lightType < -0.5) { // disabled light\n    light.intensity = vec3(0.0);\n    light.type = -1;\n  } else if (0.75 < lightType) { // is pointlight or spotlight\n    light.pointToLight = lightPosition - v_position_inWorld;\n    light.direction = normalize(light.pointToLight);\n    light.type = 1;\n  } else { // is Directional Light\n    light.type = 0;\n    light.direction = normalize(light.directionOfLightObject * -1.0);\n  }\n\n  if (lightType > 1.75) { // is spotlight\n    light.type = 2;\n  }\n\n  const float M_PI = 3.141592653589793;\n  light.intensity *= M_PI; // Punctual Light\n\n  // Attenuation\n  light.attenuatedIntensity = light.intensity;\n  getLightAttenuated(light);\n\n  return light;\n}\n\n\nfloat decodeRGBAToDepth(vec4 RGBA){\n  const float rMask = 1.0;\n  const float gMask = 1.0 / 255.0;\n  const float bMask = 1.0 / (255.0 * 255.0);\n  const float aMask = 1.0 / (255.0 * 255.0 * 255.0);\n  float depth = dot(RGBA, vec4(rMask, gMask, bMask, aMask));\n  return depth;\n}\n\nvoid main (){\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  // Normal\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\n\n  // diffuseColor\n  vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\n  float alpha = 1.0;\n\n  vec4 diffuseColorFactor = get_diffuseColorFactor(materialSID, 0);\n  if (v_color != diffuseColor && diffuseColorFactor.rgb != diffuseColor) {\n    diffuseColor = v_color * diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (v_color == diffuseColor) {\n    diffuseColor = diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (diffuseColorFactor.rgb == diffuseColor) {\n    diffuseColor = v_color;\n  } else {\n    diffuseColor = vec3(1.0, 1.0, 1.0);\n  }\n\n  // diffuseColorTexture\n  vec4 textureColor = texture(u_diffuseColorTexture, v_texcoord_0);\n  if (textureColor.r > 0.05) {\n    diffuseColor *= textureColor.rgb;\n    alpha *= textureColor.a;\n  }\n\n  // shadow mapping\n  if(v_projPosition_from_light.w > 0.0){\n    float zNear = get_zNearInner(materialSID, 0);\n    float zFar = get_zFarInner(materialSID, 0);\n    float normalizationCoefficient = 1.0 / (zFar - zNear);\n\n    vec2 shadowMapUV = v_texcoord_1.xy / v_texcoord_1.w;\n\n    #ifdef RN_IS_DEBUGGING\n      bool inShadowMap = (shadowMapUV.x >= 0.0 && shadowMapUV.x <= 1.0) && (shadowMapUV.y >= 0.0 && shadowMapUV.y <= 1.0);\n      if(inShadowMap == false){\n        rt0 = get_debugColorFactor(materialSID, 0);\n/* shaderity: @{renderTargetEnd} */\n\n        return;\n      }\n    #endif\n\n    float measureDepth = normalizationCoefficient * length(v_projPosition_from_light);\n    float textureDepth = decodeRGBAToDepth(texture(u_depthTexture, shadowMapUV));\n    float allowableDepthError = get_allowableDepthError(materialSID, 0);\n\n    if(measureDepth > textureDepth + allowableDepthError){\n      // case of shadow\n      vec4 shadowColorFactor = get_shadowColorFactor(materialSID, 0);\n      diffuseColor = shadowColorFactor.rgb;\n      alpha = shadowColorFactor.a;\n    }\n  }\n\n  // Lighting\n  vec3 shadingColor = vec3(0.0, 0.0, 0.0);\n  int shadingModel = get_shadingModel(materialSID, 0);\n  if (shadingModel > 0) {\n\n    vec3 diffuse = vec3(0.0, 0.0, 0.0);\n    vec3 specular = vec3(0.0, 0.0, 0.0);\n    int lightNumber = get_lightNumber(materialSID, 0);\n    for (int i = 0; i < /* shaderity: @{Config.maxLightNumberInShader} */; i++) {\n      if (i >= lightNumber) {\n        break;\n      }\n\n      // Light\n      Light light = getLight(i, v_position_inWorld.xyz);\n\n      diffuse += diffuseColor * max(0.0, dot(normal_inWorld, light.direction)) * light.attenuatedIntensity;\n\n      vec3 viewPosition = get_viewPosition(cameraSID, 0);\n      float shininess = get_shininess(materialSID, 0);\n      if (shadingModel == 2) {// BLINN\n        // ViewDirection\n        vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\n        vec3 halfVector = normalize(light.direction + viewDirection);\n        specular += pow(max(0.0, dot(halfVector, normal_inWorld)), shininess);\n      } else if (shadingModel == 3) { // PHONG\n        vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\n        vec3 R = reflect(light.direction, normal_inWorld);\n        specular += pow(max(0.0, dot(R, viewDirection)), shininess);\n      }\n\n    }\n\n    shadingColor = diffuse + specular;\n  } else {\n    shadingColor = diffuseColor;\n  }\n\n  rt0 = vec4(shadingColor, alpha);\n  //rt0 = vec4(u_lightNumber, 0.0, 0.0, 1.0);\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n",shaderStage:"fragment",isFragmentShader:!0};function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function x(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e,t){return I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},I(e,t)}var E=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(w,e);var t,n,E=(t=w,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=g(t);if(n){var o=g(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return x(this,e)});function w(e,t){var n,_=e.isMorphing,h=e.isSkinning,p=e.isLighting,g=e.isDebugging,I=e.colorAttachmentsNumber;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),(n=E.call(this,null,"ShadowMapDecodeClassicShading"+(h?"+skinning":"")+(p?"":"-lighting"),{isMorphing:_,isSkinning:h,isLighting:p},A,b)).__encodedDepthRenderPass=t;var S=t.getFramebuffer();if(null==S)return console.error("encodedDepthRenderPass does not have framebuffer"),x(n);var T=S.colorAttachments[I],C=t.getViewport();C.setComponents(1,1,C.z-1,C.w-1),t.setViewport(C);var P=[{semantic:r.f5.LightViewProjectionMatrix,compositionType:i.d.Mat4,componentType:a.r.Float,stage:u.H.VertexShader,isCustomSetting:!0,updateInterval:f.a.EveryTime,soloDatum:!1,initialValue:y.e.zero(),min:-Number.MAX_VALUE,max:Number.MAX_VALUE},{semantic:r.f5.ShadingModel,compositionType:i.d.Scalar,componentType:a.r.Int,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!1,initialValue:m.Ru.fromCopyNumber(l.D.Constant.index),min:0,max:3},{semantic:r.f5.Shininess,compositionType:i.d.Scalar,componentType:a.r.Float,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!1,initialValue:m.Ru.fromCopyNumber(5),min:0,max:Number.MAX_VALUE},{semantic:w.AllowableDepthError,compositionType:i.d.Scalar,componentType:a.r.Float,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!1,initialValue:m.Ru.fromCopyNumber(1e-4),min:0,max:1},{semantic:w.ShadowColorFactor,compositionType:i.d.Vec4,componentType:a.r.Float,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!1,initialValue:s.Lt.fromCopyArray([.5,.5,.5,1]),min:0,max:1},{semantic:r.f5.DiffuseColorFactor,compositionType:i.d.Vec4,componentType:a.r.Float,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!1,initialValue:s.Lt.fromCopyArray([1,1,1,1]),min:0,max:2},{semantic:w.IsPointLight,componentType:a.r.Bool,compositionType:i.d.Scalar,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!1,initialValue:m.Ru.fromCopyNumber(1),min:0,max:1},{semantic:r.f5.Wireframe,componentType:a.r.Float,compositionType:i.d.Vec3,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.EveryTime,soloDatum:!1,initialValue:c.P.fromCopyArray([0,0,1]),min:0,max:10},{semantic:r.f5.NormalTexture,compositionType:i.d.Texture2D,componentType:a.r.Int,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.EveryTime,initialValue:[0,o.P.__dummyBlueTexture],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:r.f5.DepthTexture,compositionType:i.d.Texture2D,componentType:a.r.Int,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.EveryTime,initialValue:[0,T],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:r.f5.DiffuseColorTexture,compositionType:i.d.Texture2D,componentType:a.r.Int,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.EveryTime,initialValue:[1,o.P.__dummyWhiteTexture],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:w.zNearInner,componentType:a.r.Float,compositionType:i.d.Scalar,stage:u.H.PixelShader,isCustomSetting:!0,updateInterval:f.a.EveryTime,soloDatum:!1,initialValue:m.Ru.fromCopyNumber(.1),min:1e-4,max:Number.MAX_SAFE_INTEGER},{semantic:w.zFarInner,componentType:a.r.Float,compositionType:i.d.Scalar,stage:u.H.PixelShader,isCustomSetting:!0,updateInterval:f.a.EveryTime,soloDatum:!1,initialValue:m.Ru.fromCopyNumber(1e4),min:1e-4,max:Number.MAX_SAFE_INTEGER}];return P.push({semantic:r.f5.PointSize,componentType:a.r.Float,compositionType:i.d.Scalar,stage:u.H.VertexShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!0,initialValue:m.Ru.fromCopyNumber(30),min:0,max:100},{semantic:r.f5.PointDistanceAttenuation,componentType:a.r.Float,compositionType:i.d.Vec3,stage:u.H.VertexShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!0,initialValue:c.P.fromCopyArray([0,.1,.01]),min:0,max:1}),h&&(n.__definitions+="#define RN_IS_SKINNING\n"),p&&(n.__definitions+="#define RN_IS_LIGHTING\n"),_&&(n.__definitions+="#define RN_IS_MORPHING\n",P.push({semantic:r.f5.MorphTargetNumber,componentType:a.r.Int,compositionType:i.d.Scalar,stage:u.H.VertexShader,isCustomSetting:!0,soloDatum:!0,initialValue:m.Ru.fromCopyNumber(0),min:0,max:v.D.maxVertexMorphNumberInShader,needUniformInDataTextureMode:!0},{semantic:r.f5.DataTextureMorphOffsetPosition,componentType:a.r.Int,compositionType:i.d.ScalarArray,arrayLength:v.D.maxVertexMorphNumberInShader,stage:u.H.VertexShader,isCustomSetting:!0,soloDatum:!0,initialValue:new d.j(new Int32Array(v.D.maxVertexMorphNumberInShader)),min:-Number.MAX_VALUE,max:Number.MAX_VALUE,needUniformInDataTextureMode:!0},{semantic:r.f5.MorphWeights,componentType:a.r.Float,compositionType:i.d.ScalarArray,arrayLength:v.D.maxVertexMorphNumberInShader,stage:u.H.VertexShader,isCustomSetting:!0,soloDatum:!0,initialValue:new d.j(new Float32Array(v.D.maxVertexMorphNumberInShader)),min:-Number.MAX_VALUE,max:Number.MAX_VALUE,needUniformInDataTextureMode:!0})),g&&(n.__definitions+="#define RN_IS_DEBUGGING\n",P.push({semantic:w.DebugColorFactor,compositionType:i.d.Vec4,componentType:a.r.Float,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!1,initialValue:s.Lt.fromCopyArray([1,0,0,1]),min:0,max:2})),n.setShaderSemanticsInfoArray(P),n}return w.prototype._setCustomSettingParametersToGpu=function(e){var t=e.material,n=e.shaderProgram,o=(e.firstTime,e.args),i=o.renderPass.cameraComponent;null==i&&(i=_.C.getComponent(h.M,h.M.current));var a=this.__encodedDepthRenderPass.cameraComponent;o.setUniform?(this.setWorldMatrix(n,o.worldMatrix),this.setNormalMatrix(n,o.normalMatrix),this.setViewInfo(n,i,o.isVr,o.displayIdx),this.setProjection(n,i,o.isVr,o.displayIdx),w.__lastZNear!==a.zNearInner&&(n._gl.uniform1f(n.zNearInner,a.zNearInner),w.__lastZNear=a.zNearInner),w.__lastZFar!==a.zFarInner&&(n._gl.uniform1f(n.zFarInner,a.zFarInner),w.__lastZFar=a.zFarInner),p.F.getWebGLResourceRepository().setUniformValue(n,r.f5.LightViewProjectionMatrix.str,!0,this.__encodedDepthRenderPass.cameraComponent.viewProjectionMatrix)):(t.setParameter(w.zNearInner,a.zNearInner),t.setParameter(w.zFarInner,a.zFarInner),t.setParameter(r.f5.LightViewProjectionMatrix,this.__encodedDepthRenderPass.cameraComponent.viewProjectionMatrix));var s=o.entity.tryToGetSkeletal();this.setSkinning(n,o.setUniform,s),this.setLightsInfo(n,o.lightComponents,t,o.setUniform);var c=o.entity.tryToGetBlendShape();this.setMorphInfo(n,o.entity.getMesh(),o.primitive,c)},w}(o.P);w.ShadowColorFactor=new r.wy({str:"shadowColorFactor"}),w.ShadowAlpha=new r.wy({str:"shadowAlpha"}),w.NonShadowAlpha=new r.wy({str:"nonShadowAlpha"}),w.AllowableDepthError=new r.wy({str:"allowableDepthError"}),w.zNearInner=new r.wy({str:"zNearInner"}),w.zFarInner=new r.wy({str:"zFarInner"}),w.DebugColorFactor=new r.wy({str:"debugColorFactor"}),w.DepthTexture=new r.wy({str:"depthTexture"}),w.IsPointLight=new r.wy({str:"isPointLight"}),w.__lastZNear=0,w.__lastZFar=0},2653:(e,t,n)=>{n.d(t,{d:()=>g});var r=n(3279),o=n(6383),i=n(2535),a=n(3932),s=n(7416),c=n(5685),l=n(678),u=n(7011),f=n(2175),_=n(1811);const h={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\nin vec4 a_instanceInfo;\nin vec3 a_baryCentricCoord;\nin vec3 a_position;\n\nout vec3 v_baryCentricCoord;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nvoid main(){\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\nmat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n\n#ifdef RN_NO_CAMERA_TRANSFORM\n  gl_Position = worldMatrix * vec4(a_position, 1.0);\n#else\n\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  gl_Position = projectionMatrix * viewMatrix * worldMatrix * vec4(a_position, 1.0);\n\n#endif\n\n\n  v_baryCentricCoord = a_baryCentricCoord;\n\n}\n",shaderStage:"vertex",isFragmentShader:!1},d={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\nin vec3 v_baryCentricCoord;\n\n/* shaderity: @{renderTargetBegin} */\n\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\nfloat edge_ratio(vec3 bary3, float wireframeWidthInner, float wireframeWidthRelativeScale) {\n  vec3 d = fwidth(bary3);\n  vec3 x = bary3 + vec3(1.0 - wireframeWidthInner) * d;\n  vec3 a3 = smoothstep(vec3(0.0), d, x);\n  float factor = min(min(a3.x, a3.y), a3.z);\n\n  return clamp((1.0 - factor), 0.0, 1.0);\n}\n\nvoid main ()\n{\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  float framebufferWidth = get_framebufferWidth(materialSID, 0);\n  float tFrag = 1.0 / framebufferWidth;\n  vec2 offset = gl_FragCoord.st;\n\n  float synthesizeCoefficient0 = u_synthesizeCoefficient[0];\n  vec3 color = synthesizeCoefficient0 * texture(u_synthesizeTexture0, offset * tFrag).rgb;\n\n  vec4 targetTextureColor = texture(u_targetRegionTexture, offset * tFrag);\n  if (targetTextureColor != vec4(1.0, 1.0, 1.0, 1.0)) {\n    float synthesizeCoefficient1 = u_synthesizeCoefficient[1];\n    float synthesizeCoefficient2 = u_synthesizeCoefficient[2];\n    float synthesizeCoefficient3 = u_synthesizeCoefficient[3];\n    float synthesizeCoefficient4 = u_synthesizeCoefficient[4];\n    float synthesizeCoefficient5 = u_synthesizeCoefficient[5];\n\n    color += synthesizeCoefficient1 * texture(u_synthesizeTexture1, offset * tFrag).rgb;\n    color += synthesizeCoefficient2 * texture(u_synthesizeTexture2, offset * tFrag).rgb;\n    color += synthesizeCoefficient3 * texture(u_synthesizeTexture3, offset * tFrag).rgb;\n    color += synthesizeCoefficient4 * texture(u_synthesizeTexture4, offset * tFrag).rgb;\n    color += synthesizeCoefficient5 * texture(u_synthesizeTexture5, offset * tFrag).rgb;\n  }\n\n  rt0 = vec4(color, 1.0);\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n\n",shaderStage:"fragment",isFragmentShader:!0};function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function y(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e,t){return A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},A(e,t)}var b=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(I,e);var t,n,b,g,x=(b=I,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(b);if(g){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return y(this,e)});function I(e){var t,n,r,o,v,p,y,A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.P.dummyBlackTexture;m(this,I),(t=x.call(this,null,"synthesizeHDRTextureShading",{},h,d)).existTargetRegion=null!=A,t.textureNumber=e.length;var b=[{semantic:s.f5.FramebufferWidth,componentType:i.r.Float,compositionType:a.d.Scalar,stage:c.H.PixelShader,isCustomSetting:!1,updateInterval:l.a.EveryTime,soloDatum:!1,initialValue:_.Ru.fromCopyNumber(e[0].width),min:0,max:Number.MAX_SAFE_INTEGER},{semantic:I.SynthesizeCoefficient,componentType:i.r.Float,compositionType:a.d.ScalarArray,arrayLength:6,stage:c.H.PixelShader,isCustomSetting:!1,updateInterval:l.a.EveryTime,soloDatum:!1,initialValue:new f.j(new Float32Array(6)),min:0,max:1,needUniformInDataTextureMode:!0},{semantic:I.SynthesizeTexture0,componentType:i.r.Int,compositionType:a.d.Texture2D,stage:c.H.PixelShader,isCustomSetting:!1,updateInterval:l.a.EveryTime,initialValue:[0,null!==(n=e[0])&&void 0!==n?n:u.P.dummyBlackTexture],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:I.SynthesizeTexture1,componentType:i.r.Int,compositionType:a.d.Texture2D,stage:c.H.PixelShader,isCustomSetting:!1,updateInterval:l.a.EveryTime,initialValue:[1,null!==(r=e[1])&&void 0!==r?r:u.P.dummyBlackTexture],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:I.SynthesizeTexture2,componentType:i.r.Int,compositionType:a.d.Texture2D,stage:c.H.PixelShader,isCustomSetting:!1,updateInterval:l.a.EveryTime,initialValue:[2,null!==(o=e[2])&&void 0!==o?o:u.P.dummyBlackTexture],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:I.SynthesizeTexture3,componentType:i.r.Int,compositionType:a.d.Texture2D,stage:c.H.PixelShader,isCustomSetting:!1,updateInterval:l.a.EveryTime,initialValue:[3,null!==(v=e[3])&&void 0!==v?v:u.P.dummyBlackTexture],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:I.SynthesizeTexture4,componentType:i.r.Int,compositionType:a.d.Texture2D,stage:c.H.PixelShader,isCustomSetting:!1,updateInterval:l.a.EveryTime,initialValue:[4,null!==(p=e[4])&&void 0!==p?p:u.P.dummyBlackTexture],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:I.SynthesizeTexture5,componentType:i.r.Int,compositionType:a.d.Texture2D,stage:c.H.PixelShader,isCustomSetting:!1,updateInterval:l.a.EveryTime,initialValue:[5,null!==(y=e[5])&&void 0!==y?y:u.P.dummyBlackTexture],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:I.TargetRegionTexture,componentType:i.r.Int,compositionType:a.d.Texture2D,stage:c.H.PixelShader,isCustomSetting:!1,updateInterval:l.a.EveryTime,initialValue:[6,A],min:0,max:Number.MAX_SAFE_INTEGER}];return t.setShaderSemanticsInfoArray(b),t}return I.prototype._setCustomSettingParametersToGpu=function(e){var t=e.material,n=e.shaderProgram,i=(e.firstTime,e.args);i.setUniform?this.setWorldMatrix(n,i.worldMatrix):n._gl.uniform1fv(n.synthesizeCoefficient,t.getParameter(I.SynthesizeCoefficient)._v);var a=i.renderPass.cameraComponent;null==a&&(a=o.C.getComponent(r.M,r.M.current)),a&&(this.setViewInfo(n,a,i.isVr,i.displayIdx),this.setProjection(n,a,i.isVr,i.displayIdx))},t=I,(n=[{key:"existTargetRegionTexture",get:function(){return this.existTargetRegion}},{key:"synthesizeTextureNumber",get:function(){return this.textureNumber}}])&&v(t.prototype,n),I}(u.P);g.SynthesizeCoefficient=new s.wy({str:"synthesizeCoefficient"}),g.TargetRegionTexture=new s.wy({str:"targetRegionTexture"}),g.SynthesizeTexture0=new s.wy({str:"synthesizeTexture0"}),g.SynthesizeTexture1=new s.wy({str:"synthesizeTexture1"}),g.SynthesizeTexture2=new s.wy({str:"synthesizeTexture2"}),g.SynthesizeTexture3=new s.wy({str:"synthesizeTexture3"}),g.SynthesizeTexture4=new s.wy({str:"synthesizeTexture4"}),g.SynthesizeTexture5=new s.wy({str:"synthesizeTexture5"})},9573:(e,t,n)=>{n.d(t,{Q:()=>S});var r=n(7416),o=n(7011),i=n(3932),a=n(2535),s=n(6264),c=n(6860),l=n(7364),u=n(5685),f=n(678),_=n(6383),h=n(3279),d=n(2175),m=n(1811),v=n(9977),p=n(4021),y=n(8289);const A={code:"\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nin vec3 a_position;\nin vec3 a_color;\nin vec3 a_normal;\nin vec4 a_instanceInfo;\nin vec2 a_texcoord_0;\nin vec4 a_joint;\nin vec4 a_weight;\nin vec4 a_baryCentricCoord;\nout vec3 v_color;\nout vec3 v_normal_inWorld;\nout vec4 v_position_inWorld;\nout vec2 v_texcoord_0;\nout vec4 v_texcoord_1;\nout vec4 v_projPosition_from_light;\nout vec3 v_baryCentricCoord;\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\n/* shaderity: @{getters} */\n\n/* shaderity: @{matricesGetters} */\n\nmat3 toNormalMatrix(mat4 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n  float b00 = a00 * a11 - a01 * a10,\n  b01 = a00 * a12 - a02 * a10,\n  b02 = a00 * a13 - a03 * a10,\n  b03 = a01 * a12 - a02 * a11,\n  b04 = a01 * a13 - a03 * a11,\n  b05 = a02 * a13 - a03 * a12,\n  b06 = a20 * a31 - a21 * a30,\n  b07 = a20 * a32 - a22 * a30,\n  b08 = a20 * a33 - a23 * a30,\n  b09 = a21 * a32 - a22 * a31,\n  b10 = a21 * a33 - a23 * a31,\n  b11 = a22 * a33 - a23 * a32;\n\n  float determinantVal = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat3(\n    a11 * b11 - a12 * b10 + a13 * b09, a12 * b08 - a10 * b11 - a13 * b07, a10 * b10 - a11 * b08 + a13 * b06,\n    a02 * b10 - a01 * b11 - a03 * b09, a00 * b11 - a02 * b08 + a03 * b07, a01 * b08 - a00 * b10 - a03 * b06,\n    a31 * b05 - a32 * b04 + a33 * b03, a32 * b02 - a30 * b05 - a33 * b01, a30 * b04 - a31 * b02 + a33 * b00) / determinantVal;\n}\n\n\n\n#ifdef RN_IS_SKINNING\n\nhighp mat4 createMatrixFromQuaternionTranslationScale( highp vec4 quaternion, highp vec3 translation, highp vec3 scale ) {\n  highp vec4 q = quaternion;\n  highp vec3 t = translation;\n\n  highp float sx = q.x * q.x;\n  highp float sy = q.y * q.y;\n  highp float sz = q.z * q.z;\n  highp float cx = q.y * q.z;\n  highp float cy = q.x * q.z;\n  highp float cz = q.x * q.y;\n  highp float wx = q.w * q.x;\n  highp float wy = q.w * q.y;\n  highp float wz = q.w * q.z;\n\n  highp mat4 mat = mat4(\n    1.0 - 2.0 * (sy + sz), 2.0 * (cz + wz), 2.0 * (cy - wy), 0.0,\n    2.0 * (cz - wz), 1.0 - 2.0 * (sx + sz), 2.0 * (cx + wx), 0.0,\n    2.0 * (cy + wy), 2.0 * (cx - wx), 1.0 - 2.0 * (sx + sy), 0.0,\n    t.x, t.y, t.z, 1.0\n  );\n\n  highp mat4 uniformScaleMat = mat4(\n    scale.x, 0.0, 0.0, 0.0,\n    0.0, scale.y, 0.0, 0.0,\n    0.0, 0.0, scale.z, 0.0,\n    0.0, 0.0, 0.0, 1.0\n  );\n\n  return mat*uniformScaleMat;\n}\n\nhighp vec4 unpackedVec2ToNormalizedVec4(highp vec2 vec_xy, highp float criteria){\n\n  highp float r;\n  highp float g;\n  highp float b;\n  highp float a;\n\n  highp float ix = floor(vec_xy.x * criteria);\n  highp float v1x = ix / criteria;\n  highp float v1y = ix - floor(v1x) * criteria;\n\n  r = ( v1x + 1.0 ) / (criteria-1.0);\n  g = ( v1y + 1.0 ) / (criteria-1.0);\n\n  highp float iy = floor( vec_xy.y * criteria);\n  highp float v2x = iy / criteria;\n  highp float v2y = iy - floor(v2x) * criteria;\n\n  b = ( v2x + 1.0 ) / (criteria-1.0);\n  a = ( v2y + 1.0 ) / (criteria-1.0);\n\n  r -= 1.0/criteria;\n  g -= 1.0/criteria;\n  b -= 1.0/criteria;\n  a -= 1.0/criteria;\n\n  r = r*2.0-1.0;\n  g = g*2.0-1.0;\n  b = b*2.0-1.0;\n  a = a*2.0-1.0;\n\n  return vec4(r, g, b, a);\n}\n\nmat4 getSkinMatrix(float skeletalComponentSID) {\n\n#ifdef RN_BONE_DATA_TYPE_Mat44x1\n  mat4 skinMat = a_weight.x * get_boneMatrix(skeletalComponentSID, int(a_joint.x));\n  skinMat += a_weight.y * get_boneMatrix(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.z * get_boneMatrix(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.w * get_boneMatrix(skeletalComponentSID, int(a_joint.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2)\n  vec2 criteria = vec2(4096.0, 4096.0);\n\n  vec4 tq_x = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 sq_x = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.x));\n  vec4 quat = unpackedVec2ToNormalizedVec4(vec2(tq_x.w, sq_x.w), criteria.x);\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(quat, tq_x.xyz, sq_x.xyz);\n\n  vec4 tq_y = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.y));\n  vec4 sq_y = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.y));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_y.w, sq_y.w), criteria.x);\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(quat, tq_y.xyz, sq_y.xyz);\n\n  vec4 tq_z = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.z));\n  vec4 sq_z = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.z));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_z.w, sq_z.w), criteria.x);\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(quat, tq_z.xyz, sq_z.xyz);\n\n  vec4 tq_w = get_boneTranslatePackedQuat(skeletalComponentSID, int(a_joint.w));\n  vec4 sq_w = get_boneScalePackedQuat(skeletalComponentSID, int(a_joint.w));\n  quat = unpackedVec2ToNormalizedVec4(vec2(tq_w.w, sq_w.w), criteria.x);\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(quat, tq_w.xyz, sq_w.xyz);\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X2_OLD)\n  vec4 ts_x = get_boneTranslateScale(skeletalComponentSID, int(a_joint.x));\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.x)), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = get_boneTranslateScale(skeletalComponentSID, int(a_joint.y));\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.y)), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = get_boneTranslateScale(skeletalComponentSID, int(a_joint.z));\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.z)), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = get_boneTranslateScale(skeletalComponentSID, int(a_joint.w));\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    get_boneQuaternion(skeletalComponentSID, int(a_joint.w)), ts_w.xyz, vec3(ts_w.w));\n\n#elif defined(RN_BONE_DATA_TYPE_VEC4X1)\n  vec4 boneCompressedChunksX = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.x));\n  vec4 boneCompressedChunksY = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.y));\n  vec4 boneCompressedChunksZ = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.z));\n  vec4 boneCompressedChunksW = get_boneCompressedChunk(skeletalComponentSID, int(a_joint.w));\n\n  vec2 criteria = vec2(4096.0, 4096.0);\n  vec4 boneCompressedInfo = get_boneCompressedInfo(0.0, 0);\n\n  vec4 ts_x = unpackedVec2ToNormalizedVec4(boneCompressedChunksX.zw, criteria.y)*boneCompressedInfo;\n  mat4 skinMat = a_weight.x * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksX.xy, criteria.x), ts_x.xyz, vec3(ts_x.w));\n  vec4 ts_y = unpackedVec2ToNormalizedVec4(boneCompressedChunksY.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.y * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksY.xy, criteria.x), ts_y.xyz, vec3(ts_y.w));\n  vec4 ts_z = unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.z * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksZ.xy, criteria.x), ts_z.xyz, vec3(ts_z.w));\n  vec4 ts_w = unpackedVec2ToNormalizedVec4(boneCompressedChunksW.zw, criteria.y)*boneCompressedInfo;\n  skinMat += a_weight.w * createMatrixFromQuaternionTranslationScale(\n    unpackedVec2ToNormalizedVec4(boneCompressedChunksW.xy, criteria.x), ts_w.xyz, vec3(ts_w.w));\n#endif\n  return skinMat;\n}\n#endif\n\n\n\n#ifdef RN_IS_SKINNING\nbool skinning(\n  float skeletalComponentSID,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n  )\n{\n  mat4 skinMat = getSkinMatrix(skeletalComponentSID);\n  outPosition_inWorld = skinMat * vec4(inPosition_inLocal, 1.0);\n  outNormalMatrix = toNormalMatrix(skinMat);\n  outNormal_inWorld = normalize(outNormalMatrix * inNormal_inLocal);\n\n  return true;\n}\n#endif\n\nbool processGeometryWithMorphingAndSkinning(\n  float skeletalComponentSID,\n  in mat4 worldMatrix,\n  in mat4 viewMatrix,\n  in bool isBillboard,\n  in mat3 inNormalMatrix,\n  out mat3 outNormalMatrix,\n  in vec3 inPosition_inLocal,\n  out vec4 outPosition_inWorld,\n  in vec3 inNormal_inLocal,\n  out vec3 outNormal_inWorld\n) {\n  bool isSkinning = false;\n\n  vec3 position_inLocal;\n#ifdef RN_IS_MORPHING\n  if (u_morphTargetNumber == 0) {\n#endif\n    position_inLocal = inPosition_inLocal;\n#ifdef RN_IS_MORPHING\n  } else {\n    float vertexIdx = a_baryCentricCoord.w;\n    position_inLocal = get_position(vertexIdx, inPosition_inLocal);\n  }\n#endif\n\n  mat4 worldMatrixInner = worldMatrix;\n  if (isBillboard) {\n    mat4 inverseViewMatrix = inverse(viewMatrix);\n    inverseViewMatrix[3][0] = 0.0;//worldMatrix[3][0];\n    inverseViewMatrix[3][1] = 0.0;//worldMatrix[3][1];\n    inverseViewMatrix[3][2] = 0.0;//worldMatrix[3][2];\n    worldMatrixInner = inverseViewMatrix * worldMatrix;\n  }\n\n#ifdef RN_IS_SKINNING\n  if (skeletalComponentSID >= 0.0) {\n    isSkinning = skinning(skeletalComponentSID, inNormalMatrix, outNormalMatrix, position_inLocal, outPosition_inWorld, inNormal_inLocal, outNormal_inWorld);\n  } else {\n#endif\n    outNormalMatrix = inNormalMatrix;\n    outPosition_inWorld = worldMatrixInner * vec4(position_inLocal, 1.0);\n    outNormal_inWorld = normalize(inNormalMatrix * inNormal_inLocal);\n#ifdef RN_IS_SKINNING\n  }\n#endif\n\n  return isSkinning;\n}\n\n\nvoid main(){\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  mat3 normalMatrix = get_normalMatrix(a_instanceInfo.x);\n  mat4 worldMatrix = get_worldMatrix(a_instanceInfo.x);\n  mat4 viewMatrix = get_viewMatrix(cameraSID, 0);\n\n  bool isSkinning = false;\n  isSkinning = processGeometryWithMorphingAndSkinning(\n    skeletalComponentSID,\n    worldMatrix,\n    viewMatrix,\n    false,\n    normalMatrix,\n    normalMatrix,\n    a_position,\n    v_position_inWorld,\n    a_normal,\n    v_normal_inWorld\n  );\n\n  mat4 projectionMatrix = get_projectionMatrix(cameraSID, 0);\n  gl_Position = projectionMatrix * viewMatrix * v_position_inWorld;\n\n// #ifdef RN_IS_POINTSPRITE\n\nvec4 position_inWorld = worldMatrix * vec4(a_position, 1.0);\nvec3 viewPosition = get_viewPosition(cameraSID, 0);\nfloat distanceFromCamera = length(position_inWorld.xyz - viewPosition);\nvec3 pointDistanceAttenuation = get_pointDistanceAttenuation(materialSID, 0);\nfloat distanceAttenuationFactor = sqrt(1.0/(pointDistanceAttenuation.x + pointDistanceAttenuation.y * distanceFromCamera + pointDistanceAttenuation.z * distanceFromCamera * distanceFromCamera));\nfloat maxPointSize = get_pointSize(materialSID, 0);\ngl_PointSize = clamp(distanceAttenuationFactor * maxPointSize, 0.0, maxPointSize);\n\n// #endif\n\n\n  v_baryCentricCoord = a_baryCentricCoord.xyz;\n  v_color = a_color;\n  v_texcoord_0 = a_texcoord_0;\n\n  // Shadow mapping\n  mat4 lightViewProjectionMatrix = get_lightViewProjectionMatrix(materialSID, 0);\n  v_projPosition_from_light = lightViewProjectionMatrix * v_position_inWorld;\n\n  // Following tMatrix is based on https://wgld.org/d/webgl/w051.html\n  mat4 tMatrix = mat4(\n    0.5, 0.0, 0.0, 0.0,\n    0.0, 0.5, 0.0, 0.0,\n    0.0, 0.0, 1.0, 0.0,\n    0.5, 0.5, 0.0, 1.0\n  );\n  v_texcoord_1 = tMatrix * v_projPosition_from_light;\n\n}\n",shaderStage:"vertex",isFragmentShader:!1},b={code:"\n#ifdef WEBGL1_EXT_SHADER_TEXTURE_LOD\n#extension GL_EXT_shader_texture_lod : require\n#endif\n\n#ifdef WEBGL1_EXT_STANDARD_DERIVATIVES\n#extension GL_OES_standard_derivatives : require\n#endif\n\n#ifdef WEBGL1_EXT_DRAW_BUFFERS\n#extension GL_EXT_draw_buffers : require\n#endif\n\n#ifdef WEBGL2_MULTI_VIEW\n#extension GL_OVR_multiview : require\n#endif\n\nprecision highp float;\nprecision highp int;\n\n\n/* shaderity: @{definitions} */\n\nconst float Epsilon = 0.0000001;\n#define saturateEpsilonToOne(x) clamp(x, Epsilon, 1.0)\n\nuniform float u_materialSID; // skipProcess=true\nuniform int u_isMainVr; // skipProcess=true\nuniform highp sampler2D u_dataTexture; // skipProcess=true\n/* shaderity: @{widthOfDataTexture} */\n/* shaderity: @{heightOfDataTexture} */\n\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n/* shaderity: @{dataUBOVec4Size} */\n/* shaderity: @{dataUBODefinition} */\n#endif\n\n\nhighp vec4 fetchElement(int vec4_idx) {\n#if defined(GLSL_ES3) && defined(RN_IS_DATATEXTURE_MODE) && defined(RN_IS_UBO_ENABLED)\n  if (vec4_idx < dataUBOVec4Size) {\n    return fetchVec4FromVec4Block(vec4_idx);\n  } else {\n    int idxOnDataTex = vec4_idx - dataUBOVec4Size;\n    highp ivec2 uv = ivec2(idxOnDataTex % widthOfDataTexture, idxOnDataTex / widthOfDataTexture);\n    return texelFetch( u_dataTexture, uv, 0 );\n  }\n#elif defined(GLSL_ES3)\n  highp ivec2 uv = ivec2(vec4_idx % widthOfDataTexture, vec4_idx / widthOfDataTexture);\n  return texelFetch( u_dataTexture, uv, 0 );\n#else\n  // This idea from https://qiita.com/YVT/items/c695ab4b3cf7faa93885\n  highp vec2 invSize = vec2(1.0/float(widthOfDataTexture), 1.0/float(heightOfDataTexture));\n  highp float t = (float(vec4_idx) + 0.5) * invSize.x;\n  highp float x = fract(t);\n  highp float y = (floor(t) + 0.5) * invSize.y;\n  #ifdef GLSL_ES3\n  return texture( u_dataTexture, vec2(x, y));\n  #else\n  return texture( u_dataTexture, vec2(x, y));\n  #endif\n#endif\n}\n\nvec2 fetchVec2No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xy;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec2(val0.yz);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.zw);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec2(val0.w, val1.x);\n  }\n}\n\nvec3 fetchVec3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 val = fetchElement(basePosIn16bytes);\n    return val.xyz;\n  } else if (posIn4bytes == 1) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    return vec3(val0.yzw);\n  } else if (posIn4bytes == 2) {\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.zw, val1.x);\n  } else { // posIn4bytes == 3\n    vec4 val0 = fetchElement(basePosIn16bytes);\n    vec4 val1 = fetchElement(basePosIn16bytes+1);\n    return vec3(val0.w, val1.xy);\n  }\n}\n\nvec4 fetchVec4(int vec4_idx) {\n  return fetchElement(vec4_idx);\n}\n\nfloat fetchScalarNo16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  vec4 val = fetchElement(basePosIn16bytes);\n  if (posIn4bytes == 0) {\n    return val.x;\n  } else if (posIn4bytes == 1) {\n    return val.y;\n  } else if (posIn4bytes == 2) {\n    return val.z;\n  } else if (posIn4bytes == 3) {\n    return val.w;\n  }\n}\n\nmat2 fetchMat2No16BytesAligned(int scalar_idx) {\n  int vec4_idx = scalar_idx*4;\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat2 fetchMat2(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n\n  mat2 val = mat2(\n    col0.x, col0.y,\n    col0.z, col0.w\n    );\n\n  return val;\n}\n\nmat3 fetchMat3No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.x, col0.y, col0.z,\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    mat3 val = mat3(\n      col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w\n      );\n    return val;\n  }\n\n}\n\nmat3 fetchMat3(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n\n  mat3 val = mat3(\n    col0.x, col0.y, col0.z,\n    col0.w, col1.x, col1.y,\n    col1.z, col1.w, col2.x\n    );\n\n  return val;\n}\n\nmat4 fetchMat4No16BytesAligned(int scalar_idx) {\n#ifdef GLSL_ES3\n  int posIn4bytes = scalar_idx % 4;\n#else\n  int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n#endif\n\n  int basePosIn16bytes = (scalar_idx - posIn4bytes) / 4;\n  if (posIn4bytes == 0) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    mat4 val = mat4(\n      col0.x, col0.y, col0.z, col0.w,\n      col1.x, col1.y, col1.z, col1.w,\n      col2.x, col2.y, col2.z, col2.w,\n      col3.x, col3.y, col3.z, col3.w\n      );\n    return val;\n  } else if (posIn4bytes == 1) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.y, col0.z, col0.w, col1.x,\n      col1.y, col1.z, col1.w, col2.x,\n      col2.y, col2.z, col2.w, col3.x,\n      col3.y, col3.z, col3.w, col4.x\n      );\n    return val;\n  } else if (posIn4bytes == 2) {\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.z, col0.w, col1.x, col1.y,\n      col1.z, col1.w, col2.x, col2.y,\n      col2.z, col2.w, col3.x, col3.y,\n      col3.z, col3.w, col4.x, col4.y\n      );\n    return val;\n  } else { // posIn4bytes == 3\n    vec4 col0 = fetchElement(basePosIn16bytes);\n    vec4 col1 = fetchElement(basePosIn16bytes + 1);\n    vec4 col2 = fetchElement(basePosIn16bytes + 2);\n    vec4 col3 = fetchElement(basePosIn16bytes + 3);\n    vec4 col4 = fetchElement(basePosIn16bytes + 4);\n    mat4 val = mat4(\n      col0.w, col1.x, col1.y, col1.z,\n      col1.w, col2.x, col2.y, col2.z,\n      col2.w, col3.x, col3.y, col3.z,\n      col3.w, col4.x, col4.y, col4.z\n      );\n    return val;\n  }\n}\n\nmat4 fetchMat4(int vec4_idx) {\n  vec4 col0 = fetchElement(vec4_idx);\n  vec4 col1 = fetchElement(vec4_idx + 1);\n  vec4 col2 = fetchElement(vec4_idx + 2);\n  vec4 col3 = fetchElement(vec4_idx + 3);\n\n  mat4 val = mat4(\n    col0.x, col0.y, col0.z, col0.w,\n    col1.x, col1.y, col1.z, col1.w,\n    col2.x, col2.y, col2.z, col2.w,\n    col3.x, col3.y, col3.z, col3.w\n    );\n\n  return val;\n}\n\nfloat rand(const vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nvec3 descramble(vec3 v) {\n  float seed = 0.0;\n  v.x -= sin(fract(v.y*20.0));\n  v.z -= cos(fract(-v.y*10.0));\n  return v;\n}\n\nconst float PI = 3.14159265358979323846;\n\nfloat max3(vec3 v)\n{\n  return max(max(v.x, v.y), v.z);\n}\n\nfloat sq(float t)\n{\n  return t * t;\n}\n\nvec2 sq(vec2 t)\n{\n  return t * t;\n}\n\nvec3 sq(vec3 t)\n{\n  return t * t;\n}\n\nvec4 sq(vec4 t)\n{\n  return t * t;\n}\n\n\nin vec3 v_color;\nin vec3 v_normal_inWorld;\nin vec4 v_position_inWorld;\nin vec2 v_texcoord_0;\nin vec4 v_texcoord_1;\nin vec4 v_projPosition_from_light;\nin vec3 v_baryCentricCoord;\n\n/* shaderity: @{renderTargetBegin} */\n\n\n/* shaderity: @{getters} */\n\nstruct Light {\n  int type; // 0 = directional, 1 = point, 2 = spot\n  vec3 position;\n  vec3 intensity;\n  vec3 attenuatedIntensity;\n  vec3 directionOfLightObject;\n  vec3 direction; // direction of light vector, equal to normalize(light.pointToLight)\n  vec3 pointToLight; // not normalized\n  float spotAngleScale;\n  float spotAngleOffset;\n  float effectiveRange;\n};\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Khronos/KHR_lights_punctual/README.md#range-property\nfloat getRangeAttenuation(Light light)\n{\n  float distance = length(light.pointToLight);\n  // means no range limit\n  if (light.effectiveRange <= 0.0)\n  {\n    return 1.0 / pow(distance, 2.0);\n  }\n  return max(min(1.0 - pow(distance / light.effectiveRange, 4.0), 1.0), 0.0) / pow(distance, 2.0);\n}\n\n// https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Khronos/KHR_lights_punctual/README.md#inner-and-outer-cone-angles\nfloat getSpotAttenuation(Light light)\n{\n\n  float cd = dot(light.directionOfLightObject, light.direction);\n  float angularAttenuation = clamp(cd * light.spotAngleScale + light.spotAngleOffset, 0.0, 1.0);\n  return angularAttenuation;\n}\n\nvoid getLightAttenuated(Light light) {\n  light.attenuatedIntensity = light.intensity;\n  // if (light.type == 0) { // Directional Light\n    // Directional Light don't attenuate geometically\n  // }\n\n  // Point Light and Spot Light\n  if (light.type != 0)\n  {\n    light.attenuatedIntensity *= getRangeAttenuation(light);\n  }\n  // Spot light\n  if (light.type == 2)\n  {\n    light.attenuatedIntensity *= getSpotAttenuation(light);\n  }\n}\n\nLight getLight(int lightIdx, vec3 v_position_inWorld) {\n  vec3 lightPosition = get_lightPosition(0.0, lightIdx);\n  vec3 direction_and_w_of_LightObject = get_lightDirection(0.0, lightIdx);\n  vec3 lightIntensity = get_lightIntensity(0.0, lightIdx);\n  vec4 lightProperty = get_lightProperty(0.0, lightIdx);\n  Light light;\n  light.directionOfLightObject = direction_and_w_of_LightObject;\n  float lightType = lightProperty.x;\n  light.effectiveRange = lightProperty.y;\n  light.spotAngleScale = lightProperty.z;\n  light.spotAngleOffset = lightProperty.w;\n\n  light.intensity = lightIntensity;\n  light.position = lightPosition;\n  if (lightType < -0.5) { // disabled light\n    light.intensity = vec3(0.0);\n    light.type = -1;\n  } else if (0.75 < lightType) { // is pointlight or spotlight\n    light.pointToLight = lightPosition - v_position_inWorld;\n    light.direction = normalize(light.pointToLight);\n    light.type = 1;\n  } else { // is Directional Light\n    light.type = 0;\n    light.direction = normalize(light.directionOfLightObject * -1.0);\n  }\n\n  if (lightType > 1.75) { // is spotlight\n    light.type = 2;\n  }\n\n  const float M_PI = 3.141592653589793;\n  light.intensity *= M_PI; // Punctual Light\n\n  // Attenuation\n  light.attenuatedIntensity = light.intensity;\n  getLightAttenuated(light);\n\n  return light;\n}\n\n\nfloat edge_ratio(vec3 bary3, float wireframeWidthInner, float wireframeWidthRelativeScale) {\n  vec3 d = fwidth(bary3);\n  vec3 x = bary3+vec3(1.0 - wireframeWidthInner)*d;\n  vec3 a3 = smoothstep(vec3(0.0), d, x);\n  float factor = min(min(a3.x, a3.y), a3.z);\n\n  return clamp((1.0 - factor), 0.0, 1.0);\n}\n\nfloat decodeRGBAToDepth(vec4 RGBA){\n  const float rMask = 1.0;\n  const float gMask = 1.0 / 255.0;\n  const float bMask = 1.0 / (255.0 * 255.0);\n  const float aMask = 1.0 / (255.0 * 255.0 * 255.0);\n  float depth = dot(RGBA, vec4(rMask, gMask, bMask, aMask));\n  return depth;\n}\n\nfloat linstep(float min,float max,float v){\n  return clamp((v-min)/(max-min),0.0,1.0);\n}\n\nfloat reduceLightBleeding(float p_max, float parameter){\n  return linstep(parameter,1.0,p_max);\n}\n\nfloat chebyshevUpperBound(float materialSID){\n  float textureDepth = decodeRGBAToDepth(texture2DProj(u_depthTexture, v_texcoord_1));\n  float textureSquareDepth = decodeRGBAToDepth(texture2DProj(u_squareDepthTexture, v_texcoord_1));\n  if(textureDepth == 1.0 || textureSquareDepth == 1.0){\n    return 1.0;\n  }\n\n  float nonShadowProb = 1.0;\n\n  if(v_projPosition_from_light.w > 0.0){\n    float measureDepth;\n    bool isPointLight = get_isPointLight(materialSID, 0);\n    if(isPointLight){\n      float zNear = get_zNearInner(materialSID, 0);\n      float zFar = get_zFarInner(materialSID, 0);\n      float normalizationCoefficient = 1.0 / (zFar - zNear);\n      measureDepth = normalizationCoefficient * length(v_projPosition_from_light);\n    }else{\n      measureDepth = (v_projPosition_from_light / v_projPosition_from_light.w).z;\n    }\n\n    float depthAdjustment = get_depthAdjustment(materialSID, 0);\n    measureDepth += depthAdjustment;\n\n    float textureDepthAdjustment = get_textureDepthAdjustment(materialSID, 0);\n    textureDepth += textureDepthAdjustment;\n\n    float d = measureDepth - textureDepth;\n    if(d < 0.0) return 1.0;\n\n    float variance = textureSquareDepth - textureDepth * textureDepth;\n    float minimumVariance = get_minimumVariance(materialSID, 0);\n    variance = max(variance, minimumVariance);\n\n    nonShadowProb = variance / (variance + d * d);\n\n\n    float lightBleedingParameter = get_lightBleedingParameter(materialSID, 0);\n    nonShadowProb = reduceLightBleeding(nonShadowProb, lightBleedingParameter);\n  }\n  return nonShadowProb;\n}\n\nvoid main ()\n{\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = int(u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.LightComponentTID} */]);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    #ifdef RN_IS_VERTEX_SHADER\n      skeletalComponentSID = a_instanceInfo.y;\n    #else\n      skeletalComponentSID = -1.0;\n    #endif\n  #endif\n\n#else\n\n  float materialSID = u_materialSID;\n\n  int lightNumber = 0;\n  #ifdef RN_IS_LIGHTING\n    lightNumber = get_lightNumber(0.0, 0);\n  #endif\n\n  float skeletalComponentSID = -1.0;\n  #ifdef RN_IS_SKINNING\n    skeletalComponentSID = float(get_skinningMode(0.0, 0));\n  #endif\n\n#endif\n\nfloat cameraSID = u_currentComponentSIDs[/* shaderity: @{WellKnownComponentTIDs.CameraComponentTID} */];\n#ifdef WEBGL2_MULTI_VIEW\nif (u_isMainVr == 1) {\n  cameraSID += float(gl_ViewID_OVR);\n}\n#endif\n\n\n  // Normal\n  vec3 normal_inWorld = normalize(v_normal_inWorld);\n\n  // diffuseColor\n  vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\n  float alpha = 1.0;\n\n  vec4 diffuseColorFactor = get_diffuseColorFactor(materialSID, 0);\n  if (v_color != diffuseColor && diffuseColorFactor.rgb != diffuseColor) {\n    diffuseColor = v_color * diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (v_color == diffuseColor) {\n    diffuseColor = diffuseColorFactor.rgb;\n    alpha = diffuseColorFactor.a;\n  } else if (diffuseColorFactor.rgb == diffuseColor) {\n    diffuseColor = v_color;\n  } else {\n    diffuseColor = vec3(1.0, 1.0, 1.0);\n  }\n\n  // diffuseColorTexture\n  vec4 textureColor = texture(u_diffuseColorTexture, v_texcoord_0);\n  if (textureColor.r > 0.05) {\n    diffuseColor *= textureColor.rgb;\n    alpha *= textureColor.a;\n  }\n\n  // shadow mapping\n  vec4 shadowColor = get_shadowColor(materialSID, 0);\n\n  float nonShadowProb = chebyshevUpperBound(materialSID);\n  diffuseColor = nonShadowProb * diffuseColor + (1.0 - nonShadowProb) * shadowColor.rgb;\n  alpha = nonShadowProb * alpha + (1.0 - nonShadowProb) * shadowColor.a;\n\n  // Lighting\n  vec3 shadingColor = vec3(0.0, 0.0, 0.0);\n\n  int shadingModel = get_shadingModel(materialSID, 0);\n  if (shadingModel > 0) {\n    vec3 diffuse = vec3(0.0, 0.0, 0.0);\n    vec3 specular = vec3(0.0, 0.0, 0.0);\n    int lightNumber = get_lightNumber(materialSID, 0);\n    for (int i = 0; i < /* shaderity: @{Config.maxLightNumberInShader} */ ; i++) {\n      if (i >= lightNumber) {\n        break;\n      }\n\n      // Light\n      Light light = getLight(i, v_position_inWorld.xyz);\n\n      diffuse += diffuseColor * max(0.0, dot(normal_inWorld, light.direction)) * light.attenuatedIntensity;\n\n      vec3 viewPosition = get_viewPosition(materialSID, 0);\n      float shininess = get_shininess(materialSID, 0);\n      if (shadingModel == 2) {// BLINN\n        // ViewDirection\n        vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\n        vec3 halfVector = normalize(light.direction + viewDirection);\n        specular += pow(max(0.0, dot(halfVector, normal_inWorld)), shininess);\n      } else if (shadingModel == 3) { // PHONG\n        vec3 viewDirection = normalize(viewPosition - v_position_inWorld.xyz);\n        vec3 R = reflect(light.direction, normal_inWorld);\n        specular += pow(max(0.0, dot(R, viewDirection)), shininess);\n      }\n\n    }\n\n    shadingColor = diffuse + specular;\n  } else {\n    shadingColor = diffuseColor;\n  }\n\n  rt0 = vec4(shadingColor, alpha);\n\n  // Wireframe\n  float threshold = 0.001;\n  vec3 wireframe = get_wireframe(materialSID, 0);\n  float wireframeWidthInner = wireframe.z;\n  float wireframeWidthRelativeScale = 1.0;\n  if (wireframe.x > 0.5 && wireframe.y < 0.5) {\n    rt0.a = 0.0;\n  }\n  vec4 wireframeResult = rt0;\n  vec4 wireframeColor = vec4(0.2, 0.75, 0.0, 1.0);\n  float edgeRatio = edge_ratio(v_baryCentricCoord, wireframeWidthInner, wireframeWidthRelativeScale);\n  float edgeRatioModified = mix(step(threshold, edgeRatio), clamp(edgeRatio*4.0, 0.0, 1.0), wireframeWidthInner / wireframeWidthRelativeScale/4.0);\n  // if r0.a is 0.0, it is wireframe not on shaded\n  wireframeResult.rgb = wireframeColor.rgb * edgeRatioModified + rt0.rgb * (1.0 - edgeRatioModified);\n  wireframeResult.a = max(rt0.a, wireframeColor.a * mix(edgeRatioModified, pow(edgeRatioModified, 100.0), wireframeWidthInner / wireframeWidthRelativeScale/1.0));\n\n  if (wireframe.x > 0.5) {\n    rt0 = wireframeResult;\n    if (wireframe.y < 0.5 && rt0.a == 0.0) {\n      discard;\n    }\n  }\n\n/* shaderity: @{renderTargetEnd} */\n\n}\n",shaderStage:"fragment",isFragmentShader:!0};function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function I(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}var w=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(C,e);var t,n,w,S,T=(w=C,S=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(w);if(S){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return I(this,e)});function C(e,t){var n,_=e.isMorphing,h=e.isSkinning,p=e.isLighting,g=e.isDebugging,x=e.colorAttachmentsNumberDepth,I=e.colorAttachmentsNumberSquareDepth,E=e.depthCameraComponent;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,C),n=T.call(this,null,"varianceShadowMapDecodeShading"+(_?"+morphing":"")+(h?"+skinning":"")+(p?"":"-lighting")+(g?"":"+debugging"),{isMorphing:_,isSkinning:h,isLighting:p},A,b),2!==t.length&&console.error("invalid length of renderPasses"),null==E?console.warn("need to set depth camera component"):n.__depthCameraComponent=E;var w,S=!0,P=!1,R=void 0;try{for(var D,M=t[Symbol.iterator]();!(S=(D=M.next()).done);S=!0){var B=D.value,N=B.getViewport();N.setComponents(1,1,N.z-1,N.w-1),B.setViewport(N)}}catch(e){P=!0,R=e}finally{try{S||null==M.return||M.return()}finally{if(P)throw R}}var O,L=t[0].getFramebuffer();L?w=L.colorAttachments[x]:(console.warn("renderPass of depth does not have framebuffer"),w=o.P.__dummyBlackTexture);var F=t[1].getFramebuffer();F?O=F.colorAttachments[I]:(console.warn("renderPass of square depth does not have framebuffer"),O=o.P.__dummyBlackTexture);var G=[{semantic:r.f5.LightViewProjectionMatrix,compositionType:i.d.Mat4,componentType:a.r.Float,stage:u.H.VertexShader,isCustomSetting:!0,updateInterval:f.a.EveryTime,soloDatum:!1,initialValue:y.e.zero(),min:-Number.MAX_VALUE,max:Number.MAX_VALUE},{semantic:r.f5.ShadingModel,compositionType:i.d.Scalar,componentType:a.r.Int,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!1,initialValue:m.Ru.fromCopyNumber(l.D.Constant.index),min:0,max:3},{semantic:r.f5.Shininess,compositionType:i.d.Scalar,componentType:a.r.Float,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!1,initialValue:m.Ru.fromCopyNumber(5),min:0,max:Number.MAX_VALUE},{semantic:C.AllowableDepthError,compositionType:i.d.Scalar,componentType:a.r.Float,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!1,initialValue:m.Ru.fromCopyNumber(1e-4),min:0,max:1},{semantic:C.ShadowColor,compositionType:i.d.Vec4,componentType:a.r.Float,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!1,initialValue:s.Lt.fromCopyArray([.5,.5,.5,1]),min:0,max:1},{semantic:r.f5.DiffuseColorFactor,compositionType:i.d.Vec4,componentType:a.r.Float,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!1,initialValue:s.Lt.fromCopyArray([1,1,1,1]),min:0,max:2},{semantic:C.zNearInner,componentType:a.r.Float,compositionType:i.d.Scalar,stage:u.H.PixelShader,isCustomSetting:!0,updateInterval:f.a.EveryTime,soloDatum:!1,initialValue:m.Ru.fromCopyNumber(.1),min:1e-4,max:Number.MAX_SAFE_INTEGER},{semantic:C.zFarInner,componentType:a.r.Float,compositionType:i.d.Scalar,stage:u.H.PixelShader,isCustomSetting:!0,updateInterval:f.a.EveryTime,soloDatum:!1,initialValue:m.Ru.fromCopyNumber(1e4),min:1e-4,max:Number.MAX_SAFE_INTEGER},{semantic:C.IsPointLight,componentType:a.r.Bool,compositionType:i.d.Scalar,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!1,initialValue:m.Ru.fromCopyNumber(1),min:0,max:1},{semantic:r.f5.Wireframe,componentType:a.r.Float,compositionType:i.d.Vec3,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.EveryTime,soloDatum:!1,initialValue:c.P.fromCopyArray([0,0,1]),min:0,max:10},{semantic:C.DepthAdjustment,componentType:a.r.Float,compositionType:i.d.Scalar,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.EveryTime,soloDatum:!1,initialValue:m.Ru.fromCopyNumber(0),min:0,max:1},{semantic:C.LightBleedingParameter,componentType:a.r.Float,compositionType:i.d.Scalar,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.EveryTime,soloDatum:!1,initialValue:m.Ru.fromCopyNumber(0),min:0,max:1},{semantic:C.MinimumVariance,componentType:a.r.Float,compositionType:i.d.Scalar,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.EveryTime,soloDatum:!1,initialValue:m.Ru.fromCopyNumber(1e-7),min:0,max:Number.MAX_SAFE_INTEGER},{semantic:C.TextureDepthAdjustment,componentType:a.r.Float,compositionType:i.d.Scalar,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.EveryTime,soloDatum:!1,initialValue:m.Ru.fromCopyNumber(0),min:0,max:1},{semantic:r.f5.NormalTexture,compositionType:i.d.Texture2D,componentType:a.r.Int,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.EveryTime,initialValue:[0,o.P.__dummyBlueTexture],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:r.f5.DiffuseColorTexture,compositionType:i.d.Texture2D,componentType:a.r.Int,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.EveryTime,initialValue:[1,o.P.__dummyWhiteTexture],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:C.DepthTexture,componentType:a.r.Int,compositionType:i.d.Texture2D,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.EveryTime,initialValue:[2,w],min:0,max:Number.MAX_SAFE_INTEGER},{semantic:C.SquareDepthTexture,componentType:a.r.Int,compositionType:i.d.Texture2D,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.EveryTime,initialValue:[3,O],min:0,max:Number.MAX_SAFE_INTEGER}];return G.push({semantic:r.f5.PointSize,componentType:a.r.Float,compositionType:i.d.Scalar,stage:u.H.VertexShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!0,initialValue:m.Ru.fromCopyNumber(30),min:0,max:100},{semantic:r.f5.PointDistanceAttenuation,componentType:a.r.Float,compositionType:i.d.Vec3,stage:u.H.VertexShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!0,initialValue:c.P.fromCopyArray([0,.1,.01]),min:0,max:1}),h&&(n.__definitions+="#define RN_IS_SKINNING\n"),p&&(n.__definitions+="#define RN_IS_LIGHTING\n"),_&&(n.__definitions+="#define RN_IS_MORPHING\n",G.push({semantic:r.f5.MorphTargetNumber,componentType:a.r.Int,compositionType:i.d.Scalar,stage:u.H.VertexShader,isCustomSetting:!0,soloDatum:!0,initialValue:m.Ru.fromCopyNumber(0),min:0,max:v.D.maxVertexMorphNumberInShader,needUniformInDataTextureMode:!0},{semantic:r.f5.DataTextureMorphOffsetPosition,componentType:a.r.Int,compositionType:i.d.ScalarArray,arrayLength:v.D.maxVertexMorphNumberInShader,stage:u.H.VertexShader,isCustomSetting:!0,soloDatum:!0,initialValue:new d.j(new Int32Array(v.D.maxVertexMorphNumberInShader)),min:-Number.MAX_VALUE,max:Number.MAX_VALUE,needUniformInDataTextureMode:!0},{semantic:r.f5.MorphWeights,componentType:a.r.Float,compositionType:i.d.ScalarArray,arrayLength:v.D.maxVertexMorphNumberInShader,stage:u.H.VertexShader,isCustomSetting:!0,soloDatum:!0,initialValue:new d.j(new Float32Array(v.D.maxVertexMorphNumberInShader)),min:-Number.MAX_VALUE,max:Number.MAX_VALUE,needUniformInDataTextureMode:!0})),g&&(n.__definitions+="#define RN_IS_DEBUGGING\n",G.push({semantic:C.DebugColorFactor,compositionType:i.d.Vec4,componentType:a.r.Float,stage:u.H.PixelShader,isCustomSetting:!1,updateInterval:f.a.FirstTimeOnly,soloDatum:!1,initialValue:s.Lt.fromCopyArray([1,0,0,1]),min:0,max:2})),n.setShaderSemanticsInfoArray(G),n}return C.prototype._setCustomSettingParametersToGpu=function(e){var t,n=e.material,o=e.shaderProgram,i=(e.firstTime,e.args),a=i.renderPass.cameraComponent;null==a&&(a=_.C.getComponent(h.M,h.M.current));var s=null!==(t=this.__depthCameraComponent)&&void 0!==t?t:i.renderPass.cameraComponent;i.setUniform?(this.setWorldMatrix(o,i.worldMatrix),this.setNormalMatrix(o,i.normalMatrix),this.setViewInfo(o,a,i.isVr,i.displayIdx),this.setProjection(o,a,i.isVr,i.displayIdx),C.__lastZNear!==s.zNearInner&&(o._gl.uniform1f(o.zNearInner,s.zNearInner),C.__lastZNear=s.zNearInner),C.__lastZFar!==s.zFarInner&&(o._gl.uniform1f(o.zFarInner,s.zFarInner),C.__lastZFar=s.zFarInner),p.F.getWebGLResourceRepository().setUniformValue(o,r.f5.LightViewProjectionMatrix.str,!0,s.viewProjectionMatrix)):(n.setParameter(C.zNearInner,s.zNearInner),n.setParameter(C.zFarInner,s.zFarInner),n.setParameter(r.f5.LightViewProjectionMatrix,s.viewProjectionMatrix));var c=i.entity.tryToGetSkeletal();this.setSkinning(o,i.setUniform,c),this.setLightsInfo(o,i.lightComponents,n,i.setUniform);var l=i.entity.tryToGetBlendShape();this.setMorphInfo(o,i.entity.getMesh(),i.primitive,l),p.F.getWebGLResourceRepository().setUniformValue(o,r.f5.LightViewProjectionMatrix.str,!0,s.viewProjectionMatrix)},t=C,(n=[{key:"depthCameraComponent",set:function(e){this.__depthCameraComponent=e}}])&&g(t.prototype,n),C}(o.P);S.IsPointLight=new r.wy({str:"isPointLight"}),S.DepthTexture=new r.wy({str:"depthTexture"}),S.SquareDepthTexture=new r.wy({str:"squareDepthTexture"}),S.DepthAdjustment=new r.wy({str:"depthAdjustment"}),S.TextureDepthAdjustment=new r.wy({str:"textureDepthAdjustment"}),S.MinimumVariance=new r.wy({str:"minimumVariance"}),S.LightBleedingParameter=new r.wy({str:"lightBleedingParameter"}),S.ShadowColor=new r.wy({str:"shadowColor"}),S.AllowableDepthError=new r.wy({str:"allowableDepthError"}),S.zNearInner=new r.wy({str:"zNearInner"}),S.zFarInner=new r.wy({str:"zFarInner"}),S.DebugColorFactor=new r.wy({str:"debugColorFactor"}),S.__lastZNear=0,S.__lastZFar=0},7011:(e,t,n)=>{n.d(t,{P:()=>R});var r=n(9315),o=n(2535),i=n(4021),a=n(9294),s=n(5983),c=n(9977),l=n(9513),u=n(2328),f=n(6860),_=n(8289),h=n(6221),d=n(7042),m=n(8468),v=n(2612),p=n(5685),y=n(178),A=n(6383),b=n(7102),g=n(4543);function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function T(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?x(e):t}function C(e,t){return C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},C(e,t)}var P=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=S(t);if(n){var o=S(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return T(this,e)});function a(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=o.isMorphing,c=void 0!==s&&s,l=o.isSkinning,u=void 0!==l&&l,f=o.isLighting,_=void 0!==f&&f,h=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0;return E(this,a),(n=r.call(this)).__semantics=[],n.__vertexInputs=[],n.__pixelInputs=[],n.__vertexOutputs=[],n.__pixelOutputs=[],n.__defaultInputValues=new Map,n.__vertexInputConnections=[],n.__pixelInputConnections=[],n.isSingleOperation=!1,n.__definitions="",n.shaderType=p.H.VertexAndPixelShader,n.__shaderFunctionName=t,n.__materialNodeUid=++a.__invalidMaterialNodeCount,a.materialNodes[a.__invalidMaterialNodeCount]=x(n),n.__isMorphing=c,n.__isSkinning=u,n.__isLighting=_,a.__dummyBlackTexture.tryToSetUniqueName("dummyBlackTexture",!0),a.__dummyWhiteTexture.tryToSetUniqueName("dummyWhiteTexture",!0),a.__dummyBlueTexture.tryToSetUniqueName("dummyBlueTexture",!0),a.__dummyBlackCubeTexture.tryToSetUniqueName("dummyBlackCubeTexture",!0),a.__dummySRGBGrayTexture.tryToSetUniqueName("dummySRGBGrayTexture",!0),a.__dummyPbrKelemenSzirmayKalosBrdfLutTexture.tryToSetUniqueName("dummyPbrKelemenSzirmayKalosBrdfLutTexture",!0),n.__vertexShaderityObject=h,n.__pixelShaderityObject=d,n.__webglResourceRepository=i.F.getWebGLResourceRepository(),n.__definitions+="#define RN_MATERIAL_NODE_NAME ".concat(t,"\n"),a.initDefaultTextures(),n}var s,l,u,P=a.prototype;return P.getDefinitions=function(e){return this.__definitions.concat()+"#define RN_IS_ALPHAMODE_"+e.alphaMode.str+"\n"},P.setShaderSemanticsInfoArray=function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var c=i.value;t.push(c)}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}this.__semantics=t,a.__semanticsMap.has(this.shaderFunctionName)||a.__semanticsMap.set(this.shaderFunctionName,new Map);var l=a.__semanticsMap.get(this.shaderFunctionName),u=!0,f=!1,_=void 0;try{for(var h,d=this.__semantics[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){var m=h.value;l.set(m.semantic.str,m)}}catch(e){f=!0,_=e}finally{try{u||null==d.return||d.return()}finally{if(f)throw _}}},P.getShaderSemanticInfoFromName=function(e){return a.__semanticsMap.get(this.shaderFunctionName).get(e)},P.addVertexInputConnection=function(e,t,n){this.__vertexInputConnections.push({materialNodeUid:e.materialNodeUid,outputNameOfPrev:t,inputNameOfThis:n})},P.addPixelInputConnection=function(e,t,n){this.__pixelInputConnections.push({materialNodeUid:e.materialNodeUid,outputNameOfPrev:t,inputNameOfThis:n})},P.getVertexInput=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.__vertexInputs[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(a.name===e)return a}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},P.getVertexInputs=function(){return this.__vertexInputs},P.getVertexOutput=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.__vertexOutputs[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(a.name===e)return a}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},P.getVertexOutputs=function(){return this.__vertexOutputs},P.getPixelInput=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.__pixelInputs[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(a.name===e)return a}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},P.getPixelInputs=function(){return this.__pixelInputs},P.getPixelOutput=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.__pixelOutputs[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(a.name===e)return a}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},P.getPixelOutputs=function(){return this.__pixelOutputs},P.setupBasicInfo=function(e,t,n,r,o){if(e.setUniform){if(this.setWorldMatrix(t,e.worldMatrix),this.setNormalMatrix(t,e.normalMatrix),this.setIsBillboard(t,e.isBillboard),n||e.isVr){var i=e.renderPass.cameraComponent;null==i&&(i=A.C.getComponent(o,o.current)),this.setViewInfo(t,i,e.isVr,e.displayIdx),this.setProjection(t,i,e.isVr,e.displayIdx)}if(n){this.setLightsInfo(t,e.lightComponents,r,e.setUniform);var a=e.entity.tryToGetSkeletal();this.setSkinning(t,e.setUniform,a)}}var s=e.entity.tryToGetBlendShape();this.setMorphInfo(t,e.entity.getMesh(),e.primitive,s)},P.setWorldMatrix=function(e,t){e._gl.uniformMatrix4fv(e.worldMatrix,!1,t._v)},P.setNormalMatrix=function(e,t){e._gl.uniformMatrix3fv(e.normalMatrix,!1,t._v)},P.setIsBillboard=function(e,t){e._gl.uniform1i(e.isBillboard,t?1:0)},P.setViewInfo=function(e,t,n,r){var o,i;if(n){var a=y.x.getInstance().getModule("xr").WebXRSystem.getInstance();a.isWebXRMode&&(o=a._getViewMatrixAt(r),i=a._getCameraWorldPositionAt(r))}else t?(i=t.worldPosition,o=t.viewMatrix):(o=_.e.identity(),i=f.P.fromCopyArray([0,0,10]));e._gl.uniformMatrix4fv(e.viewMatrix,!1,o._v),e._gl.uniform3fv(e.viewPosition,i._v)},P.setProjection=function(e,t,n,r){var o;if(n){var i=y.x.getInstance().getModule("xr").WebXRSystem.getInstance();i.isWebXRMode&&(o=i._getProjectMatrixAt(r))}else o=t?t.projectionMatrix:_.e.identity();e._gl.uniformMatrix4fv(e.projectionMatrix,!1,o._v)},P.setSkinning=function(e,t,n){if(this.__isSkinning)if(n){if(t){if(c.D.boneDataType===m.N.Mat44x1){var r=n.jointMatricesArray;e._gl.uniformMatrix4fv(e.boneMatrix,!1,r)}else if(c.D.boneDataType===m.N.Vec4x2){var o=n.jointTranslatePackedQuat,i=n.jointScalePackedQuat;e._gl.uniform4fv(e.boneTranslatePackedQuat,o),e._gl.uniform4fv(e.boneScalePackedQuat,i)}else if(c.D.boneDataType===m.N.Vec4x2Old){var a=n.jointQuaternionArray,s=n.jointTranslateScaleArray;e._gl.uniform4fv(e.boneQuaternion,a),e._gl.uniform4fv(e.boneTranslateScale,s)}else if(c.D.boneDataType===m.N.Vec4x1){var l=n.jointCompressedChunk,u=n.jointCompressedInfo;e._gl.uniform4fv(e.boneCompressedChunk,l),e._gl.uniform4fv(e.boneCompressedInfo,u._v)}e._gl.uniform1i(e.skinningMode,n.componentSID)}}else t&&e._gl.uniform1i(e.skinningMode,-1)},P.setLightsInfo=function(e,t,n,r){if(this.__isLighting&&r){var o=t.filter((function(e){return e.enable}));e._gl.uniform1i(e.lightNumber,o.length);var i=Math.min(o.length,c.D.maxLightNumberInShader);a.__lightPositions.length!==3*i&&(a.__lightPositions=new Float32Array(3*i),a.__lightDirections=new Float32Array(3*i),a.__lightIntensities=new Float32Array(3*i),a.__lightProperties=new Float32Array(4*i));for(var s=0;s<o.length&&!(s>=c.D.maxLightNumberInShader)&&null!=e.lightPosition;s++){var l=o[s],u=l.entity.getSceneGraph().worldPosition,f=l.direction,_=l.intensity;a.__lightPositions[3*s+0]=u.x,a.__lightPositions[3*s+1]=u.y,a.__lightPositions[3*s+2]=u.z;var h=1/Math.max(.001,Math.cos(l.innerConeAngle)-Math.cos(l.outerConeAngle)),d=-Math.cos(l.outerConeAngle)*h;a.__lightDirections[3*s+0]=f.x,a.__lightDirections[3*s+1]=f.y,a.__lightDirections[3*s+2]=f.z,a.__lightIntensities[3*s+0]=_.x,a.__lightIntensities[3*s+1]=_.y,a.__lightIntensities[3*s+2]=_.z,a.__lightProperties[4*s+0]=l.enable?l.type.index:-1,a.__lightProperties[4*s+1]=l.range,a.__lightProperties[4*s+2]=h,a.__lightProperties[4*s+3]=d}i>0&&(e._gl.uniform3fv(e.lightPosition,a.__lightPositions),e._gl.uniform3fv(e.lightDirection,a.__lightDirections),e._gl.uniform3fv(e.lightIntensity,a.__lightIntensities),e._gl.uniform4fv(e.lightProperty,a.__lightProperties))}},P.setMorphInfo=function(e,t,n,r){if(this.__isMorphing)if(0!==n.targets.length){e._gl.uniform1i(e.morphTargetNumber,n.targets.length);var o,i=n.targets.map((function(e){var t=e.get(h.T.Position.XYZ),n=0;return d.V.isDataTextureApproach(v.Z.currentProcessApproach)&&(n=c.D.totalSizeOfGPUShaderDataStorageExceptMorphData),(n+t.byteOffsetInBuffer)/4/4}));e._gl.uniform1iv(e.dataTextureMorphOffsetPosition,i),o=r.weights.length>0?r.weights:new Float32Array(n.targets.length),e._gl.uniform1fv(e.morphWeights,o)}else e._gl.uniform1i(e.morphTargetNumber,0)},P._setCustomSettingParametersToGpu=function(e){e.material,e.shaderProgram,e.firstTime,e.args},P.setDefaultInputValue=function(e,t){this.__defaultInputValues.set(e,t)},P.getDefinition=function(){return""},a.getMaterialNode=function(e){return a.materialNodes[e]},a.initDefaultTextures=function(){var e,t=this;return(e=function(){var e,n;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(r){switch(r.label){case 0:return t.__dummyWhiteTexture.isTextureReady?[2]:(t.__dummyWhiteTexture.generate1x1TextureFrom(),t.__dummyBlueTexture.generate1x1TextureFrom("rgba(127.5, 127.5, 255, 1)"),t.__dummyBlackTexture.generate1x1TextureFrom("rgba(0, 0, 0, 1)"),t.__dummyBlackCubeTexture.load1x1Texture("rgba(0, 0, 0, 1)"),t.__dummySRGBGrayTexture.generate1x1TextureFrom("rgba(186, 186, 186, 1)"),e=y.x.getInstance(),n=e.getModule("pbr"),[4,i.F.getWebGLResourceRepository().createTextureFromDataUri(n.sheen_E_and_DGTerm,{level:0,internalFormat:b.d.RGBA8,border:0,format:g.V.RGBA,type:o.r.UnsignedByte,magFilter:b.d.Linear,minFilter:b.d.Linear,wrapS:b.d.ClampToEdge,wrapT:b.d.ClampToEdge,generateMipmap:!1,anisotropy:!1,isPremultipliedAlpha:!1})]);case 1:return t.__sheenLutTextureUid=r.sent(),[2]}}))},function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){I(i,r,o,a,s,"next",e)}function s(e){I(i,r,o,a,s,"throw",e)}a(void 0)}))})()},s=a,u=[{key:"dummyWhiteTexture",get:function(){return this.__dummyWhiteTexture}},{key:"dummyBlackTexture",get:function(){return this.__dummyBlackTexture}},{key:"dummyBlueTexture",get:function(){return this.__dummyBlueTexture}},{key:"dummyBlackCubeTexture",get:function(){return this.__dummyWhiteTexture}},{key:"dummyPbrKelemenSzirmayKalosBrdfLutTexture",get:function(){return this.__dummyPbrKelemenSzirmayKalosBrdfLutTexture}}],(l=[{key:"shaderFunctionName",get:function(){return this.__shaderFunctionName}},{key:"vertexShaderityObject",get:function(){return this.__vertexShaderityObject}},{key:"pixelShaderityObject",get:function(){return this.__pixelShaderityObject}},{key:"materialNodeUid",get:function(){return this.__materialNodeUid}},{key:"_semanticsInfoArray",get:function(){return this.__semantics}},{key:"isSkinning",get:function(){return this.__isSkinning}},{key:"isMorphing",get:function(){return this.__isMorphing}},{key:"isLighting",get:function(){return this.__isLighting}},{key:"vertexInputConnections",get:function(){return this.__vertexInputConnections}},{key:"pixelInputConnections",get:function(){return this.__pixelInputConnections}}])&&w(s.prototype,l),u&&w(s,u),a}(r.S);R.__semanticsMap=new Map,R.__invalidMaterialNodeUid=-1,R.__invalidMaterialNodeCount=-1,R.materialNodes=[],R.__dummyWhiteTexture=new a.x,R.__dummyBlueTexture=new a.x,R.__dummyBlackTexture=new a.x,R.__dummyPbrKelemenSzirmayKalosBrdfLutTexture=new a.x,R.__dummySRGBGrayTexture=new a.x,R.__dummyBlackCubeTexture=new s.B,R.__sheenLutTextureUid=-1,R.__tmp_vector4=u.xQ.zero(),R.__tmp_vector2=l.NR.zero(),R.__lightPositions=new Float32Array(0),R.__lightDirections=new Float32Array(0),R.__lightIntensities=new Float32Array(0),R.__lightProperties=new Float32Array(0)},790:(e,t,n)=>{n.d(t,{F:()=>S});var r=n(9315),o=n(3650),i=n(7416),a=n(3932),s=n(9409),c=n(4021),l=n(9977),u=n(5685),f=n(5479),_=n(9481),h=n(425),d=n(7042),m=n(8468),v=n(678),p=n(6670),y=n(9197),A=n(2142);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function I(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}var w=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(w,e);var t,n,r=(t=w,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=x(t);if(n){var o=x(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return I(this,e)});function w(e,t,n,i,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),(s=r.call(this))._allFieldVariables=new Map,s._autoFieldVariablesOnly=new Map,s._allFieldsInfo=new Map,s.__belongPrimitives=new Map,s._shaderProgramUid=c.F.InvalidCGAPIResourceUid,s.__materialUid=-1,s.__materialSid=-1,s.__alphaMode=o.F.Opaque,s.cullFace=!0,s.cullFrontFaceCCW=!0,s.__alphaToCoverage=!1,s.__blendEquationMode=A.gNb,s.__blendEquationModeAlpha=A.gNb,s.__blendFuncSrcFactor=A.B3l,s.__blendFuncDstFactor=A.GR4,s.__blendFuncAlphaSrcFactor=A.Qak,s.__blendFuncAlphaDstFactor=A.Qak,s._materialContent=a,s.__materialTid=e,s.__materialUid=t,s.__materialSid=n,s.__materialTypeName=i,s}var S,T,C=w.prototype;return C.setParameter=function(e,t){var n,r=(0,i.UL)(e),o=this._allFieldsInfo.get(r);null!=o&&(n=o.soloDatum?w._soloDatumFields.get(this.__materialTypeName).get(r):this._allFieldVariables.get(r),s.D._setForce(n.value,t))},C.setTextureParameter=function(e,t){if(this._allFieldsInfo.has(e.index)){var n=this._allFieldVariables.get(e.index),r={value:[n.value[0],t],info:n.info};this._allFieldVariables.set(e.index,r),n.info.isCustomSetting||this._autoFieldVariablesOnly.set(e.index,r),e!==i.f5.DiffuseColorTexture&&e!==i.f5.BaseColorTexture||t.isTransparent&&(this.alphaMode=o.F.Translucent)}},C.getTextureParameter=function(e){if(this._allFieldsInfo.has(e.index))return this._allFieldVariables.get(e.index).value[1]},C.setTextureParameterAsPromise=function(e,t){var n=this;t.then((function(t){if(n._allFieldsInfo.has(e.index)){var r=n._allFieldVariables.get(e.index),a={value:[r.value[0],t],info:r.info};n._allFieldVariables.set(e.index,a),r.info.isCustomSetting||n._autoFieldVariablesOnly.set(e.index,a),e!==i.f5.DiffuseColorTexture&&e!==i.f5.BaseColorTexture||t.isTransparent&&(n.alphaMode=o.F.Translucent)}}))},C.setParameterByUniformName=function(e,t){var n=this.__getTargetShaderSemantics(e);null!=n&&this.setParameter(n,t)},C.setTextureParameterByUniformName=function(e,t){var n=this.__getTargetShaderSemantics(e);null!=n&&this.setTextureParameter(n,t)},C.getParameter=function(e){var t,n,r=this._allFieldsInfo.get(e.index);if(null!=r)return r.soloDatum?null===(t=w._soloDatumFields.get(this.__materialTypeName).get(e.index))||void 0===t?void 0:t.value:null===(n=this._allFieldVariables.get(e.index))||void 0===n?void 0:n.value},C.isShaderProgramReady=function(){return this._shaderProgramUid!==c.F.InvalidCGAPIResourceUid},C._setUniformLocationsOfMaterialNodes=function(e){var t=c.F.getWebGLResourceRepository(),n=[];if(y.Is.exist(this._materialContent)){var r=this._materialContent._semanticsInfoArray;n=n.concat(r)}t.setupUniformLocations(this._shaderProgramUid,n,e)},C._addBelongPrimitive=function(e){this.__belongPrimitives.set(e.primitiveUid,e)},C._createProgram=function(e,t,n){return this.__createProgramAsSingleOperation(e,t,n)},C._createProgramByUpdatedSources=function(e,t){return this.__createProgramAsSingleOperationByUpdatedSources(e,t)},C._setupBasicUniformsLocations=function(){c.F.getWebGLResourceRepository().setupBasicUniformLocations(this._shaderProgramUid)},C._setupAdditionalUniformLocations=function(e,t){return c.F.getWebGLResourceRepository().setupUniformLocations(this._shaderProgramUid,e,t)},C._setParametersToGpu=function(e){var t=e.material,n=e.shaderProgram,r=e.firstTime,o=e.args;this.__setAutoParametersToGpu(o,r,n),y.Is.exist(this._materialContent._setCustomSettingParametersToGpu)&&this._materialContent._setCustomSettingParametersToGpu({material:t,shaderProgram:n,firstTime:r,args:o}),this.__setSoloDatumParametersToGpu({shaderProgram:n,firstTime:r,args:o})},C._getProperties=function(e,t){var n,r,o,i=this,a="",s="";return this._allFieldsInfo.forEach((function(n,r){var o=i._allFieldsInfo.get(r);o.stage!==u.H.VertexShader&&o.stage!==u.H.VertexAndPixelShader||(a+=e(i.__materialTypeName,o,r,!1,t)),o.stage!==u.H.PixelShader&&o.stage!==u.H.VertexAndPixelShader||(s+=e(i.__materialTypeName,o,r,!1,t))})),r=_.$.getInstance()._addPropertiesStr(a,s,e,t),o=2,n=function(e){if(Array.isArray(e))return e}(r)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(r,o)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(r,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=n[0],s=n[1],{vertexPropertiesStr:a,pixelPropertiesStr:s}},C.__setAutoParametersToGpu=function(e,t,n){var r=c.F.getWebGLResourceRepository();e.setUniform?this._autoFieldVariablesOnly.forEach((function(e){var o=e.info;t||o.updateInterval!==v.a.FirstTimeOnly?r.setUniformValue(n,o.semantic.str,t,e.value):a.d.isTexture(o.compositionType)&&r.bindTexture(o,e.value)})):this._autoFieldVariablesOnly.forEach((function(e){var o=e.info;a.d.isTexture(o.compositionType)&&(t||o.updateInterval!==v.a.FirstTimeOnly?r.setUniformValue(n,o.semantic.str,t,e.value):r.bindTexture(o,e.value))}))},C.__setSoloDatumParametersToGpu=function(e){var t=e.shaderProgram,n=e.firstTime,r=e.args,o=c.F.getWebGLResourceRepository(),i=this.__materialTypeName,s=w._soloDatumFields.get(i);null!=s&&s.forEach((function(e,i){var s=e.info;(r.setUniform||a.d.isTexture(s.compositionType))&&(s.isCustomSetting||(n||s.updateInterval!==v.a.FirstTimeOnly?o.setUniformValue(t,s.semantic.str,n,e.value):o.bindTexture(s,e.value)))}))},C.__setupGlobalShaderDefinition=function(){var e="",t=c.F.getWebGLResourceRepository().currentWebGLContextWrapper;return t.isWebGL2&&(e+="#version 300 es\n#define GLSL_ES3\n",l.D.isUboEnabled&&(e+="#define RN_IS_UBO_ENABLED\n")),e+="#define RN_MATERIAL_TYPE_NAME ".concat(this.__materialTypeName,"\n"),d.V.isDataTextureApproach(h.x.processApproach)?e+="#define RN_IS_DATATEXTURE_MODE\n":e+="#define RN_IS_UNIFORM_MODE\n",t.is_multiview&&(e+="#define WEBGL2_MULTI_VIEW\n"),(t.isWebGL2||t.webgl1ExtDRV)&&(e+="#define RN_IS_SUPPORTING_STANDARD_DERIVATIVES\n"),l.D.boneDataType===m.N.Mat44x1?e+="#define RN_BONE_DATA_TYPE_Mat44x1\n":l.D.boneDataType===m.N.Vec4x2?e+="#define RN_BONE_DATA_TYPE_VEC4X2\n":l.D.boneDataType===m.N.Vec4x2Old?e+="#define RN_BONE_DATA_TYPE_VEC4X2_OLD\n":l.D.boneDataType===m.N.Vec4x1&&(e+="#define RN_BONE_DATA_TYPE_VEC4X1\n"),e},C.__createProgramAsSingleOperation=function(e,t,n){var r=c.F.getWebGLResourceRepository(),o=this._materialContent,i=this._getProperties(t,n),a=i.vertexPropertiesStr,s=i.pixelPropertiesStr,l=o.getDefinitions(this),u=this.__setupGlobalShaderDefinition();u+="#define RN_IS_VERTEX_SHADER\n";var f=this.__setupGlobalShaderDefinition();f+="#define RN_IS_PIXEL_SHADER\n";var _=p.Q.fillTemplate(o.vertexShaderityObject,{getters:a,definitions:l,dataUBODefinition:r.getGlslDataUBODefinitionString(),dataUBOVec4Size:r.getGlslDataUBOVec4SizeString(),matricesGetters:e}),h=p.Q.transformWebGLVersion(_,n).code,d=p.Q.fillTemplate(o.pixelShaderityObject,{renderTargetBegin:r.getGlslRenderTargetBeginString(4),getters:s,definitions:l,dataUBODefinition:r.getGlslDataUBODefinitionString(),dataUBOVec4Size:r.getGlslDataUBOVec4SizeString(),matricesGetters:e,renderTargetEnd:r.getGlslRenderTargetEndString(4)}),m=p.Q.transformWebGLVersion(d,n).code;u+=h.replace(/#version\s+(100|300\s+es)/,""),f+=m.replace(/#version\s+(100|300\s+es)/,"");var v=this.__getAttributeInfo(o),y=v.attributeNames,A=v.attributeSemantics;return u+=this.__outputVertexAttributeBindingInfo(y,A),this.__createShaderProgramWithCache(u,f,y,A)},C.__createProgramAsSingleOperationByUpdatedSources=function(e,t){var n=this._materialContent,r=this.__getAttributeInfo(n),o=r.attributeNames,i=r.attributeSemantics;return this.__createShaderProgramWithCache(e.vertex,e.pixel,o,i,t)},C.__createShaderProgramWithCache=function(e,t,n,r,o){var i=e+t,a=w.__shaderStringMap.get(i);if(a)return this._shaderProgramUid=a,a;var s=f.j.toCRC32(i);if(a=w.__shaderHashMap.get(s))return this._shaderProgramUid=a,this._shaderProgramUid;var l=c.F.getWebGLResourceRepository();return this._shaderProgramUid=l.createShaderProgram({material:this,vertexShaderStr:e,fragmentShaderStr:t,attributeNames:n,attributeSemantics:r,onError:o}),w.__shaderStringMap.set(i,this._shaderProgramUid),w.__shaderHashMap.set(s,this._shaderProgramUid),this._shaderProgramUid},C.__getAttributeInfo=function(e){var t=p.Q.getAttributeReflection(e.vertexShaderityObject);return{attributeNames:t.names,attributeSemantics:t.semantics}},C.__outputVertexAttributeBindingInfo=function(e,t){for(var n="\n// Vertex Attributes Binding Info\n",r=0;r<e.length;r++)n+="// ".concat(e[r],": ").concat(t[r].str," \n");return n},C.__getTargetShaderSemantics=function(e){var t=this.fieldsInfoArray.find((function(t){return(t.none_u_prefix?"":"u_")+t.semantic.str===e}));if(null!=t)return t.semantic;console.error("Material.__getTargetShaderSemantics: uniform ".concat(e," is not found"))},C.setBlendEquationMode=function(e,t){this.__blendEquationMode=e,this.__blendEquationModeAlpha=null!=t?t:e},C.setBlendFuncSeparateFactor=function(e,t,n,r){this.__blendFuncSrcFactor=e,this.__blendFuncDstFactor=t,this.__blendFuncAlphaSrcFactor=n,this.__blendFuncAlphaDstFactor=r},C.setBlendFuncFactor=function(e,t){this.__blendFuncSrcFactor=e,this.__blendFuncDstFactor=t,this.__blendFuncAlphaSrcFactor=e,this.__blendFuncAlphaDstFactor=t},C.isEmptyMaterial=function(){return void 0===this._materialContent},C.isBlend=function(){return this.alphaMode===o.F.Translucent||this.alphaMode===o.F.Additive},S=w,(T=[{key:"alphaToCoverage",get:function(){return this.__alphaToCoverage},set:function(e){e&&this.alphaMode===o.F.Translucent&&console.warn("If you set alphaToCoverage = true on a material whose AlphaMode is Translucent, you may get drawing problems."),this.__alphaToCoverage=e}},{key:"materialTID",get:function(){return this.__materialTid}},{key:"fieldsInfoArray",get:function(){return Array.from(this._allFieldsInfo.values())}},{key:"blendEquationMode",get:function(){return this.__blendEquationMode}},{key:"blendEquationModeAlpha",get:function(){return this.__blendEquationModeAlpha}},{key:"blendFuncSrcFactor",get:function(){return this.__blendFuncSrcFactor}},{key:"blendFuncDstFactor",get:function(){return this.__blendFuncDstFactor}},{key:"blendFuncAlphaSrcFactor",get:function(){return this.__blendFuncAlphaSrcFactor}},{key:"blendFuncAlphaDstFactor",get:function(){return this.__blendFuncAlphaDstFactor}},{key:"alphaMode",get:function(){return this.__alphaMode},set:function(e){this.__alphaMode=e,this._shaderProgramUid=-1}},{key:"materialUID",get:function(){return this.__materialUid}},{key:"materialSID",get:function(){return this.__materialSid}},{key:"isSkinning",get:function(){return this._materialContent.isSkinning}},{key:"isMorphing",get:function(){return this._materialContent.isMorphing}},{key:"isLighting",get:function(){return this._materialContent.isLighting}},{key:"materialTypeName",get:function(){return this.__materialTypeName}}])&&g(S.prototype,T),w}(r.S);S.__shaderHashMap=new Map,S.__shaderStringMap=new Map,S._soloDatumFields=new Map},2603:(e,t,n)=>{n.d(t,{r:()=>_});var r=n(9977),o=n(4395),i=n(5171),a=n(2535),s=n(3932),c=n(3138),l=n(9409),u=n(9197),f=n(790),_=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.registerMaterial=function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.D.maxMaterialInstanceForEachType;return e.__materialNodes.has(t)?(console.info("".concat(t," is already registered.")),!1):(e.__registerInner(t,n,o),!0)},e.forceRegisterMaterial=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.D.maxMaterialInstanceForEachType;return this.__registerInner(e,t,n),!0},e.isRegisteredMaterialType=function(t){return e.__materialNodes.has(t)},e.getMaterialByMaterialUid=function(e){return this.__materialMap.get(e)},e.getAllMaterials=function(){return Array.from(e.__materialMap.values())},e.createMaterial=function(t,n){var r=n;r||(r=e.__materialNodes.get(t));var o=e.__materialInstanceCountOfType.get(t),i=new f.F(e.__materialTids.get(t),++e.__materialUidCount,o++,t,r);return this.__initialize(i,o),i},e.isFullOrOverOfThisMaterialType=function(t){var n=e.__materialInstanceCountOfType.get(t);if(u.Is.not.exist(n))return!1;var r=e.__maxInstances.get(t);return!u.Is.not.exist(r)&&n>=r},e.__initialize=function(t,n){t.tryToSetUniqueName(t.__materialTypeName,!0),e.__materialMap.set(t.materialUID,t);var r=e.__instances.get(t.__materialTypeName);if(u.Is.not.exist(r)&&(r=new Map,e.__instances.set(t.materialTypeName,r)),r.set(t.materialSID,t),e.__materialInstanceCountOfType.set(t.materialTypeName,n),u.Is.exist(t._materialContent)){var o=t._materialContent._semanticsInfoArray,i=e.__accessors.get(t.materialTypeName);o.forEach((function(n){var r=e._getPropertyIndex(n);if(t._allFieldsInfo.set(r,n),!n.soloDatum){var o=i.get(r).takeOne(),a={info:n,value:l.D.initWithFloat32Array(n.initialValue,n.initialValue,o,n.compositionType)};t._allFieldVariables.set(r,a),n.isCustomSetting||t._autoFieldVariablesOnly.set(r,a)}}))}},e.getLocationOffsetOfMemberOfMaterial=function(t,n){var r=e.__instances.get(t).get(0);return r._allFieldsInfo.get(n).soloDatum?f.F._soloDatumFields.get(r.materialTypeName).get(n).value._v.byteOffset/4/4:this.__accessors.get(t).get(n).byteOffsetInBuffer/4/4},e._getPropertyIndex=function(e){return e.semantic.index},e.__registerInner=function(t,n,r){var o=++e.__materialTidCount;e.__materialNodes.set(t,n),e.__materialTids.set(t,o),e.__maxInstances.set(t,r),u.Is.exist(n)&&e.__allocateBufferView(t,n),e.__materialInstanceCountOfType.set(t,0)},e.__allocateBufferView=function(t,n){var r=0,u=[],_=!0,h=!1,d=void 0;try{for(var m,v=n._semanticsInfoArray[Symbol.iterator]();!(_=(m=v.next()).done);_=!0){var p=m.value,y=(0,c.K)(p),A=1;p.soloDatum||(A=e.__maxInstances.get(t)),r+=y*A,u.push({alignedByte:y,semanticInfo:p})}}catch(e){h=!0,d=e}finally{try{_||null==v.return||v.return()}finally{if(h)throw d}}this.__accessors.has(t)||this.__accessors.set(t,new Map);var b,g=o.B.getInstance().createOrGetBuffer(i.$.GPUInstanceData);this.__bufferViews.has(t)?b=this.__bufferViews.get(t):(b=g.takeBufferView({byteLengthToNeed:r,byteStride:0}).unwrapForce(),this.__bufferViews.set(t,b));for(var x=0;x<u.length;x++){var I=u[x].alignedByte,E=u[x].semanticInfo,w=1;E.soloDatum||(w=e.__maxInstances.get(t));var S=E.arrayLength;s.d.isArray(E.compositionType)&&null==S&&(S=100);var T=b.takeAccessor({compositionType:E.compositionType,componentType:a.r.Float,count:w,byteStride:I,arrayLength:S}).unwrapForce(),C=e._getPropertyIndex(E);if(E.soloDatum){var P=T.takeOne(),R=f.F._soloDatumFields.get(t);null==R&&(R=new Map,f.F._soloDatumFields.set(t,R)),R.set(e._getPropertyIndex(E),{info:E,value:l.D.initWithFloat32Array(E.initialValue,E.initialValue,P,E.compositionType)})}else this.__accessors.get(t).set(C,T)}return b},e._makeShaderInvalidateToAllMaterials=function(){var t=!0,n=!1,r=void 0;try{for(var o,i=e.__materialMap.values()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)o.value._shaderProgramUid=-1}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},e}();_.__materialMap=new Map,_.__instances=new Map,_.__materialTids=new Map,_.__materialInstanceCountOfType=new Map,_.__materialNodes=new Map,_.__maxInstances=new Map,_.__bufferViews=new Map,_.__accessors=new Map,_.__materialTidCount=-1,_.__materialUidCount=-1},6670:(e,t,n)=>{n.d(t,{Q:()=>x});var r=n(3034),o=n.n(r),i=n(2535),a=n(3932),s=n(6221),c=n(4395),l=n(6174),u=n(9977),f=n(7416),_=n(678),h=n(7011),d=n(9513),m=n(988),v=n(2328),p=n(2863),y=n(8289),A=n(3764),b=n(2542),g=n(5685),x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.fillTemplate=function(e,t){var n=Object.assign(t,{WellKnownComponentTIDs:l.z,widthOfDataTexture:"const int widthOfDataTexture = ".concat(c.B.bufferWidthLength,";"),heightOfDataTexture:"const int heightOfDataTexture = ".concat(c.B.bufferHeightLength,";"),Config:u.D});return o().fillTemplate(e,n)},e.transformWebGLVersion=function(e,t){return t?o().transformToGLSLES3(e):o().transformToGLSLES1(e,!0)},e.getAttributeReflection=function(e){var t=o().createReflectionObject(e);return this.__setDefaultAttributeSemanticMap(t),t.reflect(),{names:t.attributesNames,semantics:t.attributesSemantics.map((function(e){return s.T.fromString(e)})),compositions:t.attributesTypes.map((function(e){return a.d.fromGlslString(e)})),components:t.attributesTypes.map((function(e){return i.r.fromGlslString(e)}))}},e.__setDefaultAttributeSemanticMap=function(e){var t=new Map;t.set("instanceinfo","INSTANCE"),t.set("barycentriccoord","BARY_CENTRIC_COORD"),e.addAttributeSemanticsMap(t)},e.getShaderDataReflection=function(e,t){var n=this.__copyShaderityObject(e),r=e.code.split(/\r\n|\n/),o=[],i=[],a=!0,s=!1,c=void 0;try{for(var l,u=r[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var f=l.value,_=f.match(/^(?![/])[\t ]*uniform[\t ]+(\w+)[\t ]+(\w+);[\t ]*(\/\/)*[\t ]*(.*)/);if(_){var h=_[1],d=_[2],m=_[4];if(this.__ignoreThisUniformDeclaration(m)){o.push(f);continue}var v=this.__createShaderSemanticsInfo(h,d,m,e.isFragmentShader,t);i.push(v)}else o.push(f)}}catch(e){s=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw c}}return n.code=o.join("\n"),{shaderSemanticsInfoArray:i,shaderityObject:n}},e.__copyShaderityObject=function(e){return{code:e.code,shaderStage:e.shaderStage,isFragmentShader:"fragment"===e.shaderStage}},e.__ignoreThisUniformDeclaration=function(e){var t=e.match(/skipProcess[\t ]*=[\t ]*(\w+)[,\t ]*/);return"true"===(null==t?void 0:t[1])},e.__createShaderSemanticsInfo=function(e,t,n,r,o){var s=i.r.fromGlslString(e),c=a.d.fromGlslString(e),l=r?g.H.PixelShader:g.H.VertexShader,u=!0,_=t.match(/u_(\w+)/);_&&(t=_[1],u=!1);var h=f.f5.fromStringCaseSensitively(t);if(null==h){var d=null==o?void 0:o.get(t);h=null!=d?d.semantic:new f.wy({str:t})}var m={semantic:h,compositionType:c,componentType:s,min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isCustomSetting:!1,stage:l,none_u_prefix:u};return this.__setRhodoniteOriginalParametersTo(m,n),m},e.__setRhodoniteOriginalParametersTo=function(e,t){var n,r=t.match(/soloDatum[\t ]*=[\t ]*(\w+)[,\t ]*/),o=!1;"true"===(null==r?void 0:r[1])&&(o=!0),e.soloDatum=o;var i=t.match(/isCustomSetting[\t ]*=[\t ]*(\w+)[,\t ]*/),a=!1;"true"===(null==i?void 0:i[1])&&(a=!0),e.isCustomSetting=a;var s=t.match(/updateInterval[\t ]*=[\t ]*(\w+)[,\t ]*/),c=_.a.FirstTimeOnly;"everytime"===(null==s||null===(n=s[1])||void 0===n?void 0:n.toLowerCase())&&(c=_.a.EveryTime),e.updateInterval=c;var l=t.match(/initialValue[\t ]*=[\t ]*(.+)[,\t ]*/);if(l){var u=l[1];e.initialValue=this.__getInitialValueFromText(e,u)}else e.initialValue=this.__getDefaultInitialValue(e);var f=t.match(/needUniformInDataTextureMode[\t ]*=[\t ]*(.+)[,\t ]*/);if(f){var h=!1;"true"===(null==f?void 0:f[1])&&(h=!0),e.needUniformInDataTextureMode=h}},e.__getInitialValueFromText=function(e,t){var n,r=t.match(/\(([\d\w., ]+)\)/),o=function(t){e.compositionType!==t&&console.error("component number of initialValue is invalid:"+e.semantic.str)};if(r){var i=r[1].split(",");switch(i.length){case 1:o(a.d.Scalar),n="true"===i[0]?new A.DU(new Float32Array([1])):"false"===i[0]?new A.DU(new Float32Array([0])):new A.DU(new Float32Array([parseFloat(i[0])]));break;case 2:if(e.compositionType===a.d.Texture2D||e.compositionType===a.d.Texture2DShadow){var s=i[1].charAt(0).toUpperCase()+i[1].slice(1);n=[parseInt(i[0]),h.P["dummy".concat(s,"Texture")]]}else if(e.compositionType===a.d.TextureCube){var c=i[1].charAt(0).toUpperCase()+i[1].slice(1);n=[parseInt(i[0]),h.P["dummy".concat(c,"CubeTexture")]]}else o(a.d.Vec2),n=d.NR.fromCopyArray([parseFloat(i[0]),parseFloat(i[1])]);break;case 3:o(a.d.Vec3),n=m.d6.fromCopyArray([parseFloat(i[0]),parseFloat(i[1]),parseFloat(i[2])]);break;case 4:o(a.d.Vec4),n=v.xQ.fromCopyArray([parseFloat(i[0]),parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3])]);break;case 9:o(a.d.Mat3),n=p.x.fromCopy9RowMajor(parseFloat(i[0]),parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]),parseFloat(i[4]),parseFloat(i[5]),parseFloat(i[6]),parseFloat(i[7]),parseFloat(i[8]));break;case 16:o(a.d.Mat4),n=y.e.fromCopy16RowMajor(parseFloat(i[0]),parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]),parseFloat(i[4]),parseFloat(i[5]),parseFloat(i[6]),parseFloat(i[7]),parseFloat(i[8]),parseFloat(i[9]),parseFloat(i[10]),parseFloat(i[11]),parseFloat(i[12]),parseFloat(i[13]),parseFloat(i[14]),parseFloat(i[15]));break;default:console.error("Invalid format")}}else o(a.d.Scalar),n="true"===t?new A.DU(new Float32Array([1])):"false"===t?new A.DU(new Float32Array([0])):new A.DU(new Float32Array([parseFloat(t)]));return n},e.__getDefaultInitialValue=function(e){return e.compositionType===a.d.Scalar?new A.DU(new Float32Array([0])):e.compositionType===a.d.Vec2?d.NR.zero():e.compositionType===a.d.Vec3?m.d6.zero():e.compositionType===a.d.Vec4?v.xQ.zero():e.compositionType===a.d.Mat2?b.f.identity():e.compositionType===a.d.Mat3?p.x.identity():e.compositionType===a.d.Mat4?y.e.identity():e.compositionType===a.d.Texture2D||e.compositionType===a.d.Texture2DShadow?[0,h.P.dummyWhiteTexture]:e.compositionType===a.d.TextureCube?[0,h.P.dummyBlackTexture]:void console.warn("initial value is not found")},e}()},6631:(e,t,n)=>{n.d(t,{m:()=>s});var r=n(6860),o=n(988),i=n(4969);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__min=o.d6.fromCopyArray([Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE]),this.__max=o.d6.fromCopyArray([-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE]),this.__centerPoint=o.d6.zero(),this.__lengthCenterToCorner=0,this.__isCenterPointDirty=!1,this.__isLengthCenterToCornerDirty=!1,this.__isVanilla=!0}var t,n,s=e.prototype;return s.clone=function(){var t=new e;return t.__max=this.__max.clone(),t.__min=this.__min.clone(),t.__centerPoint=this.__centerPoint.clone(),t.__lengthCenterToCorner=this.__lengthCenterToCorner,t.__isCenterPointDirty=this.__isCenterPointDirty,t.__isLengthCenterToCornerDirty=this.__isLengthCenterToCornerDirty,t},s.copyComponents=function(e){return this.__max.copyComponents(e.__max),this.__min.copyComponents(e.__min),this.__centerPoint.copyComponents(e.__centerPoint),this.__lengthCenterToCorner=e.__lengthCenterToCorner,this.__isCenterPointDirty=e.__isCenterPointDirty,this.__isLengthCenterToCornerDirty=e.__isLengthCenterToCornerDirty,this.__isVanilla=!1,this},s.initialize=function(){this.__min.setComponents(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.__max.setComponents(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),this.__centerPoint.zero(),this.__lengthCenterToCorner=0,this.__isCenterPointDirty=!1,this.__isLengthCenterToCornerDirty=!1,this.__isVanilla=!0},s.isVanilla=function(){return this.__isVanilla},s.addPosition=function(e){return this.__min.x=e.x<this.__min.x?e.x:this.__min.x,this.__min.y=e.y<this.__min.y?e.y:this.__min.y,this.__min.z=e.z<this.__min.z?e.z:this.__min.z,this.__max.x=this.__max.x<e.x?e.x:this.__max.x,this.__max.y=this.__max.y<e.y?e.y:this.__max.y,this.__max.z=this.__max.z<e.z?e.z:this.__max.z,this.__isCenterPointDirty=!0,this.__isLengthCenterToCornerDirty=!0,this.__isVanilla=!1,e},s.addPositionWithArray=function(e,t){return this.__min.x=e[t+0]<this.__min.x?e[t+0]:this.__min.x,this.__min.y=e[t+1]<this.__min.y?e[t+1]:this.__min.y,this.__min.z=e[t+2]<this.__min.z?e[t+2]:this.__min.z,this.__max.x=this.__max.x<e[t+0]?e[t+0]:this.__max.x,this.__max.y=this.__max.y<e[t+1]?e[t+1]:this.__max.y,this.__max.z=this.__max.z<e[t+2]?e[t+2]:this.__max.z,this.__isCenterPointDirty=!0,this.__isLengthCenterToCornerDirty=!0,this.__isVanilla=!1,e},s.mergeAABB=function(e){return!e.isVanilla()&&(this.__isCenterPointDirty=!0,this.__isLengthCenterToCornerDirty=!0,this.isVanilla()?(this.__min.copyComponents(e.minPoint),this.__max.copyComponents(e.maxPoint),this.__isVanilla=!1,!0):(e.minPoint.x<this.__min.x&&(this.__min.x=e.minPoint.x),e.minPoint.y<this.__min.y&&(this.__min.y=e.minPoint.y),e.minPoint.z<this.__min.z&&(this.__min.z=e.minPoint.z),this.__max.x<e.maxPoint.x&&(this.__max.x=e.maxPoint.x),this.__max.y<e.maxPoint.y&&(this.__max.y=e.maxPoint.y),this.__max.z<e.maxPoint.z&&(this.__max.z=e.maxPoint.z),!0))},s.toString=function(){return"AABB_min: "+this.__min+"\nAABB_max: "+this.__max+"\ncenterPoint: "+this.__centerPoint+"\nlengthCenterToCorner: "+this.__lengthCenterToCorner},s.toStringApproximately=function(){return"AABB_max: "+this.__max.toStringApproximately()+"\nAABB_min: "+this.__min.toStringApproximately()+"\ncenterPoint: "+this.__centerPoint.toStringApproximately()+"\nlengthCenterToCorner: "+i.k.financial(this.__lengthCenterToCorner)},e.multiplyMatrixTo=function(t,n,r){return n.isVanilla()?r.copyComponents(n):(r.initialize(),e.__tmpVector3.x=n.__min.x,e.__tmpVector3.y=n.__min.y,e.__tmpVector3.z=n.__min.z,t.multiplyVector3To(e.__tmpVector3,e.__tmpVector3),r.addPosition(e.__tmpVector3),e.__tmpVector3.x=n.__max.x,e.__tmpVector3.y=n.__min.y,e.__tmpVector3.z=n.__min.z,t.multiplyVector3To(e.__tmpVector3,e.__tmpVector3),r.addPosition(e.__tmpVector3),e.__tmpVector3.x=n.__min.x,e.__tmpVector3.y=n.__max.y,e.__tmpVector3.z=n.__min.z,t.multiplyVector3To(e.__tmpVector3,e.__tmpVector3),r.addPosition(e.__tmpVector3),e.__tmpVector3.x=n.__min.x,e.__tmpVector3.y=n.__min.y,e.__tmpVector3.z=n.__max.z,t.multiplyVector3To(e.__tmpVector3,e.__tmpVector3),r.addPosition(e.__tmpVector3),e.__tmpVector3.x=n.__min.x,e.__tmpVector3.y=n.__max.y,e.__tmpVector3.z=n.__max.z,t.multiplyVector3To(e.__tmpVector3,e.__tmpVector3),r.addPosition(e.__tmpVector3),e.__tmpVector3.x=n.__max.x,e.__tmpVector3.y=n.__min.y,e.__tmpVector3.z=n.__max.z,t.multiplyVector3To(e.__tmpVector3,e.__tmpVector3),r.addPosition(e.__tmpVector3),e.__tmpVector3.x=n.__max.x,e.__tmpVector3.y=n.__max.y,e.__tmpVector3.z=n.__min.z,t.multiplyVector3To(e.__tmpVector3,e.__tmpVector3),r.addPosition(e.__tmpVector3),e.__tmpVector3.x=n.__max.x,e.__tmpVector3.y=n.__max.y,e.__tmpVector3.z=n.__max.z,t.multiplyVector3To(e.__tmpVector3,e.__tmpVector3),r.addPosition(e.__tmpVector3),r)},t=e,(n=[{key:"minPoint",get:function(){return this.__min},set:function(e){this.__min.copyComponents(e),this.__isCenterPointDirty=!0,this.__isLengthCenterToCornerDirty=!0,this.__isVanilla=!1}},{key:"maxPoint",get:function(){return this.__max},set:function(e){this.__max.copyComponents(e),this.__isCenterPointDirty=!0,this.__isLengthCenterToCornerDirty=!0,this.__isVanilla=!1}},{key:"centerPoint",get:function(){return this.__isCenterPointDirty&&(o.d6.addTo(this.__min,this.__max,this.__centerPoint).divide(2),this.__isCenterPointDirty=!1),this.__centerPoint}},{key:"lengthCenterToCorner",get:function(){return this.__isLengthCenterToCornerDirty&&(this.__lengthCenterToCorner=r.P.lengthBtw(this.centerPoint,this.maxPoint),this.__isLengthCenterToCornerDirty=!1),this.__lengthCenterToCorner}},{key:"sizeX",get:function(){return this.__max.x-this.__min.x}},{key:"sizeY",get:function(){return this.__max.y-this.__min.y}},{key:"sizeZ",get:function(){return this.__max.z-this.__min.z}}])&&a(t.prototype,n),e}();s.__tmpVector3=o.d6.zero()},2507:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,{X:()=>o});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._v=new Float32Array}var t,n,o=e.prototype;return o.at=function(e,t){throw new Error("Method not implemented.")},o.toString=function(){throw new Error("Method not implemented.")},o.toStringApproximately=function(){throw new Error("Method not implemented.")},o.flattenAsArray=function(){throw new Error("Method not implemented.")},o.isDummy=function(){return 0===this._v.length},o.v=function(e){return this._v[e]},o.determinant=function(){throw new Error("Method not implemented.")},o.isTheSourceSame=function(e){return this._v.buffer===e},t=e,(n=[{key:"className",get:function(){return this.constructor.name}},{key:"isIdentityMatrixClass",get:function(){return!1}}])&&r(t.prototype,n),e}()},7586:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,{l:()=>o});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._v=new Float32Array}var t,n,o=e.prototype;return o.at=function(e){return this._v[e]},o.length=function(){return Math.hypot(this._v[0],this._v[1],this._v[2],this._v[3])},o.lengthSquared=function(){return Math.pow(this._v[0],2)+Math.pow(this._v[1],2)+Math.pow(this._v[2],2)+Math.pow(this._v[3],2)},o.toString=function(){throw new Error("Method not implemented.")},o.toStringApproximately=function(){throw new Error("Method not implemented.")},o.flattenAsArray=function(){throw new Error("Method not implemented.")},o.isDummy=function(){throw new Error("Method not implemented.")},o.isEqual=function(e,t){throw new Error("Method not implemented.")},o.isStrictEqual=function(e){throw new Error("Method not implemented.")},o.toEulerAnglesTo=function(e){throw new Error("Method not implemented.")},o.transformVector3=function(e){throw new Error("Method not implemented.")},o.transformVector3Inverse=function(e){throw new Error("Method not implemented.")},o.dot=function(e){return this._v[0]*e._v[0]+this._v[1]*e._v[1]+this._v[2]*e._v[2]+this._v[3]*e._v[3]},o.clone=function(){throw new Error("Method not implemented.")},t=e,(n=[{key:"className",get:function(){return this.constructor.name}},{key:"x",get:function(){return this._v[0]}},{key:"y",get:function(){return this._v[1]}},{key:"z",get:function(){return this._v[2]}},{key:"w",get:function(){return this._v[3]}}])&&r(t.prototype,n),e}()},2199:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,{O:()=>o});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._v=new Float32Array}var t,n,o=e.prototype;return o.isEqual=function(e,t){throw new Error("Method not implemented.")},o.isStrictEqual=function(e){throw new Error("Method not implemented.")},o.length=function(){throw new Error("Method not implemented.")},o.lengthSquared=function(){throw new Error("Method not implemented.")},o.lengthTo=function(e){throw new Error("Method not implemented.")},o.dot=function(e){throw new Error("Method not implemented.")},o.at=function(e){return this._v[e]},o.toString=function(){throw new Error("Method not implemented.")},o.toStringApproximately=function(){throw new Error("Method not implemented.")},o.flattenAsArray=function(){throw new Error("Method not implemented.")},o.isDummy=function(){return 0===this._v.length},o.v=function(e){return this._v[e]},o.isTheSourceSame=function(e){return this._v.buffer===e},t=e,(n=[{key:"glslStrAsFloat",get:function(){throw new Error("Method not implemented.")}},{key:"glslStrAsInt",get:function(){throw new Error("Method not implemented.")}},{key:"className",get:function(){return this.constructor.name}},{key:"bytesPerComponent",get:function(){throw new Error("Method not implemented.")}}])&&r(t.prototype,n),e}()},8107:(e,t,n)=>{n.d(t,{s:()=>u});var r=n(6860);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},i(e,t,n||e)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}var l=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,e);var t,n,r,l,u=(r=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(r);if(l){var n=a(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return s(this,e)});function f(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),u.call(this,e)}return f.prototype.clone=function(){return i(a(f.prototype),"clone",this).call(this)},f.zero=function(){return i(a(f),"_zero",this).call(this,Float32Array)},f.one=function(){return i(a(f),"_one",this).call(this,Float32Array)},f.dummy=function(){return i(a(f),"_dummy",this).call(this,Float32Array)},f.normalize=function(e){return i(a(f),"_normalize",this).call(this,e,Float32Array)},f.add=function(e,t){return i(a(f),"_add",this).call(this,e,t,Float32Array)},f.subtract=function(e,t){return i(a(f),"_subtract",this).call(this,e,t,Float32Array)},f.multiply=function(e,t){return i(a(f),"_multiply",this).call(this,e,t,Float32Array)},f.multiplyVector=function(e,t){return i(a(f),"_multiplyVector",this).call(this,e,t,Float32Array)},f.divide=function(e,t){return i(a(f),"_divide",this).call(this,e,t,Float32Array)},f.divideVector=function(e,t){return i(a(f),"_divideVector",this).call(this,e,t,Float32Array)},f.cross=function(e,t){return i(a(f),"_cross",this).call(this,e,t,Float32Array)},t=f,(n=[{key:"x",get:function(){return this._v[0]}},{key:"y",get:function(){return this._v[1]}},{key:"z",get:function(){return this._v[2]}},{key:"w",get:function(){return 1}},{key:"r",get:function(){return this._v[0]}},{key:"g",get:function(){return this._v[1]}},{key:"b",get:function(){return this._v[2]}},{key:"a",get:function(){return 1}}])&&o(t.prototype,n),f}(r.P)},344:(e,t,n)=>{n.d(t,{c:()=>f});var r=n(3932),o=n(2507),i=n(6860);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function c(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}var u=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,o=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return c(this,e)});function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=o.call(this))._v=u.__v,e}var f,_,h,d=u.prototype;return d.toString=function(){return"1 0 0\n0 1 0\n0 0 1\n"},d.toStringApproximately=function(){return this.toString()},d.flattenAsArray=function(){return[1,0,0,0,1,0,0,0,1]},d.isDummy=function(){return!1},d.isEqual=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;return Math.abs(e.m00-1)<t&&Math.abs(e.m10)<t&&Math.abs(e.m20)<t&&Math.abs(e.m01)<t&&Math.abs(e.m11-1)<t&&Math.abs(e.m21)<t&&Math.abs(e.m02)<t&&Math.abs(e.m12)<t&&Math.abs(e.m22-1)<t},d.isStrictEqual=function(e){var t=e._v;return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&0===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&0===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&0===t[15]},d.at=function(e,t){return e===t?1:0},d.determinant=function(){return 1},d.multiplyVector=function(e){return e},d.multiplyVectorTo=function(e,t){var n=e._v;return t._v[0]=n[0],t._v[1]=n[1],t._v[2]=n[2],t._v[3]=n[3],t},d.getScale=function(){return i.P.fromCopyArray([1,1,1])},d.getScaleTo=function(e){var t=e._v;return t[0]=1,t[1]=1,t[2]=1,e},d.clone=function(){return new u},d.getRotate=function(){return new u},f=u,h=[{key:"compositionType",get:function(){return r.d.Mat3}}],(_=[{key:"m00",get:function(){return 1}},{key:"m10",get:function(){return 0}},{key:"m20",get:function(){return 0}},{key:"m30",get:function(){return 0}},{key:"m01",get:function(){return 0}},{key:"m11",get:function(){return 1}},{key:"m21",get:function(){return 0}},{key:"m31",get:function(){return 0}},{key:"m02",get:function(){return 0}},{key:"m12",get:function(){return 0}},{key:"m22",get:function(){return 1}},{key:"m32",get:function(){return 0}},{key:"m03",get:function(){return 0}},{key:"m13",get:function(){return 0}},{key:"m23",get:function(){return 0}},{key:"m33",get:function(){return 1}},{key:"className",get:function(){return"IdentityMatrix33"}},{key:"isIdentityMatrixClass",get:function(){return!0}}])&&a(f.prototype,_),h&&a(f,h),u}(o.X);f.__v=new Float32Array([1,0,0,0,1,0,0,0,1])},2424:(e,t,n)=>{n.d(t,{a:()=>f});var r=n(3932),o=n(2507),i=n(6860);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function c(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}var u=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,o=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return c(this,e)});function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=o.call(this))._v=u.__v,e}var f,_,h,d=u.prototype;return d.toString=function(){return"1 0 0 0\n0 1 0 0\n0 0 1 0\n0 0 0 1\n"},d.toStringApproximately=function(){return this.toString()},d.flattenAsArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},d.isDummy=function(){return!1},d.isEqual=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;return Math.abs(e.m00-1)<t&&Math.abs(e.m10)<t&&Math.abs(e.m20)<t&&Math.abs(e.m30)<t&&Math.abs(e.m01)<t&&Math.abs(e.m11-1)<t&&Math.abs(e.m21)<t&&Math.abs(e.m31)<t&&Math.abs(e.m02)<t&&Math.abs(e.m12)<t&&Math.abs(e.m22-1)<t&&Math.abs(e.m32)<t&&Math.abs(e.m03)<t&&Math.abs(e.m13)<t&&Math.abs(e.m23)<t&&Math.abs(e.m33-1)<t},d.isStrictEqual=function(e){var t=e._v;return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]},d.at=function(e,t){return e===t?1:0},d.v=function(e){return e%5==0?1:0},d.determinant=function(){return 1},d.multiplyVector=function(e){return e},d.multiplyVector3=function(e){return e},d.multiplyVectorTo=function(e,t){var n=e._v;return t._v[0]=n[0],t._v[1]=n[1],t._v[2]=n[2],t._v[3]=n[3],t},d.getScale=function(){return i.P.one()},d.getScaleTo=function(e){var t=e._v;return t[0]=1,t[1]=1,t[2]=1,e},d.clone=function(){return new u},d.getRotate=function(){return new u},d.getTranslate=function(){return i.P.zero()},f=u,h=[{key:"compositionType",get:function(){return r.d.Mat4}}],(_=[{key:"m00",get:function(){return 1}},{key:"m10",get:function(){return 0}},{key:"m20",get:function(){return 0}},{key:"m30",get:function(){return 0}},{key:"m01",get:function(){return 0}},{key:"m11",get:function(){return 1}},{key:"m21",get:function(){return 0}},{key:"m31",get:function(){return 0}},{key:"m02",get:function(){return 0}},{key:"m12",get:function(){return 0}},{key:"m22",get:function(){return 1}},{key:"m32",get:function(){return 0}},{key:"m03",get:function(){return 0}},{key:"m13",get:function(){return 0}},{key:"m23",get:function(){return 0}},{key:"m33",get:function(){return 1}},{key:"translateX",get:function(){return 0}},{key:"translateY",get:function(){return 0}},{key:"translateZ",get:function(){return 0}},{key:"className",get:function(){return"IdentityMatrix44"}},{key:"isIdentityMatrixClass",get:function(){return!0}}])&&a(f.prototype,_),h&&a(f,h),u}(o.X);f.__v=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},9409:(e,t,n)=>{n.d(t,{D:()=>b});var r=n(8020),o=n(6860),i=n(6264),a=n(5233),s=n(6386),c=n(7468),l=n(3932),u=n(8289),f=n(2863),_=n(2328),h=n(988),d=n(9513),m=n(1811),v=n(8776),p=n(3764),y=n(2175);function A(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.arrayToVector=function(e){return Array.isArray(e)?void 0!==e[3]?i.Lt.fromCopyArray([e[0],e[1],e[2],e[3]]):void 0!==e[2]?o.P.fromCopyArray([e[0],e[1],e[2]]):r.FM.fromCopyArray2([e[0],e[1]]):e},e.arrayToVectorOrMatrix=function(e){return Array.isArray(e)?void 0!==e[15]?c.J.fromCopyArrayRowMajor(e):void 0!==e[8]?s.h.fromCopyArrayRowMajor(e):void 0!==e[3]?i.Lt.fromCopyArray([e[0],e[1],e[2],e[3]]):void 0!==e[2]?o.P.fromCopyArray([e[0],e[1],e[2]]):r.FM.fromCopyArray2([e[0],e[1]]):e},e.getImmutableValueClass=function(e){return e===l.d.Vec2?r.FM:e===l.d.Vec3?o.P:e===l.d.Vec4?i.Lt:e===l.d.Mat3?s.h:e===l.d.Mat4?c.J:void 0},e.getMutableValueClass=function(e){return e===l.d.Vec2?d.NR:e===l.d.Vec3?h.d6:e===l.d.Vec4?_.xQ:e===l.d.Mat3?f.x:e===l.d.Mat4?u.e:void 0},e.cloneOfMathObjects=function(e){return A(e,c.J)||A(e,s.h)||A(e,i.Lt)||A(e,o.P)||A(e,r.FM)?e.clone():e},e.isAcceptableArrayForQuaternion=function(e){return!(!Array.isArray(e)||void 0===e[3])},e.arrayToQuaternion=function(e){return a._.fromCopy4(e[0],e[1],e[2],e[3])},e.makeSubArray=function(e,t){return 4===t?[e[0],e[1],e[2],e[3]]:3===t?[e[0],e[1],e[2]]:2===t?[e[0],e[1]]:e[0]},e.vectorToArray=function(e){return A(e,r.FM)?[e.x,e.y]:A(e,o.P)?[e.x,e.y,e.z]:A(e,i.Lt)||A(e,a._)?[e.x,e.y,e.z,e.w]:e},e.componentNumberOfVector=function(e){return A(e,r.FM)?2:A(e,o.P)?3:A(e,i.Lt)||A(e,a._)?4:Array.isArray(e)?e.length:0},e.packNormalizedVec4ToVec2=function(e,t,n,r,o){return e=(e+1)/2,t=(t+1)/2,n=(n+1)/2,r=(r+1)/2,[(Math.floor(e*(o-1))*o+Math.floor(t*(o-1)))/o,(Math.floor(n*(o-1))*o+Math.floor(r*(o-1)))/o]},e.unProjectTo=function(e,t,n,r,o,i){var a=this.__tmpVector4_0.setComponents((e-o.x)/o.z*2-1,(t-o.y)/o.w*2-1,2*n-1,1),s=r.multiplyVectorTo(a,this.__tmpVector4_1);return 0===s.w&&console.error("0 division occurred!"),h.d6.multiplyTo(s,1/s.w,i)},e.add=function(e,t){if(isFinite(e))return e+t;if(A(e,r.FM))return r.FM.add(e,t);if(A(e,o.P))return o.P.add(e,t);if(A(e,i.Lt))return i.Lt.add(e,t);if(A(e,a._))return a._.add(e,t);if(Array.isArray(e)){for(var n=[],s=0;s<e.length;s++)n[s]=e[s]+t[s];return n}console.error("Non supported type!")},e.subtract=function(e,t){if(isFinite(e))return e-t;if(A(e,r.FM))return r.FM.subtract(e,t);if(A(e,o.P))return o.P.subtract(e,t);if(A(e,i.Lt))return i.Lt.subtract(e,t);if(A(e,a._))return a._.subtract(e,t);if(Array.isArray(e)){for(var n=[],s=0;s<e.length;s++)n[s]=e[s]-t[s];return n}console.error("Non supported type!")},e.multiplyNumber=function(e,t){if(isFinite(e))return e*t;if(A(e,r.FM))return r.FM.multiply(e,t);if(A(e,o.P))return o.P.multiply(e,t);if(A(e,i.Lt))return i.Lt.multiply(e,t);if(A(e,a._))return a._.multiplyNumber(e,t);if(Array.isArray(e)){for(var n=[],s=0;s<e.length;s++)n[s]=e[s]*t;return n}console.error("Non supported type!")},e.divideNumber=function(e,t){if(isFinite(e))return e/t;if(A(e,r.FM))return r.FM.multiply(e,1/t);if(A(e,o.P))return o.P.multiply(e,1/t);if(A(e,i.Lt))return i.Lt.multiply(e,1/t);if(A(e,a._))return a._.multiplyNumber(e,1/t);if(Array.isArray(e)){for(var n=[],s=0;s<e.length;s++)n[s]=e[s]/t;return n}console.error("Non supported type!")},e.initWithScalar=function(e,t){if(isFinite(e))return t;if(A(e,r.FM))return r.FM.fromCopyArray2([t,t]);if(A(e,o.P))return o.P.fromCopyArray([t,t,t]);if(A(e,i.Lt))return i.Lt.fromCopyArray([t,t,t,t]);if(A(e,a._))return a._.fromCopy4(0,0,0,1);if(Array.isArray(e)){for(var n=[],s=0;s<e.length;s++)n[s]=t;return n}console.error("Non supported type!")},e.initWithFloat32Array=function(e,t,n,l){var b;if(isFinite(e)){var g=new Float32Array(n);return n._v=void 0,g[0]=t,new m.Ru(g)}if(A(e,m.Ru)||A(e,p.DU))n[0]=t.x,b=new p.DU(n);else if(A(e,r.FM)||A(e,d.NR))n[0]=t.x,n[1]=t.y,b=new d.NR(n);else if(A(e,o.P)||A(e,h.d6))n[0]=t.x,n[1]=t.y,n[2]=t.z,b=h.d6.fromFloat32Array(n);else if(A(e,i.Lt)||A(e,_.xQ))n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w,b=new _.xQ(n);else if(A(e,a._)||A(e,v.y))n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w,b=new v.y(n);else if(A(e,s.h)||A(e,f.x))(b=null==b?new f.x(n):b).m00=t.m00,b.m01=t.m01,b.m02=t.m02,b.m10=t.m10,b.m11=t.m11,b.m12=t.m12,b.m20=t.m20,b.m21=t.m21,b.m22=t.m22;else if(A(e,c.J)||A(e,u.e))(b=new u.e(n)).m00=t.m00,b.m01=t.m01,b.m02=t.m02,b.m03=t.m03,b.m10=t.m10,b.m11=t.m11,b.m12=t.m12,b.m13=t.m13,b.m20=t.m20,b.m21=t.m21,b.m22=t.m22,b.m23=t.m23,b.m30=t.m30,b.m31=t.m31,b.m32=t.m32,b.m33=t.m33;else{if(!A(e,y.j)){if(null==e){var x;switch(n.length){case 4:x=i.Lt.fromCopyFloat32Array(n);break;case 3:x=o.P.fromCopyFloat32Array(n);break;case 2:x=new r.FM(n);break;case 1:x=new m.Ru(n)}return n._v=void 0,x}return Array.isArray(e)||ArrayBuffer.isView(e)||ArrayBuffer.isView(e._v)?e:void console.error("Non supported type!")}for(var I=0;I<t._v.length;I++)n[I]=t._v[I];b=new y.j(n)}return n._v=void 0,b},e._setForce=function(e,t){if(A(e,i.Lt)||A(e,_.xQ))e._v[0]=t._v[0],e._v[1]=t._v[1],e._v[2]=t._v[2],e._v[3]=t._v[3];else if(A(e,o.P)||A(e,h.d6))e._v[0]=t._v[0],e._v[1]=t._v[1],e._v[2]=t._v[2];else if(A(e,r.FM)||A(e,d.NR))e._v[0]=t._v[0],e._v[1]=t._v[1];else if(A(e,m.Ru)||A(e,p.DU))void 0===t._v?e._v[0]=t:e._v[0]=t._v[0];else if(A(e,s.h)||A(e,f.x))e._v[0]=t._v[0],e._v[1]=t._v[1],e._v[2]=t._v[2],e._v[3]=t._v[3],e._v[4]=t._v[4],e._v[5]=t._v[5],e._v[6]=t._v[6],e._v[7]=t._v[7],e._v[8]=t._v[8];else if(A(e,c.J)||A(e,u.e))e._v[0]=t._v[0],e._v[1]=t._v[1],e._v[2]=t._v[2],e._v[3]=t._v[3],e._v[4]=t._v[4],e._v[5]=t._v[5],e._v[6]=t._v[6],e._v[7]=t._v[7],e._v[8]=t._v[8],e._v[9]=t._v[9],e._v[10]=t._v[10],e._v[11]=t._v[11],e._v[12]=t._v[12],e._v[13]=t._v[13],e._v[14]=t._v[14],e._v[15]=t._v[15];else if(A(e,a._)||A(e,v.y))e._v[0]=t._v[0],e._v[1]=t._v[1],e._v[2]=t._v[2],e._v[3]=t._v[3];else if(A(e,y.j)){var n;n=A(t,y.j)?t._v:t;for(var l=0;l<n.length;l++)e._v[l]=n[l]}else if(Array.isArray(e))for(var b=0;b<e.length;b++)e[b]=t._v[b];else if(isNaN(e._v.length))console.warn("Unknown type _setForce");else for(var g=0;g<e._v.length;g++)Array.isArray(t)?e._v[g]=t[g]:e._v[g]=t._v[g]},e}();b.__tmpVector4_0=_.xQ.zero(),b.__tmpVector4_1=_.xQ.zero()},4969:(e,t,n)=>{function r(e){return 0==(e&e-1)}n.d(t,{k:()=>o});var o=Object.freeze({radianToDegree:function(e){return 180*e/Math.PI},degreeToRadian:function(e){return e*Math.PI/180},toHalfFloat:function(){return function(e){var t=new Float32Array(1),n=new Int32Array(t.buffer);t[0]=e;var r=n[0],o=r>>16&32768,i=r>>12&2047,a=r>>23&255;return a<103?o:a>142?(o|=31744,o|=(255==a?0:1)&&8388607&r):a<113?o|=((i|=2048)>>114-a)+(i>>113-a&1):(o|=a-112<<10|i>>1,o+=1&i)}},isPowerOfTwo:r,isPowerOfTwoTexture:function(e,t){return r(e)&&r(t)},packNormalizedVec4ToVec2:function(e,t,n,r,o){return e=(e+1)/2,t=(t+1)/2,n=(n+1)/2,r=(r+1)/2,[(Math.floor(e*(o-1))*o+Math.floor(t*(o-1)))/o,(Math.floor(n*(o-1))*o+Math.floor(r*(o-1)))/o]},convertToStringAsGLSLFloat:function(e){return Number.isInteger(e)?"".concat(e,".0"):""+e},nearZeroToZero:function(e){return Math.abs(e)<1e-5?e=0:.99999<e&&e<1.00001?e=1:-1.00001<e&&e<-.99999&&(e=-1),e},gaussianCdf:function(e,t,n){return.5*(1+function(e){var t=1;e<0&&(t=-1);var n=1/(1+.3275911*(e=Math.abs(e)));return t*(1-((((1.061405429*n-1.453152027)*n+1.421413741)*n-.284496736)*n+.254829592)*n*Math.exp(-e*e))}((e-t)/(n*Math.sqrt(2))))},invGaussianCdf:function(e,t,n){return n*Math.sqrt(2)*(r=2*e-1,((o=-Math.log((1-r)*(1+r)))<5?1.50140941+(.246640727+(((.00021858087+(((3.43273939e-7+2.81022636e-8*(o-=2.5))*o-35233877e-13)*o-439150654e-14)*o)*o-.00125372503)*o-.00417768164)*o)*o:2.83297682+(1.00167406+(.00943887047+((.00573950773+((.00134934322+(.000100950558+-.000200214257*(o=Math.sqrt(o)-3))*o)*o-.00367342844)*o)*o-.0076224613)*o)*o)*o)*r)+t;var r,o},computeEigenValuesAndVectors:function(e,t,n){for(var r=0,o=0,i=0,a=0,s=0,c=0,l=0,u=0,f=0,_=0,h=0;h<3;h++){t.setAt(h,h,1);for(var d=0;d<h;d++)t.setAt(h,d,0),t.setAt(d,h,0)}for(var m=0;m<3;m++)n.setAt(m,e.at(m,m));r=0;for(var v=0;v<3;v++)r+=Math.abs(n.at(v));r*=r;for(var p=0;p<50;p++){o=0;for(var y=0;y<3;y++)for(var A=y+1;A<3;A++)o+=Math.abs(e.at(y,A));if(0==o)return 0;_=p<4?.2*o/9:0;for(var b=0;b<3;b++)for(var g=b+1;g<3;g++)if(c=100*Math.abs(e.at(b,g)),p>4&&Math.abs(n.at(b))+c==Math.abs(n.at(b))&&Math.abs(n.at(g))+c==Math.abs(n.at(g)))e.setAt(b,g,0);else if(Math.abs(e.at(b,g))>_){l=n.at(g)-n.at(b),i=(s=Math.abs(l)+c==Math.abs(l)?e.at(b,g)/l:(f=.5*l/e.at(b,g))<0?-1/(Math.sqrt(1+f*f)-f):1/(Math.sqrt(1+f*f)+f))*(a=1/Math.sqrt(1+s*s)),u=s*e.at(b,g),e.setAt(b,g,0),n.setAt(b,n.at(b)-u),n.setAt(g,n.at(g)+u);for(var x=0;x<b;x++)s=e.at(x,b),e.setAt(x,b,a*s-i*e.at(x,g)),e.setAt(x,g,i*s+a*e.at(x,g));for(var I=b+1;I<g;I++)s=e.at(b,I),e.setAt(b,I,a*s-i*e.at(I,g)),e.setAt(I,g,i*s+a*e.at(I,g));for(var E=g+1;E<3;E++)s=e.at(b,E),e.setAt(b,E,a*s-i*e.at(g,E)),e.setAt(g,E,i*s+a*e.at(g,E));for(var w=0;w<3;w++)s=t.at(w,b),t.setAt(w,b,a*s-i*t.at(w,g)),t.setAt(w,g,i*s+a*t.at(w,g))}}return-1},computeGaussianDistributionRatioWhoseSumIsOne:function(e){for(var t=e.kernelSize,n=e.variance,r=e.mean,o=void 0===r?0:r,i=e.effectiveDigit,a=void 0===i?4:i,s=Math.ceil(t/2),c=new Array(s),l=0,u=0;u<s;u++)c[u]=Math.exp(-Math.pow(u-o,2)/(2*n)),l+=c[u];l*=2,t/2%2!=0&&(l-=c[0]);for(var f=new Array(t),_=0,h=Math.pow(10,a),d=0;d<s-1;d++){var m=c[s-1-d]/l;m*=h,m=Math.round(m),m/=h,f[d]=m,f[t-1-d]=m,_+=2*m}if(t%2==0){var v=(1-_)/2;f[s-1]=v,f[s]=v}else{var p=1-_;f[s-1]=p}return f},roundAsFloat:function(e){return Math.round(1e7*e)/1e7},financial:function(e){var t=Number.parseFloat(e).toFixed(7);return e>=0?" "+t:t}})},4191:(e,t,n)=>{n.d(t,{a:()=>_});var r=n(3932),o=n(8020),i=n(4969),a=n(2507);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}var f=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(f,e);var t,n,a=(t=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=c(t);if(n){var o=c(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return l(this,e)});function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=a.call(this))._v=e,t}var _,h,d,m=f.prototype;return m.toString=function(){return this._v[0]+" "+this._v[2]+"\n"+this._v[1]+" "+this._v[3]+" \n"},m.toStringApproximately=function(){return i.k.financial(this._v[0])+" "+i.k.financial(this._v[2])+"\n"+i.k.financial(this._v[1])+" "+i.k.financial(this._v[3])+" \n"},m.flattenAsArray=function(){return[this._v[0],this._v[1],this._v[2],this._v[3]]},m.isDummy=function(){return 0===this._v.length},m.isEqual=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;return Math.abs(e._v[0]-this._v[0])<t&&Math.abs(e._v[1]-this._v[1])<t&&Math.abs(e._v[2]-this._v[2])<t&&Math.abs(e._v[3]-this._v[3])<t},m.isStrictEqual=function(e){return e._v[0]===this._v[0]&&e._v[1]===this._v[1]&&e._v[2]===this._v[2]&&e._v[3]===this._v[3]},m.at=function(e,t){return this._v[e+2*t]},m.determinant=function(){return this._v[0]*this._v[3]-this._v[1]*this._v[2]},m.multiplyVector=function(e){var t=this._v[0]*e._v[0]+this._v[2]*e._v[1],n=this._v[1]*e._v[0]+this._v[3]*e._v[1];return o.FM.fromCopyArray2([t,n])},m.multiplyVectorTo=function(e,t){var n=this._v[0]*e._v[0]+this._v[2]*e._v[1],r=this._v[1]*e._v[0]+this._v[3]*e._v[1];return t._v[0]=n,t._v[1]=r,t},m.getScale=function(){return o.FM.fromCopyArray2([Math.hypot(this.m00,this.m01),Math.hypot(this.m10,this.m11)])},m.getScaleTo=function(e){return e._v[0]=Math.hypot(this._v[0],this._v[2]),e._v[1]=Math.hypot(this._v[1],this._v[3]),e},m.clone=function(){return this.constructor.fromCopy4RowMajor(this._v[0],this._v[2],this._v[1],this._v[3])},f.zero=function(){return f.fromCopy4RowMajor(0,0,0,0)},f.identity=function(){return f.fromCopy4RowMajor(1,0,0,1)},f.dummy=function(){return new this(new Float32Array(0))},f.transpose=function(e){return f.fromCopy4RowMajor(e._v[0],e._v[1],e._v[2],e._v[3])},f.invert=function(e){var t=e.determinant();0===t&&console.error("the determinant is 0!");var n=e._v[3]/t,r=e._v[2]/t*-1,o=e._v[1]/t*-1,i=e._v[0]/t;return f.fromCopy4RowMajor(n,r,o,i)},f.invertTo=function(e,t){var n=e.determinant();0===n&&console.error("the determinant is 0!");var r=e._v[3]/n,o=e._v[2]/n*-1,i=e._v[1]/n*-1,a=e._v[0]/n;return t.setComponents(r,o,i,a)},f.rotate=function(e){var t=Math.cos(e),n=Math.sin(e);return f.fromCopy4RowMajor(t,-n,n,t)},f.scale=function(e){return f.fromCopy4RowMajor(e._v[0],0,0,e._v[1])},f.multiply=function(e,t){var n=e._v[0]*t._v[0]+e._v[2]*t._v[1],r=e._v[1]*t._v[0]+e._v[3]*t._v[1],o=e._v[0]*t._v[2]+e._v[2]*t._v[3],i=e._v[1]*t._v[2]+e._v[3]*t._v[3];return f.fromCopy4RowMajor(n,o,r,i)},f.multiplyTo=function(e,t,n){var r=e._v[0]*t._v[0]+e._v[2]*t._v[1],o=e._v[1]*t._v[0]+e._v[3]*t._v[1],i=e._v[0]*t._v[2]+e._v[2]*t._v[3],a=e._v[1]*t._v[2]+e._v[3]*t._v[3];return n.setComponents(r,i,o,a)},f.fromCopy4RowMajor=function(e,t,n,r){var o=new Float32Array(4);return o[0]=e,o[2]=t,o[1]=n,o[3]=r,new f(o)},f.fromCopy4ColumnMajor=function(e,t,n,r){var o=new Float32Array(4);return o[0]=e,o[2]=n,o[1]=t,o[3]=r,new f(o)},f.fromFloat32ArrayColumnMajor=function(e){return new f(e)},f.fromCopyFloat32ArrayColumnMajor=function(e){var t=new Float32Array(4);return t.set(e),new f(t)},f.fromCopyFloat32ArrayRowMajor=function(e){var t=new Float32Array(4);return t[0]=e[0],t[3]=e[1],t[1]=e[2],t[4]=e[3],new f(t)},f.fromCopyMatrix22=function(e){var t=new Float32Array(4);return t[0]=e._v[0],t[3]=e._v[1],t[1]=e._v[2],t[4]=e._v[3],new f(t)},f.fromCopyArray9ColumnMajor=function(e){var t=new Float32Array(4);return t.set(e),new f(t)},f.fromCopyArrayColumnMajor=function(e){var t=new Float32Array(4);return t.set(e),new f(t)},f.fromCopyArray9RowMajor=function(e){var t=new Float32Array(4);return t[0]=e[0],t[3]=e[1],t[1]=e[2],t[4]=e[3],new f(t)},f.fromCopyArrayRowMajor=function(e){var t=new Float32Array(4);return t[0]=e[0],t[3]=e[1],t[1]=e[2],t[4]=e[3],new f(t)},_=f,d=[{key:"compositionType",get:function(){return r.d.Mat2}}],(h=[{key:"m00",get:function(){return this._v[0]}},{key:"m10",get:function(){return this._v[1]}},{key:"m01",get:function(){return this._v[2]}},{key:"m11",get:function(){return this._v[3]}},{key:"className",get:function(){return"Matrix22"}}])&&s(_.prototype,h),d&&s(_,d),f}(a.X)},6386:(e,t,n)=>{n.d(t,{h:()=>h});var r=n(6860),o=n(3932),i=n(4969),a=n(2507),s=n(344);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function u(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var _=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(_,e);var t,n,a=(t=_,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=l(t);if(n){var o=l(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return u(this,e)});function _(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(t=a.call(this))._v=e,t}var h,d,m,v=_.prototype;return v.toString=function(){return this._v[0]+" "+this._v[3]+" "+this._v[6]+"\n"+this._v[1]+" "+this._v[4]+" "+this._v[7]+"\n"+this._v[2]+" "+this._v[5]+" "+this._v[8]+"\n"},v.toStringApproximately=function(){return i.k.financial(this._v[0])+" "+i.k.financial(this._v[3])+" "+i.k.financial(this._v[6])+"\n"+i.k.financial(this._v[1])+" "+i.k.financial(this._v[4])+" "+i.k.financial(this._v[7])+" \n"+i.k.financial(this._v[2])+" "+i.k.financial(this._v[5])+" "+i.k.financial(this._v[8])+"\n"},v.flattenAsArray=function(){return[this._v[0],this._v[1],this._v[2],this._v[3],this._v[4],this._v[5],this._v[6],this._v[7],this._v[8]]},v.isDummy=function(){return 0===this._v.length},v.isEqual=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;return Math.abs(e._v[0]-this._v[0])<t&&Math.abs(e._v[1]-this._v[1])<t&&Math.abs(e._v[2]-this._v[2])<t&&Math.abs(e._v[3]-this._v[3])<t&&Math.abs(e._v[4]-this._v[4])<t&&Math.abs(e._v[5]-this._v[5])<t&&Math.abs(e._v[6]-this._v[6])<t&&Math.abs(e._v[7]-this._v[7])<t&&Math.abs(e._v[8]-this._v[8])<t},v.isStrictEqual=function(e){return e._v[0]===this._v[0]&&e._v[1]===this._v[1]&&e._v[2]===this._v[2]&&e._v[3]===this._v[3]&&e._v[4]===this._v[4]&&e._v[5]===this._v[5]&&e._v[6]===this._v[6]&&e._v[7]===this._v[7]&&e._v[8]===this._v[8]},v.at=function(e,t){return this._v[e+3*t]},v.v=function(e){return this._v[e]},v.determinant=function(){return this._v[0]*this._v[4]*this._v[8]+this._v[1]*this._v[5]*this._v[6]+this._v[2]*this._v[3]*this._v[7]-this._v[0]*this._v[5]*this._v[7]-this._v[2]*this._v[4]*this._v[6]-this._v[1]*this._v[3]*this._v[8]},v.multiplyVector=function(e){var t=this._v[0]*e._v[0]+this._v[3]*e._v[1]+this._v[6]*e._v[2],n=this._v[1]*e._v[0]+this._v[4]*e._v[1]+this._v[7]*e._v[2],r=this._v[2]*e._v[0]+this._v[5]*e._v[1]+this._v[8]*e._v[2];return new e.constructor(new Float32Array([t,n,r]))},v.multiplyVectorTo=function(e,t){var n=this._v[0]*e._v[0]+this._v[3]*e._v[1]+this._v[6]*e._v[2],r=this._v[1]*e._v[0]+this._v[4]*e._v[1]+this._v[7]*e._v[2],o=this._v[2]*e._v[0]+this._v[5]*e._v[1]+this._v[8]*e._v[2];return t._v[0]=n,t._v[1]=r,t._v[2]=o,t},v.getScale=function(){return r.P.fromCopyArray([Math.hypot(this._v[0],this._v[3],this._v[6]),Math.hypot(this._v[1],this._v[4],this._v[7]),Math.hypot(this._v[2],this._v[5],this._v[8])])},v.getScaleTo=function(e){return e._v[0]=Math.hypot(this._v[0],this._v[3],this._v[6]),e._v[1]=Math.hypot(this._v[1],this._v[4],this._v[7]),e._v[2]=Math.hypot(this._v[2],this._v[5],this._v[8]),e},v.clone=function(){return this.constructor.fromCopy9RowMajor(this._v[0],this._v[3],this._v[6],this._v[1],this._v[4],this._v[7],this._v[2],this._v[5],this._v[8])},_.zero=function(){return _.fromCopy9RowMajor(0,0,0,0,0,0,0,0,0)},_.identity=function(){return new s.c},_.dummy=function(){return new this(new Float32Array(0))},_.transpose=function(e){return e.isIdentityMatrixClass?e:_.fromCopy9RowMajor(e._v[0],e._v[1],e._v[2],e._v[3],e._v[4],e._v[5],e._v[6],e._v[7],e._v[8])},_.invert=function(e){if(e.isIdentityMatrixClass)return e;var t=e.determinant();0===t&&console.error("the determinant is 0!");var n=(e._v[4]*e._v[8]-e._v[7]*e._v[5])/t,r=(e._v[6]*e._v[5]-e._v[3]*e._v[8])/t,o=(e._v[3]*e._v[7]-e._v[6]*e._v[4])/t,i=(e._v[7]*e._v[2]-e._v[1]*e._v[8])/t,a=(e._v[0]*e._v[8]-e._v[6]*e._v[2])/t,s=(e._v[6]*e._v[1]-e._v[0]*e._v[7])/t,c=(e._v[1]*e._v[5]-e._v[4]*e._v[2])/t,l=(e._v[3]*e._v[2]-e._v[0]*e._v[5])/t,u=(e._v[0]*e._v[4]-e._v[3]*e._v[1])/t;return _.fromCopy9RowMajor(n,r,o,i,a,s,c,l,u)},_.invertTo=function(e,t){if(e.isIdentityMatrixClass)return t.copyComponents(e);var n=e.determinant();0===n&&console.error("the determinant is 0!");var r=(e._v[4]*e._v[8]-e._v[7]*e._v[5])/n,o=(e._v[6]*e._v[5]-e._v[3]*e._v[8])/n,i=(e._v[3]*e._v[7]-e._v[6]*e._v[4])/n,a=(e._v[7]*e._v[2]-e._v[1]*e._v[8])/n,s=(e._v[0]*e._v[8]-e._v[6]*e._v[2])/n,c=(e._v[6]*e._v[1]-e._v[0]*e._v[7])/n,l=(e._v[1]*e._v[5]-e._v[4]*e._v[2])/n,u=(e._v[3]*e._v[2]-e._v[0]*e._v[5])/n,f=(e._v[0]*e._v[4]-e._v[3]*e._v[1])/n;return t.setComponents(r,o,i,a,s,c,l,u,f)},_.rotateX=function(e){var t=Math.cos(e),n=Math.sin(e);return _.fromCopy9RowMajor(1,0,0,0,t,-n,0,n,t)},_.rotateY=function(e){var t=Math.cos(e),n=Math.sin(e);return _.fromCopy9RowMajor(t,0,n,0,1,0,-n,0,t)},_.rotateZ=function(e){var t=Math.cos(e),n=Math.sin(e);return _.fromCopy9RowMajor(t,-n,0,n,t,0,0,0,1)},_.rotateXYZ=function(e,t,n){var r=Math.cos(e),o=Math.sin(e),i=Math.cos(t),a=Math.sin(t),s=Math.cos(n),c=Math.sin(n),l=-o,u=-c,f=a*o,h=a*r,d=s*i,m=s*f+u*r,v=s*h+u*l,p=c*i,y=c*f+s*r,A=c*h+s*l,b=-a,g=i*o,x=i*r;return _.fromCopy9RowMajor(d,m,v,p,y,A,b,g,x)},_.rotate=function(e){return this.rotateXYZ(e._v[0],e._v[1],e._v[2])},_.scale=function(e){return _.fromCopy9RowMajor(e._v[0],0,0,0,e._v[1],0,0,0,e._v[2])},_.multiply=function(e,t){if(e.isIdentityMatrixClass)return t;if(t.isIdentityMatrixClass)return e;var n=e._v[0]*t._v[0]+e._v[3]*t._v[1]+e._v[6]*t._v[2],r=e._v[1]*t._v[0]+e._v[4]*t._v[1]+e._v[7]*t._v[2],o=e._v[2]*t._v[0]+e._v[5]*t._v[1]+e._v[8]*t._v[2],i=e._v[0]*t._v[3]+e._v[3]*t._v[4]+e._v[6]*t._v[5],a=e._v[1]*t._v[3]+e._v[4]*t._v[4]+e._v[7]*t._v[5],s=e._v[2]*t._v[3]+e._v[5]*t._v[4]+e._v[8]*t._v[5],c=e._v[0]*t._v[6]+e._v[3]*t._v[7]+e._v[6]*t._v[8],l=e._v[1]*t._v[6]+e._v[4]*t._v[7]+e._v[7]*t._v[8],u=e._v[2]*t._v[6]+e._v[5]*t._v[7]+e._v[8]*t._v[8];return _.fromCopy9RowMajor(n,i,c,r,a,l,o,s,u)},_.multiplyTo=function(e,t,n){if(e.isIdentityMatrixClass)return n.copyComponents(t);if(t.isIdentityMatrixClass)return n.copyComponents(e);var r=e._v[0]*t._v[0]+e._v[3]*t._v[1]+e._v[6]*t._v[2],o=e._v[1]*t._v[0]+e._v[4]*t._v[1]+e._v[7]*t._v[2],i=e._v[2]*t._v[0]+e._v[5]*t._v[1]+e._v[8]*t._v[2],a=e._v[0]*t._v[3]+e._v[3]*t._v[4]+e._v[6]*t._v[5],s=e._v[1]*t._v[3]+e._v[4]*t._v[4]+e._v[7]*t._v[5],c=e._v[2]*t._v[3]+e._v[5]*t._v[4]+e._v[8]*t._v[5],l=e._v[0]*t._v[6]+e._v[3]*t._v[7]+e._v[6]*t._v[8],u=e._v[1]*t._v[6]+e._v[4]*t._v[7]+e._v[7]*t._v[8],f=e._v[2]*t._v[6]+e._v[5]*t._v[7]+e._v[8]*t._v[8];return n.setComponents(r,a,l,o,s,u,i,c,f)},_.fromCopy9RowMajor=function(e,t,n,r,o,i,a,s,c){var l=new Float32Array(9);return l[0]=e,l[3]=t,l[6]=n,l[1]=r,l[4]=o,l[7]=i,l[2]=a,l[5]=s,l[8]=c,new _(l)},_.fromCopy9ColumnMajor=function(e,t,n,r,o,i,a,s,c){var l=new Float32Array(9);return l[0]=e,l[3]=r,l[6]=a,l[1]=t,l[4]=o,l[7]=s,l[2]=n,l[5]=i,l[8]=c,new _(l)},_.fromCopyMatrix44=function(e){var t=new Float32Array(9);return t[0]=e._v[0],t[1]=e._v[1],t[2]=e._v[2],t[3]=e._v[5],t[4]=e._v[6],t[5]=e._v[7],t[6]=e._v[9],t[7]=e._v[10],t[8]=e._v[11],new _(t)},_.fromFloat32ArrayColumnMajor=function(e){return new _(e)},_.fromCopyFloat32ArrayColumnMajor=function(e){var t=new Float32Array(9);return t.set(e),new _(t)},_.fromCopyFloat32ArrayRowMajor=function(e){var t=new Float32Array(9);return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=e[3],t[4]=e[4],t[7]=e[5],t[2]=e[6],t[5]=e[7],t[8]=e[8],new _(t)},_.fromCopyMatrix33=function(e){var t=new Float32Array(9);return t[0]=e._v[0],t[3]=e._v[3],t[6]=e._v[6],t[1]=e._v[1],t[4]=e._v[4],t[7]=e._v[7],t[2]=e._v[2],t[5]=e._v[5],t[8]=e._v[8],new _(t)},_.fromCopyArray9ColumnMajor=function(e){var t=new Float32Array(9);return t.set(e),new _(t)},_.fromCopyArrayColumnMajor=function(e){var t=new Float32Array(9);return t.set(e),new _(t)},_.fromCopyArray9RowMajor=function(e){var t=new Float32Array(9);return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=e[3],t[4]=e[4],t[7]=e[5],t[2]=e[6],t[5]=e[7],t[8]=e[8],new _(t)},_.fromCopyArrayRowMajor=function(e){var t=new Float32Array(9);return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=e[3],t[4]=e[4],t[7]=e[5],t[2]=e[6],t[5]=e[7],t[8]=e[8],new _(t)},_.fromCopyQuaternion=function(e){var t=e._v[0]*e._v[0],n=e._v[1]*e._v[1],r=e._v[2]*e._v[2],o=e._v[1]*e._v[2],i=e._v[0]*e._v[2],a=e._v[0]*e._v[1],s=e._v[3]*e._v[0],c=e._v[3]*e._v[1],l=e._v[3]*e._v[2],u=new Float32Array(9);return u[0]=1-2*(n+r),u[3]=2*(a-l),u[6]=2*(i+c),u[1]=2*(a+l),u[4]=1-2*(t+r),u[7]=2*(o-s),u[2]=2*(i-c),u[5]=2*(o+s),u[8]=1-2*(t+n),new _(u)},h=_,m=[{key:"compositionType",get:function(){return o.d.Mat3}}],(d=[{key:"m00",get:function(){return this._v[0]}},{key:"m10",get:function(){return this._v[1]}},{key:"m20",get:function(){return this._v[2]}},{key:"m01",get:function(){return this._v[3]}},{key:"m11",get:function(){return this._v[4]}},{key:"m21",get:function(){return this._v[5]}},{key:"m02",get:function(){return this._v[6]}},{key:"m12",get:function(){return this._v[7]}},{key:"m22",get:function(){return this._v[8]}},{key:"className",get:function(){return"Matrix33"}}])&&c(h.prototype,d),m&&c(h,m),_}(a.X)},7468:(e,t,n)=>{n.d(t,{J:()=>m});var r=n(6860),o=n(6264),i=n(3932),a=n(4969),s=n(2424),c=n(2507),l=n(7058);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function _(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var d=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Float32Array;var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(d,e);var t,n,c=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f(t);if(n){var o=f(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return _(this,e)});function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=c.call(this))._v=e,t}var m,v,p,y=d.prototype;return y.toString=function(){return this._v[0]+" "+this._v[4]+" "+this._v[8]+" "+this._v[12]+" \n"+this._v[1]+" "+this._v[5]+" "+this._v[9]+" "+this._v[13]+" \n"+this._v[2]+" "+this._v[6]+" "+this._v[10]+" "+this._v[14]+" \n"+this._v[3]+" "+this._v[7]+" "+this._v[11]+" "+this._v[15]+" \n"},y.toStringApproximately=function(){return a.k.financial(this._v[0])+" "+a.k.financial(this._v[4])+" "+a.k.financial(this._v[8])+" "+a.k.financial(this._v[12])+" \n"+a.k.financial(this._v[1])+" "+a.k.financial(this._v[5])+" "+a.k.financial(this._v[9])+" "+a.k.financial(this._v[13])+" \n"+a.k.financial(this._v[2])+" "+a.k.financial(this._v[6])+" "+a.k.financial(this._v[10])+" "+a.k.financial(this._v[14])+" \n"+a.k.financial(this._v[3])+" "+a.k.financial(this._v[7])+" "+a.k.financial(this._v[11])+" "+a.k.financial(this._v[15])+" \n"},y.flattenAsArray=function(){return[this._v[0],this._v[1],this._v[2],this._v[3],this._v[4],this._v[5],this._v[6],this._v[7],this._v[8],this._v[9],this._v[10],this._v[11],this._v[12],this._v[13],this._v[14],this._v[15]]},y.isDummy=function(){return 0===this._v.length},y.isEqual=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON,n=e._v;return Math.abs(n[0]-this._v[0])<t&&Math.abs(n[1]-this._v[1])<t&&Math.abs(n[2]-this._v[2])<t&&Math.abs(n[3]-this._v[3])<t&&Math.abs(n[4]-this._v[4])<t&&Math.abs(n[5]-this._v[5])<t&&Math.abs(n[6]-this._v[6])<t&&Math.abs(n[7]-this._v[7])<t&&Math.abs(n[8]-this._v[8])<t&&Math.abs(n[9]-this._v[9])<t&&Math.abs(n[10]-this._v[10])<t&&Math.abs(n[11]-this._v[11])<t&&Math.abs(n[12]-this._v[12])<t&&Math.abs(n[13]-this._v[13])<t&&Math.abs(n[14]-this._v[14])<t&&Math.abs(n[15]-this._v[15])<t},y.isStrictEqual=function(e){return e._v[0]===this._v[0]&&e._v[1]===this._v[1]&&e._v[2]===this._v[2]&&e._v[3]===this._v[3]&&e._v[4]===this._v[4]&&e._v[5]===this._v[5]&&e._v[6]===this._v[6]&&e._v[7]===this._v[7]&&e._v[8]===this._v[8]&&e._v[9]===this._v[9]&&e._v[10]===this._v[10]&&e._v[11]===this._v[11]&&e._v[12]===this._v[12]&&e._v[13]===this._v[13]&&e._v[14]===this._v[14]&&e._v[15]===this._v[15]},y.at=function(e,t){return this._v[e+4*t]},y.determinant=function(){return this._v[0]*this._v[5]*this._v[10]*this._v[15]+this._v[0]*this._v[9]*this._v[14]*this._v[7]+this._v[0]*this._v[13]*this._v[6]*this._v[11]+this._v[4]*this._v[1]*this._v[14]*this._v[11]+this._v[4]*this._v[9]*this._v[2]*this._v[15]+this._v[4]*this._v[13]*this._v[10]*this._v[3]+this._v[8]*this._v[1]*this._v[6]*this._v[15]+this._v[8]*this._v[5]*this._v[14]*this._v[3]+this._v[8]*this._v[13]*this._v[2]*this._v[7]+this._v[12]*this._v[1]*this._v[10]*this._v[7]+this._v[12]*this._v[5]*this._v[2]*this._v[11]+this._v[12]*this._v[9]*this._v[6]*this._v[3]-this._v[0]*this._v[5]*this._v[14]*this._v[11]-this._v[0]*this._v[9]*this._v[6]*this._v[15]-this._v[0]*this._v[13]*this._v[10]*this._v[7]-this._v[4]*this._v[1]*this._v[10]*this._v[15]-this._v[4]*this._v[9]*this._v[14]*this._v[3]-this._v[4]*this._v[13]*this._v[2]*this._v[11]-this._v[8]*this._v[1]*this._v[14]*this._v[7]-this._v[8]*this._v[5]*this._v[2]*this._v[15]-this._v[8]*this._v[13]*this._v[6]*this._v[3]-this._v[12]*this._v[1]*this._v[6]*this._v[11]-this._v[12]*this._v[5]*this._v[10]*this._v[3]-this._v[12]*this._v[9]*this._v[2]*this._v[7]},y.multiplyVector=function(e){var t=this._v[0]*e._v[0]+this._v[4]*e._v[1]+this._v[8]*e._v[2]+this._v[12]*e._v[3],n=this._v[1]*e._v[0]+this._v[5]*e._v[1]+this._v[9]*e._v[2]+this._v[13]*e._v[3],r=this._v[2]*e._v[0]+this._v[6]*e._v[1]+this._v[10]*e._v[2]+this._v[14]*e._v[3],i=this._v[3]*e._v[0]+this._v[7]*e._v[1]+this._v[11]*e._v[2]+this._v[15]*e._v[3];return o.Lt.fromCopyArray([t,n,r,i])},y.multiplyVectorTo=function(e,t){var n=this._v[0]*e._v[0]+this._v[4]*e._v[1]+this._v[8]*e._v[2]+this._v[12]*e._v[3],r=this._v[1]*e._v[0]+this._v[5]*e._v[1]+this._v[9]*e._v[2]+this._v[13]*e._v[3],o=this._v[2]*e._v[0]+this._v[6]*e._v[1]+this._v[10]*e._v[2]+this._v[14]*e._v[3],i=this._v[3]*e._v[0]+this._v[7]*e._v[1]+this._v[11]*e._v[2]+this._v[15]*e._v[3];return t._v[0]=n,t._v[1]=r,t._v[2]=o,t._v[3]=i,t},y.multiplyVectorToVec3=function(e,t){var n=this._v[0]*e._v[0]+this._v[4]*e._v[1]+this._v[8]*e._v[2]+this._v[12]*e._v[3],r=this._v[1]*e._v[0]+this._v[5]*e._v[1]+this._v[9]*e._v[2]+this._v[13]*e._v[3],o=this._v[2]*e._v[0]+this._v[6]*e._v[1]+this._v[10]*e._v[2]+this._v[14]*e._v[3];return t._v[0]=n,t._v[1]=r,t._v[2]=o,t},y.multiplyVector3=function(e){var t=this._v[0]*e._v[0]+this._v[4]*e._v[1]+this._v[8]*e._v[2]+this._v[12],n=this._v[1]*e._v[0]+this._v[5]*e._v[1]+this._v[9]*e._v[2]+this._v[13],o=this._v[2]*e._v[0]+this._v[6]*e._v[1]+this._v[10]*e._v[2]+this._v[14];return r.P.fromCopyArray([t,n,o])},y.multiplyVector3To=function(e,t){var n=this._v[0]*e._v[0]+this._v[4]*e._v[1]+this._v[8]*e._v[2]+this._v[12],r=this._v[1]*e._v[0]+this._v[5]*e._v[1]+this._v[9]*e._v[2]+this._v[13],o=this._v[2]*e._v[0]+this._v[6]*e._v[1]+this._v[10]*e._v[2]+this._v[14];return t._v[0]=n,t._v[1]=r,t._v[2]=o,t},y.getTranslate=function(){return r.P.fromCopyArray([this._v[12],this._v[13],this._v[14]])},y.getTranslateTo=function(e){return e._v[0]=this._v[12],e._v[1]=this._v[13],e._v[2]=this._v[14],e},y.getScale=function(){return r.P.fromCopyArray([Math.hypot(this._v[0],this._v[4],this._v[8]),Math.hypot(this._v[1],this._v[5],this._v[9]),Math.hypot(this._v[2],this._v[6],this._v[10])])},y.getScaleTo=function(e){return e._v[0]=Math.hypot(this._v[0],this._v[4],this._v[8]),e._v[1]=Math.hypot(this._v[1],this._v[5],this._v[9]),e._v[2]=Math.hypot(this._v[2],this._v[6],this._v[10]),e},y.toEulerAngles=function(){var e;if(1!==Math.abs(this._v[2])){var t=-Math.asin(this._v[2]),n=Math.atan2(this._v[6]/Math.cos(t),this._v[10]/Math.cos(t)),o=Math.atan2(this._v[1]/Math.cos(t),this._v[0]/Math.cos(t));e=r.P.fromCopyArray([n,t,o])}else e=-1===this._v[2]?r.P.fromCopyArray([Math.atan2(this._v[4],this._v[8]),Math.PI/2,0]):r.P.fromCopyArray([Math.atan2(-this._v[4],-this._v[8]),-Math.PI/2,0]);return e},y.toEulerAnglesTo=function(e){if(1!==Math.abs(this._v[2])){var t=-Math.asin(this._v[2]),n=Math.atan2(this._v[6]/Math.cos(t),this._v[10]/Math.cos(t)),r=Math.atan2(this._v[1]/Math.cos(t),this._v[0]/Math.cos(t));e._v[0]=n,e._v[1]=t,e._v[2]=r}else-1===this._v[2]?(e._v[0]=Math.atan2(this._v[4],this._v[8]),e._v[1]=Math.PI/2,e._v[2]=0):(e._v[0]=Math.atan2(-this._v[4],-this._v[8]),e._v[1]=-Math.PI/2,e._v[2]=0);return e},y.clone=function(){return this.constructor.fromCopy16RowMajor(this._v[0],this._v[4],this._v[8],this._v[12],this._v[1],this._v[5],this._v[9],this._v[13],this._v[2],this._v[6],this._v[10],this._v[14],this._v[3],this._v[7],this._v[11],this._v[15])},y.getRotate=function(){var e=Math.hypot(this._v[0],this._v[4],this._v[8]),t=Math.hypot(this._v[1],this._v[5],this._v[9]),n=Math.hypot(this._v[2],this._v[6],this._v[10]);return d.fromCopy16RowMajor(this._v[0]/e,this._v[4],this._v[8],0,this._v[1],this._v[5]/t,this._v[9],0,this._v[2],this._v[6],this._v[10]/n,0,0,0,0,1)},d.zero=function(){return d.fromCopy16RowMajor(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},d.identity=function(){return new s.a},d.dummy=function(){return new this(new Float32Array(0))},d.transpose=function(e){return e.isIdentityMatrixClass?e:d.fromCopyFloat32ArrayRowMajor(e._v)},d.invert=function(e){if(e.isIdentityMatrixClass)return e;var t=e._v[0]*e._v[5]-e._v[4]*e._v[1],n=e._v[0]*e._v[9]-e._v[8]*e._v[1],r=e._v[0]*e._v[13]-e._v[12]*e._v[1],o=e._v[4]*e._v[9]-e._v[8]*e._v[5],i=e._v[4]*e._v[13]-e._v[12]*e._v[5],a=e._v[8]*e._v[13]-e._v[12]*e._v[9],s=e._v[2]*e._v[7]-e._v[6]*e._v[3],c=e._v[2]*e._v[11]-e._v[10]*e._v[3],l=e._v[2]*e._v[15]-e._v[14]*e._v[3],u=e._v[6]*e._v[11]-e._v[10]*e._v[7],f=e._v[6]*e._v[15]-e._v[14]*e._v[7],_=e._v[10]*e._v[15]-e._v[14]*e._v[11],h=t*_-n*f+r*u+o*l-i*c+a*s;0===h&&console.error("the determinant is 0!");var m=(e._v[5]*_-e._v[9]*f+e._v[13]*u)/h,v=(e._v[8]*f-e._v[4]*_-e._v[12]*u)/h,p=(e._v[7]*a-e._v[11]*i+e._v[15]*o)/h,y=(e._v[10]*i-e._v[6]*a-e._v[14]*o)/h,A=(e._v[9]*l-e._v[1]*_-e._v[13]*c)/h,b=(e._v[0]*_-e._v[8]*l+e._v[12]*c)/h,g=(e._v[11]*r-e._v[3]*a-e._v[15]*n)/h,x=(e._v[2]*a-e._v[10]*r+e._v[14]*n)/h,I=(e._v[1]*f-e._v[5]*l+e._v[13]*s)/h,E=(e._v[4]*l-e._v[0]*f-e._v[12]*s)/h,w=(e._v[3]*i-e._v[7]*r+e._v[15]*t)/h,S=(e._v[6]*r-e._v[2]*i-e._v[14]*t)/h,T=(e._v[5]*c-e._v[1]*u-e._v[9]*s)/h,C=(e._v[0]*u-e._v[4]*c+e._v[8]*s)/h,P=(e._v[7]*n-e._v[3]*o-e._v[11]*t)/h,R=(e._v[2]*o-e._v[6]*n+e._v[10]*t)/h;return d.fromCopy16RowMajor(m,v,p,y,A,b,g,x,I,E,w,S,T,C,P,R)},d.invertTo=function(e,t){if(e.isIdentityMatrixClass)return t.copyComponents(e);var n=e._v[0]*e._v[5]-e._v[4]*e._v[1],r=e._v[0]*e._v[9]-e._v[8]*e._v[1],o=e._v[0]*e._v[13]-e._v[12]*e._v[1],i=e._v[4]*e._v[9]-e._v[8]*e._v[5],a=e._v[4]*e._v[13]-e._v[12]*e._v[5],s=e._v[8]*e._v[13]-e._v[12]*e._v[9],c=e._v[2]*e._v[7]-e._v[6]*e._v[3],l=e._v[2]*e._v[11]-e._v[10]*e._v[3],u=e._v[2]*e._v[15]-e._v[14]*e._v[3],f=e._v[6]*e._v[11]-e._v[10]*e._v[7],_=e._v[6]*e._v[15]-e._v[14]*e._v[7],h=e._v[10]*e._v[15]-e._v[14]*e._v[11],d=n*h-r*_+o*f+i*u-a*l+s*c;0===d&&console.error("the determinant is 0!");var m=(e._v[5]*h-e._v[9]*_+e._v[13]*f)/d,v=(e._v[8]*_-e._v[4]*h-e._v[12]*f)/d,p=(e._v[7]*s-e._v[11]*a+e._v[15]*i)/d,y=(e._v[10]*a-e._v[6]*s-e._v[14]*i)/d,A=(e._v[9]*u-e._v[1]*h-e._v[13]*l)/d,b=(e._v[0]*h-e._v[8]*u+e._v[12]*l)/d,g=(e._v[11]*o-e._v[3]*s-e._v[15]*r)/d,x=(e._v[2]*s-e._v[10]*o+e._v[14]*r)/d,I=(e._v[1]*_-e._v[5]*u+e._v[13]*c)/d,E=(e._v[4]*u-e._v[0]*_-e._v[12]*c)/d,w=(e._v[3]*a-e._v[7]*o+e._v[15]*n)/d,S=(e._v[6]*o-e._v[2]*a-e._v[14]*n)/d,T=(e._v[5]*l-e._v[1]*f-e._v[9]*c)/d,C=(e._v[0]*f-e._v[4]*l+e._v[8]*c)/d,P=(e._v[7]*r-e._v[3]*i-e._v[11]*n)/d,R=(e._v[2]*i-e._v[6]*r+e._v[10]*n)/d;return t.setComponents(m,v,p,y,A,b,g,x,I,E,w,S,T,C,P,R)},d.translate=function(e){return d.fromCopy16RowMajor(1,0,0,e._v[0],0,1,0,e._v[1],0,0,1,e._v[2],0,0,0,1)},d.rotateX=function(e){var t=Math.cos(e),n=Math.sin(e);return d.fromCopy16RowMajor(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1)},d.rotateY=function(e){var t=Math.cos(e),n=Math.sin(e);return d.fromCopy16RowMajor(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1)},d.rotateZ=function(e){var t=Math.cos(e),n=Math.sin(e);return d.fromCopy16RowMajor(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1)},d.rotateXYZ=function(e,t,n){var r=Math.cos(e),o=Math.sin(e),i=Math.cos(t),a=Math.sin(t),s=Math.cos(n),c=Math.sin(n),l=-o,u=-c,f=a*o,_=a*r,h=s*i,m=s*f+u*r,v=s*_+u*l,p=c*i,y=c*f+s*r,A=c*_+s*l,b=-a,g=i*o,x=i*r;return d.fromCopy16RowMajor(h,m,v,0,p,y,A,0,b,g,x,0,0,0,0,1)},d.rotate=function(e){return this.rotateXYZ(e._v[0],e._v[1],e._v[2])},d.scale=function(e){return d.fromCopy16RowMajor(e._v[0],0,0,0,0,e._v[1],0,0,0,0,e._v[2],0,0,0,0,1)},d.multiply=function(e,t){if(e.isIdentityMatrixClass)return t;if(t.isIdentityMatrixClass)return e;var n=e._v,r=t._v,o=n[0]*r[0]+n[4]*r[1]+n[8]*r[2]+n[12]*r[3],i=n[1]*r[0]+n[5]*r[1]+n[9]*r[2]+n[13]*r[3],a=n[2]*r[0]+n[6]*r[1]+n[10]*r[2]+n[14]*r[3],s=n[3]*r[0]+n[7]*r[1]+n[11]*r[2]+n[15]*r[3],c=n[0]*r[4]+n[4]*r[5]+n[8]*r[6]+n[12]*r[7],l=n[1]*r[4]+n[5]*r[5]+n[9]*r[6]+n[13]*r[7],u=n[2]*r[4]+n[6]*r[5]+n[10]*r[6]+n[14]*r[7],f=n[3]*r[4]+n[7]*r[5]+n[11]*r[6]+n[15]*r[7],_=n[0]*r[8]+n[4]*r[9]+n[8]*r[10]+n[12]*r[11],h=n[1]*r[8]+n[5]*r[9]+n[9]*r[10]+n[13]*r[11],m=n[2]*r[8]+n[6]*r[9]+n[10]*r[10]+n[14]*r[11],v=n[3]*r[8]+n[7]*r[9]+n[11]*r[10]+n[15]*r[11],p=n[0]*r[12]+n[4]*r[13]+n[8]*r[14]+n[12]*r[15],y=n[1]*r[12]+n[5]*r[13]+n[9]*r[14]+n[13]*r[15],A=n[2]*r[12]+n[6]*r[13]+n[10]*r[14]+n[14]*r[15],b=n[3]*r[12]+n[7]*r[13]+n[11]*r[14]+n[15]*r[15];return d.fromCopy16RowMajor(o,c,_,p,i,l,h,y,a,u,m,A,s,f,v,b)},d.multiplyTo=function(e,t,n){if(e.isIdentityMatrixClass)return n.copyComponents(t);if(t.isIdentityMatrixClass)return n.copyComponents(e);var r=e._v,o=t._v,i=r[0]*o[0]+r[4]*o[1]+r[8]*o[2]+r[12]*o[3],a=r[1]*o[0]+r[5]*o[1]+r[9]*o[2]+r[13]*o[3],s=r[2]*o[0]+r[6]*o[1]+r[10]*o[2]+r[14]*o[3],c=r[3]*o[0]+r[7]*o[1]+r[11]*o[2]+r[15]*o[3],l=r[0]*o[4]+r[4]*o[5]+r[8]*o[6]+r[12]*o[7],u=r[1]*o[4]+r[5]*o[5]+r[9]*o[6]+r[13]*o[7],f=r[2]*o[4]+r[6]*o[5]+r[10]*o[6]+r[14]*o[7],_=r[3]*o[4]+r[7]*o[5]+r[11]*o[6]+r[15]*o[7],h=r[0]*o[8]+r[4]*o[9]+r[8]*o[10]+r[12]*o[11],d=r[1]*o[8]+r[5]*o[9]+r[9]*o[10]+r[13]*o[11],m=r[2]*o[8]+r[6]*o[9]+r[10]*o[10]+r[14]*o[11],v=r[3]*o[8]+r[7]*o[9]+r[11]*o[10]+r[15]*o[11],p=r[0]*o[12]+r[4]*o[13]+r[8]*o[14]+r[12]*o[15],y=r[1]*o[12]+r[5]*o[13]+r[9]*o[14]+r[13]*o[15],A=r[2]*o[12]+r[6]*o[13]+r[10]*o[14]+r[14]*o[15],b=r[3]*o[12]+r[7]*o[13]+r[11]*o[14]+r[15]*o[15];return n.setComponents(i,l,h,p,a,u,d,y,s,f,m,A,c,_,v,b)},d.multiplyTypedArrayTo=function(e,t,n,r){return t[l.QU](r,e._v,0,n._v),n},d.fromQuaternionTo=function(e,t){var n=e._v[0]*e._v[0],r=e._v[1]*e._v[1],o=e._v[2]*e._v[2],i=e._v[1]*e._v[2],a=e._v[0]*e._v[2],s=e._v[0]*e._v[1],c=e._v[3]*e._v[0],l=e._v[3]*e._v[1],u=e._v[3]*e._v[2],f=1-2*(r+o),_=2*(s-u),h=2*(a+l),d=2*(s+u),m=1-2*(n+o),v=2*(i-c),p=2*(a-l),y=2*(i+c),A=1-2*(n+r);return t.setComponents(f,_,h,0,d,m,v,0,p,y,A,0,0,0,0,1)},d.fromCopy16RowMajor=function(e,t,n,r,o,i,a,s,c,l,u,f,_,h,m,v){var p=new Float32Array(16);return p[0]=e,p[4]=t,p[8]=n,p[12]=r,p[1]=o,p[5]=i,p[9]=a,p[13]=s,p[2]=c,p[6]=l,p[10]=u,p[14]=f,p[3]=_,p[7]=h,p[11]=m,p[15]=v,new d(p)},d.fromCopy16ColumnMajor=function(e,t,n,r,o,i,a,s,c,l,u,f,_,h,m,v){var p=new Float32Array(16);return p[0]=e,p[4]=o,p[8]=c,p[12]=_,p[1]=t,p[5]=i,p[9]=l,p[13]=h,p[2]=n,p[6]=a,p[10]=u,p[14]=m,p[3]=r,p[7]=s,p[11]=f,p[15]=v,new d(p)},d.fromCopyMatrix44=function(e){var t=new Float32Array(16);return t.set(e._v),new d(t)},d.fromFloat32ArrayColumnMajor=function(e){return new d(e)},d.fromCopyFloat32ArrayColumnMajor=function(e){var t=new Float32Array(16);return t.set(e),new d(t)},d.fromCopyFloat32ArrayRowMajor=function(e){var t=new Float32Array(16);return t[0]=e[0],t[4]=e[1],t[8]=e[2],t[12]=e[3],t[1]=e[4],t[5]=e[5],t[9]=e[6],t[13]=e[7],t[2]=e[8],t[6]=e[9],t[10]=e[10],t[14]=e[11],t[3]=e[12],t[7]=e[13],t[11]=e[14],t[15]=e[15],new d(t)},d.fromCopyMatrix33=function(e){var t=new Float32Array(16);return t[0]=e._v[0],t[4]=e._v[3],t[8]=e._v[6],t[12]=0,t[1]=e._v[1],t[5]=e._v[4],t[9]=e._v[7],t[13]=0,t[2]=e._v[2],t[6]=e._v[5],t[10]=e._v[8],t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1,new d(t)},d.fromCopyArray16ColumnMajor=function(e){var t=new Float32Array(16);return t.set(e),new d(t)},d.fromCopyArrayColumnMajor=function(e){var t=new Float32Array(16);return t.set(e),new d(t)},d.fromCopyArray16RowMajor=function(e){var t=new Float32Array(16);return t[0]=e[0],t[4]=e[1],t[8]=e[2],t[12]=e[3],t[1]=e[4],t[5]=e[5],t[9]=e[6],t[13]=e[7],t[2]=e[8],t[6]=e[9],t[10]=e[10],t[14]=e[11],t[3]=e[12],t[7]=e[13],t[11]=e[14],t[15]=e[15],new d(t)},d.fromCopyArrayRowMajor=function(e){var t=new Float32Array(16);return t[0]=e[0],t[4]=e[1],t[8]=e[2],t[12]=e[3],t[1]=e[4],t[5]=e[5],t[9]=e[6],t[13]=e[7],t[2]=e[8],t[6]=e[9],t[10]=e[10],t[14]=e[11],t[3]=e[12],t[7]=e[13],t[11]=e[14],t[15]=e[15],new d(t)},d.fromCopyQuaternion=function(e){var t=e._v[0]*e._v[0],n=e._v[1]*e._v[1],r=e._v[2]*e._v[2],o=e._v[1]*e._v[2],i=e._v[0]*e._v[2],a=e._v[0]*e._v[1],s=e._v[3]*e._v[0],c=e._v[3]*e._v[1],l=e._v[3]*e._v[2],u=new Float32Array(16);return u[0]=1-2*(n+r),u[4]=2*(a-l),u[8]=2*(i+c),u[12]=0,u[1]=2*(a+l),u[5]=1-2*(t+r),u[9]=2*(o-s),u[13]=0,u[2]=2*(i-c),u[6]=2*(o+s),u[10]=1-2*(t+n),u[14]=0,u[3]=0,u[7]=0,u[11]=0,u[15]=1,new d(u)},m=d,p=[{key:"compositionType",get:function(){return i.d.Mat4}}],(v=[{key:"m00",get:function(){return this._v[0]}},{key:"m10",get:function(){return this._v[1]}},{key:"m20",get:function(){return this._v[2]}},{key:"m30",get:function(){return this._v[3]}},{key:"m01",get:function(){return this._v[4]}},{key:"m11",get:function(){return this._v[5]}},{key:"m21",get:function(){return this._v[6]}},{key:"m31",get:function(){return this._v[7]}},{key:"m02",get:function(){return this._v[8]}},{key:"m12",get:function(){return this._v[9]}},{key:"m22",get:function(){return this._v[10]}},{key:"m32",get:function(){return this._v[11]}},{key:"m03",get:function(){return this._v[12]}},{key:"m13",get:function(){return this._v[13]}},{key:"m23",get:function(){return this._v[14]}},{key:"m33",get:function(){return this._v[15]}},{key:"translateX",get:function(){return this._v[12]}},{key:"translateY",get:function(){return this._v[13]}},{key:"translateZ",get:function(){return this._v[14]}}])&&u(m.prototype,v),p&&u(m,p),d}(c.X)},2542:(e,t,n)=>{n.d(t,{f:()=>u});var r=n(4191);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},i(e,t,n||e)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}var l=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,n,r=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=a(t);if(n){var o=a(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return s(this,e)});function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),r.call(this,e)}var u,f,_=l.prototype;return _.clone=function(){return i(a(l.prototype),"clone",this).call(this)},_.raw=function(){return this._v},_.setAt=function(e,t,n){return this._v[e+2*t]=n,this},_.setComponents=function(e,t,n,r){return this._v[0]=e,this._v[2]=t,this._v[1]=n,this._v[3]=r,this},_.copyComponents=function(e){return this._v[0]=e.m00,this._v[2]=e.m01,this._v[1]=e.m10,this._v[3]=e.m11,this},_.zero=function(){return this.setComponents(0,0,0,0)},_.identity=function(){return this.setComponents(1,0,0,1)},_._swap=function(e,t){this._v[t]=[this._v[e],this._v[e]=this._v[t]][0]},_.transpose=function(){return this._swap(1,2),this},_.invert=function(){var e=this.determinant();0===e&&console.error("the determinant is 0!");var t=this._v[3]/e,n=this._v[2]/e*-1,r=this._v[1]/e*-1,o=this._v[0]/e;return this.setComponents(t,n,r,o)},_.rotate=function(e){var t=Math.cos(e),n=Math.sin(e);return this.setComponents(t,-n,n,t)},_.scale=function(e){return this.setComponents(e._v[0],0,0,e._v[1])},_.multiplyScale=function(e){return this._v[0]*=e._v[0],this._v[2]*=e._v[0],this._v[1]*=e._v[1],this._v[3]*=e._v[1],this},_.multiply=function(e){var t=this._v[0]*e._v[0]+this._v[2]*e._v[1],n=this._v[0]*e._v[2]+this._v[2]*e._v[3],r=this._v[1]*e._v[0]+this._v[3]*e._v[1],o=this._v[1]*e._v[2]+this._v[3]*e._v[3];return this.setComponents(t,n,r,o)},_.multiplyByLeft=function(e){var t=e._v[0]*this._v[0]+e._v[2]*this._v[1],n=e._v[0]*this._v[2]+e._v[2]*this._v[3],r=e._v[1]*this._v[0]+e._v[3]*this._v[1],o=e._v[1]*this._v[2]+e._v[3]*this._v[3];return this.setComponents(t,n,r,o)},l.zero=function(){return i(a(l),"zero",this).call(this)},l.identity=function(){return i(a(l),"identity",this).call(this)},l.dummy=function(){return i(a(l),"dummy",this).call(this)},l.transpose=function(e){return i(a(l),"transpose",this).call(this,e)},l.invert=function(e){return i(a(l),"invert",this).call(this,e)},l.rotate=function(e){return i(a(l),"rotate",this).call(this,e)},l.scale=function(e){return i(a(l),"scale",this).call(this,e)},l.multiply=function(e,t){return i(a(l),"multiply",this).call(this,e,t)},l.fromCopy4RowMajor=function(e,t,n,r){var o=new Float32Array(4);return o[0]=e,o[2]=t,o[1]=n,o[3]=r,new l(o)},l.fromCopy4ColumnMajor=function(e,t,n,r){var o=new Float32Array(4);return o[0]=e,o[2]=n,o[1]=t,o[3]=r,new l(o)},l.fromFloat32ArrayColumnMajor=function(e){return new l(e)},l.fromCopyFloat32ArrayColumnMajor=function(e){var t=new Float32Array(4);return t.set(e),new l(t)},l.fromCopyFloat32ArrayRowMajor=function(e){var t=new Float32Array(4);return t[0]=e[0],t[3]=e[1],t[1]=e[2],t[4]=e[3],new l(t)},l.fromCopyMatrix22=function(e){var t=new Float32Array(4);return t[0]=e._v[0],t[3]=e._v[1],t[1]=e._v[2],t[4]=e._v[3],new l(t)},l.fromCopyArray9ColumnMajor=function(e){var t=new Float32Array(4);return t.set(e),new l(t)},l.fromCopyArrayColumnMajor=function(e){var t=new Float32Array(4);return t.set(e),new l(t)},l.fromCopyArray9RowMajor=function(e){var t=new Float32Array(4);return t[0]=e[0],t[3]=e[1],t[1]=e[2],t[4]=e[3],new l(t)},l.fromCopyArrayRowMajor=function(e){var t=new Float32Array(4);return t[0]=e[0],t[3]=e[1],t[1]=e[2],t[4]=e[3],new l(t)},u=l,(f=[{key:"m00",get:function(){return this._v[0]},set:function(e){this._v[0]=e}},{key:"m10",get:function(){return this._v[1]},set:function(e){this._v[1]=e}},{key:"m01",get:function(){return this._v[2]},set:function(e){this._v[2]=e}},{key:"m11",get:function(){return this._v[3]},set:function(e){this._v[3]=e}},{key:"className",get:function(){return"MutableMatrix22"}}])&&o(u.prototype,f),l}(r.a)},2863:(e,t,n)=>{n.d(t,{x:()=>u});var r=n(6386);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},i(e,t,n||e)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}var l=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,n,r=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=a(t);if(n){var o=a(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return s(this,e)});function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),r.call(this,e)}var u,f,_=l.prototype;return _.clone=function(){return i(a(l.prototype),"clone",this).call(this)},_.raw=function(){return this._v},_.setAt=function(e,t,n){return this._v[e+3*t]=n,this},_.setComponents=function(e,t,n,r,o,i,a,s,c){return this._v[0]=e,this._v[3]=t,this._v[6]=n,this._v[1]=r,this._v[4]=o,this._v[7]=i,this._v[2]=a,this._v[5]=s,this._v[8]=c,this},_.copyComponents=function(e){return this._v[0]=e.m00,this._v[3]=e.m01,this._v[6]=e.m02,this._v[1]=e.m10,this._v[4]=e.m11,this._v[7]=e.m12,this._v[2]=e.m20,this._v[5]=e.m21,this._v[8]=e.m22,this},_.zero=function(){return this.setComponents(0,0,0,0,0,0,0,0,0)},_.identity=function(){return this.setComponents(1,0,0,0,1,0,0,0,1)},_._swap=function(e,t){this._v[t]=[this._v[e],this._v[e]=this._v[t]][0]},_.transpose=function(){return this._swap(1,3),this._swap(2,6),this._swap(5,8),this},_.invert=function(){var e=this.determinant();0===e&&console.error("the determinant is 0!");var t=(this._v[4]*this._v[8]-this._v[7]*this._v[5])/e,n=(this._v[6]*this._v[5]-this._v[3]*this._v[8])/e,r=(this._v[3]*this._v[7]-this._v[6]*this._v[4])/e,o=(this._v[7]*this._v[2]-this._v[1]*this._v[8])/e,i=(this._v[0]*this._v[8]-this._v[6]*this._v[2])/e,a=(this._v[6]*this._v[1]-this._v[0]*this._v[7])/e,s=(this._v[1]*this._v[5]-this._v[4]*this._v[2])/e,c=(this._v[3]*this._v[2]-this._v[0]*this._v[5])/e,l=(this._v[0]*this._v[4]-this._v[3]*this._v[1])/e;return this.setComponents(t,n,r,o,i,a,s,c,l)},_.rotateX=function(e){var t=Math.cos(e),n=Math.sin(e);return this.setComponents(1,0,0,0,t,-n,0,n,t)},_.rotateY=function(e){var t=Math.cos(e),n=Math.sin(e);return this.setComponents(t,0,n,0,1,0,-n,0,t)},_.rotateZ=function(e){var t=Math.cos(e),n=Math.sin(e);return this.setComponents(t,-n,0,n,t,0,0,0,1)},_.rotateXYZ=function(e,t,n){var r=Math.cos(e),o=Math.sin(e),i=Math.cos(t),a=Math.sin(t),s=Math.cos(n),c=Math.sin(n),l=-o,u=-c,f=a*o,_=a*r,h=s*i,d=s*f+u*r,m=s*_+u*l,v=c*i,p=c*f+s*r,y=c*_+s*l,A=-a,b=i*o,g=i*r;return this.setComponents(h,d,m,v,p,y,A,b,g)},_.rotate=function(e){return this.rotateXYZ(e._v[0],e._v[1],e._v[2])},_.scale=function(e){return this.setComponents(e._v[0],0,0,0,e._v[1],0,0,0,e._v[2])},_.multiplyScale=function(e){return this._v[0]*=e._v[0],this._v[3]*=e._v[0],this._v[6]*=e._v[0],this._v[1]*=e._v[1],this._v[4]*=e._v[1],this._v[7]*=e._v[1],this._v[2]*=e._v[2],this._v[5]*=e._v[2],this._v[8]*=e._v[2],this},_.multiply=function(e){if(e.isIdentityMatrixClass)return this;var t=this._v[0]*e._v[0]+this._v[3]*e._v[1]+this._v[6]*e._v[2],n=this._v[0]*e._v[3]+this._v[3]*e._v[4]+this._v[6]*e._v[5],r=this._v[0]*e._v[6]+this._v[3]*e._v[7]+this._v[6]*e._v[8],o=this._v[1]*e._v[0]+this._v[4]*e._v[1]+this._v[7]*e._v[2],i=this._v[1]*e._v[3]+this._v[4]*e._v[4]+this._v[7]*e._v[5],a=this._v[1]*e._v[6]+this._v[4]*e._v[7]+this._v[7]*e._v[8],s=this._v[2]*e._v[0]+this._v[5]*e._v[1]+this._v[8]*e._v[2],c=this._v[2]*e._v[3]+this._v[5]*e._v[4]+this._v[8]*e._v[5],l=this._v[2]*e._v[6]+this._v[5]*e._v[7]+this._v[8]*e._v[8];return this.setComponents(t,n,r,o,i,a,s,c,l)},_.multiplyByLeft=function(e){if(e.isIdentityMatrixClass)return this;var t=e._v[0]*this._v[0]+e._v[3]*this._v[1]+e._v[6]*this._v[2],n=e._v[0]*this._v[3]+e._v[3]*this._v[4]+e._v[6]*this._v[5],r=e._v[0]*this._v[6]+e._v[3]*this._v[7]+e._v[6]*this._v[8],o=e._v[1]*this._v[0]+e._v[4]*this._v[1]+e._v[7]*this._v[2],i=e._v[1]*this._v[3]+e._v[4]*this._v[4]+e._v[7]*this._v[5],a=e._v[1]*this._v[6]+e._v[4]*this._v[7]+e._v[7]*this._v[8],s=e._v[2]*this._v[0]+e._v[5]*this._v[1]+e._v[8]*this._v[2],c=e._v[2]*this._v[3]+e._v[5]*this._v[4]+e._v[8]*this._v[5],l=e._v[2]*this._v[6]+e._v[5]*this._v[7]+e._v[8]*this._v[8];return this.setComponents(t,n,r,o,i,a,s,c,l)},l.zero=function(){return i(a(l),"zero",this).call(this)},l.identity=function(){return l.fromCopy9RowMajor(1,0,0,0,1,0,0,0,1)},l.dummy=function(){return i(a(l),"dummy",this).call(this)},l.transpose=function(e){return i(a(l),"transpose",this).call(this,e)},l.invert=function(e){return i(a(l),"invert",this).call(this,e)},l.rotateX=function(e){return i(a(l),"rotateX",this).call(this,e)},l.rotateY=function(e){return i(a(l),"rotateY",this).call(this,e)},l.rotateZ=function(e){return i(a(l),"rotateZ",this).call(this,e)},l.rotateXYZ=function(e,t,n){return i(a(l),"rotateXYZ",this).call(this,e,t,n)},l.rotate=function(e){return i(a(l),"rotateXYZ",this).call(this,e._v[0],e._v[1],e._v[2])},l.scale=function(e){return i(a(l),"scale",this).call(this,e)},l.multiply=function(e,t){return i(a(l),"multiply",this).call(this,e,t)},l.fromCopy9RowMajor=function(e,t,n,r,o,i,a,s,c){var u=new Float32Array(9);return u[0]=e,u[3]=t,u[6]=n,u[1]=r,u[4]=o,u[7]=i,u[2]=a,u[5]=s,u[8]=c,new l(u)},l.fromCopy9ColumnMajor=function(e,t,n,r,o,i,a,s,c){var u=new Float32Array(9);return u[0]=e,u[3]=r,u[6]=a,u[1]=t,u[4]=o,u[7]=s,u[2]=n,u[5]=i,u[8]=c,new l(u)},l.fromCopyMatrix44=function(e){var t=new Float32Array(9);return t.set(e._v),new l(t)},l.fromFloat32ArrayColumnMajor=function(e){return new l(e)},l.fromCopyFloat32ArrayColumnMajor=function(e){var t=new Float32Array(9);return t.set(e),new l(t)},l.fromCopyFloat32ArrayRowMajor=function(e){var t=new Float32Array(9);return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=e[3],t[4]=e[4],t[7]=e[5],t[2]=e[6],t[5]=e[7],t[8]=e[8],new l(t)},l.fromCopyMatrix33=function(e){var t=new Float32Array(9);return t[0]=e._v[0],t[3]=e._v[3],t[6]=e._v[6],t[1]=e._v[1],t[4]=e._v[4],t[7]=e._v[7],t[2]=e._v[2],t[5]=e._v[5],t[8]=e._v[8],new l(t)},l.fromCopyArray9ColumnMajor=function(e){var t=new Float32Array(9);return t.set(e),new l(t)},l.fromCopyArrayColumnMajor=function(e){var t=new Float32Array(9);return t.set(e),new l(t)},l.fromCopyArray9RowMajor=function(e){var t=new Float32Array(9);return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=e[3],t[4]=e[4],t[7]=e[5],t[2]=e[6],t[5]=e[7],t[8]=e[8],new l(t)},l.fromCopyArrayRowMajor=function(e){var t=new Float32Array(9);return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=e[3],t[4]=e[4],t[7]=e[5],t[2]=e[6],t[5]=e[7],t[8]=e[8],new l(t)},l.fromCopyQuaternion=function(e){var t=e._v[0]*e._v[0],n=e._v[1]*e._v[1],r=e._v[2]*e._v[2],o=e._v[1]*e._v[2],i=e._v[0]*e._v[2],a=e._v[0]*e._v[1],s=e._v[3]*e._v[0],c=e._v[3]*e._v[1],u=e._v[3]*e._v[2],f=new Float32Array(9);return f[0]=1-2*(n+r),f[3]=2*(a-u),f[6]=2*(i+c),f[1]=2*(a+u),f[4]=1-2*(t+r),f[7]=2*(o-s),f[2]=2*(i-c),f[5]=2*(o+s),f[8]=1-2*(t+n),new l(f)},u=l,(f=[{key:"m00",get:function(){return this._v[0]},set:function(e){this._v[0]=e}},{key:"m10",get:function(){return this._v[1]},set:function(e){this._v[1]=e}},{key:"m20",get:function(){return this._v[2]},set:function(e){this._v[2]=e}},{key:"m01",get:function(){return this._v[3]},set:function(e){this._v[3]=e}},{key:"m11",get:function(){return this._v[4]},set:function(e){this._v[4]=e}},{key:"m21",get:function(){return this._v[5]},set:function(e){this._v[5]=e}},{key:"m02",get:function(){return this._v[6]},set:function(e){this._v[6]=e}},{key:"m12",get:function(){return this._v[7]},set:function(e){this._v[7]=e}},{key:"m22",get:function(){return this._v[8]},set:function(e){this._v[8]=e}},{key:"className",get:function(){return"MutableMatrix33"}}])&&o(u.prototype,f),l}(r.h)},8289:(e,t,n)=>{n.d(t,{e:()=>u});var r=n(7468);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},i(e,t,n||e)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}var l=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Float32Array;var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,n,r=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=a(t);if(n){var o=a(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return s(this,e)});function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),r.call(this,e)}var u,f,_=l.prototype;return _.clone=function(){return i(a(l.prototype),"clone",this).call(this)},_.getRotate=function(){return i(a(l.prototype),"getRotate",this).call(this)},_.getTranslate=function(){return i(a(l.prototype),"getTranslate",this).call(this)},_.getScale=function(){return i(a(l.prototype),"getScale",this).call(this)},_.raw=function(){return this._v},_.setAt=function(e,t,n){return this._v[e+4*t]=n,this},_.setComponents=function(e,t,n,r,o,i,a,s,c,l,u,f,_,h,d,m){return this._v[0]=e,this._v[4]=t,this._v[8]=n,this._v[12]=r,this._v[1]=o,this._v[5]=i,this._v[9]=a,this._v[13]=s,this._v[2]=c,this._v[6]=l,this._v[10]=u,this._v[14]=f,this._v[3]=_,this._v[7]=h,this._v[11]=d,this._v[15]=m,this},_.copyComponents=function(e){return this._v[0]=e._v[0],this._v[4]=e._v[4],this._v[8]=e._v[8],this._v[12]=e._v[12],this._v[1]=e._v[1],this._v[5]=e._v[5],this._v[9]=e._v[9],this._v[13]=e._v[13],this._v[2]=e._v[2],this._v[6]=e._v[6],this._v[10]=e._v[10],this._v[14]=e._v[14],this._v[3]=e._v[3],this._v[7]=e._v[7],this._v[11]=e._v[11],this._v[15]=e._v[15],this},_.zero=function(){return this.setComponents(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},_.identity=function(){return this.setComponents(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},_._swap=function(e,t){this._v[t]=[this._v[e],this._v[e]=this._v[t]][0]},_.transpose=function(){return this._swap(1,4),this._swap(2,8),this._swap(3,12),this._swap(6,9),this._swap(7,13),this._swap(11,14),this},_.invert=function(){var e=this._v[0]*this._v[5]-this._v[4]*this._v[1],t=this._v[0]*this._v[9]-this._v[8]*this._v[1],n=this._v[0]*this._v[13]-this._v[12]*this._v[1],r=this._v[4]*this._v[9]-this._v[8]*this._v[5],o=this._v[4]*this._v[13]-this._v[12]*this._v[5],i=this._v[8]*this._v[13]-this._v[12]*this._v[9],a=this._v[2]*this._v[7]-this._v[6]*this._v[3],s=this._v[2]*this._v[11]-this._v[10]*this._v[3],c=this._v[2]*this._v[15]-this._v[14]*this._v[3],l=this._v[6]*this._v[11]-this._v[10]*this._v[7],u=this._v[6]*this._v[15]-this._v[14]*this._v[7],f=this._v[10]*this._v[15]-this._v[14]*this._v[11],_=e*f-t*u+n*l+r*c-o*s+i*a;0===_&&console.error("the determinant is 0!");var h=(this._v[5]*f-this._v[9]*u+this._v[13]*l)/_,d=(this._v[8]*u-this._v[4]*f-this._v[12]*l)/_,m=(this._v[7]*i-this._v[11]*o+this._v[15]*r)/_,v=(this._v[10]*o-this._v[6]*i-this._v[14]*r)/_,p=(this._v[9]*c-this._v[1]*f-this._v[13]*s)/_,y=(this._v[0]*f-this._v[8]*c+this._v[12]*s)/_,A=(this._v[11]*n-this._v[3]*i-this._v[15]*t)/_,b=(this._v[2]*i-this._v[10]*n+this._v[14]*t)/_,g=(this._v[1]*u-this._v[5]*c+this._v[13]*a)/_,x=(this._v[4]*c-this._v[0]*u-this._v[12]*a)/_,I=(this._v[3]*o-this._v[7]*n+this._v[15]*e)/_,E=(this._v[6]*n-this._v[2]*o-this._v[14]*e)/_,w=(this._v[5]*s-this._v[1]*l-this._v[9]*a)/_,S=(this._v[0]*l-this._v[4]*s+this._v[8]*a)/_,T=(this._v[7]*t-this._v[3]*r-this._v[11]*e)/_,C=(this._v[2]*r-this._v[6]*t+this._v[10]*e)/_;return this.setComponents(h,d,m,v,p,y,A,b,g,x,I,E,w,S,T,C)},_.translate=function(e){return this.setComponents(1,0,0,e._v[0],0,1,0,e._v[1],0,0,1,e._v[2],0,0,0,1)},_.putTranslate=function(e){return this._v[12]=e._v[0],this._v[13]=e._v[1],this._v[14]=e._v[2],this},_.addTranslate=function(e){return this._v[12]+=e._v[0],this._v[13]+=e._v[1],this._v[14]+=e._v[2],this},_.rotateX=function(e){var t=Math.cos(e),n=Math.sin(e);return this.setComponents(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1)},_.rotateY=function(e){var t=Math.cos(e),n=Math.sin(e);return this.setComponents(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1)},_.rotateZ=function(e){var t=Math.cos(e),n=Math.sin(e);return this.setComponents(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1)},_.rotateXYZ=function(e,t,n){var r=Math.cos(e),o=Math.sin(e),i=Math.cos(t),a=Math.sin(t),s=Math.cos(n),c=Math.sin(n),l=-o,u=-c,f=a*o,_=a*r,h=s*i,d=s*f+u*r,m=s*_+u*l,v=c*i,p=c*f+s*r,y=c*_+s*l,A=-a,b=i*o,g=i*r;return this.setComponents(h,d,m,0,v,p,y,0,A,b,g,0,0,0,0,1)},_.rotate=function(e){return this.rotateXYZ(e._v[0],e._v[1],e._v[2])},_.scale=function(e){return this.setComponents(e._v[0],0,0,0,0,e._v[1],0,0,0,0,e._v[2],0,0,0,0,1)},_.multiplyScale=function(e){return this._v[0]*=e._v[0],this._v[4]*=e._v[0],this._v[8]*=e._v[0],this._v[12]*=e._v[0],this._v[1]*=e._v[1],this._v[5]*=e._v[1],this._v[9]*=e._v[1],this._v[13]*=e._v[1],this._v[2]*=e._v[2],this._v[6]*=e._v[2],this._v[10]*=e._v[2],this._v[14]*=e._v[2],this},_.multiply=function(e){if(e.isIdentityMatrixClass)return this;var t=this._v[0]*e._v[0]+this._v[4]*e._v[1]+this._v[8]*e._v[2]+this._v[12]*e._v[3],n=this._v[0]*e._v[4]+this._v[4]*e._v[5]+this._v[8]*e._v[6]+this._v[12]*e._v[7],r=this._v[0]*e._v[8]+this._v[4]*e._v[9]+this._v[8]*e._v[10]+this._v[12]*e._v[11],o=this._v[0]*e._v[12]+this._v[4]*e._v[13]+this._v[8]*e._v[14]+this._v[12]*e._v[15],i=this._v[1]*e._v[0]+this._v[5]*e._v[1]+this._v[9]*e._v[2]+this._v[13]*e._v[3],a=this._v[1]*e._v[4]+this._v[5]*e._v[5]+this._v[9]*e._v[6]+this._v[13]*e._v[7],s=this._v[1]*e._v[8]+this._v[5]*e._v[9]+this._v[9]*e._v[10]+this._v[13]*e._v[11],c=this._v[1]*e._v[12]+this._v[5]*e._v[13]+this._v[9]*e._v[14]+this._v[13]*e._v[15],l=this._v[2]*e._v[0]+this._v[6]*e._v[1]+this._v[10]*e._v[2]+this._v[14]*e._v[3],u=this._v[2]*e._v[4]+this._v[6]*e._v[5]+this._v[10]*e._v[6]+this._v[14]*e._v[7],f=this._v[2]*e._v[8]+this._v[6]*e._v[9]+this._v[10]*e._v[10]+this._v[14]*e._v[11],_=this._v[2]*e._v[12]+this._v[6]*e._v[13]+this._v[10]*e._v[14]+this._v[14]*e._v[15],h=this._v[3]*e._v[0]+this._v[7]*e._v[1]+this._v[11]*e._v[2]+this._v[15]*e._v[3],d=this._v[3]*e._v[4]+this._v[7]*e._v[5]+this._v[11]*e._v[6]+this._v[15]*e._v[7],m=this._v[3]*e._v[8]+this._v[7]*e._v[9]+this._v[11]*e._v[10]+this._v[15]*e._v[11],v=this._v[3]*e._v[12]+this._v[7]*e._v[13]+this._v[11]*e._v[14]+this._v[15]*e._v[15];return this.setComponents(t,n,r,o,i,a,s,c,l,u,f,_,h,d,m,v)},_.multiplyByLeft=function(e){if(e.isIdentityMatrixClass)return this;var t=e._v[0]*this._v[0]+e._v[4]*this._v[1]+e._v[8]*this._v[2]+e._v[12]*this._v[3],n=e._v[0]*this._v[4]+e._v[4]*this._v[5]+e._v[8]*this._v[6]+e._v[12]*this._v[7],r=e._v[0]*this._v[8]+e._v[4]*this._v[9]+e._v[8]*this._v[10]+e._v[12]*this._v[11],o=e._v[0]*this._v[12]+e._v[4]*this._v[13]+e._v[8]*this._v[14]+e._v[12]*this._v[15],i=e._v[1]*this._v[0]+e._v[5]*this._v[1]+e._v[9]*this._v[2]+e._v[13]*this._v[3],a=e._v[1]*this._v[4]+e._v[5]*this._v[5]+e._v[9]*this._v[6]+e._v[13]*this._v[7],s=e._v[1]*this._v[8]+e._v[5]*this._v[9]+e._v[9]*this._v[10]+e._v[13]*this._v[11],c=e._v[1]*this._v[12]+e._v[5]*this._v[13]+e._v[9]*this._v[14]+e._v[13]*this._v[15],l=e._v[2]*this._v[0]+e._v[6]*this._v[1]+e._v[10]*this._v[2]+e._v[14]*this._v[3],u=e._v[2]*this._v[4]+e._v[6]*this._v[5]+e._v[10]*this._v[6]+e._v[14]*this._v[7],f=e._v[2]*this._v[8]+e._v[6]*this._v[9]+e._v[10]*this._v[10]+e._v[14]*this._v[11],_=e._v[2]*this._v[12]+e._v[6]*this._v[13]+e._v[10]*this._v[14]+e._v[14]*this._v[15],h=e._v[3]*this._v[0]+e._v[7]*this._v[1]+e._v[11]*this._v[2]+e._v[15]*this._v[3],d=e._v[3]*this._v[4]+e._v[7]*this._v[5]+e._v[11]*this._v[6]+e._v[15]*this._v[7],m=e._v[3]*this._v[8]+e._v[7]*this._v[9]+e._v[11]*this._v[10]+e._v[15]*this._v[11],v=e._v[3]*this._v[12]+e._v[7]*this._v[13]+e._v[11]*this._v[14]+e._v[15]*this._v[15];return this.setComponents(t,n,r,o,i,a,s,c,l,u,f,_,h,d,m,v)},_.fromQuaternion=function(e){var t=e._v[0]*e._v[0],n=e._v[1]*e._v[1],r=e._v[2]*e._v[2],o=e._v[1]*e._v[2],i=e._v[0]*e._v[2],a=e._v[0]*e._v[1],s=e._v[3]*e._v[0],c=e._v[3]*e._v[1],l=e._v[3]*e._v[2],u=1-2*(n+r),f=2*(a-l),_=2*(i+c),h=2*(a+l),d=1-2*(t+r),m=2*(o-s),v=2*(i-c),p=2*(o+s),y=1-2*(t+n);return this.setComponents(u,f,_,0,h,d,m,0,v,p,y,0,0,0,0,1)},l.zero=function(){return l.fromCopy16RowMajor(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},l.identity=function(){return l.fromCopy16RowMajor(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},l.dummy=function(){return i(a(l),"dummy",this).call(this)},l.transpose=function(e){return e.isIdentityMatrixClass?e:l.fromCopyFloat32ArrayRowMajor(e._v)},l.invert=function(e){return i(a(l),"invert",this).call(this,e)},l.translate=function(e){return i(a(l),"translate",this).call(this,e)},l.rotateX=function(e){return i(a(l),"rotateX",this).call(this,e)},l.rotateY=function(e){return i(a(l),"rotateY",this).call(this,e)},l.rotateZ=function(e){return i(a(l),"rotateZ",this).call(this,e)},l.rotateXYZ=function(e,t,n){return i(a(l),"rotateXYZ",this).call(this,e,t,n)},l.rotate=function(e){return i(a(l),"rotateXYZ",this).call(this,e._v[0],e._v[1],e._v[2])},l.scale=function(e){return i(a(l),"scale",this).call(this,e)},l.multiply=function(e,t){return i(a(l),"multiply",this).call(this,e,t)},l.fromCopy16RowMajor=function(e,t,n,r,o,i,a,s,c,u,f,_,h,d,m,v){var p=new Float32Array(16);return p[0]=e,p[4]=t,p[8]=n,p[12]=r,p[1]=o,p[5]=i,p[9]=a,p[13]=s,p[2]=c,p[6]=u,p[10]=f,p[14]=_,p[3]=h,p[7]=d,p[11]=m,p[15]=v,new l(p)},l.fromCopy16ColumnMajor=function(e,t,n,r,o,i,a,s,c,u,f,_,h,d,m,v){var p=new Float32Array(16);return p[0]=e,p[4]=o,p[8]=c,p[12]=h,p[1]=t,p[5]=i,p[9]=u,p[13]=d,p[2]=n,p[6]=a,p[10]=f,p[14]=m,p[3]=r,p[7]=s,p[11]=_,p[15]=v,new l(p)},l.fromCopyMatrix44=function(e){var t=new Float32Array(16);return t.set(e._v),new l(t)},l.fromFloat32ArrayColumnMajor=function(e){return new l(e)},l.fromCopyFloat32ArrayColumnMajor=function(e){var t=new Float32Array(16);return t.set(e),new l(t)},l.fromCopyFloat32ArrayRowMajor=function(e){var t=new Float32Array(16);return t[0]=e[0],t[4]=e[1],t[8]=e[2],t[12]=e[3],t[1]=e[4],t[5]=e[5],t[9]=e[6],t[13]=e[7],t[2]=e[8],t[6]=e[9],t[10]=e[10],t[14]=e[11],t[3]=e[12],t[7]=e[13],t[11]=e[14],t[15]=e[15],new l(t)},l.fromCopyMatrix33=function(e){var t=new Float32Array(16);return t[0]=e._v[0],t[4]=e._v[3],t[8]=e._v[6],t[12]=0,t[1]=e._v[1],t[5]=e._v[4],t[9]=e._v[7],t[13]=0,t[2]=e._v[2],t[6]=e._v[5],t[10]=e._v[8],t[14]=0,t[3]=0,t[7]=0,t[11]=0,t[15]=1,new l(t)},l.fromCopyArray16ColumnMajor=function(e){var t=new Float32Array(16);return t.set(e),new l(t)},l.fromCopyArrayColumnMajor=function(e){var t=new Float32Array(16);return t.set(e),new l(t)},l.fromCopyArray16RowMajor=function(e){var t=new Float32Array(16);return t[0]=e[0],t[4]=e[1],t[8]=e[2],t[12]=e[3],t[1]=e[4],t[5]=e[5],t[9]=e[6],t[13]=e[7],t[2]=e[8],t[6]=e[9],t[10]=e[10],t[14]=e[11],t[3]=e[12],t[7]=e[13],t[11]=e[14],t[15]=e[15],new l(t)},l.fromCopyArrayRowMajor=function(e){var t=new Float32Array(16);return t[0]=e[0],t[4]=e[1],t[8]=e[2],t[12]=e[3],t[1]=e[4],t[5]=e[5],t[9]=e[6],t[13]=e[7],t[2]=e[8],t[6]=e[9],t[10]=e[10],t[14]=e[11],t[3]=e[12],t[7]=e[13],t[11]=e[14],t[15]=e[15],new l(t)},l.fromCopyQuaternion=function(e){var t=e._v[0]*e._v[0],n=e._v[1]*e._v[1],r=e._v[2]*e._v[2],o=e._v[1]*e._v[2],i=e._v[0]*e._v[2],a=e._v[0]*e._v[1],s=e._v[3]*e._v[0],c=e._v[3]*e._v[1],u=e._v[3]*e._v[2],f=new Float32Array(16);return f[0]=1-2*(n+r),f[4]=2*(a-u),f[8]=2*(i+c),f[12]=0,f[1]=2*(a+u),f[5]=1-2*(t+r),f[9]=2*(o-s),f[13]=0,f[2]=2*(i-c),f[6]=2*(o+s),f[10]=1-2*(t+n),f[14]=0,f[3]=0,f[7]=0,f[11]=0,f[15]=1,new l(f)},u=l,(f=[{key:"m00",get:function(){return this._v[0]},set:function(e){this._v[0]=e}},{key:"m10",get:function(){return this._v[1]},set:function(e){this._v[1]=e}},{key:"m20",get:function(){return this._v[2]},set:function(e){this._v[2]=e}},{key:"m30",get:function(){return this._v[3]},set:function(e){this._v[3]=e}},{key:"m01",get:function(){return this._v[4]},set:function(e){this._v[4]=e}},{key:"m11",get:function(){return this._v[5]},set:function(e){this._v[5]=e}},{key:"m21",get:function(){return this._v[6]},set:function(e){this._v[6]=e}},{key:"m31",get:function(){return this._v[7]},set:function(e){this._v[7]=e}},{key:"m02",get:function(){return this._v[8]},set:function(e){this._v[8]=e}},{key:"m12",get:function(){return this._v[9]},set:function(e){this._v[9]=e}},{key:"m22",get:function(){return this._v[10]},set:function(e){this._v[10]=e}},{key:"m32",get:function(){return this._v[11]},set:function(e){this._v[11]=e}},{key:"m03",get:function(){return this._v[12]},set:function(e){this._v[12]=e}},{key:"m13",get:function(){return this._v[13]},set:function(e){this._v[13]=e}},{key:"m23",get:function(){return this._v[14]},set:function(e){this._v[14]=e}},{key:"m33",get:function(){return this._v[15]},set:function(e){this._v[15]=e}},{key:"translateX",get:function(){return this._v[12]},set:function(e){this._v[12]=e}},{key:"translateY",get:function(){return this._v[13]},set:function(e){this._v[13]=e}},{key:"translateZ",get:function(){return this._v[14]},set:function(e){this._v[14]=e}},{key:"className",get:function(){return"MutableMatrix44"}}])&&o(u.prototype,f),l}(r.J)},8776:(e,t,n)=>{n.d(t,{y:()=>u});var r=n(5233);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},i(e,t,n||e)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}var l=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,n,r=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=a(t);if(n){var o=a(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return s(this,e)});function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),r.call(this,e)}var u,f,_=l.prototype;return _.raw=function(){return this._v},_.setAt=function(e,t){return this._v[e]=t,this},_.setComponents=function(e,t,n,r){return this._v[0]=e,this._v[1]=t,this._v[2]=n,this._v[3]=r,this},_.copyComponents=function(e){return this.setComponents(e._v[0],e._v[1],e._v[2],e._v[3])},_.identity=function(){return this.setComponents(0,0,0,1)},_.normalize=function(){var e=this.length();return this.divideNumber(e)},_.invert=function(){var e=this.length();return 0===e||(this._v[0]=-this._v[0]/e,this._v[1]=-this._v[1]/e,this._v[2]=-this._v[2]/e,this._v[3]=this._v[3]/e),this},_.qlerp=function(e,t,n){var r=e._v[3]*t._v[3]+e._v[0]*t._v[0]+e._v[1]*t._v[1]+e._v[2]*t._v[2];if(0==1-r*r)return this.copyComponents(e);r>1?r=.999:r<-1&&(r=-.999);var o,i=Math.acos(r);r<0&&i>Math.PI/2?(r=-e._v[3]*t._v[3]-e._v[0]*t._v[0]-e._v[1]*t._v[1]-e._v[2]*t._v[2],i=Math.acos(r),o=-1*Math.sin(i*n)/Math.sin(i)):o=Math.sin(i*n)/Math.sin(i);var a=Math.sin(i*(1-n))/Math.sin(i);return this._v[0]=e._v[0]*a+t._v[0]*o,this._v[1]=e._v[1]*a+t._v[1]*o,this._v[2]=e._v[2]*a+t._v[2]*o,this._v[3]=e._v[3]*a+t._v[3]*o,this},_.lerp=function(e,t,n){return this._v[0]=e._v[0]*(1-n)+t._v[0]*n,this._v[1]=e._v[1]*(1-n)+t._v[1]*n,this._v[2]=e._v[2]*(1-n)+t._v[2]*n,this._v[3]=e._v[3]*(1-n)+t._v[3]*n,this},_.axisAngle=function(e,t){var n=.5*t,r=Math.sin(n),o=e.length();return 0===o&&console.error("0 division occurred!"),this._v[3]=Math.cos(n),this._v[0]=r*e._v[0]/o,this._v[1]=r*e._v[1]/o,this._v[2]=r*e._v[2]/o,this},_.fromMatrix=function(e){var t=e.m00+e.m11+e.m22;if(t>0){var n=.5/Math.sqrt(t+1);this._v[0]=(e.m21-e.m12)*n,this._v[1]=(e.m02-e.m20)*n,this._v[2]=(e.m10-e.m01)*n,this._v[3]=.25/n}else if(e.m00>e.m11&&e.m00>e.m22){var r=2*Math.sqrt(1+e.m00-e.m11-e.m22);this._v[0]=.25*r,this._v[1]=(e.m01+e.m10)/r,this._v[2]=(e.m02+e.m20)/r,this._v[3]=(e.m21-e.m12)/r}else if(e.m11>e.m22){var o=2*Math.sqrt(1+e.m11-e.m00-e.m22);this._v[0]=(e.m01+e.m10)/o,this._v[1]=.25*o,this._v[2]=(e.m12+e.m21)/o,this._v[3]=(e.m02-e.m20)/o}else{var i=2*Math.sqrt(1+e.m22-e.m00-e.m11);this._v[0]=(e.m02+e.m20)/i,this._v[1]=(e.m12+e.m21)/i,this._v[2]=.25*i,this._v[3]=(e.m10-e.m01)/i}return this},_.fromPosition=function(e){return this.setComponents(e._v[0],e._v[1],e._v[2],0)},_.add=function(e){return this._v[0]+=e._v[0],this._v[1]+=e._v[1],this._v[2]+=e._v[2],this._v[3]+=e._v[3],this},_.subtract=function(e){return this._v[0]-=e._v[0],this._v[1]-=e._v[1],this._v[2]-=e._v[2],this._v[3]-=e._v[3],this},_.multiply=function(e){var t=e._v[3]*this._v[0]+e._v[2]*this._v[1]+e._v[1]*this._v[2]-e._v[0]*this._v[3],n=-e._v[2]*this._v[0]+e._v[3]*this._v[1]+e._v[0]*this._v[2]-e._v[1]*this._v[3],r=e._v[1]*this._v[0]+e._v[0]*this._v[1]+e._v[3]*this._v[2]-e._v[2]*this._v[3],o=-e._v[0]*this._v[0]-e._v[1]*this._v[1]-e._v[2]*this._v[2]-e._v[3]*this._v[3];return this.setComponents(t,n,r,o)},_.multiplyNumber=function(e){return this._v[0]*=e,this._v[1]*=e,this._v[2]*=e,this._v[3]*=e,this},_.divideNumber=function(e){return 0!==e?(this._v[0]/=e,this._v[1]/=e,this._v[2]/=e,this._v[3]/=e):(console.error("0 division occurred!"),this._v[0]=1/0,this._v[1]=1/0,this._v[2]=1/0,this._v[3]=1/0),this},_.clone=function(){return l.fromCopy4(this._v[0],this._v[1],this._v[2],this._v[3])},l.identity=function(){return l.fromCopy4(0,0,0,1)},l.dummy=function(){return new this(new Float32Array(0))},l.invert=function(e){return i(a(l),"invert",this).call(this,e)},l.qlerp=function(e,t,n){return i(a(l),"qlerp",this).call(this,e,t,n)},l.lerp=function(e,t,n){return i(a(l),"lerp",this).call(this,e,t,n)},l.axisAngle=function(e,t){return i(a(l),"axisAngle",this).call(this,e,t)},l.fromMatrix=function(e){return i(a(l),"fromMatrix",this).call(this,e)},l.fromPosition=function(e){return i(a(l),"fromPosition",this).call(this,e)},l.add=function(e,t){return i(a(l),"add",this).call(this,e,t)},l.subtract=function(e,t){return i(a(l),"subtract",this).call(this,e,t)},l.multiply=function(e,t){return i(a(l),"multiply",this).call(this,e,t)},l.multiplyNumber=function(e,t){return i(a(l),"multiplyNumber",this).call(this,e,t)},l.divideNumber=function(e,t){return i(a(l),"divideNumber",this).call(this,e,t)},l.fromFloat32Array=function(e){return new l(e)},l.fromCopyArray4=function(e){return new l(new Float32Array(e))},l.fromCopyArray=function(e){return new l(new Float32Array(e.slice(0,4)))},l.fromCopy4=function(e,t,n,r){return new l(new Float32Array([e,t,n,r]))},l.fromCopyQuaternion=function(e){var t=new Float32Array(4);return t[0]=e._v[0],t[1]=e._v[1],t[2]=e._v[2],t[3]=e._v[3],new l(t)},l.fromCopyVector4=function(e){var t=new Float32Array(4);return t[0]=e._v[0],t[1]=e._v[1],t[2]=e._v[2],t[3]=e._v[3],new l(t)},l.fromCopyLogQuaternion=function(e){var t=e._v[0]*e._v[0]+e._v[1]*e._v[1]+e._v[2]*e._v[2],n=Math.sin(t),r=new Float32Array(4);return r[0]=e._v[0]*(n/t),r[1]=e._v[1]*(n/t),r[2]=e._v[2]*(n/t),r[3]=Math.cos(t),new l(r)},u=l,(f=[{key:"x",get:function(){return this._v[0]},set:function(e){this._v[0]=e}},{key:"y",get:function(){return this._v[1]},set:function(e){this._v[1]=e}},{key:"z",get:function(){return this._v[2]},set:function(e){this._v[2]=e}},{key:"w",get:function(){return this._v[3]},set:function(e){this._v[3]=e}},{key:"className",get:function(){return"MutableQuaternion"}}])&&o(u.prototype,f),l}(r._)},3764:(e,t,n)=>{n.d(t,{$_:()=>v,DU:()=>m,Et:()=>d});var r=n(1811),o=n(3932);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function u(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var _=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}var d=function(e){l(n,e);var t=h(n);function n(e,r){var o=r.type;return i(this,n),t.call(this,e,{type:o})}var r=n.prototype;return r.copyComponents=function(e){this._v[0]=e._v[0]},r.toString=function(){return"("+this._v[0]+")"},r.setValue=function(e){return this.x=e,this},s(n,[{key:"x",get:function(){return this._v[0]},set:function(e){this._v[0]=e}},{key:"y",get:function(){return 0}},{key:"z",get:function(){return 0}},{key:"w",get:function(){return 1}},{key:"bytesPerComponent",get:function(){return this._v.BYTES_PER_ELEMENT}}],[{key:"compositionType",get:function(){return o.d.Scalar}}]),n}(r.ap),m=function(e){l(n,e);var t=h(n);function n(e){return i(this,n),t.call(this,e,{type:Float32Array})}return n.prototype.clone=function(){return new n(new Float32Array([this.x]))},n.one=function(){return new n(new Float32Array([1]))},n.dummy=function(){return new n(new Float32Array([]))},n.zero=function(){return new n(new Float32Array([0]))},s(n,[{key:"className",get:function(){return"MutableScalar"}}]),n}(d),v=function(e){l(n,e);var t=h(n);function n(e){return i(this,n),t.call(this,e,{type:Float64Array})}return n.prototype.clone=function(){return new n(new Float64Array([this.x]))},n.one=function(){return new n(new Float64Array([1]))},n.dummy=function(){return new n(new Float64Array([]))},n.zero=function(){return new n(new Float64Array([0]))},n}(d)},9513:(e,t,n)=>{n.d(t,{NR:()=>m,el:()=>d,th:()=>v});var r=n(8020);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t,n){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},s(e,t,n||e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function u(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var _=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}var d=function(e){l(n,e);var t=h(n);function n(e,r){var i=r.type;return o(this,n),t.call(this,e,{type:i})}var r=n.prototype;return r.raw=function(){return this._v},r.setAt=function(e,t){return this._v[e]=t,this},r.setComponents=function(e,t){return this._v[0]=e,this._v[1]=t,this},r.copyComponents=function(e){return this.setComponents(e._v[0],e._v[1])},r.zero=function(){return this.setComponents(0,0)},r.one=function(){return this.setComponents(1,1)},r.normalize=function(){var e=this.length();return this.divide(e),this},r.add=function(e){return this._v[0]+=e._v[0],this._v[1]+=e._v[1],this},r.subtract=function(e){return this._v[0]-=e._v[0],this._v[1]-=e._v[1],this},r.multiply=function(e){return this._v[0]*=e,this._v[1]*=e,this},r.multiplyVector=function(e){return this._v[0]*=e._v[0],this._v[1]*=e._v[1],this},r.divide=function(e){return 0!==e?(this._v[0]/=e,this._v[1]/=e):(console.error("0 division occurred!"),this._v[0]=1/0,this._v[1]=1/0),this},r.divideVector=function(e){return 0!==e._v[0]&&0!==e._v[1]?(this._v[0]/=e._v[0],this._v[1]/=e._v[1]):(console.error("0 division occurred!"),this._v[0]=0===e._v[0]?1/0:this._v[0]/e._v[0],this._v[1]=0===e._v[1]?1/0:this._v[1]/e._v[1]),this},a(n,[{key:"x",get:function(){return this._v[0]},set:function(e){this._v[0]=e}},{key:"y",get:function(){return this._v[1]},set:function(e){this._v[1]=e}},{key:"z",get:function(){return 0}},{key:"w",get:function(){return 1}},{key:"bytesPerComponent",get:function(){return this._v.BYTES_PER_ELEMENT}}]),n}(r.pV),m=function(e){l(n,e);var t=h(n);function n(e){return o(this,n),t.call(this,e,{type:Float32Array})}return n.prototype.clone=function(){return s(c(n.prototype),"clone",this).call(this)},n.fromCopyArray2=function(e){return new n(new Float32Array(e))},n.fromCopyArray=function(e){return new n(new Float32Array(e.slice(0,2)))},n.fromFloat32Array=function(e){return new n(e)},n.fromCopyFloat32Array=function(e){return new n(new Float32Array(e.buffer.slice(0)))},n.zero=function(){return s(c(n),"_zero",this).call(this,Float32Array)},n.one=function(){return s(c(n),"_one",this).call(this,Float32Array)},n.dummy=function(){return s(c(n),"_dummy",this).call(this,Float32Array)},n.normalize=function(e){return s(c(n),"_normalize",this).call(this,e,Float32Array)},n.add=function(e,t){return s(c(n),"_add",this).call(this,e,t,Float32Array)},n.subtract=function(e,t){return s(c(n),"_subtract",this).call(this,e,t,Float32Array)},n.multiply=function(e,t){return s(c(n),"_multiply",this).call(this,e,t,Float32Array)},n.multiplyVector=function(e,t){return s(c(n),"_multiplyVector",this).call(this,e,t,Float32Array)},n.divide=function(e,t){return s(c(n),"_divide",this).call(this,e,t,Float32Array)},n.divideVector=function(e,t){return s(c(n),"_divideVector",this).call(this,e,t,Float32Array)},a(n,[{key:"className",get:function(){return"MutableVector2"}}]),n}(d),v=function(e){l(n,e);var t=h(n);function n(e){return o(this,n),t.call(this,e,{type:Float64Array})}return n.prototype.clone=function(){return s(c(n.prototype),"clone",this).call(this)},n.fromCopyArray=function(e){return new n(new Float64Array(e))},n.zero=function(){return s(c(n),"_zero",this).call(this,Float64Array)},n.one=function(){return s(c(n),"_one",this).call(this,Float64Array)},n.dummy=function(){return s(c(n),"_dummy",this).call(this,Float64Array)},n.normalize=function(e){return s(c(n),"_normalize",this).call(this,e,Float64Array)},n.add=function(e,t){return s(c(n),"_add",this).call(this,e,t,Float64Array)},n.subtract=function(e,t){return s(c(n),"_subtract",this).call(this,e,t,Float64Array)},n.multiply=function(e,t){return s(c(n),"_multiply",this).call(this,e,t,Float64Array)},n.multiplyVector=function(e,t){return s(c(n),"_multiplyVector",this).call(this,e,t,Float64Array)},n.divide=function(e,t){return s(c(n),"_divide",this).call(this,e,t,Float64Array)},n.divideVector=function(e,t){return s(c(n),"_divideVector",this).call(this,e,t,Float64Array)},n}(d)},988:(e,t,n)=>{n.d(t,{I1:()=>d,d6:()=>m,oV:()=>v});var r=n(6860);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t,n){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},s(e,t,n||e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function u(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var _=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}var d=function(e){l(n,e);var t=h(n);function n(e,r){var i=r.type;return o(this,n),t.call(this,e,{type:i})}var r=n.prototype;return r.raw=function(){return this._v},r.setAt=function(e,t){return this._v[e]=t,this},r.setComponents=function(e,t,n){return this._v[0]=e,this._v[1]=t,this._v[2]=n,this},r.copyComponents=function(e){return this.setComponents(e._v[0],e._v[1],e._v[2])},r.zero=function(){return this.setComponents(0,0,0)},r.one=function(){return this.setComponents(1,1,1)},r.normalize=function(){var e=this.length();return this.divide(e),this},r.add=function(e){return this._v[0]+=e._v[0],this._v[1]+=e._v[1],this._v[2]+=e._v[2],this},r.subtract=function(e){return this._v[0]-=e._v[0],this._v[1]-=e._v[1],this._v[2]-=e._v[2],this},r.multiply=function(e){return this._v[0]*=e,this._v[1]*=e,this._v[2]*=e,this},r.multiplyVector=function(e){return this._v[0]*=e._v[0],this._v[1]*=e._v[1],this._v[2]*=e._v[2],this},r.divide=function(e){return 0!==e?(this._v[0]/=e,this._v[1]/=e,this._v[2]/=e):(console.error("0 division occurred!"),this._v[0]=1/0,this._v[1]=1/0,this._v[2]=1/0),this},r.divideVector=function(e){return 0!==e._v[0]&&0!==e._v[1]&&0!==e._v[2]?(this._v[0]/=e._v[0],this._v[1]/=e._v[1],this._v[2]/=e._v[2]):(console.error("0 division occurred!"),this._v[0]=0===e._v[0]?1/0:this._v[0]/e._v[0],this._v[1]=0===e._v[1]?1/0:this._v[1]/e._v[1],this._v[2]=0===e._v[2]?1/0:this._v[2]/e._v[2]),this},r.cross=function(e){var t=this._v[1]*e._v[2]-this._v[2]*e._v[1],n=this._v[2]*e._v[0]-this._v[0]*e._v[2],r=this._v[0]*e._v[1]-this._v[1]*e._v[0];return this.setComponents(t,n,r)},r.multiplyQuaternion=function(e){var t=2*e._v[0],n=2*e._v[1],r=2*e._v[2],o=e._v[0]*t,i=e._v[1]*n,a=e._v[2]*r,s=e._v[0]*n,c=e._v[0]*r,l=e._v[1]*r,u=e._v[3]*t,f=e._v[3]*n,_=e._v[3]*r,h=(1-(i+a))*this._v[0]+(s-_)*this._v[1]+(c+f)*this._v[2],d=(s+_)*this._v[0]+(1-(o+a))*this._v[1]+(l-u)*this._v[2],m=(c-f)*this._v[0]+(l+u)*this._v[1]+(1-(o+i))*this._v[2];return this.setComponents(h,d,m)},n._fromCopy3=function(e,t,n,r){return new this(new r([e,t,n]),{type:r})},a(n,[{key:"x",get:function(){return this._v[0]},set:function(e){this._v[0]=e}},{key:"y",get:function(){return this._v[1]},set:function(e){this._v[1]=e}},{key:"z",get:function(){return this._v[2]},set:function(e){this._v[2]=e}},{key:"w",get:function(){return 1}},{key:"bytesPerComponent",get:function(){return this._v.BYTES_PER_ELEMENT}}]),n}(r.pg),m=function(e){l(n,e);var t=h(n);function n(e){return o(this,n),t.call(this,e,{type:Float32Array})}return n.prototype.clone=function(){return s(c(n.prototype),"clone",this).call(this)},n.zero=function(){return s(c(n),"_zero",this).call(this,Float32Array)},n.one=function(){return s(c(n),"_one",this).call(this,Float32Array)},n.dummy=function(){return s(c(n),"_dummy",this).call(this,Float32Array)},n.normalize=function(e){return s(c(n),"_normalize",this).call(this,e,Float32Array)},n.add=function(e,t){return s(c(n),"_add",this).call(this,e,t,Float32Array)},n.subtract=function(e,t){return s(c(n),"_subtract",this).call(this,e,t,Float32Array)},n.multiply=function(e,t){return s(c(n),"_multiply",this).call(this,e,t,Float32Array)},n.multiplyVector=function(e,t){return s(c(n),"_multiplyVector",this).call(this,e,t,Float32Array)},n.divide=function(e,t){return s(c(n),"_divide",this).call(this,e,t,Float32Array)},n.divideVector=function(e,t){return s(c(n),"_divideVector",this).call(this,e,t,Float32Array)},n.cross=function(e,t){return s(c(n),"_cross",this).call(this,e,t,Float32Array)},n.multiplyQuaternion=function(e,t){return s(c(n),"_multiplyQuaternion",this).call(this,e,t,Float32Array)},n.fromCopy3=function(e,t,r){return s(c(n),"_fromCopy3",this).call(this,e,t,r,Float32Array)},n.fromCopy1=function(e){return s(c(n),"_fromCopy3",this).call(this,e,e,e,Float32Array)},n.fromCopyArray3=function(e){return new n(new Float32Array(e))},n.fromCopyArray=function(e){return new n(new Float32Array(e.slice(0,3)))},n.fromFloat32Array=function(e){return new n(e)},n.fromCopyFloat32Array=function(e){return new n(new Float32Array(e.buffer.slice(0)))},n.fromCopyVector3=function(e){return s(c(n),"_fromCopyVector3",this).call(this,e,Float32Array)},n.fromCopyVector4=function(e){return s(c(n),"_fromCopyVector4",this).call(this,e,Float32Array)},n.rotateX=function(e,t,n){var r=Math.cos(t),o=Math.sin(t);n.y=e.y*r-e.z*o,n.z=e.y*o+e.z*r},n.rotateY=function(e,t,n){var r=Math.cos(t),o=Math.sin(t);n.x=e.x*r+e.z*o,n.z=-e.x*o+e.z*r},n.rotateZ=function(e,t,n){var r=Math.cos(t),o=Math.sin(t);n.x=e.x*r-e.y*o,n.y=e.x*o+e.y*r},a(n,[{key:"className",get:function(){return"MutableVector3"}}]),n}(d),v=function(e){l(n,e);var t=h(n);function n(e){return o(this,n),t.call(this,e,{type:Float64Array})}return n.prototype.clone=function(){return s(c(n.prototype),"clone",this).call(this)},n.zero=function(){return s(c(n),"_zero",this).call(this,Float64Array)},n.one=function(){return s(c(n),"_one",this).call(this,Float64Array)},n.dummy=function(){return s(c(n),"_dummy",this).call(this,Float64Array)},n.normalize=function(e){return s(c(n),"_normalize",this).call(this,e,Float64Array)},n.add=function(e,t){return s(c(n),"_add",this).call(this,e,t,Float64Array)},n.subtract=function(e,t){return s(c(n),"_subtract",this).call(this,e,t,Float64Array)},n.multiply=function(e,t){return s(c(n),"_multiply",this).call(this,e,t,Float64Array)},n.multiplyVector=function(e,t){return s(c(n),"_multiplyVector",this).call(this,e,t,Float64Array)},n.divide=function(e,t){return s(c(n),"_divide",this).call(this,e,t,Float64Array)},n.divideVector=function(e,t){return s(c(n),"_divideVector",this).call(this,e,t,Float64Array)},n.cross=function(e,t){return s(c(n),"_cross",this).call(this,e,t,Float64Array)},n.multiplyQuaternion=function(e,t){return s(c(n),"_multiplyQuaternion",this).call(this,e,t,Float64Array)},n.fromCopy3=function(e,t,r){return s(c(n),"_fromCopy3",this).call(this,e,t,r,Float64Array)},n.fromCopy1=function(e){return s(c(n),"_fromCopy3",this).call(this,e,e,e,Float64Array)},n.fromCopyArray3=function(e){return new n(new Float64Array(e))},n.fromCopyArray=function(e){return new n(new Float64Array(e.slice(0,3)))},n.rotateX=function(e,t,n){var r=Math.cos(t),o=Math.sin(t);n.y=e.y*r-e.z*o,n.z=e.y*o+e.z*r},n.rotateY=function(e,t,n){var r=Math.cos(t),o=Math.sin(t);n.x=e.x*r+e.z*o,n.z=-e.x*o+e.z*r},n.rotateZ=function(e,t,n){var r=Math.cos(t),o=Math.sin(t);n.x=e.x*r-e.y*o,n.y=e.x*o+e.y*r},n}(d)},2328:(e,t,n)=>{n.d(t,{e2:()=>d,hn:()=>v,xQ:()=>m});var r=n(6264);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t,n){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},s(e,t,n||e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function u(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var _=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}var d=function(e){l(n,e);var t=h(n);function n(e,r){var i,a=r.type;return o(this,n),(i=t.call(this,e,{type:a})).__updateCount=0,i}var r=n.prototype;return r.raw=function(){return this._v},r.setAt=function(e,t){return this._v[e]=t,this.__updateCount++,this},r.setComponents=function(e,t,n,r){return this._v[0]=e,this._v[1]=t,this._v[2]=n,this._v[3]=r,this.__updateCount++,this},r.copyComponents=function(e){return this.setComponents(e._v[0],e._v[1],e._v[2],e._v[3])},r.zero=function(){return this.setComponents(0,0,0,0)},r.one=function(){return this.setComponents(1,1,1,1)},r.normalize=function(){var e=this.length();return this.divide(e),this},r.normalize3=function(){var e=Math.hypot(this._v[0],this._v[1],this._v[2]);return this.divide(e),this},r.add=function(e){return this._v[0]+=e._v[0],this._v[1]+=e._v[1],this._v[2]+=e._v[2],this._v[3]+=e._v[3],this},r.subtract=function(e){return this._v[0]-=e._v[0],this._v[1]-=e._v[1],this._v[2]-=e._v[2],this._v[3]-=e._v[3],this},r.multiply=function(e){return this._v[0]*=e,this._v[1]*=e,this._v[2]*=e,this._v[3]*=e,this},r.multiplyVector=function(e){return this._v[0]*=e._v[0],this._v[1]*=e._v[1],this._v[2]*=e._v[2],this._v[3]*=e._v[3],this},r.divide=function(e){return 0!==e?(this._v[0]/=e,this._v[1]/=e,this._v[2]/=e,this._v[3]/=e):(console.error("0 division occurred!"),this._v[0]=1/0,this._v[1]=1/0,this._v[2]=1/0,this._v[3]=1/0),this},r.divideVector=function(e){return 0!==e._v[0]&&0!==e._v[1]&&0!==e._v[2]&&0!==e._v[3]?(this._v[0]/=e._v[0],this._v[1]/=e._v[1],this._v[2]/=e._v[2],this._v[3]/=e._v[3]):(console.error("0 division occurred!"),this._v[0]=0===e._v[0]?1/0:this._v[0]/e._v[0],this._v[1]=0===e._v[1]?1/0:this._v[1]/e._v[1],this._v[2]=0===e._v[2]?1/0:this._v[2]/e._v[2],this._v[3]=0===e._v[3]?1/0:this._v[3]/e._v[3]),this},a(n,[{key:"x",get:function(){return this._v[0]},set:function(e){this._v[0]=e,this.__updateCount++}},{key:"y",get:function(){return this._v[1]},set:function(e){this._v[1]=e,this.__updateCount++}},{key:"z",get:function(){return this._v[2]},set:function(e){this._v[2]=e,this.__updateCount++}},{key:"w",get:function(){return this._v[3]},set:function(e){this._v[3]=e,this.__updateCount++}},{key:"bytesPerComponent",get:function(){return this._v.BYTES_PER_ELEMENT}},{key:"_updateCount",get:function(){return this.__updateCount}}]),n}(r.rE),m=function(e){l(n,e);var t=h(n);function n(e){return o(this,n),t.call(this,e,{type:Float32Array})}return n.prototype.clone=function(){return new this.constructor(new this._v.constructor([this._v[0],this._v[1],this._v[2],this._v[3]]))},n.fromCopyArray=function(e){return new n(new Float32Array(e).slice(0,4))},n.fromCopyArray4=function(e){return new n(new Float32Array(e))},n.fromCopy4=function(e,t,r,o){return new n(new Float32Array([e,t,r,o]))},n.zero=function(){return s(c(n),"_zero",this).call(this,Float32Array)},n.one=function(){return s(c(n),"_one",this).call(this,Float32Array)},n.dummy=function(){return s(c(n),"_dummy",this).call(this,Float32Array)},n.normalize=function(e){return s(c(n),"_normalize",this).call(this,e,Float32Array)},n.add=function(e,t){return s(c(n),"_add",this).call(this,e,t,Float32Array)},n.subtract=function(e,t){return s(c(n),"_subtract",this).call(this,e,t,Float32Array)},n.multiply=function(e,t){return s(c(n),"_multiply",this).call(this,e,t,Float32Array)},n.multiplyVector=function(e,t){return s(c(n),"_multiplyVector",this).call(this,e,t,Float32Array)},n.divide=function(e,t){return s(c(n),"_divide",this).call(this,e,t,Float32Array)},n.divideVector=function(e,t){return s(c(n),"_divideVector",this).call(this,e,t,Float32Array)},a(n,[{key:"className",get:function(){return"MutableVector4"}}]),n}(d),v=function(e){l(n,e);var t=h(n);function n(e){return o(this,n),t.call(this,e,{type:Float64Array})}return n.prototype.clone=function(){return s(c(n.prototype),"clone",this).call(this)},n.zero=function(){return s(c(n),"_zero",this).call(this,Float64Array)},n.one=function(){return s(c(n),"_one",this).call(this,Float64Array)},n.dummy=function(){return s(c(n),"_dummy",this).call(this,Float64Array)},n.normalize=function(e){return s(c(n),"_normalize",this).call(this,e,Float64Array)},n.add=function(e,t){return s(c(n),"_add",this).call(this,e,t,Float64Array)},n.subtract=function(e,t){return s(c(n),"_subtract",this).call(this,e,t,Float64Array)},n.multiply=function(e,t){return s(c(n),"_multiply",this).call(this,e,t,Float64Array)},n.multiplyVector=function(e,t){return s(c(n),"_multiplyVector",this).call(this,e,t,Float64Array)},n.divide=function(e,t){return s(c(n),"_divide",this).call(this,e,t,Float64Array)},n.divideVector=function(e,t){return s(c(n),"_divideVector",this).call(this,e,t,Float64Array)},n.fromCopyArray4=function(e){return new n(new Float64Array(e))},n.fromCopyArray=function(e){return new n(new Float64Array(e.slice(0,4)))},n.fromCopy4=function(e,t,r,o){return new n(new Float64Array([e,t,r,o]))},n}(d)},5233:(e,t,n)=>{n.d(t,{_:()=>h});var r=n(4969),o=n(3932),i=n(7586),a=n(6860),s=n(988);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function u(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var _=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(_,e);var t,n,i=(t=_,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=l(t);if(n){var o=l(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return u(this,e)});function _(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(t=i.call(this))._v=e,t}var h,d,m,v=_.prototype;return v.toString=function(){return"("+this._v[0]+", "+this._v[1]+", "+this._v[2]+", "+this._v[3]+")"},v.toStringApproximately=function(){return r.k.financial(this._v[0])+" "+r.k.financial(this._v[1])+" "+r.k.financial(this._v[2])+" "+r.k.financial(this._v[3])+"\n"},v.flattenAsArray=function(){return[this._v[0],this._v[1],this._v[2],this._v[3]]},v.isDummy=function(){return 0===this._v.length},v.isEqual=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;return Math.abs(e._v[0]-this._v[0])<t&&Math.abs(e._v[1]-this._v[1])<t&&Math.abs(e._v[2]-this._v[2])<t&&Math.abs(e._v[3]-this._v[3])<t},v.isStrictEqual=function(e){return this._v[0]===e._v[0]&&this._v[1]===e._v[1]&&this._v[2]===e._v[2]&&this._v[3]===e._v[3]},v.toEulerAnglesTo=function(e){var t=2*(this._v[3]*this._v[0]+this._v[1]*this._v[2]),n=1-2*(this._v[0]*this._v[0]+this._v[1]*this._v[1]);e._v[0]=Math.atan2(t,n);var r=2*(this._v[3]*this._v[1]-this._v[2]*this._v[0]);Math.abs(r)>=1?e._v[1]=Math.PI/2*Math.sign(r):e._v[1]=Math.asin(r);var o=2*(this._v[3]*this._v[2]+this._v[0]*this._v[1]),i=1-2*(this._v[1]*this._v[1]+this._v[2]*this._v[2]);return e._v[2]=Math.atan2(o,i),e},v.toEulerAngles=function(){var e=new a.P(new Float32Array(3)),t=2*(this._v[3]*this._v[0]+this._v[1]*this._v[2]),n=1-2*(this._v[0]*this._v[0]+this._v[1]*this._v[1]);e._v[0]=Math.atan2(t,n);var r=2*(this._v[3]*this._v[1]-this._v[2]*this._v[0]);Math.abs(r)>=1?e._v[1]=Math.PI/2*Math.sign(r):e._v[1]=Math.asin(r);var o=2*(this._v[3]*this._v[2]+this._v[0]*this._v[1]),i=1-2*(this._v[1]*this._v[1]+this._v[2]*this._v[2]);return e._v[2]=Math.atan2(o,i),e},v.fromToRotation=function(e,t){var n=s.d6.fromCopyVector3(e),r=s.d6.fromCopyVector3(t);n.normalize(),r.normalize();var o=n.dot(r);if(o>-1+Number.EPSILON){var i=Math.sqrt(2*(1+o)),c=1/i,l=a.P.multiply(n.cross(r),c);return this._v[0]=l.x,this._v[1]=l.y,this._v[2]=l.z,this._v[3]=.5*i,_.normalize(this)}var u=a.P.fromCopy3(0,1,0),f=n.cross(u);return f.length()<Number.EPSILON&&(u=a.P.fromCopy3(1,0,0),f=n.cross(u)),f.normalize(),_.fromAxisAngle(f,Math.PI)},v.transformVector3=function(e){var t=a.P.fromCopy3(this._v[0],this._v[1],this._v[2]),n=a.P.cross(t,e),r=a.P.cross(t,n),o=a.P.multiply(n,this._v[3]),i=a.P.add(r,o),s=a.P.multiply(i,2);return a.P.add(e,s)},v.transformVector3Inverse=function(e){return _.invert(this).transformVector3(e)},v.clone=function(){return _.fromCopy4(this._v[0],this._v[1],this._v[2],this._v[3])},_.identity=function(){return _.fromCopy4(0,0,0,1)},_.dummy=function(){return new this(new Float32Array(0))},_.invert=function(e){var t=e.length();if(0===t)return _.fromCopy4(0,0,0,0);var n=-e._v[0]/t,r=-e._v[1]/t,o=-e._v[2]/t,i=e._v[3]/t;return _.fromCopy4(n,r,o,i)},_.invertTo=function(e,t){var n=e.length();return 0===n?t.setComponents(0,0,0,0):(t._v[0]=-e._v[0]/n,t._v[1]=-e._v[1]/n,t._v[2]=-e._v[2]/n,t._v[3]=e._v[3]/n,t)},_.qlerp=function(e,t,n){var r=e._v[0]*t._v[0]+e._v[1]*t._v[1]+e._v[2]*t._v[2]+e._v[3]*t._v[3];if(0==1-r*r)return e.clone();r>1?r=.999:r<-1&&(r=-.999);var o,i=Math.acos(r),a=Math.sin(i);r<0?(r*=-1,i=Math.acos(r),o=-1*Math.sin(i*n)/a):o=Math.sin(i*n)/a;var s=Math.sin(i*(1-n))/a,c=e._v[0]*s+t._v[0]*o,l=e._v[1]*s+t._v[1]*o,u=e._v[2]*s+t._v[2]*o,f=e._v[3]*s+t._v[3]*o,h=Math.hypot(c,l,u,f);return c/=h,l/=h,u/=h,f/=h,_.fromCopy4(c,l,u,f)},_.qlerpTo=function(e,t,n,r){var o=e._v[0]*t._v[0]+e._v[1]*t._v[1]+e._v[2]*t._v[2]+e._v[3]*t._v[3];if(0==1-o*o)return r.copyComponents(e);o>1?o=.999:o<-1&&(o=-.999);var i,a=Math.acos(o),s=Math.sin(a);o<0?(o*=-1,a=Math.acos(o),i=-1*Math.sin(a*n)/s):i=Math.sin(a*n)/s;var c=Math.sin(a*(1-n))/s;return r._v[0]=e._v[0]*c+t._v[0]*i,r._v[1]=e._v[1]*c+t._v[1]*i,r._v[2]=e._v[2]*c+t._v[2]*i,r._v[3]=e._v[3]*c+t._v[3]*i,r.normalize()},_.lerp=function(e,t,n){var r=e._v[0]*(1-n)+t._v[0]*n,o=e._v[1]*(1-n)+t._v[1]*n,i=e._v[2]*(1-n)+t._v[2]*n,a=e._v[3]*(1-n)+t._v[3]*n;return _.fromCopy4(r,o,i,a)},_.lerpTo=function(e,t,n,r){return r._v[0]=e._v[0]*(1-n)+t._v[0]*n,r._v[1]=e._v[1]*(1-n)+t._v[1]*n,r._v[2]=e._v[2]*(1-n)+t._v[2]*n,r._v[3]=e._v[3]*(1-n)+t._v[3]*n,r},_.axisAngle=function(e,t){var n=.5*t,r=Math.sin(n),o=e.length();return 0===o&&console.error("0 division occurred!"),_.fromCopy4(r*e._v[0]/o,r*e._v[1]/o,r*e._v[2]/o,Math.cos(n))},_.fromMatrix=function(e){var t=_.fromCopy4(0,0,0,1),n=e.m00+e.m11+e.m22;if(n>0){var r=.5/Math.sqrt(n+1);t._v[3]=.25/r,t._v[0]=(e.m21-e.m12)*r,t._v[1]=(e.m02-e.m20)*r,t._v[2]=(e.m10-e.m01)*r}else if(e.m00>e.m11&&e.m00>e.m22){var o=2*Math.sqrt(1+e.m00-e.m11-e.m22);t._v[3]=(e.m21-e.m12)/o,t._v[0]=.25*o,t._v[1]=(e.m01+e.m10)/o,t._v[2]=(e.m02+e.m20)/o}else if(e.m11>e.m22){var i=2*Math.sqrt(1+e.m11-e.m00-e.m22);t._v[3]=(e.m02-e.m20)/i,t._v[0]=(e.m01+e.m10)/i,t._v[1]=.25*i,t._v[2]=(e.m12+e.m21)/i}else{var a=2*Math.sqrt(1+e.m22-e.m00-e.m11);t._v[3]=(e.m10-e.m01)/a,t._v[0]=(e.m02+e.m20)/a,t._v[1]=(e.m12+e.m21)/a,t._v[2]=.25*a}return t},_.fromMatrixTo=function(e,t){var n=e.m00+e.m11+e.m22;if(n>0){var r=.5/Math.sqrt(n+1);t._v[3]=.25/r,t._v[0]=(e.m21-e.m12)*r,t._v[1]=(e.m02-e.m20)*r,t._v[2]=(e.m10-e.m01)*r}else if(e.m00>e.m11&&e.m00>e.m22){var o=2*Math.sqrt(1+e.m00-e.m11-e.m22);t._v[3]=(e.m21-e.m12)/o,t._v[0]=.25*o,t._v[1]=(e.m01+e.m10)/o,t._v[2]=(e.m02+e.m20)/o}else if(e.m11>e.m22){var i=2*Math.sqrt(1+e.m11-e.m00-e.m22);t._v[3]=(e.m02-e.m20)/i,t._v[0]=(e.m01+e.m10)/i,t._v[1]=.25*i,t._v[2]=(e.m12+e.m21)/i}else{var a=2*Math.sqrt(1+e.m22-e.m00-e.m11);t._v[3]=(e.m10-e.m01)/a,t._v[0]=(e.m02+e.m20)/a,t._v[1]=(e.m12+e.m21)/a,t._v[2]=.25*a}return t},_.lookFromTo=function(e,t){return e.isEqual(t)?_.fromCopy4(0,0,0,1):this.qlerp(this.lookForward(e),this.lookForward(t),1)},_.lookForward=function(e){return null==_.__tmp_upVec&&(_.__tmp_upVec=new e.constructor(0,1,0)),this.lookForwardAccordingToThisUp(e,_.__tmp_upVec)},_.lookForwardAccordingToThisUp=function(e,t){var n=e.length();0===n&&console.error("0 division occurred!");var r=e._v[0]/n,o=e._v[1]/n,i=e._v[2]/n,a=t.length();0===a&&console.error("0 division occurred!");var s=t._v[0]/a,c=t._v[1]/a,l=t._v[2]/a,u=t._v[1]*e._v[2]-t._v[2]*e._v[1],f=t._v[2]*e._v[0]-t._v[0]*e._v[2],h=t._v[0]*e._v[1]-t._v[1]*e._v[0],d=Math.hypot(u,f,h);0===d&&console.error("0 division occurred!");var m=u/=d,v=f/=d,p=h/=d,y=s,A=c,b=l,g=r,x=o,I=i,E=m+A+I;if(E>0){var w=Math.sqrt(E+1),S=.5/w;return _.fromCopy4((b-x)*S,(g-p)*S,(v-y)*S,.5*w)}if(m>=A&&m>=I){var T=Math.sqrt(1+m-A-I),C=.5/T;return _.fromCopy4(.5*T,(v+y)*C,(p+g)*C,(b-x)*C)}if(A>I){var P=Math.sqrt(1+A-m-I),R=.5/P;return _.fromCopy4((y+v)*R,.5*P,(x+b)*R,(g-p)*R)}var D=Math.sqrt(1+I-m-A),M=.5/D;return _.fromCopy4((g+p)*M,(x+b)*M,.5*D,(v-y)*M)},_.fromPosition=function(e){return _.fromCopy4(e._v[0],e._v[1],e._v[2],0)},_.add=function(e,t){var n=e._v[0]+t._v[0],r=e._v[1]+t._v[1],o=e._v[2]+t._v[2],i=e._v[3]+t._v[3];return _.fromCopy4(n,r,o,i)},_.addTo=function(e,t,n){return n._v[0]=e._v[0]+t._v[0],n._v[1]=e._v[1]+t._v[1],n._v[2]=e._v[2]+t._v[2],n._v[3]=e._v[3]+t._v[3],n},_.subtract=function(e,t){var n=e._v[0]-t._v[0],r=e._v[1]-t._v[1],o=e._v[2]-t._v[2],i=e._v[3]-t._v[3];return _.fromCopy4(n,r,o,i)},_.subtractTo=function(e,t,n){return n._v[0]=e._v[0]-t._v[0],n._v[1]=e._v[1]-t._v[1],n._v[2]=e._v[2]-t._v[2],n._v[3]=e._v[3]-t._v[3],n},_.multiply=function(e,t){var n=t._v[3]*e._v[0]+t._v[2]*e._v[1]-t._v[1]*e._v[2]+t._v[0]*e._v[3],r=-t._v[2]*e._v[0]+t._v[3]*e._v[1]+t._v[0]*e._v[2]+t._v[1]*e._v[3],o=t._v[1]*e._v[0]-t._v[0]*e._v[1]+t._v[3]*e._v[2]+t._v[2]*e._v[3],i=-t._v[0]*e._v[0]-t._v[1]*e._v[1]-t._v[2]*e._v[2]+t._v[3]*e._v[3];return _.fromCopy4(n,r,o,i)},_.multiplyTo=function(e,t,n){var r=t._v[3]*e._v[0]+t._v[2]*e._v[1]-t._v[1]*e._v[2]+t._v[0]*e._v[3],o=-t._v[2]*e._v[0]+t._v[3]*e._v[1]+t._v[0]*e._v[2]+t._v[1]*e._v[3],i=t._v[1]*e._v[0]-t._v[0]*e._v[1]+t._v[3]*e._v[2]+t._v[2]*e._v[3],a=-t._v[0]*e._v[0]-t._v[1]*e._v[1]-t._v[2]*e._v[2]+t._v[3]*e._v[3];return n.setComponents(r,o,i,a)},_.multiplyNumber=function(e,t){var n=e._v[0]*t,r=e._v[1]*t,o=e._v[2]*t,i=e._v[3]*t;return _.fromCopy4(n,r,o,i)},_.multiplyNumberTo=function(e,t,n){return n._v[0]=e._v[0]*t,n._v[1]=e._v[1]*t,n._v[2]=e._v[2]*t,n._v[3]=e._v[3]*t,n},_.divideNumber=function(e,t){0===t&&console.error("0 division occurred!");var n=e._v[0]/t,r=e._v[1]/t,o=e._v[2]/t,i=e._v[3]/t;return _.fromCopy4(n,r,o,i)},_.divideNumberTo=function(e,t,n){return 0===t&&console.error("0 division occurred!"),n._v[0]=e._v[0]/t,n._v[1]=e._v[1]/t,n._v[2]=e._v[2]/t,n._v[3]=e._v[3]/t,n},_._divide=function(e,t){var n,r,o,i;return 0!==t?(n=e._v[0]/t,r=e._v[1]/t,o=e._v[2]/t,i=e._v[3]/t):(console.error("0 division occurred!"),n=1/0,r=1/0,o=1/0,i=1/0),_.fromCopy4(n,r,o,i)},_.normalize=function(e){var t=e.length();return this._divide(e,t)},_.fromToRotation=function(e,t){var n=s.d6.fromCopyVector3(e),r=s.d6.fromCopyVector3(t);n.normalize(),r.normalize();var o=n.dot(r);if(o>-1+Number.EPSILON){var i=Math.sqrt(2*(1+o)),c=1/i,l=a.P.multiply(n.cross(r),c);return _.fromCopy4(l.x,l.y,l.z,.5*i)}var u=a.P.fromCopy3(0,1,0),f=n.cross(u);return f.length()<Number.EPSILON&&(u=a.P.fromCopy3(1,0,0),f=n.cross(u)),f.normalize(),_.fromAxisAngle(f,Math.PI)},_.fromFloat32Array=function(e){return new _(e)},_.fromCopyArray4=function(e){return new _(new Float32Array(e))},_.fromCopyArray=function(e){return new _(new Float32Array(e.slice(0,4)))},_.fromCopy4=function(e,t,n,r){return new _(new Float32Array([e,t,n,r]))},_.fromCopyQuaternion=function(e){var t=new Float32Array(4);return t[0]=e._v[0],t[1]=e._v[1],t[2]=e._v[2],t[3]=e._v[3],new _(t)},_.fromCopyVector4=function(e){var t=new Float32Array(4);return t[0]=e._v[0],t[1]=e._v[1],t[2]=e._v[2],t[3]=e._v[3],new _(t)},_.fromCopyLogQuaternion=function(e){var t=e._v[0]*e._v[0]+e._v[1]*e._v[1]+e._v[2]*e._v[2],n=Math.sin(t),r=new Float32Array(4);return r[0]=e._v[0]*(n/t),r[1]=e._v[1]*(n/t),r[2]=e._v[2]*(n/t),r[3]=Math.cos(t),new _(r)},_.fromAxisAngle=function(e,t){t*=.5;var n=Math.sin(t);return _.fromCopy4(n*e.x,n*e.y,n*e.z,Math.cos(t))},h=_,m=[{key:"compositionType",get:function(){return o.d.Vec4}}],(d=[{key:"className",get:function(){return"Quaternion"}}])&&c(h.prototype,d),m&&c(h,m),_}(i.l);h.__tmp_upVec=void 0},1811:(e,t,n)=>{n.d(t,{Ru:()=>p,ap:()=>v,kO:()=>y});var r=n(4969),o=n(2199),i=n(3932);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t,n){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},l(e,t,n||e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function _(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var d=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}var v=function(e){f(n,e);var t=m(n);function n(e,r){var o;return r.type,a(this,n),(o=t.call(this))._v=e,o}var o=n.prototype;return o.getValue=function(){return this._v[0]},o.getValueInArray=function(){return[this._v[0]]},o.isStrictEqual=function(e){return this.x===e.x},o.isEqual=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;return Math.abs(e.x-this.x)<t},n._fromCopyNumber=function(e,t){return new this(new t([e]),{type:t})},n._dummy=function(e){return new this(new e,{type:e})},c(n,[{key:"x",get:function(){return this._v[0]}},{key:"raw",get:function(){return this._v}},{key:"glslStrAsFloat",get:function(){return"".concat(r.k.convertToStringAsGLSLFloat(this.x))}},{key:"glslStrAsInt",get:function(){return"".concat(Math.floor(this.x))}},{key:"bytesPerComponent",get:function(){return this._v.BYTES_PER_ELEMENT}}],[{key:"compositionType",get:function(){return i.d.Scalar}}]),n}(o.O),p=function(e){f(n,e);var t=m(n);function n(e){return a(this,n),t.call(this,e,{type:Float32Array})}var r=n.prototype;return r.toString=function(){return"("+this._v[0]+")"},r.clone=function(){return new n(this._v)},n.fromCopyNumber=function(e){return l(u(n),"_fromCopyNumber",this).call(this,e,Float32Array)},n.zero=function(){return n.fromCopyNumber(0)},n.one=function(){return n.fromCopyNumber(1)},n.dummy=function(){return l(u(n),"_dummy",this).call(this,Float32Array)},c(n,[{key:"className",get:function(){return"Scalar"}}]),n}(v),y=function(e){f(n,e);var t=m(n);function n(e){return a(this,n),t.call(this,e,{type:Float64Array})}return n.prototype.clone=function(){return new n(this._v)},n.fromCopyNumber=function(e){return l(u(n),"_fromCopyNumber",this).call(this,e,Float64Array)},n.zero=function(){return n.fromCopyNumber(0)},n.one=function(){return n.fromCopyNumber(1)},n.dummy=function(){return l(u(n),"_dummy",this).call(this,Float64Array)},n}(v)},8020:(e,t,n)=>{n.d(t,{EY:()=>y,FM:()=>p,HO:()=>A,ig:()=>b,pV:()=>v});var r=n(4969),o=n(3932),i=n(2199);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t,n){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},l(e,t,n||e)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function _(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var d=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}var v=function(e){f(n,e);var t=m(n);function n(e,r){var o;return r.type,a(this,n),(o=t.call(this))._v=e,o}var i=n.prototype;return i.toString=function(){return"("+this._v[0]+", "+this._v[1]+")"},i.toStringApproximately=function(){return r.k.financial(this._v[0])+" "+r.k.financial(this._v[1])+"\n"},i.flattenAsArray=function(){return[this._v[0],this._v[1]]},i.isDummy=function(){return 0===this._v.length},i.isEqual=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;return Math.abs(e._v[0]-this._v[0])<t&&Math.abs(e._v[1]-this._v[1])<t},i.isStrictEqual=function(e){return this._v[0]===e._v[0]&&this._v[1]===e._v[1]},i.at=function(e){return this._v[e]},i.length=function(){return Math.hypot(this._v[0],this._v[1])},i.lengthSquared=function(){return Math.pow(this._v[0],2)+Math.pow(this._v[1],2)},i.lengthTo=function(e){var t=this._v[0]-e._v[0],n=this._v[1]-e._v[1];return Math.hypot(t,n)},i.dot=function(e){return this._v[0]*e._v[0]+this._v[1]*e._v[1]},i.clone=function(){return new this.constructor(new this._v.constructor([this._v[0],this._v[1]]))},n.lengthSquared=function(e){return e.lengthSquared()},n.lengthBtw=function(e,t){return e.lengthTo(t)},n.angleOfVectors=function(e,t){var n=e.length()*t.length();0===n&&console.error("length of a vector is 0!");var r=e.dot(t)/n;return Math.acos(r)},n._zero=function(e){return this._fromCopyArray2([0,0],e)},n._one=function(e){return this._fromCopyArray2([1,1],e)},n._dummy=function(e){return new this(new e,{type:e})},n._normalize=function(e,t){var n=e.length();return this._divide(e,n,t)},n._add=function(e,t,n){var r=e._v[0]+t._v[0],o=e._v[1]+t._v[1];return this._fromCopyArray2([r,o],n)},n.addTo=function(e,t,n){return n._v[0]=e._v[0]+t._v[0],n._v[1]=e._v[1]+t._v[1],n},n._subtract=function(e,t,n){var r=e._v[0]-t._v[0],o=e._v[1]-t._v[1];return this._fromCopyArray2([r,o],n)},n.subtractTo=function(e,t,n){return n._v[0]=e._v[0]-t._v[0],n._v[1]=e._v[1]-t._v[1],n},n._multiply=function(e,t,n){var r=e._v[0]*t,o=e._v[1]*t;return this._fromCopyArray2([r,o],n)},n.multiplyTo=function(e,t,n){return n._v[0]=e._v[0]*t,n._v[1]=e._v[1]*t,n},n._multiplyVector=function(e,t,n){var r=e._v[0]*t._v[0],o=e._v[1]*t._v[1];return this._fromCopyArray2([r,o],n)},n.multiplyVectorTo=function(e,t,n){return n._v[0]=e._v[0]*t._v[0],n._v[1]=e._v[1]*t._v[1],n},n._divide=function(e,t,n){var r,o;return 0!==t?(r=e._v[0]/t,o=e._v[1]/t):(console.error("0 division occurred!"),r=1/0,o=1/0),this._fromCopyArray2([r,o],n)},n.divideTo=function(e,t,n){return 0!==t?(n._v[0]=e._v[0]/t,n._v[1]=e._v[1]/t):(console.error("0 division occurred!"),n._v[0]=1/0,n._v[1]=1/0),n},n._divideVector=function(e,t,n){var r,o;return 0!==t._v[0]&&0!==t._v[1]?(r=e._v[0]/t._v[0],o=e._v[1]/t._v[1]):(console.error("0 division occurred!"),r=0===t._v[0]?1/0:e._v[0]/t._v[0],o=0===t._v[1]?1/0:e._v[1]/t._v[1]),this._fromCopyArray2([r,o],n)},n.divideVectorTo=function(e,t,n){return 0!==t._v[0]&&0!==t._v[1]?(n._v[0]=e._v[0]/t._v[0],n._v[1]=e._v[1]/t._v[1]):(console.error("0 division occurred!"),n._v[0]=0===t._v[0]?1/0:e._v[0]/t._v[0],n._v[1]=0===t._v[1]?1/0:e._v[1]/t._v[1]),n},n.dot=function(e,t){return e.dot(t)},n._fromCopyArray2=function(e,t){return new this(new t(e),{type:t})},n._fromCopy2=function(e,t,n){return new this(new n([e,t]),{type:n})},n._fromCopyArray=function(e,t){return new this(new t(e.slice(0,2)),{type:t})},n._fromVector2=function(e,t){return new this(new t(e._v),{type:t})},n._fromCopyVector2=function(e,t){return new this(new t([e._v[0],e._v[1]]),{type:t})},n._fromCopyVector3=function(e,t){return new this(new t([e._v[0],e._v[1],e._v[2]]),{type:t})},n._fromCopyVector4=function(e,t){return new this(new t([e._v[0],e._v[1],e._v[2]]),{type:t})},c(n,[{key:"x",get:function(){return this._v[0]}},{key:"y",get:function(){return this._v[1]}},{key:"glslStrAsFloat",get:function(){return"vec2(".concat(r.k.convertToStringAsGLSLFloat(this._v[0]),", ").concat(r.k.convertToStringAsGLSLFloat(this._v[1]),")")}},{key:"glslStrAsInt",get:function(){return"ivec2(".concat(Math.floor(this._v[0]),", ").concat(Math.floor(this._v[1]),")")}},{key:"bytesPerComponent",get:function(){return this._v.BYTES_PER_ELEMENT}}],[{key:"compositionType",get:function(){return o.d.Vec2}}]),n}(i.O),p=function(e){f(n,e);var t=m(n);function n(e){return a(this,n),t.call(this,e,{type:Float32Array})}return n.prototype.clone=function(){return l(u(n.prototype),"clone",this).call(this)},n.fromCopyArray2=function(e){return l(u(n),"_fromCopyArray2",this).call(this,e,Float32Array)},n.fromCopy2=function(e,t){return l(u(n),"_fromCopy2",this).call(this,e,t,Float32Array)},n.fromCopyArray=function(e){return l(u(n),"_fromCopyArray",this).call(this,e,Float32Array)},n.fromCopyVector2=function(e){return l(u(n),"_fromCopyVector2",this).call(this,e,Float32Array)},n.fromCopyVector4=function(e){return l(u(n),"_fromCopyVector4",this).call(this,e,Float32Array)},n.zero=function(){return l(u(n),"_zero",this).call(this,Float32Array)},n.one=function(){return l(u(n),"_one",this).call(this,Float32Array)},n.dummy=function(){return l(u(n),"_dummy",this).call(this,Float32Array)},n.normalize=function(e){return l(u(n),"_normalize",this).call(this,e,Float32Array)},n.add=function(e,t){return l(u(n),"_add",this).call(this,e,t,Float32Array)},n.subtract=function(e,t){return l(u(n),"_subtract",this).call(this,e,t,Float32Array)},n.multiply=function(e,t){return l(u(n),"_multiply",this).call(this,e,t,Float32Array)},n.multiplyVector=function(e,t){return l(u(n),"_multiplyVector",this).call(this,e,t,Float32Array)},n.divide=function(e,t){return l(u(n),"_divide",this).call(this,e,t,Float32Array)},n.divideVector=function(e,t){return l(u(n),"_divideVector",this).call(this,e,t,Float32Array)},c(n,[{key:"className",get:function(){return"Vector2"}}]),n}(v),y=function(e){f(n,e);var t=m(n);function n(e){return a(this,n),t.call(this,e,{type:Float64Array})}return n.prototype.clone=function(){return l(u(n.prototype),"clone",this).call(this)},n.fromCopyArray2=function(e){return l(u(n),"_fromCopyArray2",this).call(this,e,Float64Array)},n.fromCopy2=function(e,t){return l(u(n),"_fromCopy2",this).call(this,e,t,Float64Array)},n.fromCopyArray=function(e){return l(u(n),"_fromCopyArray",this).call(this,e,Float64Array)},n.fromArrayBuffer=function(e){return new n(new Float64Array(e))},n.fromFloat64Array=function(e){return new n(e)},n.zero=function(){return l(u(n),"_zero",this).call(this,Float64Array)},n.one=function(){return l(u(n),"_one",this).call(this,Float64Array)},n.dummy=function(){return l(u(n),"_dummy",this).call(this,Float64Array)},n.normalize=function(e){return l(u(n),"_normalize",this).call(this,e,Float64Array)},n.add=function(e,t){return l(u(n),"_add",this).call(this,e,t,Float64Array)},n.subtract=function(e,t){return l(u(n),"_subtract",this).call(this,e,t,Float64Array)},n.multiply=function(e,t){return l(u(n),"_multiply",this).call(this,e,t,Float64Array)},n.multiplyVector=function(e,t){return l(u(n),"_multiplyVector",this).call(this,e,t,Float64Array)},n.divide=function(e,t){return l(u(n),"_divide",this).call(this,e,t,Float64Array)},n.divideVector=function(e,t){return l(u(n),"_divideVector",this).call(this,e,t,Float64Array)},n}(v),A=p.fromCopy2(1,1),b=p.fromCopy2(0,0)},6860:(e,t,n)=>{n.d(t,{P:()=>v,R1:()=>A,UJ:()=>p,p8:()=>y,pg:()=>m});var r=n(4969),o=n(3932),i=n(2199);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},c(e,t,n||e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function f(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}var h=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}var m=function(e){u(n,e);var t=d(n);function n(e,r){var o;return r.type,a(this,n),(o=t.call(this))._v=e,o}var i,c,l,f=n.prototype;return f.toString=function(){return"("+this._v[0]+", "+this._v[1]+", "+this._v[2]+")"},f.toStringApproximately=function(){return r.k.financial(this._v[0])+" "+r.k.financial(this._v[1])+" "+r.k.financial(this._v[2])+"\n"},f.flattenAsArray=function(){return[this._v[0],this._v[1],this._v[2]]},f.isDummy=function(){return 0===this._v.length},f.isEqual=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;return Math.abs(e._v[0]-this._v[0])<t&&Math.abs(e._v[1]-this._v[1])<t&&Math.abs(e._v[2]-this._v[2])<t},f.isStrictEqual=function(e){return this._v[0]===e._v[0]&&this._v[1]===e._v[1]&&this._v[2]===e._v[2]},f.at=function(e){return this._v[e]},f.length=function(){return Math.hypot(this._v[0],this._v[1],this._v[2])},f.lengthSquared=function(){return Math.pow(this._v[0],2)+Math.pow(this._v[1],2)+Math.pow(this._v[2],2)},f.lengthTo=function(e){var t=this._v[0]-e._v[0],n=this._v[1]-e._v[1],r=this._v[2]-e._v[2];return Math.hypot(t,n,r)},f.dot=function(e){return this._v[0]*e._v[0]+this._v[1]*e._v[1]+this._v[2]*e._v[2]},f.clone=function(){return new this.constructor(new this._v.constructor([this._v[0],this._v[1],this._v[2]],0,0))},n.lengthSquared=function(e){return e.lengthSquared()},n.lengthBtw=function(e,t){return e.lengthTo(t)},n.angleOfVectors=function(e,t){var n=e.length()*t.length();0===n&&console.error("length of a vector is 0!");var r=e.dot(t)/n;return Math.acos(r)},n._zero=function(e){return this._fromCopyArray([0,0,0],e)},n._one=function(e){return this._fromCopyArray([1,1,1],e)},n._dummy=function(e){return new this(new e([]),{type:e})},n._normalize=function(e,t){var n=e.length();return this._divide(e,n,t)},n._add=function(e,t,n){var r=e._v[0]+t._v[0],o=e._v[1]+t._v[1],i=e._v[2]+t._v[2];return this._fromCopyArray([r,o,i],n)},n.addTo=function(e,t,n){return n._v[0]=e._v[0]+t._v[0],n._v[1]=e._v[1]+t._v[1],n._v[2]=e._v[2]+t._v[2],n},n._subtract=function(e,t,n){var r=e._v[0]-t._v[0],o=e._v[1]-t._v[1],i=e._v[2]-t._v[2];return this._fromCopyArray([r,o,i],n)},n.subtractTo=function(e,t,n){return n._v[0]=e._v[0]-t._v[0],n._v[1]=e._v[1]-t._v[1],n._v[2]=e._v[2]-t._v[2],n},n._multiply=function(e,t,n){var r=e._v[0]*t,o=e._v[1]*t,i=e._v[2]*t;return this._fromCopyArray([r,o,i],n)},n.multiplyTo=function(e,t,n){return n._v[0]=e._v[0]*t,n._v[1]=e._v[1]*t,n._v[2]=e._v[2]*t,n},n._multiplyVector=function(e,t,n){var r=e._v[0]*t._v[0],o=e._v[1]*t._v[1],i=e._v[2]*t._v[2];return this._fromCopyArray([r,o,i],n)},n.multiplyVectorTo=function(e,t,n){return n._v[0]=e._v[0]*t._v[0],n._v[1]=e._v[1]*t._v[1],n._v[2]=e._v[2]*t._v[2],n},n._divide=function(e,t,n){var r,o,i;return 0!==t?(r=e._v[0]/t,o=e._v[1]/t,i=e._v[2]/t):(console.error("0 division occurred!"),r=1/0,o=1/0,i=1/0),this._fromCopyArray([r,o,i],n)},n.divideTo=function(e,t,n){return 0!==t?(n._v[0]=e._v[0]/t,n._v[1]=e._v[1]/t,n._v[2]=e._v[2]/t):(console.error("0 division occurred!"),n._v[0]=1/0,n._v[1]=1/0,n._v[2]=1/0),n},n._divideVector=function(e,t,n){var r,o,i;return 0!==t._v[0]&&0!==t._v[1]&&0!==t._v[2]?(r=e._v[0]/t._v[0],o=e._v[1]/t._v[1],i=e._v[2]/t._v[2]):(console.error("0 division occurred!"),r=0===t._v[0]?1/0:e._v[0]/t._v[0],o=0===t._v[1]?1/0:e._v[1]/t._v[1],i=0===t._v[2]?1/0:e._v[2]/t._v[2]),this._fromCopyArray([r,o,i],n)},n.divideVectorTo=function(e,t,n){return 0!==t._v[0]&&0!==t._v[1]&&0!==t._v[2]?(n._v[0]=e._v[0]/t._v[0],n._v[1]=e._v[1]/t._v[1],n._v[2]=e._v[2]/t._v[2]):(console.error("0 division occurred!"),n._v[0]=0===t._v[0]?1/0:e._v[0]/t._v[0],n._v[1]=0===t._v[1]?1/0:e._v[1]/t._v[1],n._v[2]=0===t._v[2]?1/0:e._v[2]/t._v[2]),n},n.dot=function(e,t){return e.dot(t)},n._cross=function(e,t,n){var r=e._v[1]*t._v[2]-e._v[2]*t._v[1],o=e._v[2]*t._v[0]-e._v[0]*t._v[2],i=e._v[0]*t._v[1]-e._v[1]*t._v[0];return this._fromCopyArray([r,o,i],n)},n.crossTo=function(e,t,n){var r=e._v[1]*t._v[2]-e._v[2]*t._v[1],o=e._v[2]*t._v[0]-e._v[0]*t._v[2],i=e._v[0]*t._v[1]-e._v[1]*t._v[0];return n.setComponents(r,o,i)},n._multiplyQuaternion=function(e,t,n){var r=2*e._v[0],o=2*e._v[1],i=2*e._v[2],a=e._v[0]*r,s=e._v[1]*o,c=e._v[2]*i,l=e._v[0]*o,u=e._v[0]*i,f=e._v[1]*i,_=e._v[3]*r,h=e._v[3]*o,d=e._v[3]*i,m=(1-(s+c))*t._v[0]+(l-d)*t._v[1]+(u+h)*t._v[2],v=(l+d)*t._v[0]+(1-(a+c))*t._v[1]+(f-_)*t._v[2],p=(u-h)*t._v[0]+(f+_)*t._v[1]+(1-(a+s))*t._v[2];return this._fromCopyArray([m,v,p],n)},n.multiplyQuaternionTo=function(e,t,n){var r=2*e._v[0],o=2*e._v[1],i=2*e._v[2],a=e._v[0]*r,s=e._v[1]*o,c=e._v[2]*i,l=e._v[0]*o,u=e._v[0]*i,f=e._v[1]*i,_=e._v[3]*r,h=e._v[3]*o,d=e._v[3]*i,m=(1-(s+c))*t._v[0]+(l-d)*t._v[1]+(u+h)*t._v[2],v=(l+d)*t._v[0]+(1-(a+c))*t._v[1]+(f-_)*t._v[2],p=(u-h)*t._v[0]+(f+_)*t._v[1]+(1-(a+s))*t._v[2];return n.setComponents(m,v,p)},n._lerp=function(e,t,n,r){return new this(new r([e._v[0]*n+t._v[0]*(1-n),e._v[1]*n+t._v[1]*(1-n),e._v[2]*n+t._v[2]*(1-n)]),{type:r})},n._fromCopyArray3=function(e,t){return new this(new t(e),{type:t})},n._fromCopy3=function(e,t,n,r){return new this(new r([e,t,n]),{type:r})},n._fromCopyArray=function(e,t){return new this(new t(e.slice(0,3)),{type:t})},n._fromCopyVector3=function(e,t){return new this(new t([e._v[0],e._v[1],e._v[2]]),{type:t})},n._fromCopyVector4=function(e,t){return new this(new t([e._v[0],e._v[1],e._v[2]]),{type:t})},n._fromVector2=function(e,t){return new this(new t([e._v[0],e._v[1],0]),{type:t})},i=n,l=[{key:"compositionType",get:function(){return o.d.Vec3}}],(c=[{key:"x",get:function(){return this._v[0]}},{key:"y",get:function(){return this._v[1]}},{key:"z",get:function(){return this._v[2]}},{key:"w",get:function(){return 1}},{key:"glslStrAsFloat",get:function(){return"vec3(".concat(r.k.convertToStringAsGLSLFloat(this._v[0]),", ").concat(r.k.convertToStringAsGLSLFloat(this._v[1]),", ").concat(r.k.convertToStringAsGLSLFloat(this._v[2]),")")}},{key:"glslStrAsInt",get:function(){return"ivec3(".concat(Math.floor(this._v[0]),", ").concat(Math.floor(this._v[1]),", ").concat(Math.floor(this._v[2]),")")}},{key:"className",get:function(){return"Vector3"}},{key:"bytesPerComponent",get:function(){return this._v.BYTES_PER_ELEMENT}}])&&s(i.prototype,c),l&&s(i,l),n}(i.O),v=function(e){u(n,e);var t=d(n);function n(e){return a(this,n),t.call(this,e,{type:Float32Array})}return n.fromCopyArray3=function(e){return c(l(n),"_fromCopyArray3",this).call(this,e,Float32Array)},n.fromCopy3=function(e,t,r){return c(l(n),"_fromCopy3",this).call(this,e,t,r,Float32Array)},n.fromCopy1=function(e){return c(l(n),"_fromCopy3",this).call(this,e,e,e,Float32Array)},n.fromCopyArray=function(e){return c(l(n),"_fromCopyArray",this).call(this,e,Float32Array)},n.fromCopyVector3=function(e){return c(l(n),"_fromCopyVector3",this).call(this,e,Float32Array)},n.fromCopyVector4=function(e){return c(l(n),"_fromCopyVector4",this).call(this,e,Float32Array)},n.fromArrayBuffer=function(e){return new n(new Float32Array(e))},n.fromFloat32Array=function(e){return new n(e)},n.fromCopyFloat32Array=function(e){return new n(e.slice(0))},n.zero=function(){return c(l(n),"_zero",this).call(this,Float32Array)},n.one=function(){return c(l(n),"_one",this).call(this,Float32Array)},n.dummy=function(){return c(l(n),"_dummy",this).call(this,Float32Array)},n.normalize=function(e){return c(l(n),"_normalize",this).call(this,e,Float32Array)},n.add=function(e,t){return c(l(n),"_add",this).call(this,e,t,Float32Array)},n.subtract=function(e,t){return c(l(n),"_subtract",this).call(this,e,t,Float32Array)},n.multiply=function(e,t){return c(l(n),"_multiply",this).call(this,e,t,Float32Array)},n.multiplyVector=function(e,t){return c(l(n),"_multiplyVector",this).call(this,e,t,Float32Array)},n.divide=function(e,t){return c(l(n),"_divide",this).call(this,e,t,Float32Array)},n.divideVector=function(e,t){return c(l(n),"_divideVector",this).call(this,e,t,Float32Array)},n.cross=function(e,t){return c(l(n),"_cross",this).call(this,e,t,Float32Array)},n.multiplyQuaternion=function(e,t){return c(l(n),"_multiplyQuaternion",this).call(this,e,t,Float32Array)},n.lerp=function(e,t,r){return c(l(n),"_lerp",this).call(this,e,t,r,Float32Array)},n}(m),p=function(e){u(n,e);var t=d(n);function n(e){return a(this,n),t.call(this,e,{type:Float64Array})}return n.fromCopyArray3=function(e){return c(l(n),"_fromCopyArray3",this).call(this,e,Float64Array)},n.fromCopy3=function(e,t,r){return c(l(n),"_fromCopy3",this).call(this,e,t,r,Float64Array)},n.fromCopy1=function(e){return c(l(n),"_fromCopy3",this).call(this,e,e,e,Float64Array)},n.fromCopyArray=function(e){return c(l(n),"_fromCopyArray",this).call(this,e,Float64Array)},n.fromArrayBuffer=function(e){return new n(new Float64Array(e))},n.fromFloat64Array=function(e){return new n(e)},n.zero=function(){return c(l(n),"_zero",this).call(this,Float64Array)},n.one=function(){return c(l(n),"_one",this).call(this,Float64Array)},n.dummy=function(){return c(l(n),"_dummy",this).call(this,Float64Array)},n.normalize=function(e){return c(l(n),"_normalize",this).call(this,e,Float64Array)},n.add=function(e,t){return c(l(n),"_add",this).call(this,e,t,Float64Array)},n.subtract=function(e,t){return c(l(n),"_subtract",this).call(this,e,t,Float64Array)},n.multiply=function(e,t){return c(l(n),"_multiply",this).call(this,e,t,Float64Array)},n.multiplyVector=function(e,t){return c(l(n),"_multiplyVector",this).call(this,e,t,Float64Array)},n.divide=function(e,t){return c(l(n),"_divide",this).call(this,e,t,Float64Array)},n.divideVector=function(e,t){return c(l(n),"_divideVector",this).call(this,e,t,Float64Array)},n.cross=function(e,t){return c(l(n),"_cross",this).call(this,e,t,Float64Array)},n.multiplyQuaternion=function(e,t){return c(l(n),"_multiplyQuaternion",this).call(this,e,t,Float64Array)},n.lerp=function(e,t,r){return c(l(n),"_lerp",this).call(this,e,t,r,Float64Array)},n}(m),y=v.fromCopy3(1,1,1),A=v.fromCopy3(0,0,0)},6264:(e,t,n)=>{n.d(t,{GY:()=>b,Lt:()=>v,Tj:()=>p,cV:()=>A,n9:()=>y,rE:()=>m});var r=n(4969),o=n(3932),i=n(2199);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},c(e,t,n||e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function f(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}var h=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}var m=function(e){u(n,e);var t=d(n);function n(e,r){var o;return r.type,a(this,n),(o=t.call(this))._v=e,o}var i,c,l,f=n.prototype;return f.toString=function(){return"("+this._v[0]+", "+this._v[1]+", "+this._v[2]+", "+this._v[3]+")"},f.toStringApproximately=function(){return r.k.financial(this._v[0])+" "+r.k.financial(this._v[1])+" "+r.k.financial(this._v[2])+" "+r.k.financial(this._v[3])+"\n"},f.flattenAsArray=function(){return[this._v[0],this._v[1],this._v[2],this._v[3]]},f.isDummy=function(){return 0===this._v.length},f.isEqual=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;return Math.abs(e._v[0]-this._v[0])<t&&Math.abs(e._v[1]-this._v[1])<t&&Math.abs(e._v[2]-this._v[2])<t&&Math.abs(e._v[3]-this._v[3])<t},f.isStrictEqual=function(e){return this._v[0]===e._v[0]&&this._v[1]===e._v[1]&&this._v[2]===e._v[2]&&this._v[3]===e._v[3]},f.at=function(e){return this._v[e]},f.length=function(){return Math.hypot(this._v[0],this._v[1],this._v[2],this._v[3])},f.lengthSquared=function(){return Math.pow(this._v[0],2)+Math.pow(this._v[1],2)+Math.pow(this._v[2],2)+Math.pow(this._v[3],2)},f.lengthTo=function(e){var t=this._v[0]-e._v[0],n=this._v[1]-e._v[1],r=this._v[2]-e._v[2],o=this._v[3]-e._v[3];return Math.hypot(t,n,r,o)},f.dot=function(e){return this._v[0]*e._v[0]+this._v[1]*e._v[1]+this._v[2]*e._v[2]+this._v[3]*e._v[3]},f.clone=function(){return new this.constructor(new this._v.constructor([this._v[0],this._v[1],this._v[2],this._v[3]]))},n._fromCopyArray4=function(e,t){return new this(new t(e),{type:t})},n._fromCopy4=function(e,t,n,r,o){return new this(new o([e,t,n,r]),{type:o})},n._fromCopyArray=function(e,t){return new this(new t(e.slice(0,4)),{type:t})},n._fromCopyVector4=function(e,t){return new this(new t([e._v[0],e._v[1],e._v[2],e._v[3]]),{type:t})},n._fromCopyVector3=function(e,t){return new this(new t([e._v[0],e._v[1],e._v[2],1]),{type:t})},n._fromVector2=function(e,t){return new this(new t([e._v[0],e._v[1],0,1]),{type:t})},n.lengthSquared=function(e){return e.lengthSquared()},n.lengthBtw=function(e,t){return e.lengthTo(t)},n._zero=function(e){return new this(new e([0,0,0,0]),{type:e})},n._one=function(e){return new this(new e([1,1,1,1]),{type:e})},n._dummy=function(e){return new this(new e([]),{type:e})},n._normalize=function(e,t){var n=e.length();return this._divide(e,n,t)},n._add=function(e,t,n){return new this(new n([e._v[0]+t._v[0],e._v[1]+t._v[1],e._v[2]+t._v[2],e._v[3]+t._v[3]]),{type:n})},n.addTo=function(e,t,n){return n._v[0]=e._v[0]+t._v[0],n._v[1]=e._v[1]+t._v[1],n._v[2]=e._v[2]+t._v[2],n._v[3]=e._v[3]+t._v[3],n},n._subtract=function(e,t,n){return new this(new n([e._v[0]-t._v[0],e._v[1]-t._v[1],e._v[2]-t._v[2],e._v[3]-t._v[3]]),{type:n})},n.subtractTo=function(e,t,n){return n._v[0]=e._v[0]-t._v[0],n._v[1]=e._v[1]-t._v[1],n._v[2]=e._v[2]-t._v[2],n._v[3]=e._v[3]-t._v[3],n},n._multiply=function(e,t,n){return new this(new n([e._v[0]*t,e._v[1]*t,e._v[2]*t,e._v[3]*t]),{type:n})},n.multiplyTo=function(e,t,n){return n._v[0]=e._v[0]*t,n._v[1]=e._v[1]*t,n._v[2]=e._v[2]*t,n._v[3]=e._v[3]*t,n},n._multiplyVector=function(e,t,n){return new this(new n([e._v[0]*t._v[0],e._v[1]*t._v[1],e._v[2]*t._v[2],e._v[3]*t._v[3]]),{type:n})},n.multiplyVectorTo=function(e,t,n){return n._v[0]=e._v[0]*t._v[0],n._v[1]=e._v[1]*t._v[1],n._v[2]=e._v[2]*t._v[2],n._v[3]=e._v[3]*t._v[3],n},n._divide=function(e,t,n){var r,o,i,a;return 0!==t?(r=e._v[0]/t,o=e._v[1]/t,i=e._v[2]/t,a=e._v[3]/t):(console.error("0 division occurred!"),r=1/0,o=1/0,i=1/0,a=1/0),new this(new n([r,o,i,a]),{type:n})},n.divideTo=function(e,t,n){return 0!==t?(n._v[0]=e._v[0]/t,n._v[1]=e._v[1]/t,n._v[2]=e._v[2]/t,n._v[3]=e._v[3]/t):(console.error("0 division occurred!"),n._v[0]=1/0,n._v[1]=1/0,n._v[2]=1/0,n._v[3]=1/0),n},n._divideVector=function(e,t,n){var r,o,i,a;return 0!==t._v[0]&&0!==t._v[1]&&0!==t._v[2]&&0!==t._v[3]?(r=e._v[0]/t._v[0],o=e._v[1]/t._v[1],i=e._v[2]/t._v[2],a=e._v[3]/t._v[3]):(console.error("0 division occurred!"),r=0===t._v[0]?1/0:e._v[0]/t._v[0],o=0===t._v[1]?1/0:e._v[1]/t._v[1],i=0===t._v[2]?1/0:e._v[2]/t._v[2],a=0===t._v[3]?1/0:e._v[3]/t._v[3]),new this(new n([r,o,i,a]),{type:n})},n.divideVectorTo=function(e,t,n){return 0!==t._v[0]&&0!==t._v[1]&&0!==t._v[2]&&0!==t._v[3]?(n._v[0]=e._v[0]/t._v[0],n._v[1]=e._v[1]/t._v[1],n._v[2]=e._v[2]/t._v[2],n._v[3]=e._v[3]/t._v[3]):(console.error("0 division occurred!"),n._v[0]=0===t._v[0]?1/0:e._v[0]/t._v[0],n._v[1]=0===t._v[1]?1/0:e._v[1]/t._v[1],n._v[2]=0===t._v[2]?1/0:e._v[2]/t._v[2],n._v[3]=0===t._v[3]?1/0:e._v[3]/t._v[3]),n},n.dot=function(e,t){return e.dot(t)},i=n,l=[{key:"compositionType",get:function(){return o.d.Vec4}}],(c=[{key:"x",get:function(){return this._v[0]}},{key:"y",get:function(){return this._v[1]}},{key:"z",get:function(){return this._v[2]}},{key:"w",get:function(){return this._v[3]}},{key:"glslStrAsFloat",get:function(){return"vec4(".concat(r.k.convertToStringAsGLSLFloat(this._v[0]),", ").concat(r.k.convertToStringAsGLSLFloat(this._v[1]),", ").concat(r.k.convertToStringAsGLSLFloat(this._v[2]),", ").concat(r.k.convertToStringAsGLSLFloat(this._v[3]),")")}},{key:"glslStrAsInt",get:function(){return"ivec4(".concat(Math.floor(this._v[0]),", ").concat(Math.floor(this._v[1]),", ").concat(Math.floor(this._v[2]),", ").concat(Math.floor(this._v[3]),")")}},{key:"className",get:function(){return"Vector4"}},{key:"bytesPerComponent",get:function(){return this._v.BYTES_PER_ELEMENT}}])&&s(i.prototype,c),l&&s(i,l),n}(i.O),v=function(e){u(n,e);var t=d(n);function n(e){return a(this,n),t.call(this,e,{type:Float32Array})}return n.prototype.clone=function(){return c(l(n.prototype),"clone",this).call(this)},n.fromCopyArray=function(e){return c(l(n),"_fromCopyArray",this).call(this,e,Float32Array)},n.fromCopyArray4=function(e){return c(l(n),"_fromCopyArray4",this).call(this,e,Float32Array)},n.fromCopy4=function(e,t,r,o){return c(l(n),"_fromCopy4",this).call(this,e,t,r,o,Float32Array)},n.fromCopyVector3=function(e){return c(l(n),"_fromCopyVector3",this).call(this,e,Float32Array)},n.fromCopyVector4=function(e){return c(l(n),"_fromCopyVector4",this).call(this,e,Float32Array)},n.fromArrayBuffer=function(e){return new n(new Float32Array(e))},n.fromFloat32Array=function(e){return new n(e)},n.fromCopyFloat32Array=function(e){return new n(e.slice(0))},n.zero=function(){return c(l(n),"_zero",this).call(this,Float32Array)},n.one=function(){return c(l(n),"_one",this).call(this,Float32Array)},n.dummy=function(){return c(l(n),"_dummy",this).call(this,Float32Array)},n.normalize=function(e){return c(l(n),"_normalize",this).call(this,e,Float32Array)},n.add=function(e,t){return c(l(n),"_add",this).call(this,e,t,Float32Array)},n.subtract=function(e,t){return c(l(n),"_subtract",this).call(this,e,t,Float32Array)},n.multiply=function(e,t){return c(l(n),"_multiply",this).call(this,e,t,Float32Array)},n.multiplyVector=function(e,t){return c(l(n),"_multiplyVector",this).call(this,e,t,Float32Array)},n.divide=function(e,t){return c(l(n),"_divide",this).call(this,e,t,Float32Array)},n.divideVector=function(e,t){return c(l(n),"_divideVector",this).call(this,e,t,Float32Array)},n}(m),p=function(e){u(n,e);var t=d(n);function n(e){return a(this,n),t.call(this,e,{type:Float64Array})}return n.prototype.clone=function(){return c(l(n.prototype),"clone",this).call(this)},n.fromCopyArray4=function(e){return c(l(n),"_fromCopyArray4",this).call(this,e,Float64Array)},n.fromCopy4=function(e,t,r,o){return c(l(n),"_fromCopy4",this).call(this,e,t,r,o,Float64Array)},n.fromCopyArray=function(e){return c(l(n),"_fromCopyArray",this).call(this,e,Float64Array)},n.fromArrayBuffer=function(e){return new n(new Float64Array(e))},n.fromFloat64Array=function(e){return new n(e)},n.zero=function(){return c(l(n),"_zero",this).call(this,Float64Array)},n.one=function(){return c(l(n),"_one",this).call(this,Float64Array)},n.dummy=function(){return c(l(n),"_dummy",this).call(this,Float64Array)},n.normalize=function(e){return c(l(n),"_normalize",this).call(this,e,Float64Array)},n.add=function(e,t){return c(l(n),"_add",this).call(this,e,t,Float64Array)},n.subtract=function(e,t){return c(l(n),"_subtract",this).call(this,e,t,Float64Array)},n.multiply=function(e,t){return c(l(n),"_multiply",this).call(this,e,t,Float64Array)},n.multiplyVector=function(e,t){return c(l(n),"_multiplyVector",this).call(this,e,t,Float64Array)},n.divide=function(e,t){return c(l(n),"_divide",this).call(this,e,t,Float64Array)},n.divideVector=function(e,t){return c(l(n),"_divideVector",this).call(this,e,t,Float64Array)},n}(m),y=v.fromCopy4(1,1,1,1),A=v.fromCopy4(0,0,0,1),b=v.fromCopy4(0,0,0,0)},2175:(e,t,n)=>{n.d(t,{j:()=>r});var r=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._v=t}},1855:(e,t,n)=>{n.d(t,{mN:()=>o.m,bC:()=>i,XA:()=>a.X,lJ:()=>s.l,Ox:()=>c.O,sZ:()=>l.s,tW:()=>p,SG:()=>A,zU:()=>y,ig:()=>te.ig,HO:()=>te.HO,R1:()=>ne.R1,p8:()=>ne.p8,GY:()=>u.GY,cV:()=>u.cV,n9:()=>u.n9,cm:()=>b.c,aq:()=>g.a,lW:()=>E,Db:()=>w.D,kj:()=>S.k,ak:()=>T.a,h:()=>C.h,Je:()=>P.J,CE:()=>F,l$:()=>W,f7:()=>X.f,xk:()=>H.x,ec:()=>q.e,yG:()=>Y.y,DU:()=>K.DU,Et:()=>K.Et,$_:()=>K.$_,NR:()=>J.NR,el:()=>J.el,th:()=>J.th,d6:()=>R.d6,I1:()=>R.I1,oV:()=>R.oV,xQ:()=>G.xQ,e2:()=>G.e2,hn:()=>G.hn,_f:()=>x._,Ru:()=>Z.Ru,ap:()=>Z.ap,kO:()=>Z.kO,WQ:()=>ee,FM:()=>te.FM,pV:()=>te.pV,EY:()=>te.EY,P:()=>ne.P,pg:()=>ne.pg,UJ:()=>ne.UJ,Lt:()=>u.Lt,rE:()=>u.rE,Tj:()=>u.Tj,j8:()=>re.j,Zz:()=>r.Zz,TL:()=>r.TL,RZ:()=>r.sZ,jI:()=>r.jI,F5:()=>r.F5,vP:()=>r.vP,to:()=>r.to,wr:()=>r.wr,nn:()=>r.nn,w0:()=>r.w0,GW:()=>r.GW,t5:()=>r.t5,vk:()=>r.vk,PF:()=>r.PF,Ff:()=>r.Ff,Up:()=>r.Up,Dq:()=>r.Dq,VI:()=>r.VI,hx:()=>r.hx,JI:()=>r.JI,fK:()=>r.fK,lx:()=>r.lx,ns:()=>r.ns,eI:()=>r.p8,n5:()=>r.n5,QU:()=>r.QU,Xg:()=>r.Xg,Rl:()=>r.Rl,_7:()=>r._7});var r=n(7058),o=n(6631),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._v=new Float32Array}return e.prototype.isTheSourceSame=function(e){return this._v.buffer===e},e}(),a=n(2507),s=n(7586),c=n(2199),l=n(8107),u=n(6264);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},_(e,t,n||e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function d(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}var v=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return a.prototype.clone=function(){return _(h(a.prototype),"clone",this).call(this)},a.zero=function(){return _(h(a),"_zero",this).call(this,Float32Array)},a.one=function(){return _(h(a),"_one",this).call(this,Float32Array)},a.dummy=function(){return _(h(a),"_dummy",this).call(this,Float32Array)},a.normalize=function(e){return _(h(a),"_normalize",this).call(this,e,Float32Array)},a.add=function(e,t){return _(h(a),"_add",this).call(this,e,t,Float32Array)},a.subtract=function(e,t){return _(h(a),"_subtract",this).call(this,e,t,Float32Array)},a.multiply=function(e,t){return _(h(a),"_multiply",this).call(this,e,t,Float32Array)},a.multiplyVector=function(e,t){return _(h(a),"_multiplyVector",this).call(this,e,t,Float32Array)},a.divide=function(e,t){return _(h(a),"_divide",this).call(this,e,t,Float32Array)},a.divideVector=function(e,t){return _(h(a),"_divideVector",this).call(this,e,t,Float32Array)},a.fromCopyArray=function(e){return this._fromCopyArray(e,Float32Array)},a.fromCopyArray4=function(e){return this._fromCopyArray4(e,Float32Array)},a.fromCopy4=function(e,t,n,r){return this._fromCopy4(e,t,n,r,Float32Array)},a.fromCopyVector4=function(e){return this._fromCopyVector4(e,Float32Array)},t=a,(n=[{key:"x",get:function(){return this._v[0]}},{key:"y",get:function(){return this._v[1]}},{key:"z",get:function(){return this._v[2]}},{key:"w",get:function(){return this._v[3]}},{key:"r",get:function(){return this._v[0]}},{key:"g",get:function(){return this._v[1]}},{key:"b",get:function(){return this._v[2]}},{key:"a",get:function(){return this._v[3]}}])&&f(t.prototype,n),a}(u.Lt),y=new p(new Float32Array([1,1,1,1])),A=new p(new Float32Array([0,0,0,1])),b=n(344),g=n(2424),x=n(5233);function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._v=t}var t,n;return e.fromFloat32Array=function(t){return new e(t)},e.fromCopyArray3=function(e){return new x._(new Float32Array(e))},e.fromCopyArray=function(e){return new x._(new Float32Array(e.slice(0,3)))},e.fromCopy3=function(e,t,n){return new x._(new Float32Array([e,t,n]))},e.fromCopyLogQuaternion=function(e){var t=new Float32Array(3);return t[0]=e._v[0],t[1]=e._v[1],t[2]=e._v[2],new x._(t)},e.fromCopyVector4=function(e){var t=new Float32Array(3);return t[0]=e._v[0],t[1]=e._v[1],t[2]=e._v[2],new x._(t)},e.fromCopyQuaternion=function(t){var n=Math.acos(t.w),r=Math.sin(n),o=new Float32Array(3);return o[0]=t.x*(n/r),o[1]=t.y*(n/r),o[2]=t.z*(n/r),new e(o)},t=e,(n=[{key:"x",get:function(){return this._v[0]}},{key:"y",get:function(){return this._v[1]}},{key:"z",get:function(){return this._v[2]}},{key:"w",get:function(){return 1}},{key:"className",get:function(){return"LogQuaternion"}}])&&I(t.prototype,n),e}(),w=n(9409),S=n(4969),T=n(4191),C=n(6386),P=n(7468),R=n(988);function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t,n){return M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},M(e,t,n||e)}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}function N(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}var L=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=B(r);if(o){var n=B(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return N(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return a.prototype.clone=function(){return M(B(a.prototype),"clone",this).call(this)},a.zero=function(){return M(B(a),"_zero",this).call(this,Float32Array)},a.one=function(){return M(B(a),"_one",this).call(this,Float32Array)},a.dummy=function(){return M(B(a),"_dummy",this).call(this,Float32Array)},a.normalize=function(e){return M(B(a),"_normalize",this).call(this,e,Float32Array)},a.add=function(e,t){return M(B(a),"_add",this).call(this,e,t,Float32Array)},a.subtract=function(e,t){return M(B(a),"_subtract",this).call(this,e,t,Float32Array)},a.multiply=function(e,t){return M(B(a),"_multiply",this).call(this,e,t,Float32Array)},a.multiplyVector=function(e,t){return M(B(a),"_multiplyVector",this).call(this,e,t,Float32Array)},a.divide=function(e,t){return M(B(a),"_divide",this).call(this,e,t,Float32Array)},a.divideVector=function(e,t){return M(B(a),"_divideVector",this).call(this,e,t,Float32Array)},a.cross=function(e,t){return M(B(a),"_cross",this).call(this,e,t,Float32Array)},t=a,(n=[{key:"x",get:function(){return this._v[0]},set:function(e){this._v[0]=e}},{key:"y",get:function(){return this._v[1]},set:function(e){this._v[1]=e}},{key:"z",get:function(){return this._v[2]},set:function(e){this._v[2]=e}},{key:"w",get:function(){return 1}},{key:"r",get:function(){return this._v[0]},set:function(e){this._v[0]=e}},{key:"g",get:function(){return this._v[1]},set:function(e){this._v[1]=e}},{key:"b",get:function(){return this._v[2]},set:function(e){this._v[2]=e}},{key:"a",get:function(){return 1}}])&&D(t.prototype,n),a}(R.d6),G=n(2328);function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},z(e,t,n||e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function U(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Q(e,t){return Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Q(e,t)}var j=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return U(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return a.prototype.clone=function(){return z(k(a.prototype),"clone",this).call(this)},a.zero=function(){return z(k(a),"_zero",this).call(this,Float32Array)},a.one=function(){return z(k(a),"_one",this).call(this,Float32Array)},a.dummy=function(){return z(k(a),"_dummy",this).call(this,Float32Array)},a.normalize=function(e){return z(k(a),"_normalize",this).call(this,e,Float32Array)},a.add=function(e,t){return z(k(a),"_add",this).call(this,e,t,Float32Array)},a.subtract=function(e,t){return z(k(a),"_subtract",this).call(this,e,t,Float32Array)},a.multiply=function(e,t){return z(k(a),"_multiply",this).call(this,e,t,Float32Array)},a.multiplyVector=function(e,t){return z(k(a),"_multiplyVector",this).call(this,e,t,Float32Array)},a.divide=function(e,t){return z(k(a),"_divide",this).call(this,e,t,Float32Array)},a.divideVector=function(e,t){return z(k(a),"_divideVector",this).call(this,e,t,Float32Array)},t=a,(n=[{key:"x",get:function(){return this._v[0]},set:function(e){this._v[0]=e}},{key:"y",get:function(){return this._v[1]},set:function(e){this._v[1]=e}},{key:"z",get:function(){return this._v[2]},set:function(e){this._v[2]=e}},{key:"w",get:function(){return this._v[3]},set:function(e){this._v[3]=e}},{key:"r",get:function(){return this._v[0]},set:function(e){this._v[0]=e}},{key:"g",get:function(){return this._v[1]},set:function(e){this._v[1]=e}},{key:"b",get:function(){return this._v[2]},set:function(e){this._v[2]=e}},{key:"a",get:function(){return this._v[3]},set:function(e){this._v[3]=e}}])&&V(t.prototype,n),a}(G.xQ),X=n(2542),H=n(2863),q=n(8289),Y=n(8776),K=n(3764),J=n(9513),Z=n(1811);function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ee=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__is_position_updated=!0,this.__is_scale_updated=!0,this.__is_rotation_updated=!0,this.__is_trs_matrix_updated=!0,this.__updateCount=0,this.__position=R.d6.dummy(),this.__scale=R.d6.dummy(),this.__rotation=Y.y.dummy(),this.__matrix=q.e.dummy(),void 0!==t?this.setTransform(t.positionInner,R.d6.fromCopyVector3(t.eulerAnglesInner),t.scaleInner,Y.y.fromCopyQuaternion(t.rotationInner),t.matrixInner):(this.__position=R.d6.zero(),this.__scale=R.d6.one(),this.__rotation=Y.y.identity(),this.__matrix=q.e.identity())}var t,n,r=e.prototype;return r.clone=function(){return new e(this)},r.__updateTransform=function(){this.__updateEulerAngles(),this.__updatePosition(),this.__updateScale(),this.__needUpdate()},r.__updateEulerAngles=function(){!this.__is_rotation_updated&&this.__is_trs_matrix_updated&&(this.__rotation.fromMatrix(this.__matrix),this.__is_rotation_updated=!0)},r.__updatePosition=function(){!this.__is_position_updated&&this.__is_trs_matrix_updated&&(this.__matrix.getTranslateTo(this.__position),this.__is_position_updated=!0)},r.__updateScale=function(){!this.__is_scale_updated&&this.__is_trs_matrix_updated&&(this.__matrix.getScaleTo(this.__scale),this.__is_scale_updated=!0)},r.__updateMatrix=function(){if(!this.__is_trs_matrix_updated&&this.__is_position_updated&&this.__is_rotation_updated&&this.__is_scale_updated){var t=this.__matrix.fromQuaternion(this.__rotation),n=e.__tmpMatrix44_0.scale(this.__scale);t.multiply(n).putTranslate(this.__position),this.__is_trs_matrix_updated=!0}},r.__needUpdate=function(){this.__updateCount++},r.setPropertiesFromJson=function(e){var t=e;for(var n in"string"==typeof e&&(t=JSON.parse(e)),t)t.hasOwnProperty(n)&&n in this&&("quaternion"===n?this.rotation=x._.fromCopyArray4(t[n]):this[n]="matrix"===n?P.J.fromCopyArray16RowMajor(t[n]):ne.P.fromCopyArray(t[n]))},r.setRotationFromNewUpAndFront=function(t,n){var r=t,o=R.d6.crossTo(r,n,e.__tmpVector3_0),i=R.d6.crossTo(o,r,e.__tmpVector3_1),a=e.__tmpMatrix44_0.setComponents(o.x,r.x,i.x,0,o.y,r.y,i.y,0,o.z,r.z,i.z,0,0,0,0,1);this.rotateMatrix44=a},r.headToDirection=function(t,n){var r=e.__tmpVector3_0.copyComponents(t).normalize(),o=e.__tmpVector3_1.copyComponents(n).normalize(),i=R.d6.crossTo(r,o,e.__tmpVector3_2),a=ne.P.dot(r,o),s=Math.acos(a);this.rotation=e.__tmpQuaternion_0.axisAngle(i,s)},r.setTransform=function(e,t,n,r,o){this.__is_trs_matrix_updated=!1,null!=o&&(this.__matrix=o.clone(),this.__is_trs_matrix_updated=!0,this.__is_position_updated=!1,this.__is_rotation_updated=!1,this.__is_scale_updated=!1),null!=e&&(this.__position=e.clone(),this.__is_position_updated=!0),null!=t&&null!=r?(this.__rotation=r.clone(),this.__is_rotation_updated=!0):null!=t?this.__is_rotation_updated=!1:null!=r&&(this.__rotation=r.clone(),this.__is_rotation_updated=!0),null!=n&&(this.__scale=n.clone(),this.__is_scale_updated=!0),this.__updateTransform()},t=e,(n=[{key:"position",get:function(){return this.positionInner.clone()},set:function(e){this.__position.copyComponents(e),this.__is_position_updated=!0,this.__is_trs_matrix_updated=!1,this.__updateTransform()}},{key:"positionInner",get:function(){return this.__is_position_updated||this.__is_trs_matrix_updated&&(this.__matrix.getTranslateTo(this.__position),this.__is_position_updated=!0),this.__position}},{key:"eulerAngles",get:function(){return this.eulerAnglesInner.clone()},set:function(t){var n=e.__tmpMatrix44_0.rotate(t);this.rotation=x._.fromMatrix(n)}},{key:"eulerAnglesInner",get:function(){return this.__is_trs_matrix_updated?this.__matrix.toEulerAngles():this.__rotation.toEulerAngles()}},{key:"scale",get:function(){return this.scaleInner.clone()},set:function(e){this.__scale.copyComponents(e),this.__is_scale_updated=!0,this.__is_trs_matrix_updated=!1,this.__updateTransform()}},{key:"scaleInner",get:function(){return this.__is_scale_updated||this.__is_trs_matrix_updated&&(this.__matrix.getScaleTo(this.__scale),this.__is_scale_updated=!0),this.__scale}},{key:"rotation",get:function(){return this.rotationInner.clone()},set:function(e){this.__rotation.copyComponents(e),this.__is_rotation_updated=!0,this.__is_trs_matrix_updated=!1,this.__updateTransform()}},{key:"rotationInner",get:function(){return this.__is_rotation_updated?this.__rotation:!this.__is_rotation_updated&&this.__is_trs_matrix_updated?(this.__is_rotation_updated=!0,this.__rotation.fromMatrix(this.__matrix),this.__rotation):this.__rotation}},{key:"matrix",get:function(){return this.matrixInner.clone()},set:function(e){this.__matrix.copyComponents(e),this.__is_trs_matrix_updated=!0,this.__is_position_updated=!1,this.__is_rotation_updated=!1,this.__is_scale_updated=!1,this.__updateTransform()}},{key:"matrixInner",get:function(){if(this.__is_trs_matrix_updated)return this.__matrix;var e=this.scaleInner,t=e._v[0],n=e._v[1],r=e._v[2],o=this.rotationInner,i=o._v[0]*o._v[0],a=o._v[1]*o._v[1],s=o._v[2]*o._v[2],c=o._v[1]*o._v[2],l=o._v[0]*o._v[2],u=o._v[0]*o._v[1],f=o._v[3]*o._v[0],_=o._v[3]*o._v[1],h=o._v[3]*o._v[2],d=1-2*(a+s),m=2*(u-h),v=2*(l+_),p=2*(u+h),y=1-2*(i+s),A=2*(c-f),b=2*(l-_),g=2*(c+f),x=1-2*(i+a),I=this.positionInner;return this.__matrix.m00=d*t,this.__matrix.m01=m*n,this.__matrix.m02=v*r,this.__matrix.m03=I.x,this.__matrix.m10=p*t,this.__matrix.m11=y*n,this.__matrix.m12=A*r,this.__matrix.m13=I.y,this.__matrix.m20=b*t,this.__matrix.m21=g*n,this.__matrix.m22=x*r,this.__matrix.m23=I.z,this.__matrix.m30=0,this.__matrix.m31=0,this.__matrix.m32=0,this.__matrix.m33=1,this.__is_trs_matrix_updated=!0,this.__matrix}},{key:"updateCount",get:function(){return this.__updateCount}},{key:"rotateMatrix44",get:function(){return P.J.fromCopyQuaternion(this.rotation)},set:function(t){this.rotation=e.__tmpQuaternion_0.fromMatrix(t)}}])&&$(t.prototype,n),e}();ee.__tmpMatrix44_0=q.e.zero(),ee.__tmpVector3_0=R.d6.zero(),ee.__tmpVector3_1=R.d6.zero(),ee.__tmpVector3_2=R.d6.zero(),ee.__tmpQuaternion_0=Y.y.identity();var te=n(8020),ne=n(6860),re=n(2175)},7058:(e,t,n)=>{n.d(t,{Dq:()=>f,F5:()=>g,Ff:()=>l,GW:()=>i,JI:()=>d,PF:()=>c,QU:()=>w,Rl:()=>T,TL:()=>y,Up:()=>u,VI:()=>_,Xg:()=>D,Zz:()=>p,_7:()=>C,fK:()=>m,hx:()=>h,jI:()=>b,lx:()=>v,n5:()=>E,nn:()=>r,ns:()=>x,p8:()=>I,sZ:()=>A,t5:()=>a,to:()=>P,vP:()=>S,vk:()=>s,w0:()=>o,wr:()=>R});for(var r=Symbol("get1"),o=Symbol("get1_offset"),i=Symbol("get1_offsetAsComposition"),a=Symbol("get2"),s=Symbol("get2_offset"),c=Symbol("get2_offsetAsComposition"),l=Symbol("get3"),u=Symbol("get3_offset"),f=Symbol("get3_offsetAsComposition"),_=Symbol("get4"),h=Symbol("get4_offset"),d=Symbol("get4_offsetAsComposition"),m=Symbol("getN_offset"),v=Symbol("getN_offsetAsComposition"),p=Symbol("add2"),y=Symbol("add2_offset"),A=Symbol("add3"),b=Symbol("add3_offset"),g=Symbol("add4"),x=Symbol("mulArray3WithScalar_offset"),I=Symbol("mulArray4WithScalar_offset"),E=Symbol("mulArrayNWithScalar_offset"),w=Symbol("mulThatAndThisToOutAsMat44_offsetAsComposition"),S=Symbol("add4_offset"),T=Symbol("qlerp_offsetAsComposition"),C=Symbol("scalar_lerp_offsetAsComposition"),P=Symbol("array3_lerp_offsetAsComposition"),R=Symbol("arrayN_lerp_offsetAsComposition"),D=Symbol("normalizeArray4"),M=[Array,Float32Array,Float64Array,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array],B=[i,c,r,o,a,s,l,u,f,_,h,d,m,v,p,y,A,b,g,S,x,I,E,w,T,C,P,R,D],N=[function(e){return[this[e]]},function(e){return[this[2*e],this[2*e+1]]},function(){return[this[0]]},function(e){return[this[e]]},function(){return[this[0],this[1]]},function(e){return[this[e],this[e+1]]},function(){return[this[0],this[1],this[2]]},function(e){return[this[e],this[e+1],this[e+2]]},function(e){return[this[3*e],this[3*e+1],this[3*e+2]]},function(){return[this[0],this[1],this[2],this[3]]},function(e){return[this[e],this[e+1],this[e+2],this[e+3]]},function(e){return[this[4*e],this[4*e+1],this[4*e+2],this[4*e+3]]},function(e,t){for(var n=new Array(t),r=0;r<t;r++)n[r]=this[e+r];return n},function(e,t){for(var n=new Array(t),r=0;r<t;r++)n[r]=this[e*t+r];return n},function(e){return this[0]+=e[0],this[1]+=e[1],this},function(e,t,n){return this[t]+=e[n],this[t+1]+=e[n+1],this},function(e){return this[0]+=e[0],this[1]+=e[1],this[2]+=e[2],this},function(e,t,n){return this[t]+=e[n],this[t+1]+=e[n+1],this[t+2]+=e[n+2],this},function(e){return this[0]+=e[0],this[1]+=e[1],this[2]+=e[2],this[3]+=e[3],this},function(e,t,n){return this[t]+=e[n],this[t+1]+=e[n+1],this[t+2]+=e[n+2],this[t+3]+=e[n+3],this},function(e,t){return this[e]*=t,this[e+1]*=t,this[e+2]*=t,this},function(e,t){return this[e]*=t,this[e+1]*=t,this[e+2]*=t,this[e+3]*=t,this},function(e,t,n){for(var r=0;r<t;r++)this[e+r]*=n;return this},function(e,t,n,r){var o=t,i=this,a=16*n,s=16*e;r[0]=o[a]*i[s]+o[a+4]*i[s+1]+o[a+8]*i[s+2]+o[a+12]*i[s+3],r[1]=o[a+1]*i[s]+o[a+5]*i[s+1]+o[a+9]*i[s+2]+o[a+13]*i[s+3],r[2]=o[a+2]*i[s]+o[a+6]*i[s+1]+o[a+10]*i[s+2]+o[a+14]*i[s+3],r[3]=o[a+3]*i[s]+o[a+7]*i[s+1]+o[a+11]*i[s+2]+o[a+15]*i[s+3],r[4]=o[a]*i[s+4]+o[a+4]*i[s+5]+o[a+8]*i[s+6]+o[a+12]*i[s+7],r[5]=o[a+1]*i[s+4]+o[a+5]*i[s+5]+o[a+9]*i[s+6]+o[a+13]*i[s+7],r[6]=o[a+2]*i[s+4]+o[a+6]*i[s+5]+o[a+10]*i[s+6]+o[a+14]*i[s+7],r[7]=o[a+3]*i[s+4]+o[a+7]*i[s+5]+o[a+11]*i[s+6]+o[a+15]*i[s+7],r[8]=o[a]*i[s+8]+o[a+4]*i[s+9]+o[a+8]*i[s+10]+o[a+12]*i[s+11],r[9]=o[a+1]*i[s+8]+o[a+5]*i[s+9]+o[a+9]*i[s+10]+o[a+13]*i[s+11],r[10]=o[a+2]*i[s+8]+o[a+6]*i[s+9]+o[a+10]*i[s+10]+o[a+14]*i[s+11],r[11]=o[a+3]*i[s+8]+o[a+7]*i[s+9]+o[a+11]*i[s+10]+o[a+15]*i[s+11],r[12]=o[a]*i[s+12]+o[a+4]*i[s+13]+o[a+8]*i[s+14]+o[a+12]*i[s+15],r[13]=o[a+1]*i[s+12]+o[a+5]*i[s+13]+o[a+9]*i[s+14]+o[a+13]*i[s+15],r[14]=o[a+2]*i[s+12]+o[a+6]*i[s+13]+o[a+10]*i[s+14]+o[a+14]*i[s+15],r[15]=o[a+3]*i[s+12]+o[a+7]*i[s+13]+o[a+11]*i[s+14]+o[a+15]*i[s+15]},function(e,t,n,r){var o=new Array(4),i=this[0+4*n]*e[0+4*r]+this[1+4*n]*e[1+4*r]+this[2+4*n]*e[2+4*r]+this[3+4*n]*e[3+4*r];if(0==1-i*i)o[0]=this[0+4*n],o[1]=this[1+4*n],o[2]=this[2+4*n],o[3]=this[3+4*n];else{i>1?i=.999:i<-1&&(i=-.999);var a,s=Math.acos(i),c=Math.sin(s);i<0?(i*=-1,s=Math.acos(i),a=-1*Math.sin(s*t)/c):a=Math.sin(s*t)/c;var l=Math.sin(s*(1-t))/c;o[0]=this[0+4*n]*l+e[0+4*r]*a,o[1]=this[1+4*n]*l+e[1+4*r]*a,o[2]=this[2+4*n]*l+e[2+4*r]*a,o[3]=this[3+4*n]*l+e[3+4*r]*a}return o},function(e,t,n,r){return this[n]*(1-t)+e[r]*t},function(e,t,n,r){for(var o=new Array(3),i=0;i<3;i++)o[i]=this[3*n+i]*(1-t)+e[3*r+i]*t;return o},function(e,t,n,r,o){for(var i=new Array(t),a=0;a<t;a++)i[a]=this[r*t+a]*(1-n)+e[o*t+a]*n;return i},function(){var e=Math.hypot(this[0],this[1],this[2],this[3]);return this[0]/=e,this[1]/=e,this[2]/=e,this[3]/=e,this}],O=0;O<M.length;O++)for(var L=0;L<B.length;L++)M[O].prototype[B[L]]=N[L]},8355:(e,t,n)=>{n.d(t,{U:()=>m});var r=n(2535),o=n(3932),i=n(8020),a=n(6860),s=n(6264),c=n(9513),l=n(988),u=n(2328),f=n(6386),_=n(8289),h=n(7690);function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(t){var n,i,a,s,c,l,f,_,d=t.bufferView,m=t.byteOffsetInBufferView,v=t.compositionType,p=t.componentType,y=t.byteStride,A=t.count,b=t.raw,g=t.max,x=t.min,I=t.arrayLength,E=t.normalized;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.__compositionType=o.d.Unknown,this.__componentType=r.r.Unknown,this.__count=0,this.__takenCount=0,this.__byteStride=0,this.__max=u.xQ.fromCopyArray([-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE]),this.__min=u.xQ.fromCopyArray([Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE]),this.__arrayLength=1,this.__normalized=!1,this.__isMinMixDirty=!0,this.__version=0,this.__bufferView=d,this.__byteOffsetInRawArrayBufferOfBuffer=d.byteOffsetInRawArrayBufferOfBuffer+m,this.__compositionType=v,this.__componentType=p,this.__count=A,this.__arrayLength=I,h.Is.exist(g)&&this.__max.setComponents(null!==(n=g[0])&&void 0!==n?n:-Number.MAX_VALUE,null!==(i=g[1])&&void 0!==i?i:-Number.MAX_VALUE,null!==(a=g[2])&&void 0!==a?a:-Number.MAX_VALUE,null!==(s=g[3])&&void 0!==s?s:-Number.MAX_VALUE),h.Is.exist(x)&&this.__min.setComponents(null!==(c=x[0])&&void 0!==c?c:Number.MAX_VALUE,null!==(l=x[1])&&void 0!==l?l:Number.MAX_VALUE,null!==(f=x[2])&&void 0!==f?f:Number.MAX_VALUE,null!==(_=x[3])&&void 0!==_?_:Number.MAX_VALUE),h.Is.exist(g)&&h.Is.exist(x)&&(this.__isMinMixDirty=!1),this.__raw=b,this.__normalized=E,this.__byteStride=y,0===this.__byteStride&&(this.__byteStride=this.__compositionType.getNumberOfComponents()*this.__componentType.getSizeInBytes()*this.__arrayLength);var w=this.getTypedArrayClass(this.__componentType);this.__typedArrayClass=w;var S=this.__byteStride-this.__compositionType.getNumberOfComponents()*this.__componentType.getSizeInBytes(),T=this.__raw.byteLength-this.__byteOffsetInRawArrayBufferOfBuffer,C=this.byteStride*this.__count-S;T<C&&console.error("Requesting a data size that exceeds the remaining capacity of the buffer: ".concat(this.bufferView.buffer.name,".\n        Exceeded Size: ").concat(C-T,"\n        this.__raw.byteLength: ").concat(this.__raw.byteLength,"\n        this.__byteOffsetInRawArrayBufferOfBuffer: ").concat(this.byteOffsetInRawArrayBufferOfBuffer,"\n        this.byteStride: ").concat(this.byteStride,"\n        this.__count: ").concat(this.__count,"\n        this.__raw.byteLength - this.__byteOffsetInRawArrayBufferOfBuffer: ").concat(this.__raw.byteLength-this.__byteOffsetInRawArrayBufferOfBuffer,"\n        this.byteStride * this.__count: ").concat(this.byteStride*this.__count,"\n        maxExceededSizeOnAoS: ").concat(S,"\n        ")),this.__dataView=new DataView(this.__raw,this.__byteOffsetInRawArrayBufferOfBuffer,Math.min(this.__byteStride*this.__count,this.__raw.byteLength-this.__byteOffsetInRawArrayBufferOfBuffer)),this.__typedArray=new w(this.__raw,this.__byteOffsetInRawArrayBufferOfBuffer,this.__compositionType.getNumberOfComponents()*this.__count),this.__dataViewGetter=this.__dataView[this.getDataViewGetter(this.__componentType)].bind(this.__dataView),this.__dataViewSetter=this.__dataView[this.getDataViewSetter(this.__componentType)].bind(this.__dataView)}var t,n,c=e.prototype;return c.getTypedArrayClass=function(e){switch(e){case r.r.Byte:return Int8Array;case r.r.UnsignedByte:return Uint8Array;case r.r.Short:return Int16Array;case r.r.UnsignedShort:return Uint16Array;case r.r.Int:return Int32Array;case r.r.UnsignedInt:return Uint32Array;case r.r.Float:return Float32Array;case r.r.Double:return Float64Array;default:return void console.error("Unexpected ComponentType!")}},c.getDataViewGetter=function(e){switch(e){case r.r.Byte:return"getInt8";case r.r.UnsignedByte:return"getUint8";case r.r.Short:return"getInt16";case r.r.UnsignedShort:return"getUint16";case r.r.Int:return"getInt32";case r.r.UnsignedInt:return"getUint32";case r.r.Float:return"getFloat32";case r.r.Double:return"getFloat64";default:return console.error("Unexpected ComponentType!"),"unknown"}},c.getDataViewSetter=function(e){switch(e){case r.r.Byte:return"setInt8";case r.r.UnsignedByte:return"setUint8";case r.r.Short:return"setInt16";case r.r.UnsignedShort:return"setUint16";case r.r.Int:return"setInt32";case r.r.UnsignedInt:return"setUint32";case r.r.Float:return"setFloat32";case r.r.Double:return"setFloat64";default:console.error("Unexpected ComponentType!")}},c.takeOne=function(){var e=this.__raw;this.__takenCount>=this.__count&&console.error("You are trying to allocate more than you have secured.");var t=new this.__typedArrayClass(e,this.__byteOffsetInRawArrayBufferOfBuffer+this.__byteStride*this.__takenCount,this.__compositionType.getNumberOfComponents()*this.__arrayLength);return this.__takenCount+=1,t._accessor=this,t._idx_of_accessor=this.__takenCount,t},c.getTypedArray=function(){return this.__typedArray},c.getUint8Array=function(){return new Uint8Array(this.bufferView.buffer.getArrayBuffer(),this.byteOffsetInRawArrayBufferOfBuffer,this.byteLength)},c.getScalar=function(e,t){var n=t.indicesAccessor,r=t.endian,o=void 0===r||r,i=e;return n&&(i=n.getScalar(e,{})),this.__dataViewGetter(this.__byteStride*i,o)},c.getScalarAt=function(e,t,n){var r=n.indicesAccessor,o=n.endian,i=void 0===o||o,a=e;return r&&(a=r.getScalar(e,{})),this.__dataViewGetter(this.__byteStride*a+t,i)},c.getVec2AsArray=function(e,t){var n=t.indicesAccessor,r=t.endian,o=void 0===r||r,i=e;n&&(i=n.getScalar(e,{}));var a=this.componentSizeInBytes;return[this.__dataViewGetter(this.__byteStride*i,o),this.__dataViewGetter(this.__byteStride*i+1*a,o)]},c.getVec3AsArray=function(e,t){var n=t.indicesAccessor,r=t.endian,o=void 0===r||r,i=e;n&&(i=n.getScalar(e,{}));var a=this.componentSizeInBytes;return[this.__dataViewGetter(this.__byteStride*i,o),this.__dataViewGetter(this.__byteStride*i+1*a,o),this.__dataViewGetter(this.__byteStride*i+2*a,o)]},c.getVec4AsArray=function(e,t){var n=t.indicesAccessor,r=t.endian,o=void 0===r||r,i=e;n&&(i=n.getScalar(e,{}));var a=this.componentSizeInBytes;return[this.__dataViewGetter(this.__byteStride*i,o),this.__dataViewGetter(this.__byteStride*i+1*a,o),this.__dataViewGetter(this.__byteStride*i+2*a,o),this.__dataViewGetter(this.__byteStride*i+3*a,o)]},c.getMat3AsArray=function(e,t){var n=t.indicesAccessor,r=t.endian,o=void 0===r||r,i=e;n&&(i=n.getScalar(e,{}));var a=this.componentSizeInBytes;return[this.__dataViewGetter(this.__byteStride*i,o),this.__dataViewGetter(this.__byteStride*i+1*a,o),this.__dataViewGetter(this.__byteStride*i+2*a,o),this.__dataViewGetter(this.__byteStride*i+3*a,o),this.__dataViewGetter(this.__byteStride*i+4*a,o),this.__dataViewGetter(this.__byteStride*i+5*a,o),this.__dataViewGetter(this.__byteStride*i+6*a,o),this.__dataViewGetter(this.__byteStride*i+7*a,o),this.__dataViewGetter(this.__byteStride*i+8*a,o)]},c.getMat4AsArray=function(e,t){var n=t.indicesAccessor,r=t.endian,o=void 0===r||r,i=e;n&&(i=n.getScalar(e,{}));var a=this.componentSizeInBytes;return[this.__dataViewGetter(this.__byteStride*i,o),this.__dataViewGetter(this.__byteStride*i+1*a,o),this.__dataViewGetter(this.__byteStride*i+2*a,o),this.__dataViewGetter(this.__byteStride*i+3*a,o),this.__dataViewGetter(this.__byteStride*i+4*a,o),this.__dataViewGetter(this.__byteStride*i+5*a,o),this.__dataViewGetter(this.__byteStride*i+6*a,o),this.__dataViewGetter(this.__byteStride*i+7*a,o),this.__dataViewGetter(this.__byteStride*i+8*a,o),this.__dataViewGetter(this.__byteStride*i+9*a,o),this.__dataViewGetter(this.__byteStride*i+10*a,o),this.__dataViewGetter(this.__byteStride*i+11*a,o),this.__dataViewGetter(this.__byteStride*i+12*a,o),this.__dataViewGetter(this.__byteStride*i+13*a,o),this.__dataViewGetter(this.__byteStride*i+14*a,o),this.__dataViewGetter(this.__byteStride*i+15*a,o)]},c.getVec2=function(e,t){var n=t.indicesAccessor,r=t.endian,o=void 0===r||r,a=e;n&&(a=n.getScalar(e,{}));var s=this.componentSizeInBytes;return i.FM.fromCopyArray2([this.__dataViewGetter(this.__byteStride*a,o),this.__dataViewGetter(this.__byteStride*a+1*s,o)])},c.getVec3=function(e,t){var n=t.indicesAccessor,r=t.endian,o=void 0===r||r,i=e;n&&(i=n.getScalar(e,{}));var s=this.componentSizeInBytes;return a.P.fromCopyArray([this.__dataViewGetter(this.__byteStride*i,o),this.__dataViewGetter(this.__byteStride*i+1*s,o),this.__dataViewGetter(this.__byteStride*i+2*s,o)])},c.getVec4=function(e,t){var n=t.indicesAccessor,r=t.endian,o=void 0===r||r,i=e;n&&(i=n.getScalar(e,{}));var a=this.componentSizeInBytes;return s.Lt.fromCopyArray([this.__dataViewGetter(this.__byteStride*i,o),this.__dataViewGetter(this.__byteStride*i+1*a,o),this.__dataViewGetter(this.__byteStride*i+2*a,o),this.__dataViewGetter(this.__byteStride*i+3*a,o)])},c.getMat3=function(e,t){var n=t.indicesAccessor,r=t.endian,o=void 0===r||r,i=e;n&&(i=n.getScalar(e,{}));var a=this.componentSizeInBytes;return f.h.fromCopy9RowMajor(this.__dataViewGetter(this.__byteStride*i,o),this.__dataViewGetter(this.__byteStride*i+1*a,o),this.__dataViewGetter(this.__byteStride*i+2*a,o),this.__dataViewGetter(this.__byteStride*i+3*a,o),this.__dataViewGetter(this.__byteStride*i+4*a,o),this.__dataViewGetter(this.__byteStride*i+5*a,o),this.__dataViewGetter(this.__byteStride*i+6*a,o),this.__dataViewGetter(this.__byteStride*i+7*a,o),this.__dataViewGetter(this.__byteStride*i+8*a,o))},c.getMat4=function(e,t){var n=t.indicesAccessor,r=t.endian,o=void 0===r||r,i=e;n&&(i=n.getScalar(e,{}));var a=this.componentSizeInBytes;return _.e.fromCopy16RowMajor(this.__dataViewGetter(this.__byteStride*i,o),this.__dataViewGetter(this.__byteStride*i+1*a,o),this.__dataViewGetter(this.__byteStride*i+2*a,o),this.__dataViewGetter(this.__byteStride*i+3*a,o),this.__dataViewGetter(this.__byteStride*i+4*a,o),this.__dataViewGetter(this.__byteStride*i+5*a,o),this.__dataViewGetter(this.__byteStride*i+6*a,o),this.__dataViewGetter(this.__byteStride*i+7*a,o),this.__dataViewGetter(this.__byteStride*i+8*a,o),this.__dataViewGetter(this.__byteStride*i+9*a,o),this.__dataViewGetter(this.__byteStride*i+10*a,o),this.__dataViewGetter(this.__byteStride*i+11*a,o),this.__dataViewGetter(this.__byteStride*i+12*a,o),this.__dataViewGetter(this.__byteStride*i+13*a,o),this.__dataViewGetter(this.__byteStride*i+14*a,o),this.__dataViewGetter(this.__byteStride*i+15*a,o))},c.getVec2To=function(e,t,n){var r=n.indicesAccessor,o=n.endian,i=void 0===o||o,a=e;r&&(a=r.getScalar(e,{}));var s=this.componentSizeInBytes;return t.setComponents(this.__dataViewGetter(this.__byteStride*a,i),this.__dataViewGetter(this.__byteStride*a+1*s,i))},c.getVec3To=function(e,t,n){var r=n.indicesAccessor,o=n.endian,i=void 0===o||o,a=e;r&&(a=r.getScalar(e,{}));var s=this.componentSizeInBytes;return t.setComponents(this.__dataViewGetter(this.__byteStride*a,i),this.__dataViewGetter(this.__byteStride*a+1*s,i),this.__dataViewGetter(this.__byteStride*a+2*s,i))},c.getVec4To=function(e,t,n){var r=n.indicesAccessor,o=n.endian,i=void 0===o||o,a=e;r&&(a=r.getScalar(e,{}));var s=this.componentSizeInBytes;return t.setComponents(this.__dataViewGetter(this.__byteStride*a,i),this.__dataViewGetter(this.__byteStride*a+1*s,i),this.__dataViewGetter(this.__byteStride*a+2*s,i),this.__dataViewGetter(this.__byteStride*a+3*s,i))},c.getMat3To=function(e,t,n){var r=n.indicesAccessor,o=n.endian,i=void 0===o||o,a=e;r&&(a=r.getScalar(e,{}));var s=this.componentSizeInBytes;return t.setComponents(this.__dataViewGetter(this.__byteStride*a,i),this.__dataViewGetter(this.__byteStride*a+1*s,i),this.__dataViewGetter(this.__byteStride*a+2*s,i),this.__dataViewGetter(this.__byteStride*a+3*s,i),this.__dataViewGetter(this.__byteStride*a+4*s,i),this.__dataViewGetter(this.__byteStride*a+5*s,i),this.__dataViewGetter(this.__byteStride*a+6*s,i),this.__dataViewGetter(this.__byteStride*a+7*s,i),this.__dataViewGetter(this.__byteStride*a+8*s,i))},c.getMat4To=function(e,t,n){var r=n.indicesAccessor,o=n.endian,i=void 0===o||o,a=e;r&&(a=r.getScalar(e,{}));var s=this.componentSizeInBytes;return t.setComponents(this.__dataViewGetter(this.__byteStride*a,i),this.__dataViewGetter(this.__byteStride*a+1*s,i),this.__dataViewGetter(this.__byteStride*a+2*s,i),this.__dataViewGetter(this.__byteStride*a+3*s,i),this.__dataViewGetter(this.__byteStride*a+4*s,i),this.__dataViewGetter(this.__byteStride*a+5*s,i),this.__dataViewGetter(this.__byteStride*a+6*s,i),this.__dataViewGetter(this.__byteStride*a+7*s,i),this.__dataViewGetter(this.__byteStride*a+8*s,i),this.__dataViewGetter(this.__byteStride*a+9*s,i),this.__dataViewGetter(this.__byteStride*a+10*s,i),this.__dataViewGetter(this.__byteStride*a+11*s,i),this.__dataViewGetter(this.__byteStride*a+12*s,i),this.__dataViewGetter(this.__byteStride*a+13*s,i),this.__dataViewGetter(this.__byteStride*a+14*s,i),this.__dataViewGetter(this.__byteStride*a+15*s,i))},c.setScalar=function(e,t,n){var r=n.indicesAccessor,o=n.endian,i=void 0===o||o,a=e;r&&(a=r.getScalar(e,{})),this.__dataViewSetter(this.__byteStride*a,t,i),this.__isMinMixDirty=!0,this.__version++},c.setVec2=function(e,t,n,r){var o=r.indicesAccessor,i=r.endian,a=void 0===i||i,s=e;o&&(s=o.getScalar(e,{}));var c=this.componentSizeInBytes;this.__dataViewSetter(this.__byteStride*s,t,a),this.__dataViewSetter(this.__byteStride*s+1*c,n,a),this.__isMinMixDirty=!0,this.__version++},c.setVec3=function(e,t,n,r,o){var i=o.indicesAccessor,a=o.endian,s=void 0===a||a,c=e;i&&(c=i.getScalar(e,{}));var l=this.componentSizeInBytes;this.__dataViewSetter(this.__byteStride*c,t,s),this.__dataViewSetter(this.__byteStride*c+1*l,n,s),this.__dataViewSetter(this.__byteStride*c+2*l,r,s),this.__isMinMixDirty=!0,this.__version++},c.setVec4=function(e,t,n,r,o,i){var a=i.indicesAccessor,s=i.endian,c=void 0===s||s,l=e;a&&(l=a.getScalar(e,{}));var u=this.componentSizeInBytes;this.__dataViewSetter(this.__byteStride*l,t,c),this.__dataViewSetter(this.__byteStride*l+1*u,n,c),this.__dataViewSetter(this.__byteStride*l+2*u,r,c),this.__dataViewSetter(this.__byteStride*l+3*u,o,c),this.__isMinMixDirty=!0,this.__version++},c.setMat4=function(e,t,n,r,o,i,a,s,c,l,u,f,_,h,d,m,v,p){var y=p.indicesAccessor,A=p.endian,b=void 0===A||A,g=e;y&&(g=y.getScalar(e,{}));var x=this.componentSizeInBytes;this.__dataViewSetter(this.__byteStride*g,t,b),this.__dataViewSetter(this.__byteStride*g+1*x,n,b),this.__dataViewSetter(this.__byteStride*g+2*x,r,b),this.__dataViewSetter(this.__byteStride*g+3*x,o,b),this.__dataViewSetter(this.__byteStride*g+4*x,i,b),this.__dataViewSetter(this.__byteStride*g+5*x,a,b),this.__dataViewSetter(this.__byteStride*g+6*x,s,b),this.__dataViewSetter(this.__byteStride*g+7*x,c,b),this.__dataViewSetter(this.__byteStride*g+8*x,l,b),this.__dataViewSetter(this.__byteStride*g+9*x,u,b),this.__dataViewSetter(this.__byteStride*g+10*x,f,b),this.__dataViewSetter(this.__byteStride*g+11*x,_,b),this.__dataViewSetter(this.__byteStride*g+12*x,h,b),this.__dataViewSetter(this.__byteStride*g+13*x,d,b),this.__dataViewSetter(this.__byteStride*g+14*x,m,b),this.__dataViewSetter(this.__byteStride*g+15*x,v,b),this.__isMinMixDirty=!0,this.__version++},c.setVec2AsVector=function(e,t,n){var r=n.indicesAccessor,o=n.endian,i=void 0===o||o,a=e;r&&(a=r.getScalar(e,{}));var s=this.componentSizeInBytes;this.__dataViewSetter(this.__byteStride*a,t.x,i),this.__dataViewSetter(this.__byteStride*a+1*s,t.y,i),this.__isMinMixDirty=!0,this.__version++},c.setVec3AsVector=function(e,t,n){var r=n.indicesAccessor,o=n.endian,i=void 0===o||o,a=e;r&&(a=r.getScalar(e,{}));var s=this.componentSizeInBytes;this.__dataViewSetter(this.__byteStride*a,t.x,i),this.__dataViewSetter(this.__byteStride*a+1*s,t.y,i),this.__dataViewSetter(this.__byteStride*a+2*s,t.z,i),this.__isMinMixDirty=!0,this.__version++},c.setVec4AsVector=function(e,t,n){var r=n.indicesAccessor,o=n.endian,i=void 0===o||o,a=e;r&&(a=r.getScalar(e,{}));var s=this.componentSizeInBytes;this.__dataViewSetter(this.__byteStride*a,t.x,i),this.__dataViewSetter(this.__byteStride*a+1*s,t.y,i),this.__dataViewSetter(this.__byteStride*a+2*s,t.z,i),this.__dataViewSetter(this.__byteStride*a+3*s,t.w,i),this.__isMinMixDirty=!0,this.__version++},c.setMat4AsMatrix44=function(e,t,n){var r=n.indicesAccessor,o=n.endian,i=void 0===o||o,a=e;r&&(a=r.getScalar(e,{}));var s=this.componentSizeInBytes;this.__dataViewSetter(this.__byteStride*a,t._v[0],i),this.__dataViewSetter(this.__byteStride*a+1*s,t._v[1],i),this.__dataViewSetter(this.__byteStride*a+2*s,t._v[2],i),this.__dataViewSetter(this.__byteStride*a+3*s,t._v[3],i),this.__dataViewSetter(this.__byteStride*a+4*s,t._v[4],i),this.__dataViewSetter(this.__byteStride*a+5*s,t._v[5],i),this.__dataViewSetter(this.__byteStride*a+6*s,t._v[6],i),this.__dataViewSetter(this.__byteStride*a+7*s,t._v[7],i),this.__dataViewSetter(this.__byteStride*a+8*s,t._v[8],i),this.__dataViewSetter(this.__byteStride*a+9*s,t._v[9],i),this.__dataViewSetter(this.__byteStride*a+10*s,t._v[10],i),this.__dataViewSetter(this.__byteStride*a+11*s,t._v[11],i),this.__dataViewSetter(this.__byteStride*a+12*s,t._v[12],i),this.__dataViewSetter(this.__byteStride*a+13*s,t._v[13],i),this.__dataViewSetter(this.__byteStride*a+14*s,t._v[14],i),this.__dataViewSetter(this.__byteStride*a+15*s,t._v[15],i),this.__isMinMixDirty=!0,this.__version++},c.copyFromTypedArray=function(e){for(var t=this.numberOfComponents,n=0;n<e.byteLength/this.componentSizeInBytes;n++){var r=Math.floor(n/t),o=r*t;switch(t){case 1:this.setScalar(r,e[o+0],{});break;case 2:this.setVec2(r,e[o+0],e[o+1],{});break;case 3:this.setVec3(r,e[o+0],e[o+1],e[o+2],{});break;case 4:this.setVec4(r,e[o+0],e[o+1],e[o+2],e[o+3],{});break;default:throw new Error("Other than vectors are currently not supported.")}}this.__isMinMixDirty=!0,this.__version++},c.setScalarAt=function(e,t,n,r){var o=r.indicesAccessor,i=r.endian,a=void 0===i||i,s=e;o&&(s=o.getScalar(e,{})),this.__dataViewSetter(this.__byteStride*s+t,n,a),this.__isMinMixDirty=!0,this.__version++},c.setElementFromSameCompositionAccessor=function(e,t,n){var r=null!=n?n:e;1===this.compositionType.getNumberOfComponents()?this.setScalar(e,t.getScalar(r,{}),{}):2===this.compositionType.getNumberOfComponents()?this.setVec2AsVector(e,t.getVec2(r,{}),{}):3===this.compositionType.getNumberOfComponents()?this.setVec3AsVector(e,t.getVec3(r,{}),{}):4===this.compositionType.getNumberOfComponents()&&this.setVec4AsVector(e,t.getVec4(r,{}),{}),this.__isMinMixDirty=!0,this.__version++},c.copyBuffer=function(e){new Uint8Array(this.__raw).set(new Uint8Array(e.__raw,e.__byteOffsetInRawArrayBufferOfBuffer,e.byteLength),this.__byteOffsetInRawArrayBufferOfBuffer),this.__isMinMixDirty=!0,this.__version++},c.setElementFromAccessor=function(e,t,n){var r=null!=n?n:e;if(1===this.compositionType.getNumberOfComponents())1===t.compositionType.getNumberOfComponents()?this.setScalar(e,t.getScalar(r,{}),{}):2===t.compositionType.getNumberOfComponents()?this.setScalar(e,t.getVec2(r,{}).x,{}):3===t.compositionType.getNumberOfComponents()?this.setScalar(e,t.getVec3(r,{}).x,{}):4===t.compositionType.getNumberOfComponents()&&this.setScalar(e,t.getVec4(r,{}).x,{});else if(2===this.compositionType.getNumberOfComponents()){if(1===t.compositionType.getNumberOfComponents()){var o=t.getScalar(r,{});this.setVec2(e,o,0,{})}else if(2===t.compositionType.getNumberOfComponents())this.setVec2AsVector(e,t.getVec2(r,{}),{});else if(3===t.compositionType.getNumberOfComponents()){var i=t.getVec3(r,{});this.setVec2(e,i.x,i.y,{})}else if(4===t.compositionType.getNumberOfComponents()){var a=t.getVec4(r,{});this.setVec2(e,a.x,a.y,{})}}else if(3===this.compositionType.getNumberOfComponents()){if(1===t.compositionType.getNumberOfComponents()){var s=t.getScalar(r,{});this.setVec3(e,s,0,0,{})}else if(2===t.compositionType.getNumberOfComponents()){var c=t.getVec2(r,{});this.setVec3(e,c.x,c.y,0,{})}else if(3===t.compositionType.getNumberOfComponents()){var l=t.getVec3(r,{});this.setVec3AsVector(e,l,{})}else if(4===t.compositionType.getNumberOfComponents()){var u=t.getVec4(r,{});this.setVec3(e,u.x,u.y,u.z,{})}}else if(4===this.compositionType.getNumberOfComponents())if(1===t.compositionType.getNumberOfComponents()){var f=t.getScalar(r,{});this.setVec4(e,f,0,0,0,{})}else if(2===t.compositionType.getNumberOfComponents()){var _=t.getVec2(r,{});this.setVec4(e,_.x,_.y,0,0,{})}else if(3===t.compositionType.getNumberOfComponents()){var h=t.getVec3(r,{});this.setVec4(e,h.x,h.y,h.z,0,{})}else if(4===t.compositionType.getNumberOfComponents()){var d=t.getVec4(r,{});this.setVec4AsVector(e,d,{})}this.__isMinMixDirty=!0,this.__version++},c.addElementFromSameCompositionAccessor=function(e,t,n,r){var o=null!=r?r:e;1===this.compositionType.getNumberOfComponents()?this.setScalar(e,this.getScalar(e,{})+n*t.getScalar(o,{}),{}):2===this.compositionType.getNumberOfComponents()?this.setVec2AsVector(e,i.FM.add(this.getVec2(e,{}),i.FM.multiply(t.getVec2(o,{}),n)),{}):3===this.compositionType.getNumberOfComponents()?this.setVec3AsVector(e,a.P.add(this.getVec3(e,{}),a.P.multiply(t.getVec3(o,{}),n)),{}):4===this.compositionType.getNumberOfComponents()&&this.setVec4AsVector(e,s.Lt.add(this.getVec4(e,{}),s.Lt.multiply(t.getVec4(o,{}),n)),{}),this.__isMinMixDirty=!0,this.__version++},c.setMinMax=function(e,t){var n=this.compositionType.getNumberOfComponents();1===n?(this.__min._v[0]=e[0],this.__max._v[0]=t[0]):2===n?(this.__min._v[0]=e[0],this.__min._v[1]=e[1],this.__max._v[0]=t[0],this.__max._v[1]=t[1]):3===n?(this.__min._v[0]=e[0],this.__min._v[1]=e[1],this.__min._v[2]=e[2],this.__max._v[0]=t[0],this.__max._v[1]=t[1],this.__max._v[2]=t[2]):4===n&&(this.__min._v[0]=e[0],this.__min._v[1]=e[1],this.__min._v[2]=e[2],this.__min._v[3]=e[3],this.__max._v[0]=t[0],this.__max._v[1]=t[1],this.__max._v[2]=t[2],this.__max._v[3]=t[3]),this.__isMinMixDirty=!1},c.__calcMinMax=function(){var t=this.compositionType.getNumberOfComponents();if(4===t){this.__max.setComponents(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),this.__min.setComponents(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(var n=e.__tmpVector4_0,r=0;r<this.elementCount;r++){this.getVec4To(r,n,{});for(var o=0;o<4;o++)this.__max._v[o]<n._v[o]&&(this.__max._v[o]=n._v[o]),n._v[o]<this.__min._v[o]&&(this.__min._v[o]=n._v[o])}}else if(3===t){this.__max.setComponents(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),this.__min.setComponents(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(var i=e.__tmpVector3_0,a=0;a<this.elementCount;a++){this.getVec3To(a,i,{});for(var s=0;s<3;s++)this.__max._v[s]<i._v[s]&&(this.__max._v[s]=i._v[s]),i._v[s]<this.__min._v[s]&&(this.__min._v[s]=i._v[s])}}else if(2===t){this.__max.setComponents(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),this.__min.setComponents(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(var c=e.__tmpVector2_0,l=0;l<this.elementCount;l++){this.getVec2To(l,c,{});for(var u=0;u<2;u++)this.__max._v[u]<c._v[u]&&(this.__max._v[u]=c._v[u]),c._v[u]<this.__min._v[u]&&(this.__min._v[u]=c._v[u])}}else if(1===t){this.__max.setComponents(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),this.__min.setComponents(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(var f=0;f<this.elementCount;f++){var _=this.getScalar(f,{});this.__max._v[0]<_&&(this.__max._v[0]=_),_<this.__min._v[0]&&(this.__min._v[0]=_)}}this.__isMinMixDirty=!1},c.isSame=function(e){return this.byteLength===e.byteLength&&this.byteOffsetInRawArrayBufferOfBuffer===e.byteOffsetInRawArrayBufferOfBuffer&&this.bufferView.buffer.getArrayBuffer()===e.bufferView.buffer.getArrayBuffer()},t=e,(n=[{key:"takenCount",get:function(){return this.takenCount}},{key:"numberOfComponents",get:function(){return this.__compositionType.getNumberOfComponents()}},{key:"componentSizeInBytes",get:function(){return this.__componentType.getSizeInBytes()}},{key:"elementSizeInBytes",get:function(){return this.numberOfComponents*this.componentSizeInBytes}},{key:"elementCount",get:function(){return this.__count}},{key:"byteLength",get:function(){return this.__byteStride*this.__count}},{key:"componentType",get:function(){return this.__componentType}},{key:"compositionType",get:function(){return this.__compositionType}},{key:"isAoS",get:function(){return!this.isSoA}},{key:"isSoA",get:function(){return this.byteStride===this.__compositionType.getNumberOfComponents()*this.__componentType.getSizeInBytes()}},{key:"byteStride",get:function(){return this.__byteStride}},{key:"arrayBufferOfBufferView",get:function(){return this.__raw}},{key:"dataViewOfBufferView",get:function(){return this.__dataView}},{key:"byteOffsetInBufferView",get:function(){return this.__byteOffsetInRawArrayBufferOfBuffer-this.__bufferView.byteOffsetInRawArrayBufferOfBuffer}},{key:"byteOffsetInBuffer",get:function(){return this.__byteOffsetInRawArrayBufferOfBuffer-this.__bufferView.buffer.byteOffsetInRawArrayBuffer}},{key:"byteOffsetInRawArrayBufferOfBuffer",get:function(){return this.__byteOffsetInRawArrayBufferOfBuffer}},{key:"bufferView",get:function(){return this.__bufferView}},{key:"min",get:function(){this.__isMinMixDirty&&this.__calcMinMax();var e=this.compositionType.getNumberOfComponents();return 4===e?[this.__min._v[0],this.__min._v[1],this.__min._v[2],this.__min._v[3]]:3===e?[this.__min._v[0],this.__min._v[1],this.__min._v[2]]:2===e?[this.__min._v[0],this.__min._v[1]]:[this.__min._v[0]]}},{key:"max",get:function(){this.__isMinMixDirty&&this.__calcMinMax();var e=this.compositionType.getNumberOfComponents();return 4===e?[this.__max._v[0],this.__max._v[1],this.__max._v[2],this.__max._v[3]]:3===e?[this.__max._v[0],this.__max._v[1],this.__max._v[2]]:2===e?[this.__max._v[0],this.__max._v[1]]:[this.__max._v[0]]}},{key:"normalized",get:function(){return this.__normalized}},{key:"isMinMaxDirty",get:function(){return this.__isMinMixDirty}},{key:"version",get:function(){return this.__version}},{key:"actualByteStride",get:function(){return 0===this.__byteStride?this.__compositionType.getNumberOfComponents()*this.__componentType.getSizeInBytes()*this.__arrayLength:this.__byteStride}}])&&d(t.prototype,n),e}();m.__tmpVector4_0=u.xQ.zero(),m.__tmpVector3_0=l.d6.zero(),m.__tmpVector2_0=c.NR.zero()},5527:(e,t,n)=>{n.d(t,{l:()=>l});var r=n(4341),o=n(3932),i=n(2535),a=n(5479),s=n(7690);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){var n,r,o=t.byteLength,i=t.buffer,a=t.name,s=t.byteAlign;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__byteLength=0,this.__byteOffset=0,this.__takenBytesIndex=0,this.__name="",this.__bufferViews=[],this.__name=a,this.__byteLength=o,this.__byteAlign=s,n=i,(null!=(r=Uint8Array)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](n):n instanceof r)?(this.__raw=i.buffer,this.__byteOffset=i.byteOffset):this.__raw=i}var t,n,l=e.prototype;return l.getArrayBuffer=function(){return this.__raw},l.__padding=function(e,t){var n=a.j.calcPaddingBytes(e,t);return n>0&&console.info("Padding bytes added to takenBytesIndex."),n},l.takeBufferView=function(e){var t=e.byteLengthToNeed,n=e.byteStride,o=t;if(o+this.__takenBytesIndex>this.byteLength){var i="The size of the BufferView you are trying to take exceeds the byte length left in the Buffer.\nBuffer.byteLength: ".concat(this.byteLength,", Buffer.takenSizeInByte: ").concat(this.takenSizeInByte,",\nbyteSizeToTake: ").concat(o,", the byte length left in the Buffer: ").concat(this.__byteLength-this.__takenBytesIndex);return new s.UG({message:i,error:void 0})}var c=new r.q({buffer:this,byteOffsetInBuffer:this.__takenBytesIndex,defaultByteStride:n,byteLength:o,raw:this.__raw});return this.__takenBytesIndex+=o,this.__takenBytesIndex=a.j.addPaddingBytes(this.__takenBytesIndex,this.__byteAlign),this.__bufferViews.push(c),new s.Ok(c)},l.takeBufferViewWithByteOffset=function(e){var t=e.byteLengthToNeed,n=e.byteStride,o=e.byteOffset;if(t+o>this.byteLength){var i="The size of the BufferView you are trying to take exceeds the byte length left in the Buffer.\nBuffer.byteLength: ".concat(this.byteLength,", Buffer.takenSizeInByte: ").concat(this.takenSizeInByte,",\nbyteSizeToTake: ").concat(t,", the byte length left in the Buffer: ").concat(this.__byteLength-this.__takenBytesIndex);return new s.UG({message:i,error:void 0})}var a=new r.q({buffer:this,byteOffsetInBuffer:o,defaultByteStride:n,byteLength:t,raw:this.__raw}),c=Uint8Array.BYTES_PER_ELEMENT*t+o;return this.__takenBytesIndex<c&&(this.__takenBytesIndex=c),this.__bufferViews.push(a),new s.Ok(a)},l._addTakenByteIndex=function(e){this.__takenBytesIndex+=e},l.getTypedArray=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,a=i.r.toTypedArray(n);return void 0===a&&console.warn("componentType is Invalid"),o.d.isArray(t)?new a(this.__raw,this.__byteOffset+4*e,r):new a(this.__raw,this.__byteOffset+4*e,1)},l.isSame=function(e){return this.__raw===e.__raw},t=e,(n=[{key:"name",get:function(){return this.__name},set:function(e){this.__name=e}},{key:"byteLength",get:function(){return this.__byteLength}},{key:"takenSizeInByte",get:function(){return this.__takenBytesIndex}},{key:"byteOffsetInRawArrayBuffer",get:function(){return this.__byteOffset}}])&&c(t.prototype,n),e}()},4341:(e,t,n)=>{n.d(t,{q:()=>a});var r=n(8355),o=n(7690);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){var n=t.buffer,r=t.byteOffsetInBuffer,o=t.defaultByteStride,i=t.byteLength,a=t.raw;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__defaultByteStride=0,this.__takenByte=0,this.__takenAccessorCount=0,this.__accessors=[],this.__buffer=n,this.__byteOffsetInBuffer=r,this.__byteOffsetInRawArrayBufferOfBuffer=n.byteOffsetInRawArrayBuffer+r,this.__byteLength=i,this.__defaultByteStride=o,this.__raw=a}var t,n,a=e.prototype;return a.getUint8Array=function(){return new Uint8Array(this.__raw,this.__byteOffsetInRawArrayBufferOfBuffer,this.__byteLength)},a.takeAccessor=function(e){var t=e.compositionType,n=e.componentType,r=e.count,o=e.byteStride,i=void 0===o?this.defaultByteStride:o,a=e.max,s=e.min,c=e.arrayLength,l=void 0===c?1:c,u=e.normalized,f=void 0!==u&&u;return this.__takeAccessorInner({compositionType:t,componentType:n,count:r,byteStride:i,max:a,min:s,normalized:f,arrayLength:l})},a.takeAccessorWithByteOffset=function(e){var t=e.compositionType,n=e.componentType,r=e.count,o=e.byteOffsetInBufferView,i=e.byteStride,a=void 0===i?this.defaultByteStride:i,s=e.max,c=e.min,l=e.normalized,u=void 0!==l&&l;return this.__takeAccessorInnerWithByteOffset({compositionType:t,componentType:n,count:r,byteStride:a,byteOffsetInBufferView:o,max:s,min:c,normalized:u})},a.__takeAccessorInner=function(e){var t=e.compositionType,n=e.componentType,i=e.count,a=e.byteStride,s=e.max,c=e.min,l=e.arrayLength,u=e.normalized,f=this.__takenByte,_=a;if(0===_&&(_=t.getNumberOfComponents()*n.getSizeInBytes()*l),this.__takenByte+_*(i-1)+n.getSizeInBytes()*t.getNumberOfComponents()>this.byteLength){var h="The size of the Accessor you are trying to take exceeds the byte length left in the BufferView.\nBufferView.byteLength: ".concat(this.byteLength,", BufferView.takenSizeInByte: ").concat(this.__takenByte,", Accessor.byteStride: ").concat(a,", Accessor.count: ").concat(i,";\nbyteSizeToTake: ").concat(_*i,", the byte length left in the Buffer: ").concat(this.byteLength-this.__takenByte);return new o.UG({message:h,error:void 0})}var d=new r.U({bufferView:this,byteOffsetInBufferView:f,compositionType:t,componentType:n,byteStride:a,count:i,raw:this.__raw,max:s,min:c,arrayLength:l,normalized:u});return this.__accessors.push(d),this.__takenByte+=_*i,new o.Ok(d)},a.__takeAccessorInnerWithByteOffset=function(e){var t=e.compositionType,n=e.componentType,i=e.count,a=e.byteStride,s=e.byteOffsetInBufferView,c=e.max,l=e.min,u=e.normalized;if(this.__takenByte+a*(i-1)+n.getSizeInBytes()*t.getNumberOfComponents()>this.byteLength){var f="The size of the Accessor you are trying to take exceeds the byte length left in the BufferView.\nBufferView.byteLength: ".concat(this.byteLength,", BufferView.takenSizeInByte: ").concat(this.__takenByte,", Accessor.byteStride: ").concat(a,", Accessor.count: ").concat(i,";\nbyteSizeToTake: ").concat(a*i,", the byte length left in the Buffer: ").concat(this.byteLength-this.__takenByte);return new o.UG({message:f,error:void 0})}var _=new r.U({bufferView:this,byteOffsetInBufferView:s,compositionType:t,componentType:n,byteStride:a,count:i,raw:this.__raw,max:c,min:l,arrayLength:1,normalized:u});return this.__accessors.push(_),new o.Ok(_)},a.isSame=function(e){return this.byteLength===e.byteLength&&this.byteOffsetInRawArrayBufferOfBuffer===e.byteOffsetInRawArrayBufferOfBuffer&&this.defaultByteStride===e.defaultByteStride&&this.buffer.getArrayBuffer()===e.buffer.getArrayBuffer()},t=e,(n=[{key:"defaultByteStride",get:function(){return this.__defaultByteStride}},{key:"byteLength",get:function(){return this.__byteLength}},{key:"byteOffsetInBuffer",get:function(){return this.__byteOffsetInRawArrayBufferOfBuffer-this.__buffer.byteOffsetInRawArrayBuffer}},{key:"byteOffsetInRawArrayBufferOfBuffer",get:function(){return this.__byteOffsetInRawArrayBufferOfBuffer}},{key:"buffer",get:function(){return this.__buffer}},{key:"isSoA",get:function(){return!this.isAoS}},{key:"isAoS",get:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.__accessors[Symbol.iterator]();!(e=(r=o.next()).done);e=!0)if(r.value.isAoS)return!0}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}return!1}}])&&i(t.prototype,n),e}()},5479:(e,t,n)=>{n.d(t,{j:()=>s});var r=n(3116),o=n(3363);function i(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function a(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.isNode=function(){return void 0===window&&"undefined"!=typeof process&&!0},e.btoa=function(t){return e.isNode()?(Buffer.isBuffer(t)?t:Buffer.from(t.toString(),"binary")).toString("base64"):btoa(t)},e.atob=function(t){return e.isNode()?Buffer.from(t,"base64").toString("binary"):atob(t)},e.dataUriToArrayBuffer=function(t){for(var n=t.split(","),r=e.atob(n[1]),o=r.length,i=new ArrayBuffer(o),a=new Uint8Array(i),s=0;s<o;s++)a[s]=r.charCodeAt(s);return i},e.arrayBufferToString=function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);var t=new Uint8Array(e);return this.uint8ArrayToStringInner(t)},e.uint8ArrayToString=function(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):this.uint8ArrayToStringInner(e)},e.stringToBase64=function(t){return e.btoa(t)},e.base64ToArrayBuffer=function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r.buffer},e.UInt8ArrayToDataURL=function(e,t,n){var r=document.createElement("canvas");r.width=t,r.height=n;for(var o=r.getContext("2d"),i=o.createImageData(t,n),a=0;a<i.data.length;a+=4)i.data[a+0]=e[(n-Math.floor(a/(4*t)))*(4*t)+a%(4*t)+0],i.data[a+1]=e[(n-Math.floor(a/(4*t)))*(4*t)+a%(4*t)+1],i.data[a+2]=e[(n-Math.floor(a/(4*t)))*(4*t)+a%(4*t)+2],i.data[a+3]=e[(n-Math.floor(a/(4*t)))*(4*t)+a%(4*t)+3];return o.putImageData(i,0,0),r.remove(),r.toDataURL("image/png")},e.loadResourceAsync=function(t,n,r,o){return new Promise((function(i,a){if(e.isNode());else{var s=new XMLHttpRequest;n?(s.onload=function(e){var t;t=n?s.response:s.responseText,r(i,t)},s.open("GET",t,!0),s.responseType="arraybuffer"):(s.onreadystatechange=function(){if(4!==s.readyState||2!==Math.floor(s.status/100)&&0!==s.status)o&&o(a,s.status);else{var e;e=n?s.response:s.responseText,r(i,e)}},s.open("GET",t,!0)),s.send(null)}}))},e.toCRC32=function(t){var n=0,r=e.crc32table;n^=-1;for(var o=0,i=t.length;o<i;++o)n=n>>>8^"0x"+r[255&(n^t.charCodeAt(o))];return(-1^n)>>>0},e.accessBinaryAsImage=function(e,t,n,r){var o=this.takeBufferViewAsUint8Array(t,e,n);return this.accessArrayBufferAsImage(o,r)},e.createBlobImageUriFromUint8Array=function(e,t){var n=new Blob([e],{type:t});return URL.createObjectURL(n)},e.takeBufferViewAsUint8Array=function(e,t,n){var r,o=e.bufferViews[t],i=null!==(r=o.byteOffset)&&void 0!==r?r:0,s=o.byteLength,c=n;return a(n,Uint8Array)&&(c=n.buffer,i+=n.byteOffset),new Uint8Array(c,i,s)},e.accessArrayBufferAsImage=function(t,n){var r=this.uint8ArrayToStringInner(new Uint8Array(t));return this.getImageType(n)+e.btoa(r)},e.uint8ArrayToStringInner=function(e){for(var t=new Array(e.byteLength),n=0;n<e.byteLength;n++)t[n]=e[n];for(var r=1024,o=Math.ceil(t.length/r),i="",a=0;a<o;a++)i+=String.fromCharCode.apply(this,t.slice(a*r,(a+1)*r));return i},e.getImageType=function(e){return"image/jpeg"===e||"jpg"===e.toLowerCase()||"jpeg"===e.toLowerCase()?"data:image/jpeg;base64,":"image/png"===e||"png"===e.toLowerCase()?"data:image/png;base64,":"image/gif"===e||"gif"===e.toLowerCase()?"data:image/gif;base64,":"image/bmp"===e||"bmp"===e.toLowerCase()?"data:image/bmp;base64,":"data:image/unknown;base64,"},e.getMimeTypeFromExtension=function(e){return"jpg"===e.toLowerCase()||"jpeg"===e.toLowerCase()?"image/jpeg":"png"===e.toLowerCase()?"image/png":"gif"===e.toLowerCase()?"image/gif":"bmp"===e.toLowerCase()?"image/bmp":"image/unknown"},e.getExtension=function(e){var t=e.split(".");return t[t.length-1]},e.createUint8ArrayFromBufferViewInfo=function(e,t,n){var r,o=e.bufferViews[t],i=null!==(r=o.byteOffset)&&void 0!==r?r:0,s=o.byteLength,c=n;return a(n,Uint8Array)&&(c=n.buffer,i+=n.byteOffset),new Uint8Array(c,i,s)},e.createImageFromUri=function(t,n){return new o.n((function(r){var o,i,a=new Image;a.crossOrigin="Anonymous",t.match(/^blob:/)||t.match(/^data:/)?(a.onload=function(){r(a)},a.src=t):((i=new XMLHttpRequest).onreadystatechange=(o=a,function(){4===i.readyState&&200===i.status&&function(t,o){var i=new Uint8Array(o),a=e.createBlobImageUriFromUint8Array(i,n);t.onload=function(){r(t),URL.revokeObjectURL(a)},t.src=a}(o,i.response)}),i.open("GET",t),i.responseType="arraybuffer",i.send())}))},e.createDefaultGltfOptions=function(){return{files:{},loaderExtension:void 0,defaultMaterialHelperName:void 0,defaultMaterialHelperArgumentArray:[],statesOfElements:[{targets:[],states:{enable:[],functions:{}},isTransparent:!0,opacity:1,isTextureImageToLoadPreMultipliedAlpha:!1}],tangentCalculationMode:1,extendedJson:void 0,__importedType:"undefined"}},e.fetchArrayBuffer=function(e){return(t=function(){var t,n;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,fetch(e,{mode:"cors"})];case 1:return[4,o.sent().arrayBuffer()];case 2:return t=o.sent(),[2,new r.Ok(t)];case 3:return n=o.sent(),[2,new r.UG({message:"fetchArrayBuffer failed. uri: ".concat(e),error:n})];case 4:return[2]}}))},function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))})();var t},e.getResizedCanvas=function(e,t){var n=document.createElement("canvas"),r=this.getNearestPowerOfTwo(e.width),o=this.getNearestPowerOfTwo(e.height),i=o/r,a=0,s=0;return r>o?s=(a=Math.min(r,t))*i:a=(s=Math.min(o,t))/i,n.width=a,n.height=s,n.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,a,s),[n,a,s]},e.detectTransparentPixelExistence=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=e.width,i=e.height;if(a(e,ImageData))n=e;else if(a(e,HTMLImageElement)){var s=document.createElement("canvas");(t=s.getContext("2d")).drawImage(e,0,0),n=t.getImageData(0,0,o,i)}else(t=e.getContext("2d")).drawImage(e,0,0),n=t.getImageData(0,0,o,i);for(var c=0;c<i;c++)for(var l=0;l<o;l++){var u=n.data[4*(l+c*o)+3];if(u<r)return!0}return!1},e.getNearestPowerOfTwo=function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},e.calcPaddingBytes=function(e,t){return e%t!=0?t-e%t:0},e.addPaddingBytes=function(e,t){return e+this.calcPaddingBytes(e,t)},e.normalizedInt8ArrayToFloat32Array=function(e){for(var t=new Float32Array(e.length),n=0;n<e.length;n++)t[n]=Math.max(e[n]/127,-1);return t},e.normalizedUint8ArrayToFloat32Array=function(e){for(var t=new Float32Array(e.length),n=0;n<e.length;n++)t[n]=e[n]/255;return t},e.normalizedInt16ArrayToFloat32Array=function(e){for(var t=new Float32Array(e.length),n=0;n<e.length;n++)t[n]=Math.max(e[n]/32767,-1);return t},e.normalizedUint16ArrayToFloat32Array=function(e){for(var t=new Float32Array(e.length),n=0;n<e.length;n++)t[n]=e[n]/65535;return t},e.getCopy=function(e){var t=e.src,n=e.srcByteOffset,r=e.copyByteLength,o=e.distByteOffset,i=new ArrayBuffer(t.byteLength),a=new Uint8Array(i,o,r);return a.set(new Uint8Array(t,n,r)),a.buffer},e.getCopyAs4Bytes=function(e){var t=e.src,n=e.srcByteOffset,r=e.copyByteLength,o=e.distByteOffset;if(n%4!=0||r%4!=0||o%4!=0)throw new Error("Invalid byte align for 4bytes unit copy operation.");var i=new ArrayBuffer(t.byteLength),a=new Int32Array(i,o,r/4);return a.set(new Int32Array(t,n,r/4)),a.buffer},e.copyArrayBuffer=function(e){var t=e.src,n=e.dist,r=e.srcByteOffset,o=e.copyByteLength,i=e.distByteOffset,a=new Uint8Array(n,void 0===i?0:i,o);return a.set(new Uint8Array(t,r,o)),a.buffer},e.copyArrayBufferWithPadding=function(e){var t=e.src,n=e.dist,r=e.srcByteOffset,o=e.copyByteLength,i=e.distByteOffset,a=new Uint8Array(n,i,o),s=t.byteLength-r-o;if(s<0){a.set(new Uint8Array(t,r,t.byteLength-r));var c=new Uint8Array(-s);a.set(c)}else a.set(new Uint8Array(t,r,o));return a.buffer},e.copyArrayBufferAs4Bytes=function(e){var t=e.src,n=e.dist,r=e.srcByteOffset,o=e.copyByteLength,i=e.distByteOffset;if(r%4!=0||o%4!=0||i%4!=0)throw new Error("Invalid byte align for 4bytes unit copy operation.");var a=new Int32Array(n,i,o/4);return a.set(new Int32Array(t,r,o/4)),a.buffer},e.copyArrayBufferAs4BytesWithPadding=function(e){var t=e.src,n=e.dist,r=e.srcByteOffset,o=e.copyByteLength,i=e.distByteOffset,a=new Int32Array(n,i,o/4),s=t.byteLength-r-o;if(s<0){a.set(new Int32Array(t,r,(t.byteLength-r)/4));var c=new Uint8Array(-s);a.set(c)}else a.set(new Int32Array(t,r,o/4));return a.buffer},e.stringToBuffer=function(e){return(new TextEncoder).encode(e).buffer},e}();s.crc32table="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".split(" ")},3100:(e,t,n)=>{n.d(t,{Jx:()=>r,bm:()=>a,cu:()=>i,li:()=>o});var r=function(){function e(t){var n=t.index,r=t.str,o=t.noCheckStrUnique;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null==e.__indices.get(this.constructor)&&e.__indices.set(this.constructor,[]),null==e.__strings.get(this.constructor)&&e.__strings.set(this.constructor,[]),-1!==e.__indices.get(this.constructor).indexOf(n))throw new Error("Dont use duplicate index.");if(!0!==o&&-1!==e.__strings.get(this.constructor).indexOf(r))throw new Error("Dont use duplicate str.");this.index=n,this.str=r,this.symbol=Symbol(r),e.__indices.get(this.constructor).push(n),e.__strings.get(this.constructor).push(r)}var t=e.prototype;return t.toString=function(){return this.str},t.toJSON=function(){return this.index},e}();function o(e){var t=e.typeList,n=e.index,r=t.find((function(e){return e.index===n}));if(r)return r}function i(e){var t=e.typeList,n=e.str,r=t.find((function(e){return e.str.toLowerCase()===n.toLowerCase()}));if(r)return r}function a(e){var t=e.typeList,n=e.str,r=t.find((function(e){return e.str===n}));if(r)return r}r.__indices=new Map,r.__strings=new Map},9197:(e,t,n)=>{n.d(t,{Is:()=>c,V:()=>r});var r={defined:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return void 0!==e},undefined:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return void 0===e},null:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return null===e},exist:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return null!=e},function:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"==typeof e},true:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!0===e},truly:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e},false:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!1===e},falsy:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!e},stringContaining:function(e,t){return-1!==e.indexOf(t)}},o={not:function(e){return function(){return e.apply(null,Array.prototype.slice.call(arguments))}},all:function(e){return function(){return Array.isArray(arguments[0])?arguments[0].every(e):Array.prototype.slice.call(arguments).every(e)}},any:function(e){return function(){return Array.isArray(arguments[0])?arguments[0].some(e):Array.prototype.slice.call(arguments).some(e)}}},i={defined:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return void 0===e},undefined:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return void 0!==e},null:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return null!==e},exist:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return null==e},function:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"!=typeof e},true:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!0!==e},truly:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!e},false:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!1!==e},falsy:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e}};for(var a in o)if(Object.prototype.hasOwnProperty.call(o,a))for(var s in r[a]={},r)Object.prototype.hasOwnProperty.call(r,s)&&(r[a][s]="not"===a?o[a](i[s]):o[a](r[s]));var c=r},1274:(e,t,n)=>{n.d(t,{$z:()=>S,CW:()=>w,Jx:()=>u,Kf:()=>T,LS:()=>v,OB:()=>l,Qj:()=>g,YU:()=>A,Zs:()=>m,_z:()=>x,bh:()=>d,dK:()=>I,eD:()=>h,fK:()=>c,fY:()=>_,j3:()=>E,kS:()=>s,t0:()=>f,tS:()=>b,vV:()=>y,wv:()=>p});var r=n(9197);function o(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var i=function(){for(var e=["iPod","iPad","iPhone","Android"],t=0;t<e.length;t++)if(navigator.userAgent.indexOf(e[t])>0)return!0;return a()},a=function(){return navigator.userAgent.indexOf("Macintosh")>-1&&"ontouchend"in document},s=function(e){var t=e.value,n=e.defaultValue;return null==t?n:t},c=function(e,t){return!!r.Is.exist(t)&&(e(t),!0)},l=function(e,t){return r.Is.exist(t)?e(t):t},u=function(e,t){return!!r.Is.exist(t)&&(e(t),!0)},f=function(e,t){return r.Is.exist(t)?e(t):t},_=function(e,t){return!r.Is.undefined(t)||(e(),!1)},h=function(e,t){return r.Is.undefined(t)?e():t},d=function(e,t){r.Is.undefined(t)&&e()},m=function(e,t){return r.Is.undefined(t)?e():t},v=function(e,t){return null==t?e:t},p=function(e){var t=e.value,n=e.compensation;return null==t?n():t},y=function(e){return null==e?[]:e},A=function(e){return null==e?new Map:e},b=function(e,t){return e>t?{result:!0,greater:e,less:t}:{result:!1,greater:t,less:e}},g=function(e,t){return e<t?{result:!0,greater:t,less:e}:{result:!1,greater:e,less:t}},x=function(e){for(var t=e.split(/\r\n|\r|\n/),n="",r=0;r<t.length;r++){var o=r+1,i=" : ";o<10?i="  : ":o>=100&&(i=": "),n+=o+i+t[r]+"\n"}return n};function I(e){if(null==e)throw new Error("Expected 'val' to be existed, but received ".concat(e))}function E(e){return JSON.parse(JSON.stringify(e))}function w(e,t){var n=document.createElement("a");n.download=e;var r=new Blob([t],{type:"octet/stream"}),o=URL.createObjectURL(r);n.href=o;var i=new MouseEvent("click");n.dispatchEvent(i),URL.revokeObjectURL(o)}function S(e,t){var n=document.createElement("a");n.download=e;var r=new Blob([t],{type:"octet/stream"}),o=URL.createObjectURL(r);n.href=o;var i=new MouseEvent("click");n.dispatchEvent(i),URL.revokeObjectURL(o)}var T=Object.freeze({isMobileVr:function(){return/(Pacific Build.+OculusBrowser.+SamsungBrowser.+)|(SamsungBrowser)|(Mobile VR)/i.test(window.navigator.userAgent)},isMobile:i,isIOS:function(){for(var e=["iPod","iPad","iPhone"],t=0;t<e.length;t++)if(navigator.userAgent.indexOf(e[t])>0)return!0;return a()},isSafari:function(){return navigator.userAgent.indexOf("Safari")>0&&-1===navigator.userAgent.indexOf("Chrome")},preventDefaultForDesktopOnly:function(e){i()||e.preventDefault()},isObject:function(e){return!(!o(e,Object)||o(e,Array))},fillTemplate:function(e,t){return new Function("return `"+e+"`;").call(t)},isNode:function(){return"undefined"!=typeof process&&!0},concatArrayBuffers:function(e,t,n,r){for(var o,i=0,a=0;a<t.length;++a)i+=t[a];o=null!=r?new Uint8Array(r):new Uint8Array(i);for(var s=function(e){return null!=r&&c+e>r?c+e-r:0},c=0,l=function(t,r){var i=s(t);return i?(o.set(new Uint8Array(e[r],n[r],i),c),c+=i,!0):(o.set(new Uint8Array(e[r],n[r],t),c),c+=t,!1)},u=function(e){var t=s(e);return t?(o.set(new Uint8Array(t),c),c+=t,!0):(o.set(new Uint8Array(e),c),c+=e,!1)},f=0;f<e.length;++f){var _=t[f]+n[f]-e[f].byteLength,h=_>0?_:0;if(l(t[f]-h,f))return o.buffer;if(h>0&&u(h))return o.buffer}return null!=r&&c<r&&o.set(new Uint8Array(r-c),c),o.buffer},concatArrayBuffers2:function(e){var t=e.finalSize,n=e.srcs,r=e.srcsOffset,o=e.srcsCopySize,i=new Uint8Array(new ArrayBuffer(t)),a=0;for(var s in n){var c=n[s],l=new Uint8Array(c,r[s],o[s]);i.set(l,a),a+=o[s]}return i.buffer},addLineNumberToCode:x,downloadArrayBuffer:w,downloadTypedArray:S})},2879:(e,t,n)=>{n.d(t,{Hq:()=>c,W:()=>u,Wx:()=>a,Zz:()=>l,bD:()=>s});var r=n(9197);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="The value does not exist!",a=function(){function e(t){o(this,e),this.value=t}var t=e.prototype;return t.set=function(e){this.value=e},t.then=function(e){return r.Is.exist(this.value)?e(this.value):new c},t.unwrapOrDefault=function(e){return r.Is.exist(this.value)?this.value:e},t.unwrapOrElse=function(e){return r.Is.exist(this.value)?this.value:e()},t.unwrapForce=function(){if(r.Is.exist(this.value))return this.value;throw new ReferenceError(i)},t.unwrapOrUndefined=function(){return r.Is.exist(this.value)?this.value:void 0},t.has=function(){return r.Is.exist(this.value)},t.doesNotHave=function(){return!r.Is.exist(this.value)},e}(),s=function(){function e(t){o(this,e),this.value=t}var t=e.prototype;return t.then=function(e){return e(this.value)},t.unwrapOrDefault=function(e){return this.value},t.unwrapOrElse=function(e){return this.value},t.unwrapForce=function(){return this.value},t.unwrapOrUndefined=function(){return this.value},t.get=function(){return this.value},t.has=function(){return!0},t.doesNotHave=function(){return!1},e}(),c=function(){function e(){o(this,e)}var t=e.prototype;return t.then=function(){return this},t.unwrapOrDefault=function(e){return e},t.unwrapOrElse=function(e){return e(void 0)},t.unwrapForce=function(){throw new ReferenceError(i)},t.unwrapOrUndefined=function(){},t.has=function(){return!1},t.doesNotHave=function(){return!0},e}();function l(e){if(!e.has())throw new ReferenceError(i)}function u(e){if(e.has())throw new ReferenceError(i)}},3116:(e,t,n)=>{n.d(t,{Mr:()=>b,Ok:()=>v,UD:()=>y,UG:()=>p,Z6:()=>A});var r=n(9197);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function a(e,t,n){return a=i()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&f(o,n.prototype),o},a.apply(null,arguments)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function l(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function u(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}var _=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function h(e){var t="function"==typeof Map?new Map:void 0;return h=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return a(e,arguments,s(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,e)},h(e)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}var m=function(){function e(t){o(this,e),this.val=t}var t=e.prototype;return t.match=function(e){l(this,v)?e.Ok(this.val):l(this,p)&&e.Err(this.val),r.Is.exist(e.Finally)&&e.Finally()},t.name=function(){return this.constructor.name},e}(),v=function(e){c(n,e);var t=d(n);function n(e){return o(this,n),t.call(this,e)}var r=n.prototype;return r.unwrap=function(e){return this.val},r.unwrapForce=function(){return this.val},r.true=function(){return!0},r.isOk=function(){return!0},r.isErr=function(){return!1},r.get=function(){return this.val},n}(m),p=function(e){c(n,e);var t=d(n);function n(e){var r;return o(this,n),(r=t.call(this,e)).__rnException=new b(r.val),r}var r=n.prototype;return r.unwrap=function(e){e(this.val)},r.unwrapForce=function(){throw this.__rnException},r.false=function(){return!1},r.isOk=function(){return!1},r.isErr=function(){return!0},r.getRnError=function(){return this.val},r.toString=function(){return this.__rnException.stack},n}(m);function y(e){if(e.isErr())throw new Error("This is Err. No Ok.")}function A(e){if(e.isOk())throw new Error("This is Ok. No Err.")}var b=function(e){c(n,e);var t=d(n);function n(e){var r;return o(this,n),(r=t.call(this,"\n  message: ".concat(e.message,"\n  error: ").concat(l(e.error,p)?"see below Exception "+e.error:e.error,"\n"))).err=e,r.name=n._prefix,r}return n.prototype.getRnError=function(){return this.err},n}(h(Error));b._prefix="\nRhodonite Exception"},3363:(e,t,n)=>{function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function o(e,t,n){return o=r()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&c(o,n.prototype),o},o.apply(null,arguments)}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}n.d(t,{n:()=>f});var l=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function u(e){var t="function"==typeof Map?new Map:void 0;return u=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return o(e,arguments,i(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,e)},u(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=i(t);if(n){var o=i(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return s(this,e)});function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,(function(e,t){}))).name="",t.__callbackObj={promiseAllNum:0,resolvedNum:0,rejectedNum:0,pendingNum:0,processedPromises:[]},a(e,Promise)?t.__promise=e:t.__promise=new Promise(e),t}var l=o.prototype;return l.then=function(e,t){var n,r=this;return e&&(n=function(t){return 0!==r.__callbackObj.promiseAllNum&&-1===r.__callbackObj.processedPromises.indexOf(r)&&(r.__callbackObj.pendingNum--,r.__callbackObj.resolvedNum++,r.__callbackObj.processedPromises.push(r)),r.__callback&&r.__callback(r.__callbackObj),e(t)}),this.__promise.then(n,t)},l.catch=function(e){return new o(this.__promise.catch(e))},l.finally=function(e){return this.__promise.finally(e)},o.resolve=function(e){if(a(e,Promise))return new o(e);if(a(e,o))return e;if(null!=e.then){var t=new o((function(t,n){t(e)}));return t.then=e.then,t}return new o((function(t,n){t(e)}))},o.all=function(e,t){if(t){var n=[],r={promiseAllNum:e.length,resolvedNum:0,rejectedNum:0,pendingNum:e.length,processedPromises:[]},i=!0,a=!1,s=void 0;try{for(var c,l=e[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var u=c.value,f=o.resolve(u);f.__callback=t,f.__callbackObj=r,n.push(f)}}catch(e){a=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}return new o(Promise.all(n))}return new o(Promise.all(e))},o.race=function(e){return new o(Promise.race(e))},o.reject=function(e){return new o(Promise.reject(e))},o}(u(Promise))},3359:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,{q:()=>o});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return e._processBegin=function(){0===e.__currentProcessBeginTime&&(e.__systemStartTime=performance.now()),e.__currentProcessBeginTime=performance.now()},e._processEnd=function(){e.__lastProcessEndTime=performance.now(),e.__lastTickTimeInterval=e.__lastProcessEndTime-e.__currentProcessBeginTime},t=e,n=[{key:"timeFromSystemStart",get:function(){return e.__systemStartTime-performance.now()/1e3}},{key:"lastTickTimeInterval",get:function(){return e.__lastTickTimeInterval/1e3}}],null&&r(t.prototype,null),n&&r(t,n),e}();o.__currentProcessBeginTime=0,o.__lastProcessEndTime=0,o.__lastTickTimeInterval=0,o.__systemStartTime=0},9425:(e,t,n)=>{n.d(t,{Bx:()=>s,Lq:()=>c,lI:()=>a});var r=n(9197);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="The value does not exist!",a=function(){function e(){o(this,e),this.__weakMap=new WeakMap}var t=e.prototype;return t.set=function(e,t){this.__weakMap.set(e,t)},t.unwrapOrDefault=function(e,t){var n=this.__weakMap.get(e);return r.Is.exist(n)?n:t},t.unwrapOrElse=function(e,t){var n=this.__weakMap.get(e);return r.Is.exist(n)?n:t()},t.unwrapForce=function(e){var t=this.__weakMap.get(e);if(r.Is.exist(t))return t;throw new ReferenceError(i)},t.unwrapOrUndefined=function(e){return this.__weakMap.get(e)},t.has=function(e){return this.__weakMap.has(e)},e}(),s=function(){function e(t,n){o(this,e),this.__weakMap=new WeakMap,this.__weakMap.set(t,n)}var t=e.prototype;return t.unwrapOrDefault=function(e,t){return this.__weakMap.get(e)},t.unwrapOrElse=function(e,t){return this.__weakMap.get(e)},t.unwrapForce=function(e){return this.__weakMap.get(e)},t.get=function(e){return this.__weakMap.get(e)},t.unwrapOrUndefined=function(e){return this.__weakMap.get(e)},t.has=function(e){return!0},e}(),c=function(){function e(){o(this,e)}var t=e.prototype;return t.then=function(){return this},t.unwrapOrDefault=function(e,t){return t},t.unwrapOrElse=function(e,t){return t(void 0)},t.unwrapForce=function(e){throw new ReferenceError(i)},t.unwrapOrUndefined=function(e){},t.has=function(){return!1},e}()},7690:(e,t,n)=>{n.d(t,{Ct:()=>i,j4:()=>c.j,Jx:()=>l.Jx,UG:()=>P.UG,Lk:()=>S,Is:()=>r.Is,V5:()=>r.V,Kf:()=>T.Kf,Hq:()=>C.Hq,Ok:()=>P.Ok,Wx:()=>C.Wx,Mr:()=>P.Mr,ni:()=>R.n,bD:()=>C.bD,bs:()=>o,qp:()=>D.q,Lq:()=>M.Lq,lI:()=>M.lI,Bx:()=>M.Bx,li:()=>l.li,cu:()=>l.cu,bm:()=>l.bm,_z:()=>T._z,W:()=>C.W,dK:()=>T.dK,Zz:()=>C.Zz,Z6:()=>P.Z6,UD:()=>P.UD,U2:()=>w,AB:()=>E,j3:()=>T.j3,LS:()=>T.LS,CW:()=>T.CW,$z:()=>T.$z,tS:()=>T.tS,WF:()=>T.Jx,t0:()=>T.t0,fK:()=>T.fK,OB:()=>T.OB,bh:()=>T.bh,Zs:()=>T.Zs,fY:()=>T.fY,eD:()=>T.eD,Qj:()=>T.Qj,vV:()=>T.vV,YU:()=>T.YU,oz:()=>a,EY:()=>s,wv:()=>T.wv,kS:()=>T.kS});var r=n(9197),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__weakMap=new WeakMap}var t=e.prototype;return t.set=function(e,t){return!this.__weakMap.has(e)&&(this.__weakMap.set(e,t),!0)},t.has=function(e){return!!this.__weakMap.has(e)},t.get=function(e){var t=this.__weakMap.get(e);if(!r.Is.not.exist(t))return this.__weakMap.get(e)},t.delete=function(e){return!!this.__weakMap.has(e)&&(this.__weakMap.delete(e),!0)},e}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__symbolWeakMap=new o}return e.prototype.register=function(e){this.__symbolWeakMap.set(Symbol(),e)},e}(),a=function(e){var t=new WeakMap;return function(n){if(t.has(n))return t.get(n);var r=e(n);return t.set(n,r),r}},s=function(e){var t=new Map;return function(n){if(t.has(n))return t.get(n);var r=e(n);return t.set(n,r),r}},c=n(5479),l=n(3100),u=n(6860),f=n(2863),_=n(4969),h=n(988),d=n(8107),m=n(9513),v=n(1138);function p(e,t,n,r,o,i){var a=[h.d6.zero(),h.d6.zero(),h.d6.zero()];!function(e,t){for(var n=0,r=0,o=0,i=0,a=0,s=0,c=0,l=0,m=0,v=0;v<e.height;v++)for(var p=0;p<e.width;p++){var y=e.getPixelAs(p,v,3,d.s);n+=y.x,r+=y.y,o+=y.z,i+=y.x*y.x,a+=y.y*y.y,s+=y.z*y.z,c+=y.x*y.y,l+=y.x*y.z,m+=y.y*y.z}var A=e.width*e.height;n/=A,r/=A,o/=A,i/=A,a/=A,s/=A,c/=A,l/=A,m/=A;var b=f.x.zero();b.m00=i-n*n,b.m01=c-n*r,b.m02=l-n*o,b.m10=c-n*r,b.m11=a-r*r,b.m12=m-r*o,b.m20=l-n*o,b.m21=m-r*o,b.m22=s-o*o;var g=f.x.zero(),x=h.d6.zero();_.k.computeEigenValuesAndVectors(b,g,x),t[0]=u.P.fromCopyArray([g.m00,g.m10,g.m20]),t[1]=u.P.fromCopyArray([g.m01,g.m11,g.m21]),t[2]=u.P.fromCopyArray([g.m02,g.m12,g.m22])}(e,a);for(var s=0;s<e.height;s++)for(var c=0;c<e.width;c++)for(var l=0;l<3;++l){var v=e.getPixelAs(c,s,3,d.s),p=u.P.dot(v,a[l]);t.setPixelAtChannel(c,s,l,p)}for(var y=[m.NR.fromCopyArray2([Number.MAX_VALUE,-Number.MAX_VALUE]),m.NR.fromCopyArray2([Number.MAX_VALUE,-Number.MAX_VALUE]),m.NR.fromCopyArray2([Number.MAX_VALUE,-Number.MAX_VALUE])],A=0;A<e.height;A++)for(var b=0;b<e.width;b++)for(var g=0;g<3;++g)y[g].x=Math.min(y[g].x,t.getPixelAsArray(b,A)[g]),y[g].y=Math.max(y[g].y,t.getPixelAsArray(b,A)[g]);for(var x=0;x<e.height;x++)for(var I=0;I<e.width;I++)for(var E=0;E<3;++E){var w=(t.getPixelAsArray(I,x)[E]-y[E].x)/(y[E].y-y[E].x);t.setPixelAtChannel(I,x,E,w)}i.x=y[0].x*a[0].x+y[1].x*a[1].x+y[2].x*a[2].x,i.y=y[0].x*a[0].y+y[1].x*a[1].y+y[2].x*a[2].y,i.z=y[0].x*a[0].z+y[1].x*a[1].z+y[2].x*a[2].z,n.x=a[0].x*(y[0].y-y[0].x),n.y=a[0].y*(y[0].y-y[0].x),n.z=a[0].z*(y[0].y-y[0].x),r.x=a[1].x*(y[1].y-y[1].x),r.y=a[1].y*(y[1].y-y[1].x),r.z=a[1].z*(y[1].y-y[1].x),o.x=a[2].x*(y[2].y-y[2].x),o.y=a[2].y*(y[2].y-y[2].x),o.z=a[2].z*(y[2].y-y[2].x)}function y(e,t,n){for(var r=1<<t,o=0,i=0;i<e.height;i+=r)for(var a=0;a<e.width;a+=r){for(var s=0,c=0,l=0;l<r;l++)for(var u=0;u<r;u++){var f=e.getPixel(a+u,i+l,n);s+=f,c+=f*f}s/=r*r,c/=r*r,o+=Math.max(0,c-s*s)/(e.width*e.height/r/r)}return o}function A(e,t,n,r){for(var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:128,i=2*o,a=0,s=0;s<i;s++){var c=(s+.5)/i,l=_.k.invGaussianCdf(c,t,n),u=Math.max(0,Math.min(o-1,Math.floor(l*o))),f=e.getPixelAsArray(u,0)[r];a+=f}return a/i}function b(e,t,n){for(var r=1;r<t.height;r++)for(var o=y(e,r,n),i=Math.sqrt(o),a=0;a<t.width;a++){var s=A(t,(a+.5)/t.width,i,n);t.setPixelAtChannel(a,r,n,s)}}function g(e){for(var t=[],n=0;n<e;n++)t.push({});return t}function x(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.16666,i=g(e.height*e.width),a=0;a<e.height;a++)for(var s=0;s<e.width;s++)i[a*e.width+s].x=s,i[a*e.width+s].y=a,i[a*e.width+s].value=e.getPixel(s,a,n);i.sort((function(e,t){return e.value<t.value?-1:e.value>t.value?1:0}));for(var c=0;c<i.length;c++){var l=i[c].x,u=i[c].y,f=(c+.5)/i.length,h=_.k.invGaussianCdf(f,r,o);t.setPixelAtChannel(l,u,n,h)}}function I(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.16666,i=[],a=0;a<e.height;a++)for(var s=0;s<e.width;s++)i[a*e.width+s]=e.getPixel(s,a,n);i.sort((function(e,t){return e<t?-1:e>t?1:0}));for(var c=0;c<t.width;c++){var l=(c+.5)/t.width,u=_.k.gaussianCdf(l,r,o),f=Math.floor(u*i.length),h=i[f];t.setPixelAtChannel(c,0,n,h)}}function E(e,t,n){var r=document.createElement("canvas");return r.width=t,r.height=n,r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),r}function w(e){var t=e.width,n=e.height,o=document.createElement("canvas");o.width=t,o.height=n;var i=o.getContext("2d"),a=i.getImageData(0,0,t,n);if(r.Is.exist(e.r_image))for(var s=e.r_image.getContext("2d").getImageData(0,0,e.r_image.width,e.r_image.height),c=0;c<t*n;c++)a.data[4*c+0]=s.data[4*c+0];else for(var l=0;l<t*n;l++)a.data[4*l+0]=0;if(r.Is.exist(e.g_image))for(var u=e.g_image.getContext("2d").getImageData(0,0,e.g_image.width,e.g_image.height),f=0;f<t*n;f++)a.data[4*f+1]=u.data[4*f+1];else for(var _=0;_<t*n;_++)a.data[4*_+1]=0;if(r.Is.exist(e.b_image))for(var h=e.b_image.getContext("2d").getImageData(0,0,e.b_image.width,e.b_image.height),d=0;d<t*n;d++)a.data[4*d+2]=h.data[4*d+2];else for(var m=0;m<t*n;m++)a.data[4*m+2]=0;if(r.Is.exist(e.a_image))for(var v=e.a_image.getContext("2d").getImageData(0,0,e.a_image.width,e.a_image.height),p=0;p<t*n;p++)a.data[4*p+3]=v.data[4*p+3];else for(var y=0;y<t*n;y++)a.data[4*y+3]=0;return i.putImageData(a,0,0),o}var S=Object.freeze({precomputations:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,n={};n.lutWidth=t,n.colorSpaceVector1=h.d6.zero(),n.colorSpaceVector2=h.d6.zero(),n.colorSpaceVector3=h.d6.zero(),n.colorSpaceOrigin=h.d6.zero();var r=new v.h(e.width,e.height,3);p(e,r,n.colorSpaceVector1,n.colorSpaceVector2,n.colorSpaceVector3,n.colorSpaceOrigin);var o=new v.h(e.width,e.height,3);n.Tinput=o;for(var i=0;i<3;i++)x(r,o,i);var a=new v.h(t,1,3);n.Tinv=a;for(var s=0;s<3;s++)I(r,a,s);a.resize(a.width,Math.floor(Math.log(o.width)/Math.log(2)),3);for(var c=0;c<3;c++)b(o,a,c);return n}}),T=n(1274),C=n(2879),P=n(3116),R=n(3363),D=n(3359),M=n(9425)},3022:(e,t,n)=>{n.d(t,{t:()=>u});var r=n(6860),o=n(988),i=n(5233),a=n(7468),s=n(3359),c=n(8776);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__boneAxis=r.P.zero(),this.__length=0,this.__currentTail=r.P.zero(),this.__prevTail=r.P.zero(),this.__localRotation=i._.fromCopy4(0,0,0,1),this.__initalized=!1}var t,n,c=e.prototype;return c.initialize=function(e,t,n){this.__transform=e;var o=e.getWorldPositionOf(t);this.__currentTail=null!=n?n.getLocalPositionOf(o):o,this.__prevTail=this.__currentTail,this.__localRotation=e.entity.getTransform().localRotation,this.__boneAxis=r.P.normalize(t),this.__length=t.length(),this.__initalized=!0},c.calcParentDeltaRecursivle=function(e){r.P.subtract(e.worldPosition,e.parent.worldPosition)},c.update=function(e,t,n,a,s,c){var l=null!=c?c.getWorldPositionOf(this.__currentTail):this.__currentTail,u=null!=c?c.getWorldPositionOf(this.__prevTail):this.__prevTail,f=o.d6.multiply(r.P.subtract(l,u),1-t),_=i._.multiply(this.parentRotation,this.__localRotation),h=r.P.multiply(_.transformVector3(this.__boneAxis),e),d=r.P.add(r.P.add(r.P.add(l,f),h),n),m=r.P.normalize(r.P.subtract(d,this.head.worldPosition));d=r.P.add(this.head.worldPosition,r.P.multiply(m,this.__length)),d=this.collision(a,d,s),this.__prevTail=null!=c?c.getLocalPositionOf(l):l,this.__currentTail=null!=c?c.getLocalPositionOf(d):d;var v=this.applyRotation(d);this.head.children.length>0&&(this.head.children[0].entity.getTransform().localRotation=v)},c.applyRotation=function(e){return i._.fromToRotation(r.P.normalize(this.__boneAxis),r.P.normalize(this.head.getLocalPositionOf(e)))},c.collision=function(e,t,n){var o=!0,i=!1,a=void 0;try{for(var s,c=e[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value,u=!0,f=!1,_=void 0;try{for(var h,d=l.colliders[Symbol.iterator]();!(u=(h=d.next()).done);u=!0){var m=h.value,v=l.baseSceneGraph.getWorldPositionOf(m.position),p=n+m.radius,y=r.P.subtract(t,v),A=p-y.length();if(A>=0){var b=r.P.normalize(y),g=r.P.multiply(r.P.add(v,b),A);return t=r.P.add(t,g)}}}catch(e){f=!0,_=e}finally{try{u||null==d.return||d.return()}finally{if(f)throw _}}}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}return t},e.update=function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.__boneGroups[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;this.updateInner(i.rootBones,i)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}},e.updateInner=function(t,n){var o=n.dragForce,i=n.stiffnessForce*s.q.lastTickTimeInterval*1,a=r.P.multiply(n.gravityDir,n.gravityPower*s.q.lastTickTimeInterval*1),c=e.getColliderGroups(n.colliderGroupIndices),l=!0,u=!1,f=void 0;try{for(var _,h=t[Symbol.iterator]();!(l=(_=h.next()).done);l=!0){var d=_.value,m=d.entity.tryToGetPhysics();if(m){m.strategy.update(i,o,a,c,n.hitRadius,void 0);var v=d.children;v&&this.updateInner(v,n)}}}catch(e){u=!0,f=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw f}}},e.initialize=function(e){var t=e.children,n=e.entity.tryToGetPhysics().strategy;if(t.length>0){var o=t[0].entity.getTransform();n.initialize(e,r.P.fromCopy3(o.localPosition.x*o.localScale.x,o.localPosition.y*o.localScale.y,o.localPosition.z*o.localScale.z),void 0)}else{var i=r.P.subtract(e.worldPosition,e.parent.worldPosition),s=r.P.fromCopyArray([1,1,1]);i.lengthSquared()>0&&(s=r.P.add(e.worldPosition,r.P.multiply(r.P.normalize(i),.07)));var c=a.J.invert(e.matrixInner).multiplyVector3(s);n.initialize(e,c,void 0)}},e.setBoneGroups=function(e){this.__boneGroups=e},e.addColliderGroup=function(e,t){this.__colliderGroups.set(e,t)},e.getColliderGroups=function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;t.push(this.__colliderGroups.get(s))}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t},t=e,(n=[{key:"isInitialized",get:function(){return this.__initalized}},{key:"head",get:function(){return this.__transform}},{key:"tail",get:function(){return r.P.multiplyTo(this.__boneAxis,this.__length,e.__tmp_vec3),this.__transform.matrixInner.multiplyVector3To(e.__tmp_vec3,e.__tmp_vec3_2),e.__tmp_vec3_2}},{key:"parentRotation",get:function(){return null!=this.__transform.parent?i._.fromMatrix(this.__transform.parent.matrixInner):i._.fromCopy4(0,0,0,1)}}])&&l(t.prototype,n),e}();u.__tmp_vec3=o.d6.zero(),u.__tmp_vec3_2=o.d6.zero(),u.__tmp_quat=c.y.identity(),u.__boneGroups=[],u.__colliderGroups=new Map},4021:(e,t,n)=>{n.d(t,{F:()=>o});var r=n(178),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.getWebGLResourceRepository=function(){return r.x.getInstance().getModule("webgl").WebGLResourceRepository.getInstance()},e}();o.InvalidCGAPIResourceUid=-1},8426:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(9315);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}var c=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=i(t);if(n){var o=i(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)});function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=r.call(this)).__renderPasses=[],e}var l,u,f=c.prototype;return f.clone=function(){var e=new c,t=[],n=!0,r=!1,o=void 0;try{for(var i,a=this.__renderPasses[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;t.push(s.clone())}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return e.addRenderPasses(t),e},f.addRenderPasses=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;this.__renderPasses.push(a)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},f.clearRenderPasses=function(){this.__renderPasses.length=0},f.setViewport=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.__renderPasses[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)o.value.setViewport(e)}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},l=c,(u=[{key:"renderPasses",get:function(){return this.__renderPasses}}])&&o(l.prototype,u),c}(r.S)},3663:(e,t,n)=>{n.d(t,{R:()=>_});var r=n(9315),o=n(9197);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function c(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}var u=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var f=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(_,e);var t,n,u=(t=_,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=s(t);if(n){var o=s(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return c(this,e)});function _(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(e=u.call(this)).__expressions=[],e.__expressionQueries=[],e}var h,d,m=_.prototype;return m.addExpression=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{inputRenderPasses:[],outputs:[]},n=t.inputRenderPasses,i=t.outputs;if(o.Is.exist(i)){var a=!0,s=!1,c=void 0;try{for(var l,u=i[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var f=l.value,_=f.renderPass.instance;o.Is.exist(f.renderPass.instance)?_=f.renderPass.instance:o.Is.exist(f.renderPass.index)?_=e.renderPasses[f.renderPass.index]:o.Is.exist(f.renderPass.uniqueName)&&(_=r.S.getRnObjectByName(f.renderPass.uniqueName)),o.Is.exist(_)&&_.setFramebuffer(f.frameBuffer)}}catch(e){s=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(s)throw c}}}this.__expressions.push({expression:e,inputRenderPasses:o.Is.exist(n)?n:[]})},m.getColorAttachmentFromInputOf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{renderPass:{index:0},colorAttachmentIndex:0,framebufferType:_.FrameBuffer},n=this,r=new Promise((function(r){var o=function(){var e;return f(this,(function(t){switch(t.label){case 0:return[4];case 1:return e=t.sent(),r(e),[2,e]}}))}();n.__expressionQueries.push([e,t.renderPass,t.colorAttachmentIndex,o,t.framebufferType])}));return r},m.resolve=function(){var e,t,n=!0,a=!1,s=void 0;try{for(var c,l=this.__expressionQueries[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var u=(e=c.value,t=5,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=u[0],_=u[1],h=u[2],d=u[3],m=u[4],v=!0,p=!1,y=void 0;try{for(var A,b=this.__expressions[Symbol.iterator]();!(v=(A=b.next()).done);v=!0){var g=A.value;if(f===g.expression){var x=_.instance;o.Is.exist(_.instance)?x=_.instance:o.Is.exist(_.index)?x=g.inputRenderPasses[_.index]:o.Is.exist(_.uniqueName)&&(x=r.S.getRnObjectByName(_.uniqueName));var I=void 0;if("ResolveFrameBuffer2"===m?I=x.getResolveFramebuffer2():"ResolveFrameBuffer"===m?I=x.getResolveFramebuffer():"FrameBuffer"===m&&(I=x.getFramebuffer()),o.Is.exist(I)){var E=I.getColorAttachedRenderTargetTexture(h);o.Is.exist(E)&&(d.next(E),d.next(E))}}}}catch(e){p=!0,y=e}finally{try{v||null==b.return||b.return()}finally{if(p)throw y}}}}catch(e){a=!0,s=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw s}}},m.clearExpressions=function(){this.__expressions.length=0},m.setViewport=function(e){var t=!0,n=!1,r=void 0;try{for(var o,i=this.__expressions[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)o.value.expression.setViewport(e)}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},h=_,(d=[{key:"expressions",get:function(){return this.__expressions.map((function(e){return e.expression}))}}])&&a(h.prototype,d),_}(r.S);_.FrameBuffer="FrameBuffer",_.ResolveFrameBuffer="ResolveFrameBuffer",_.ResolveFrameBuffer2="ResolveFrameBuffer2"},2374:(e,t,n)=>{n.d(t,{C:()=>v});var r=n(9315),o=n(429),i=n(6264),a=n(425),s=n(178),c=n(2166),l=n(2328),u=n(6174);function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function h(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}var m=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(m,e);var t,n,r=(t=m,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=_(t);if(n){var o=_(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return h(this,e)});function m(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(e=r.call(this)).__entities=[],e.__sceneGraphDirectlyAdded=[],e.__topLevelSceneGraphComponents=[],e.toClearColorBuffer=!1,e.toClearDepthBuffer=!0,e.toClearStencilBuffer=!1,e.isDepthTest=!0,e.clearColor=i.Lt.fromCopyArray([1,1,1,1]),e.clearDepth=1,e.clearStencil=0,e.cullFrontFaceCCW=!0,e.__primitiveMaterial=new Map,e.isVrRendering=!0,e.isOutputForVr=!1,e.toRenderOpaquePrimitives=!0,e.toRenderTransparentPrimitives=!0,e.toRenderEffekseerEffects=!1,e.drawCount=1,e}var v,p,y=m.prototype;return y.clone=function(){var e,t,n,r,o=new m;return o.__entities=this.__entities.concat(),o.__sceneGraphDirectlyAdded=this.__sceneGraphDirectlyAdded.concat(),o.__topLevelSceneGraphComponents=null===(e=this.__topLevelSceneGraphComponents)||void 0===e?void 0:e.concat(),o.__meshComponents=null===(t=this.__meshComponents)||void 0===t?void 0:t.concat(),o.__frameBuffer=this.__frameBuffer,o.__resolveFrameBuffer=this.__resolveFrameBuffer,o.__resolveFrameBuffer2=this.__resolveFrameBuffer2,o.__viewport=null===(n=this.__viewport)||void 0===n?void 0:n.clone(),o.toClearColorBuffer=this.toClearColorBuffer,o.toClearDepthBuffer=this.toClearDepthBuffer,o.toClearStencilBuffer=this.toClearStencilBuffer,o.isDepthTest=this.isDepthTest,o.clearColor=this.clearColor.clone(),o.clearDepth=this.clearDepth,o.clearStencil=this.clearStencil,o.cameraComponent=this.cameraComponent,o.cullFrontFaceCCW=this.cullFrontFaceCCW,o.__material=this.__material,o.__primitiveMaterial=new Map(this.__primitiveMaterial),o.__webglRenderingStrategy=this.__webglRenderingStrategy,o.isVrRendering=this.isVrRendering,o.isOutputForVr=this.isOutputForVr,o.toRenderOpaquePrimitives=this.toRenderOpaquePrimitives,o.toRenderTransparentPrimitives=this.toRenderTransparentPrimitives,o.__preEachDrawFunc=this.__preEachDrawFunc,o.__postEachRenderFunc=this.__postEachRenderFunc,o.__renderTargetColorAttachments=null===(r=this.__renderTargetColorAttachments)||void 0===r?void 0:r.concat(),o},y.setPreDrawFunction=function(e){this.__preEachDrawFunc=e},y.unsetPreDrawFunction=function(){this.__preEachDrawFunc=void 0},y.doPreEachDraw=function(e){null!=this.__preEachDrawFunc&&this.__preEachDrawFunc(e)},y.setPostRenderFunction=function(e){this.__postEachRenderFunc=e},y.doPostRender=function(){null!=this.__postEachRenderFunc&&this.__postEachRenderFunc()},y.addEntities=function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value.getSceneGraph();this.__sceneGraphDirectlyAdded.push(s);var c=o.a.flattenHierarchy(s,!1).map((function(e){return e.entity})),l=this.__entities.concat(c).reduce((function(e,t){return e.set(t.entityUID,t),e}),new Map);this.__entities=Array.from(l.values())}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.__meshComponents=void 0,this.__topLevelSceneGraphComponents=void 0,this.__collectMeshComponents(),this.__collectTopLevelSceneGraphComponents()},y.clearEntities=function(){this.__meshComponents=void 0,this.__topLevelSceneGraphComponents=void 0,this.__entities=[]},y.__collectTopLevelSceneGraphComponents=function(){if(null==this.__topLevelSceneGraphComponents){var e=function(t){return t.parent&&e(t.parent),t};this.__topLevelSceneGraphComponents=this.__sceneGraphDirectlyAdded.map((function(t){return e(t)}));var t=new Set(this.__topLevelSceneGraphComponents);this.__topLevelSceneGraphComponents=Array.from(t)}},y.__collectMeshComponents=function(){var e=this;null==this.__meshComponents&&(this.__meshComponents=[],this.__entities.filter((function(t){var n=t.getComponentByComponentTID(u.z.MeshComponentTID);n&&e.__meshComponents.push(n)})))},y.setFramebuffer=function(e){this.__frameBuffer=e,null!=e?this.setViewport(i.Lt.fromCopyArray([0,0,e.width,e.height])):this.__viewport=void 0},y.setRenderTargetColorAttachments=function(e){this.__renderTargetColorAttachments=e},y.getRenderTargetColorAttachments=function(){return this.__renderTargetColorAttachments},y.getFramebuffer=function(){return this.__frameBuffer},y.removeFramebuffer=function(){this.__frameBuffer=void 0},y.setViewport=function(e){null!=this.__viewport?this.__viewport.copyComponents(e):this.__viewport=l.xQ.fromCopyArray([e.x,e.y,e.z,e.w])},y.getViewport=function(){var e=this.__viewport;return null!=e&&(e=m.__tmp_Vector4_0.copyComponents(e)),e},y.setResolveFramebuffer=function(e){var t=c.x.getInstance().currentWebGLContextWrapper;t&&t.isWebGL2?this.__resolveFrameBuffer=e:console.error("resolve framebuffer is unavailable in this webgl context")},y.getResolveFramebuffer=function(){return this.__resolveFrameBuffer},y.setResolveFramebuffer2=function(e){var t=c.x.getInstance().currentWebGLContextWrapper;t&&t.isWebGL2?this.__resolveFrameBuffer2=e:console.error("resolve framebuffer is unavailable in this webgl context")},y.getResolveFramebuffer2=function(){return this.__resolveFrameBuffer2},y._copyFramebufferToResolveFramebuffers=function(){this.__copyFramebufferToResolveFramebufferInner(this.__resolveFrameBuffer),this.__copyFramebufferToResolveFramebufferInner(this.__resolveFrameBuffer2)},y.__copyFramebufferToResolveFramebufferInner=function(e){if(null!=e){var t=c.x.getInstance(),n=t.getWebGLResource(this.__frameBuffer.cgApiResourceUid),r=t.getWebGLResource(e.cgApiResourceUid),o=t.currentWebGLContextWrapper.getRawContextAsWebGL2();o.bindFramebuffer(o.READ_FRAMEBUFFER,n),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,r),o.blitFramebuffer(0,0,this.__frameBuffer.width,this.__frameBuffer.height,0,0,e.width,e.height,o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT,o.NEAREST),o.bindFramebuffer(o.READ_FRAMEBUFFER,null),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)}},y.__setupMaterial=function(e){e.isEmptyMaterial()||this.__setWebglRenderingStrategyIfNotYet(this.__webglRenderingStrategy).setupShaderForMaterial(e)},y.setMaterialForPrimitive=function(e,t){this.__primitiveMaterial.set(t,e),this.__setupMaterial(e)},y.setMaterial=function(e){this.__material=e,this.__setupMaterial(e)},y.__setWebglRenderingStrategyIfNotYet=function(e){if(null!=e)return e;var t=a.x.processApproach,n=s.x.getInstance().getModule("webgl").getRenderingStrategy(t);return this.__webglRenderingStrategy=n,n},y.__getMaterialOf=function(e){return this.__primitiveMaterial.get(e)},y.__hasMaterialOf=function(e){return this.__primitiveMaterial.has(e)},y.getAppropriateMaterial=function(e){return this.__hasMaterialOf(e)?this.__getMaterialOf(e):null!=this.material?this.material:e.material},v=m,(p=[{key:"entities",get:function(){return this.__entities}},{key:"meshComponents",get:function(){var e;return null!==(e=this.__meshComponents)&&void 0!==e?e:[]}},{key:"sceneTopLevelGraphComponents",get:function(){return null!=this.__topLevelSceneGraphComponents?this.__topLevelSceneGraphComponents:[]}},{key:"material",get:function(){return this.__material}}])&&f(v.prototype,p),m}(r.S);v.__tmp_Vector4_0=l.xQ.zero()},7906:(e,t,n)=>{n.d(t,{U:()=>i});var r=n(9197),o=n(1274),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__subscriberMap=new Map}var t=e.prototype;return t.subscribe=function(e,t){var n=this.__subscriberMap.get(e);return r.Is.not.exist(n)&&(this.__subscriberMap.set(e,[]),n=this.__subscriberMap.get(e)),n.push(t)-1},t.unsubscribe=function(e,t){var n=this.__subscriberMap.get(e);null!=n&&n.splice(t,1)},t.unsubscribeAll=function(e){this.__subscriberMap.delete(e)},t.publishAsync=function(e,t){var n=0,r=(0,o.vV)(this.__subscriberMap.get(e)),i=!0,a=!1,s=void 0;try{for(var c,l=r[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var u=c.value;setTimeout(u.bind(this,t),0),n++}}catch(e){a=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}return n},t.publishSync=function(e,t){var n=0,r=(0,o.vV)(this.__subscriberMap.get(e)),i=!0,a=!1,s=void 0;try{for(var c,l=r[Symbol.iterator]();!(i=(c=l.next()).done);i=!0)(0,c.value)(t),n++}catch(e){a=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}return n},e}()},5511:(e,t,n)=>{n.d(t,{$t:()=>q,Cf:()=>E,EY:()=>Q,K2:()=>H,KA:()=>U,KP:()=>k,KQ:()=>X,Lf:()=>f,RO:()=>A,Ry:()=>I,Rz:()=>C,SG:()=>T,Ss:()=>s,Tr:()=>j,UB:()=>w,VS:()=>G,Yw:()=>P,_6:()=>p,_Q:()=>_,ad:()=>z,ak:()=>c,cA:()=>y,cE:()=>g,cG:()=>a,cS:()=>m,fA:()=>b,hD:()=>S,hd:()=>N,jO:()=>W,jP:()=>V,jX:()=>L,k$:()=>h,k4:()=>i,lO:()=>d,lc:()=>x,lv:()=>D,n9:()=>l,oM:()=>R,p2:()=>F,pt:()=>M,q7:()=>v,us:()=>O,vE:()=>u,yy:()=>B,zU:()=>o});var r=n(9197),o="mousedown",i="mousemove",a="mouseup",s="wheel",c="mouseenter",l="mouseleave",u="mouseover",f="click",_="keydown",h="keyup",d="keypress",m="pointerdown",v="MSPointerDown",p="pointermove",y="MSPointerMove",A="pointerup",b="MSPointerUp",g="pointercancel",x="pointerenter",I="pointerleave",E="pointerover",w="pointerout",S="resize",T="orientationchange",C="tap",P="doubletap",R="longtap",D="hold",M="drag",B="swipe",N="pinch",O="touchstart",L="touchmove",F="touchend",G="touchcancel",V="touchenter",z="touchleave",k="touchover",U="touchout";function Q(e){var t=void 0!==document.ontouchstart,n=window.navigator.pointerEnabled,r=window.navigator.msPointerEnabled;return{start:n?m:r?v:t?O:o,move:n?p:r?y:t?L:i,end:n?A:r?b:t?F:a,click:f}[e]}var j="None",W="CameraController",X="GizmoTranslation",H="GizmoScale",q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.register=function(e,t){this.__inputHandlingStateMap.set(e,t),this.__activeMap.set(e,!0),this.__processEventListeners()},e.unregister=function(e){this.__activeMap.set(e,!1),this.__inputHandlingStateMap.delete(e),this.__processEventListeners()},e.setActive=function(e,t){this.__activeMap.set(e,t),e===X&&t?this.__activeMap.set(H,!1):e===H&&t&&this.__activeMap.set(X,!1),this.__processEventListeners()},e.__addEventListeners=function(t){var n=e.__inputHandlingStateMap.get(t);if(r.Is.exist(n)){var o=!0,i=!1,a=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value;l.eventTargetDom.addEventListener(l.eventName,l.handler,l.options)}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}}},e.__removeEventListeners=function(t){var n=e.__inputHandlingStateMap.get(t);if(r.Is.exist(n)){var o=!0,i=!1,a=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value;l.eventTargetDom.removeEventListener(l.eventName,l.handler,l.options)}}catch(e){i=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}}},e.__processEventListeners=function(){var t=e.__inputHandlingStateMap.get(X),n=e.__inputHandlingStateMap.get(H);e.__inputHandlingStateMap.get(W)&&(this.__addEventListeners(W),this.__currentState=W),t&&(this.__addEventListeners(X),this.__removeEventListeners(H),this.__currentState=X),n&&(this.__addEventListeners(H),this.__removeEventListeners(X),this.__currentState=H)},e.enableCameraController=function(){this.__addEventListeners(W)},e.disableCameraController=function(){this.__removeEventListeners(W)},e.getCurrentState=function(){return this.__currentState},e}();q.__inputHandlingStateMap=new Map,q.__activeMap=new Map,q.__currentState=j},178:(e,t,n)=>{function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}n.d(t,{x:()=>o});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__modules=new Map}var t=e.prototype;return t.loadModule=function(e,t){var o,i=this;return(o=function(){var r;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(o){switch(o.label){case 0:return"webgl"!==e.toLowerCase()?[3,3]:[4,Promise.resolve().then(n.bind(n,3237))];case 1:return[4,o.sent().default];case 2:return r=o.sent(),[3,12];case 3:return"effekseer"!==e.toLowerCase()?[3,6]:[4,Promise.resolve().then(n.bind(n,3479))];case 4:return[4,o.sent().Effekseer];case 5:return(r=o.sent()).EffekseerComponent.wasmModuleUri=null==t?void 0:t.wasm,[3,12];case 6:return"pbr"!==e.toLowerCase()?[3,9]:[4,Promise.resolve().then(n.bind(n,1326))];case 7:return[4,o.sent().default];case 8:return r=o.sent(),[3,12];case 9:return"xr"!==e.toLowerCase()?[3,12]:[4,Promise.resolve().then(n.bind(n,6265))];case 10:return[4,o.sent().default];case 11:r=o.sent(),o.label=12;case 12:return i.__modules.set(e,r),[2,r]}}))},function(){var e=this,t=arguments;return new Promise((function(n,i){var a=o.apply(e,t);function s(e){r(a,n,i,s,c,"next",e)}function c(e){r(a,n,i,s,c,"throw",e)}s(void 0)}))})()},t.getModule=function(e){return this.__modules.get(e)},e.getInstance=function(){return this.__instance||(this.__instance=new e),this.__instance},e}()},425:(e,t,n)=>{n.d(t,{x:()=>D});var r=n(6815),o=n(6383),i=n(7042),a=n(178),s=n(4021),c=n(1410),l=n(8426),u=n(2342),f=n(3279),_=n(4395),h=n(9481),d=n(6860),m=n(2637),v=n(3359),p=n(2612),y=n(1274),A=n(9197),b=n(524),g=n(9977),x=n(3663),I=n(6264),E=n(2374),w=n(6174),S=n(7011);function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return e.startRenderLoop=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this;this.__renderLoopFunc=e,this.__args=n;var i=this.__getAnimationFrameObject();this.__animationFrameId=i.requestAnimationFrame((function(t,r){var i=a.x.getInstance().getModule("xr");if(A.Is.exist(i)){var s=i.WebXRSystem.getInstance();s.isReadyForWebXR&&s._preRender(t,r);var c=i.WebARSystem.getInstance();c.isReadyForWebAR&&c._preRender(t,r)}if(e.apply(e,[t].concat(R(n))),A.Is.exist(i)){var l=i.WebXRSystem.getInstance();l.isReadyForWebXR&&l._postRender();var u=i.WebARSystem.getInstance();u.isReadyForWebAR&&u._preRender(t,r)}o.startRenderLoop.apply(o,[e].concat(R(n)))}))},e.__getAnimationFrameObject=function(){var e=window,t=a.x.getInstance().getModule("xr");if(A.Is.exist(t)){var n=t.WebXRSystem.getInstance(),r=t.WebARSystem.getInstance();if(n.requestedToEnterWebXR?e=n.xrSession:r.requestedToEnterWebAR&&(e=r.arSession),A.Is.not.exist(e))return window}return e},e.stopRenderLoop=function(){this.__getAnimationFrameObject().cancelAnimationFrame(this.__animationFrameId),this.__animationFrameId=-1},e.restartRenderLoop=function(){null!=this.__renderLoopFunc&&this.startRenderLoop(this.__renderLoopFunc,0,this.__args)},e.processAuto=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I.Lt.fromCopy4(0,0,0,1);if(A.Is.not.exist(e.__expressionForProcessAuto)){var n=new l.A,r=new E.C;r.toClearColorBuffer=!0,r.toClearDepthBuffer=!0,r.clearColor=t;var o=new E.C;n.addRenderPasses([r,o]),e.__expressionForProcessAuto=n,e.__renderPassForProcessAuto=o}e.__renderPassForProcessAuto.clearEntities();var i=u.g._getEntities();e.__renderPassForProcessAuto.addEntities(i),this.process([e.__expressionForProcessAuto])},e.process=function(t){if("undefined"!=typeof spector&&spector.setMarker("Rn#"),this.__processApproach===i.V.None)throw new Error("Choose a process approach first.");v.q._processBegin();var n,l,u=t;n=t,(null!=(l=x.R)&&"undefined"!=typeof Symbol&&l[Symbol.hasInstance]?l[Symbol.hasInstance](n):n instanceof l)&&(u=t.expressions),f.M.current===c.w.InvalidObjectUID&&e.createCamera();var _=s.F.getWebGLResourceRepository(),h=a.x.getInstance().getModule("xr"),d=o.C.getComponentTIDs(),m=o.C.getRenderingComponentTIDs(),p=!0,y=!1,A=void 0;try{for(var b,g=c.w._processStages[Symbol.iterator]();!(p=(b=g.next()).done);p=!0){var I=b.value,E="common_"+I.methodName;if(I===r.I.Render){var S=!0,T=!1,C=void 0;try{for(var P,R=u[Symbol.iterator]();!(S=(P=R.next()).done);S=!0){var D=P.value,M=!0,B=!1,N=void 0;try{for(var O,L=m[Symbol.iterator]();!(M=(O=L.next()).done);M=!0)for(var F=O.value,G=o.C.getComponentClass(F),V=D.renderPasses.length,z=0;z<V;z++){var k=D.renderPasses[z];"undefined"!=typeof spector&&spector.setMarker("| ".concat(D.uniqueName,": ").concat(k.uniqueName,"#")),_.switchDepthTest(k.isDepthTest),F===w.z.MeshRendererComponentTID&&(e.bindFramebuffer(k,h),e.setViewportForNormalRendering(k,h),this.__webglResourceRepository.clearFrameBuffer(k)),G.updateComponentsOfEachProcessStage(G,I,k);var U=G[E];U&&U({processApproach:this.__processApproach,renderPass:k,processStage:I,renderPassTickCount:this.__renderPassTickCount}),G.process({componentType:G,processStage:I,processApproach:this.__processApproach,strategy:this.__webglStrategy,renderPass:void 0,renderPassTickCount:this.__renderPassTickCount}),this.__renderPassTickCount++,k._copyFramebufferToResolveFramebuffers(),k.doPostRender()}}catch(e){B=!0,N=e}finally{try{M||null==L.return||L.return()}finally{if(B)throw N}}}}catch(e){T=!0,C=e}finally{try{S||null==R.return||R.return()}finally{if(T)throw C}}}else{var Q=!0,j=!1,W=void 0;try{for(var X,H=d[Symbol.iterator]();!(Q=(X=H.next()).done);Q=!0){var q=X.value,Y=o.C.getComponentClass(q);Y.updateComponentsOfEachProcessStage(Y,I);var K=Y[E];K&&K({processApproach:this.__processApproach,renderPass:void 0,processStage:I,renderPassTickCount:this.__renderPassTickCount}),Y.process({componentType:Y,processStage:I,processApproach:this.__processApproach,strategy:this.__webglStrategy,renderPass:void 0,renderPassTickCount:this.__renderPassTickCount})}}catch(e){j=!0,W=e}finally{try{Q||null==H.return||H.return()}finally{if(j)throw W}}}}}catch(e){y=!0,A=e}finally{try{p||null==g.return||g.return()}finally{if(y)throw A}}v.q._processEnd()},e.createCamera=function(){var e=b._.createCameraEntity();e.getTransform().localPosition=d.P.fromCopyArray([0,0,1]),e.getCamera().type=m.i.Orthographic,e.getCamera().zNear=.1,e.getCamera().zFar=1e4;var t=this.__webglResourceRepository.currentWebGLContextWrapper;e.getCamera().xMag=t.width/t.height,e.getCamera().yMag=1},e.setViewportForNormalRendering=function(e,t){var n=null==t?void 0:t.WebXRSystem.getInstance(),r=null==t?void 0:t.WebARSystem.getInstance();(null==n?void 0:n.isWebXRMode)&&e.isVrRendering||(null==r?void 0:r.isWebARMode)||this.__webglResourceRepository.setViewport(e.getViewport())},e.bindFramebuffer=function(e,t){var n=null==t?void 0:t.WebXRSystem.getInstance(),r=null==t?void 0:t.WebARSystem.getInstance();if((null==n?void 0:n.isWebXRMode)&&e.isOutputForVr){var o=this.__webglResourceRepository.currentWebGLContextWrapper.getRawContext();o.bindFramebuffer(o.FRAMEBUFFER,n.framebuffer)}else if(null==r?void 0:r.isWebARMode){var i=this.__webglResourceRepository.currentWebGLContextWrapper.getRawContext();i.bindFramebuffer(i.FRAMEBUFFER,r.framebuffer)}else this.__webglResourceRepository.bindFramebuffer(e.getFramebuffer()),this.__webglResourceRepository.setDrawTargets(e)},e.init=function(t){var n,r=this;return(n=function(){var n,o;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(c){switch(c.label){case 0:return[4,a.x.getInstance().loadModule("webgl")];case 1:return c.sent(),[4,a.x.getInstance().loadModule("pbr")];case 2:return c.sent(),e.__webglResourceRepository=s.F.getWebGLResourceRepository(),g.D.eventTargetDom=t.canvas,n=s.F.getWebGLResourceRepository(),_.B.createInstanceIfNotCreated({cpuGeneric:A.Is.exist(t.memoryUsageOrder)?t.memoryUsageOrder.cpuGeneric:.1,gpuInstanceData:A.Is.exist(t.memoryUsageOrder)?t.memoryUsageOrder.gpuInstanceData:.5,gpuVertexData:A.Is.exist(t.memoryUsageOrder)?t.memoryUsageOrder.gpuVertexData:.5}),h.$.getInstance().initialize(t.approach),o=n.generateWebGLContext(t.canvas,t.approach.webGLVersion,!0,!t.rnWebGLDebug||t.rnWebGLDebug,t.webglOption,t.fallback3dApi),n.switchDepthTest(!0),r.__processApproach=t.approach,p.Z.currentProcessApproach=t.approach,t.rnWebGLDebug&&y.Kf.isMobile()&&i.V.isUniformApproach(t.approach)&&alert("Use the DataTexture/DataTexture as the argument of setProcessApproachAndCanvas method for this device."),t.canvas.addEventListener("webglcontextlost",function(e){e.preventDefault(),r.stopRenderLoop(),console.error("WebGL context lost occurred.")}.bind(r)),t.canvas.addEventListener("webglcontextrestored",(function(){console.error("WebGL context restored."),r.restartRenderLoop()})),[4,S.P.initDefaultTextures()];case 3:return c.sent(),[2,o]}}))},function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(e){C(i,r,o,a,s,"next",e)}function s(e){C(i,r,o,a,s,"throw",e)}a(void 0)}))})()},e.resizeCanvas=function(e,t){s.F.getWebGLResourceRepository().resizeCanvas(e,t)},e.getCanvasSize=function(){return s.F.getWebGLResourceRepository().getCanvasSize()},e.getCurrentWebGLContextWrapper=function(){var e;return null===(e=this.__webglResourceRepository)||void 0===e?void 0:e.currentWebGLContextWrapper},t=e,n=[{key:"processApproach",get:function(){return this.__processApproach}}],null&&P(t.prototype,null),n&&P(t,n),e}();D.__processApproach=i.V.None,D.__renderPassTickCount=0,D.__animationFrameId=-1,D.__args=[],D.__stageMethods=new Map},2612:(e,t,n)=>{n.d(t,{Z:()=>r});const r={currentProcessApproach:n(7042).V.None}},4356:(e,t,n)=>{n.d(t,{y:()=>m});var r=n(9315),o=n(4543),i=n(2535),a=n(7102),s=n(1138),c=n(3932),l=n(9197);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function _(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var d=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(d,e);var t,n,r=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=f(t);if(n){var o=f(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return _(this,e)});function d(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(e=r.call(this)).__width=0,e.__height=0,e.__level=0,e.__internalFormat=a.d.RGBA8,e.__format=o.V.RGBA,e.__type=i.r.UnsignedByte,e.__magFilter=a.d.Linear,e.__minFilter=a.d.Linear,e.__wrapS=a.d.ClampToEdge,e.__wrapT=a.d.ClampToEdge,e.__anisotropy=!1,e.__hasTransparentPixels=!1,e.__isTextureReady=!1,e.__startedToLoad=!1,e.__name="untitled",e._textureResourceUid=-1,e._samplerResourceUid=-1,e.__textureUid=++d.__textureUidCount,e}var m,v,p=d.prototype;return p.getImageData=function(e,t,n,r){return void 0===this.__canvasContext&&this.createInternalCanvasContext(),this.__canvasContext.getImageData(e,t,n,r)},p.getPixelAs=function(e,t,n){var r=this.getImageData(e,t,1,1).data;return n.compositionType===c.d.Vec4?new n(new Float32Array([r[0],r[1],r[2],r[3]])):new n(new Float32Array([r[0],r[1],r[2]]))},p.getPixelAsArray=function(e,t){return this.getImageData(e,t,1,1).data},p.setPixel=function(e,t,n){for(var r=this.getImageData(e,t,1,1),o=r.data,i=n.constructor.compositionType.getNumberOfComponents(),a=0;a<i;a++)o[a]=n.at(a);this.__canvasContext.putImageData(r,e,t)},p.setPixelAtChannel=function(e,t,n,r){var o=this.getImageData(e,t,1,1);o.data[n]=r,this.__canvasContext.putImageData(o,e,t)},p.createInternalCanvasContext=function(){var e;null!=this.__htmlCanvasElement?e=this.__htmlCanvasElement:((e=document.createElement("canvas")).width=this.width,e.height=this.height),this.__htmlCanvasElement=e,this.__canvasContext=e.getContext("2d")},p.getTextureDataFloat=function(e){for(var t=this.getImageData(0,0,this.width,this.height),n=new s.h(this.width,this.height,e),r=t.data,o=0;o<this.height;o++)for(var i=0;i<this.width;i++)for(var a=0;a<e;a++)n.setPixelAtChannel(i,o,a,r[o*this.width*4+4*i+a]/255);return n},d.getRhodoniteTexture=function(e){return this.__textureMap.get(e)},m=d,(v=[{key:"textureUID",get:function(){return this.__textureUid}},{key:"width",get:function(){return this.__width},set:function(e){this.__width=e}},{key:"height",get:function(){return this.__height},set:function(e){this.__height=e}},{key:"isTextureReady",get:function(){return this.__isTextureReady}},{key:"startedToLoad",get:function(){return this.__startedToLoad}},{key:"htmlImageElement",get:function(){return this.__htmlImageElement}},{key:"htmlCanvasElement",get:function(){var e=document.createElement("canvas"),t=null==e?void 0:e.getContext("2d");return this.__htmlCanvasElement=e,l.Is.exist(t)&&l.Is.exist(this.__htmlImageElement)&&(e.width=this.__htmlImageElement.width,e.height=this.__htmlImageElement.height,t.drawImage(this.__htmlImageElement,0,0,this.__htmlImageElement.width,this.__htmlImageElement.height)),this.__htmlCanvasElement}},{key:"uri",get:function(){return this.__uri}},{key:"name",get:function(){return this.__name},set:function(e){this.__name=e}},{key:"isTransparent",get:function(){return this.__hasTransparentPixels}},{key:"magFilter",get:function(){return this.__magFilter}},{key:"minFilter",get:function(){return this.__minFilter}},{key:"wrapS",get:function(){return this.__wrapS}},{key:"wrapT",get:function(){return this.__wrapT}}])&&u(m.prototype,v),d}(r.S);m.InvalidTextureUid=-1,m.__textureUidCount=m.InvalidTextureUid,m.__textureMap=new Map},5983:(e,t,n)=>{n.d(t,{B:()=>_});var r=n(4356),o=n(6558),i=n(4021),a=n(7102);function s(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}var f=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(_,e);var t,n,f=(t=_,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=c(t);if(n){var o=c(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return l(this,e)});function _(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(e=f.call(this)).mipmapLevelNumber=1,e.hdriFormat=o.c.LDR_SRGB,e.isNamePosNeg=!1,e}var h=_.prototype;return h.loadTextureImages=function(){var e,t=this;return(e=function(){return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(e){switch(e.label){case 0:return t.__startedToLoad=!0,[4,i.F.getWebGLResourceRepository().createCubeTextureFromFiles(t.baseUriToLoad,t.mipmapLevelNumber,t.isNamePosNeg,t.hdriFormat)];case 1:return t._textureResourceUid=e.sent(),t.__isTextureReady=!0,[2]}}))},function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){s(i,r,o,a,c,"next",e)}function c(e){s(i,r,o,a,c,"throw",e)}a(void 0)}))})()},h.loadTextureImagesAsync=function(){var e=this;this.__startedToLoad=!0,i.F.getWebGLResourceRepository().createCubeTextureFromFiles(this.baseUriToLoad,this.mipmapLevelNumber,this.isNamePosNeg,this.hdriFormat).then((function(t){e._textureResourceUid=t})).then((function(){e.__isTextureReady=!0}))},h.loadTextureImagesFromBasis=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.magFilter,r=void 0===n?a.d.Linear:n,o=t.minFilter,s=void 0===o?a.d.LinearMipmapLinear:o,c=t.wrapS,l=void 0===c?a.d.Repeat:c,u=t.wrapT,f=void 0===u?a.d.Repeat:u,_=this;this.__startedToLoad=!0,"undefined"==typeof BASIS&&console.error("Failed to call BASIS() function. Please check to import basis_transcoder.js."),BASIS().then((function(t){(0,t.initializeBasis)();var n=new(0,t.BasisFile)(e);if(!n.startTranscoding())return console.error("failed to start transcoding."),n.close(),void n.delete();var o=i.F.getWebGLResourceRepository().createCubeTextureFromBasis(n,{magFilter:r,minFilter:s,wrapS:l,wrapT:f});_._textureResourceUid=o,_.__isTextureReady=!0,n.close(),n.delete()}))},h.load1x1Texture=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rgba(0,0,0,1)",t=document.createElement("canvas");t.width=1,t.height=1;var n=t.getContext("2d");n.fillStyle=e,n.fillRect(0,0,1,1);var r=i.F.getWebGLResourceRepository();this._textureResourceUid=r.createCubeTexture(1,[{posX:t,negX:t,posY:t,negY:t,posZ:t,negZ:t}],1,1),this.__isTextureReady=!0},h.generateTextureFromTypedArrays=function(e,t,n){var o=i.F.getWebGLResourceRepository();this._textureResourceUid=o.createCubeTexture(e.length,e,t,n),this.__isTextureReady=!0,this.__startedToLoad=!0,r.y.__textureMap.set(this._textureResourceUid,this)},h.importWebGLTextureDirectly=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.__width=t,this.__height=n;var o=i.F.getWebGLResourceRepository(),a=o.setWebGLTextureDirectly(e);this._textureResourceUid=a,this.__startedToLoad=!0,this.__isTextureReady=!0,r.y.__textureMap.set(a,this)},_}(r.y)},9978:(e,t,n)=>{n.d(t,{_:()=>d});var r=n(4356),o=n(7102),i=n(4543),a=n(2535),s=n(4021),c=n(6264);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function f(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}var h=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(d,e);var t,n,h=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=u(t);if(n){var o=u(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return f(this,e)});function d(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),h.call(this)}var m,v,p=d.prototype;return p.create=function(e){var t=e.width,n=e.height,r=e.level,s=void 0===r?0:r,c=e.internalFormat,l=void 0===c?o.d.RGB8:c,u=e.format,f=void 0===u?i.V.RGBA:u,_=e.type,h=void 0===_?a.r.UnsignedByte:_,d=e.magFilter,m=void 0===d?o.d.Linear:d,v=e.minFilter,p=void 0===v?o.d.Linear:v,y=e.wrapS,A=void 0===y?o.d.ClampToEdge:y,b=e.wrapT,g=void 0===b?o.d.ClampToEdge:b,x=e.anisotropy,I=void 0!==x&&x;this.__width=t,this.__height=n,this.__level=s,this.__internalFormat=l,this.__format=f,this.__type=h,this.__magFilter=m,this.__minFilter=p,this.__wrapS=A,this.__wrapT=g,this.__anisotropy=I,this.__createRenderTargetTexture()},p.__createRenderTargetTexture=function(){var e=s.F.getWebGLResourceRepository().createRenderTargetTexture({width:this.__width,height:this.__height,level:this.__level,internalFormat:this.__internalFormat,format:this.__format,type:this.__type,magFilter:this.__magFilter,minFilter:this.__minFilter,wrapS:this.__wrapS,wrapT:this.__wrapT,anisotropy:this.__anisotropy});this._textureResourceUid=e,r.y.__textureMap.set(e,this)},p.resize=function(e,t){this.destroy3DAPIResources(),this.__width=e,this.__height=t,this.__createRenderTargetTexture()},p.destroy3DAPIResources=function(){return r.y.__textureMap.delete(this._textureResourceUid),s.F.getWebGLResourceRepository().deleteTexture(this._textureResourceUid),this._textureResourceUid=s.F.InvalidCGAPIResourceUid,!0},p.getTexturePixelData=function(){var e=s.F.getWebGLResourceRepository(),t=e.currentWebGLContextWrapper.getRawContext(),n=e.getWebGLResource(this.__fbo.framebufferUID);t.bindFramebuffer(t.FRAMEBUFFER,n);var r=new Uint8Array(this.width*this.height*4);return null!=t.readBuffer&&t.readBuffer(36064+this.__fbo.whichColorAttachment(this)),t.readPixels(0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,r),t.bindFramebuffer(t.FRAMEBUFFER,null),r},p.downloadTexturePixelData=function(){var e=this.getTexturePixelData(),t=document.createElement("canvas");t.width=this.__width,t.height=this.__height;var n=t.getContext("2d"),r=new ImageData(new Uint8ClampedArray(e.buffer),this.__width,this.__height);n.putImageData(r,this.__width,this.__height);var o=t.toDataURL("image/png"),i=document.createElement("a"),a=document.createEvent("MouseEvent");i.href=o,i.download="texture.png",a.initEvent("click",!0,!0),i.dispatchEvent(a)},p.getPixelValueAt=function(e,t,n){var r=n;return r||(r=this.getTexturePixelData()),c.Lt.fromCopyArray([r[4*(t*this.width+e)+0],r[4*(t*this.width+e)+1],r[4*(t*this.width+e)+2],r[4*(t*this.width+e)+3]])},p.generateMipmap=function(){var e=s.F.getWebGLResourceRepository(),t=e.currentWebGLContextWrapper.getRawContext(),n=e.getWebGLResource(this._textureResourceUid);t.bindTexture(t.TEXTURE_2D,n),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},m=d,(v=[{key:"_fbo",set:function(e){this.__fbo=e}},{key:"fbo",get:function(){return this.__fbo}}])&&l(m.prototype,v),d}(r.y)},9294:(e,t,n)=>{n.d(t,{x:()=>g});var r=n(4543),o=n(2535),i=n(7102),a=n(4356),s=n(4021),c=n(9977),l=n(5479),u=n(4436);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){_(i,r,o,a,s,"next",e)}function s(e){_(i,r,o,a,s,"throw",e)}a(void 0)}))}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function m(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function v(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var b=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(_,e);var t,n,f=(t=_,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=d(t);if(n){var o=d(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return v(this,e)});function _(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(e=f.call(this)).autoResize=!0,e.autoDetectTransparency=!1,e}var A=_.prototype;return A.generateTextureFromBasis=function(e,t){var n,r=this;this.__startedToLoad=!0,this.__magFilter=t.magFilter,this.__minFilter=t.minFilter,this.__wrapS=t.wrapS,this.__wrapT=t.wrapT,"undefined"==typeof BASIS&&console.error("Failed to call BASIS() function. Please check to import basis_transcoder.js."),_.__loadedBasisFunc?_.__BasisFile?this.__setBasisTexture(e,t):null===(n=_.__basisLoadPromise)||void 0===n||n.then((function(){r.__setBasisTexture(e,t)})):(_.__loadedBasisFunc=!0,_.__basisLoadPromise=new Promise((function(n){BASIS().then((function(o){(0,o.initializeBasis)(),_.__BasisFile=o.BasisFile,r.__setBasisTexture(e,t),n()}))})))},A.__setBasisTexture=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.level,t.internalFormat),c=(void 0===n&&i.d.RGBA8,t.format),l=void 0===c?r.V.RGBA:c,u=t.type,f=void 0===u?o.r.UnsignedByte:u,h=t.magFilter,d=void 0===h?i.d.Linear:h,m=t.minFilter,v=void 0===m?i.d.LinearMipmapLinear:m,p=t.wrapS,y=void 0===p?i.d.Repeat:p,A=t.wrapT,b=void 0===A?i.d.Repeat:A,g=(t.generateMipmap,t.anisotropy),x=void 0===g||g,I=t.isPremultipliedAlpha,E=void 0!==I&&I;this.__startedToLoad=!0,this.__magFilter=d,this.__minFilter=v,this.__wrapS=y,this.__wrapT=b;var w=new _.__BasisFile(e);if(!w.startTranscoding())return console.error("failed to start transcoding."),w.close(),void w.delete();var S=s.F.getWebGLResourceRepository(),T=S.createCompressedTextureFromBasis(w,{border:0,format:l,type:f,magFilter:d,minFilter:v,wrapS:y,wrapT:b,anisotropy:x,isPremultipliedAlpha:E});this._textureResourceUid=T,this.__isTextureReady=!0,a.y.__textureMap.set(T,this),w.close(),w.delete()},A.generateTextureFromKTX2=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.magFilter,r=void 0===n?i.d.Linear:n,o=t.minFilter,a=void 0===o?i.d.LinearMipmapLinear:o,s=t.wrapS,c=void 0===s?i.d.Repeat:s,l=t.wrapT,f=void 0===l?i.d.Repeat:l,_=t.anisotropy,d=void 0===_||_,m=this;return h((function(){var t;return b(this,(function(n){switch(n.label){case 0:return m.__startedToLoad=!0,m.__magFilter=r,m.__minFilter=a,m.__wrapS=c,m.__wrapT=f,[4,u.N.getInstance().transcode(e)];case 1:return t=n.sent(),m.__width=t.width,m.__height=t.height,m.generateCompressedTextureWithMipmapFromTypedArray(t.mipmapData,t.compressionTextureType,{magFilter:r,minFilter:a,wrapS:c,wrapT:f,anisotropy:d}),[2]}}))}))()},A.generateTextureFromImage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.level,u=void 0===n?0:n,f=t.internalFormat,_=void 0===f?i.d.RGBA8:f,h=t.format,d=void 0===h?r.V.RGBA:h,v=t.type,p=void 0===v?o.r.UnsignedByte:v,A=t.magFilter,b=void 0===A?i.d.Linear:A,g=t.minFilter,x=void 0===g?i.d.Linear:g,I=t.wrapS,E=void 0===I?i.d.Repeat:I,w=t.wrapT,S=void 0===w?i.d.Repeat:w,T=t.generateMipmap,C=void 0===T||T,P=t.anisotropy,R=void 0===P||P,D=t.isPremultipliedAlpha,M=void 0!==D&&D;this.__magFilter=b,this.__minFilter=x,this.__wrapS=E,this.__wrapT=S,this.__startedToLoad=!0,this.__htmlImageElement=e;var B=e;if(this.autoResize){var N=y(l.j.getResizedCanvas(B,c.D.maxSizeLimitOfNonCompressedTexture),3),O=N[0],L=N[1],F=N[2];B=O,this.__width=L,this.__height=F,this.__htmlCanvasElement=O}this.autoDetectTransparency&&(this.__hasTransparentPixels=l.j.detectTransparentPixelExistence(B)),this.__width=B.width,this.__height=B.height;var G,V=s.F.getWebGLResourceRepository();if(m(B,HTMLImageElement))G=V.createTextureFromHTMLImageElement(B,{level:u,internalFormat:_,width:this.__width,height:this.__height,border:0,format:d,type:p,magFilter:b,minFilter:x,wrapS:E,wrapT:S,generateMipmap:C,anisotropy:R,isPremultipliedAlpha:M});else{if(!m(B,HTMLCanvasElement))throw new Error("Unsupported image type.");var z=V.createTextureFromImageBitmapData(B,{level:u,internalFormat:_,width:this.__width,height:this.__height,border:0,format:d,type:p,magFilter:b,minFilter:x,wrapS:E,wrapT:S,generateMipmap:C,anisotropy:R,isPremultipliedAlpha:M}),k=z.textureHandle;z.samplerHandle,G=k}this._textureResourceUid=G,this.__isTextureReady=!0,this.__uri=e.src,a.y.__textureMap.set(G,this)},A.generateTextureFromUri=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.level,u=void 0===n?0:n,f=t.internalFormat,_=void 0===f?i.d.RGBA8:f,h=t.format,d=void 0===h?r.V.RGBA:h,v=t.type,p=void 0===v?o.r.UnsignedByte:v,A=t.magFilter,b=void 0===A?i.d.Linear:A,g=t.minFilter,x=void 0===g?i.d.Linear:g,I=t.wrapS,E=void 0===I?i.d.Repeat:I,w=t.wrapT,S=void 0===w?i.d.Repeat:w,T=t.generateMipmap,C=void 0===T||T,P=t.anisotropy,R=void 0===P||P,D=t.isPremultipliedAlpha,M=void 0!==D&&D,B=this;return this.__uri=e,this.__startedToLoad=!0,new Promise((function(t,n){B.__img=new Image,e.match(/^data:/)||(B.__img.crossOrigin="Anonymous"),B.__img.onload=function(){B.__htmlImageElement=B.__img;var e=B.__img;if(B.autoResize){var n=y(l.j.getResizedCanvas(e,c.D.maxSizeLimitOfNonCompressedTexture),3),r=n[0],o=n[1],i=n[2];e=r,B.__width=o,B.__height=i,B.__htmlCanvasElement=r}B.autoDetectTransparency&&(B.__hasTransparentPixels=l.j.detectTransparentPixelExistence(e)),B.__width=e.width,B.__height=e.height;var f,h=s.F.getWebGLResourceRepository();if(m(e,HTMLImageElement))f=h.createTextureFromHTMLImageElement(e,{level:u,internalFormat:_,width:B.__width,height:B.__height,border:0,format:d,type:p,magFilter:b,minFilter:x,wrapS:E,wrapT:S,generateMipmap:C,anisotropy:R,isPremultipliedAlpha:M});else{if(!m(e,HTMLCanvasElement))throw new Error("Unsupported image type");var v=h.createTextureFromImageBitmapData(e,{level:u,internalFormat:_,width:B.__width,height:B.__height,border:0,format:d,type:p,magFilter:b,minFilter:x,wrapS:E,wrapT:S,generateMipmap:C,anisotropy:R,isPremultipliedAlpha:M}),A=v.textureHandle;v.samplerHandle,f=A}B._textureResourceUid=f,B.__isTextureReady=!0,a.y.__textureMap.set(f,B),t()},B.__img.src=e}))},A.generate1x1TextureFrom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rgba(255,255,255,1)",t=document.createElement("canvas");t.width=1,t.height=1,this.__width=1,this.__height=1;var n=t.getContext("2d");n.fillStyle=e,n.fillRect(0,0,1,1);var c=s.F.getWebGLResourceRepository(),l=c.createTextureFromImageBitmapData(t,{level:0,internalFormat:i.d.RGBA8,width:1,height:1,border:0,format:r.V.RGBA,type:o.r.UnsignedByte,magFilter:i.d.Nearest,minFilter:i.d.Nearest,wrapS:i.d.ClampToEdge,wrapT:i.d.ClampToEdge,generateMipmap:!1,anisotropy:!1,isPremultipliedAlpha:!0}),u=l.textureHandle;l.samplerHandle,this._textureResourceUid=u,this.__isTextureReady=!0,a.y.__textureMap.set(u,this)},A.generateTextureFromTypedArray=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.level,c=void 0===n?0:n,l=t.internalFormat,u=void 0===l?i.d.RGBA8:l,f=t.format,_=void 0===f?r.V.RGBA:f,h=t.magFilter,d=void 0===h?i.d.Linear:h,m=t.minFilter,v=void 0===m?i.d.LinearMipmapLinear:m,p=t.wrapS,y=void 0===p?i.d.Repeat:p,A=t.wrapT,b=void 0===A?i.d.Repeat:A,g=t.generateMipmap,x=void 0===g||g,I=t.anisotropy,E=void 0===I||I,w=t.isPremultipliedAlpha,S=void 0!==w&&w;this.__magFilter=d,this.__minFilter=v,this.__wrapS=y,this.__wrapT=b;var T=o.r.fromTypedArray(e),C=s.F.getWebGLResourceRepository(),P=C.createTextureFromTypedArray(e,{level:c,internalFormat:u,width:this.__width,height:this.__height,border:0,format:_,type:T,magFilter:d,minFilter:v,wrapS:y,wrapT:b,generateMipmap:x,anisotropy:E,isPremultipliedAlpha:S});this._textureResourceUid=P,this.__isTextureReady=!0,a.y.__textureMap.set(P,this)},A.generateCompressedTextureFromTypedArray=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=o.magFilter,l=void 0===c?i.d.Linear:c,u=o.minFilter,f=void 0===u?i.d.LinearMipmapLinear:u,_=o.wrapS,h=void 0===_?i.d.ClampToEdge:_,d=o.wrapT,m=void 0===d?i.d.ClampToEdge:d,v=o.anisotropy,p=void 0===v||v;this.__width=t,this.__height=n,this.__magFilter=l,this.__minFilter=f,this.__wrapS=h,this.__wrapT=m;var y={level:0,width:t,height:n,buffer:e},A=s.F.getWebGLResourceRepository(),b=A.createCompressedTexture([y],r,{magFilter:l,minFilter:f,wrapS:h,wrapT:m,anisotropy:p});this._textureResourceUid=b,this.__isTextureReady=!0,a.y.__textureMap.set(b,this)},A.generateCompressedTextureWithMipmapFromTypedArray=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.magFilter,o=void 0===r?i.d.Linear:r,c=n.minFilter,l=void 0===c?i.d.LinearMipmapLinear:c,u=n.wrapS,f=void 0===u?i.d.ClampToEdge:u,_=n.wrapT,h=void 0===_?i.d.ClampToEdge:_,d=n.anisotropy,m=void 0===d||d;this.__magFilter=o,this.__minFilter=l,this.__wrapS=f,this.__wrapT=h;var v=e.find((function(e){return 0===e.level}));if(null==v)throw new Error("texture data with level 0 is not found");this.__width=v.width,this.__height=v.height;var p=s.F.getWebGLResourceRepository(),y=p.createCompressedTexture(e,t,{magFilter:o,minFilter:l,wrapS:f,wrapT:h,anisotropy:m});this._textureResourceUid=y,this.__isTextureReady=!0,a.y.__textureMap.set(y,this)},A.importWebGLTextureDirectly=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.__width=t,this.__height=n;var r=s.F.getWebGLResourceRepository(),o=r.setWebGLTextureDirectly(e);this._textureResourceUid=o,this.__startedToLoad=!0,this.__isTextureReady=!0,a.y.__textureMap.set(o,this)},A.destroy3DAPIResources=function(){return a.y.__textureMap.delete(this._textureResourceUid),s.F.getWebGLResourceRepository().deleteTexture(this._textureResourceUid),this._textureResourceUid=s.F.InvalidCGAPIResourceUid,this.__isTextureReady=!1,this.__startedToLoad=!1,!0},_}(a.y);g.__loadedBasisFunc=!1},1138:(e,t,n)=>{function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}n.d(t,{h:()=>i});var i=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__channels=r,this.__width=t,this.__height=n,this.__data=new Float32Array(t*n*r)}var t,n,i=e.prototype;return i.resize=function(t,n,r){this.__width=t,this.__height=n,this.__channels=r,this.__data=new Float32Array(e.transfer(this.__data.buffer,t*n*r*4))},i.setPixelAtChannel=function(e,t,n,r){this.__data[t*this.__width*this.__channels+e*this.__channels+n]=r},i.getPixel=function(e,t,n){return this.__data[t*this.__width*this.__channels+e*this.__channels+n]},i.getPixelAs=function(e,t,n,r){return 3===n?new r(new Float32Array([this.__data[t*this.__width*this.__channels+e*this.__channels+0],this.__data[t*this.__width*this.__channels+e*this.__channels+1],this.__data[t*this.__width*this.__channels+e*this.__channels+2]])):4===n?new r(new Float32Array([this.__data[t*this.__width*this.__channels+e*this.__channels+0],this.__data[t*this.__width*this.__channels+e*this.__channels+1],this.__data[t*this.__width*this.__channels+e*this.__channels+2],this.__data[t*this.__width*this.__channels+e*this.__channels+3]])):void 0},i.getPixelAsArray=function(e,t){for(var n=[],r=0;r<this.__channels;r++)n.push(this.__data[t*this.__width*this.__channels+e*this.__channels+r]);return n},i.initialize=function(e,t,n){this.__width=e,this.__height=t,this.__channels=n,this.__data=new Float32Array(e*t*n)},e.transfer=function(e,t){e=Object(e);var n=new ArrayBuffer(t);if(!o(e,ArrayBuffer)||!o(n,ArrayBuffer))throw new TypeError("Source and destination must be ArrayBuffer instances");if(n.byteLength>=e.byteLength){var r=0,i=e.byteLength;[8,4,2,1].forEach((function(t){if(i>=t){var o=function(e,t,n,r,o){var i=Uint8Array;switch(e){case 8:i=Float64Array;break;case 4:i=Float32Array;break;case 2:i=Uint16Array;break;default:i=Uint8Array}for(var a=new i(t,r,Math.trunc(o/e)),s=new i(n,r,Math.trunc(o/e)),c=0;c<s.length;c++)s[c]=a[c];return{nextOffset:a.byteOffset+a.byteLength,leftBytes:t.byteLength-(a.byteOffset+a.byteLength)}}(t,e,n,r,i);r=o.nextOffset,i=o.leftBytes}}))}return n},t=e,(n=[{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"data",get:function(){return this.__data}}])&&r(t.prototype,n),e}()},1326:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});const r=Object.freeze({sheen_E_and_DGTerm:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAIAAADTED8xAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGkmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNy4yLWMwMDAgNzkuNTY2ZWJjNWI0LCAyMDIyLzA1LzA5LTA4OjI1OjU1ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjMuNCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjItMDctMTFUMDA6MDg6NDArMDk6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIyLTA3LTExVDEyOjU4OjE0KzA5OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIyLTA3LTExVDEyOjU4OjE0KzA5OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkZjBkNDUyYS00ZTNjLTRlMDQtOGUwOC0zZTA4YzBhZmY5NWYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6YjMzNWYzNGYtOWZlNy00MWU3LWEyZWEtNWZlYzVmZmY3NDlmIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6YjMzNWYzNGYtOWZlNy00MWU3LWEyZWEtNWZlYzVmZmY3NDlmIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiMzM1ZjM0Zi05ZmU3LTQxZTctYTJlYS01ZmVjNWZmZjc0OWYiIHN0RXZ0OndoZW49IjIwMjItMDctMTFUMDA6MDg6NDArMDk6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMy40IChNYWNpbnRvc2gpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjYzQyMmE0NC1mM2QxLTRhZTEtYWMyNS02NGE3NGZkZGI0MTciIHN0RXZ0OndoZW49IjIwMjItMDctMTFUMTA6NTY6MjArMDk6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMy40IChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpkZjBkNDUyYS00ZTNjLTRlMDQtOGUwOC0zZTA4YzBhZmY5NWYiIHN0RXZ0OndoZW49IjIwMjItMDctMTFUMTI6NTg6MTQrMDk6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMy40IChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pi6E66IAAKbnSURBVHiclf1Lr3XLtiUGtR5z7X3OzXuvMm2wxSNBcgHJYFdApkqJX+CKK1iU+WdI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"})},92:(e,t,n)=>{n.d(t,{$1s:()=>tu,$7R:()=>Ir,$9l:()=>Wu,$9u:()=>lu,$FK:()=>i,$LR:()=>Ca,$OY:()=>jo,$PT:()=>nu,$TT:()=>ho,$XJ:()=>Ds,$bm:()=>Le,$et:()=>Xe,$rK:()=>w,$ri:()=>Ou,$z8:()=>Lu,AA5:()=>If,AC$:()=>dr,AE4:()=>Vn,AKO:()=>Fe,AOk:()=>rf,AQ3:()=>Na,AQL:()=>$o,AQZ:()=>tc,AV8:()=>Wa,AY1:()=>U,Ac_:()=>Zn,Ahs:()=>yt,AjE:()=>mc,Aoj:()=>Nu,AtN:()=>La,Awc:()=>Jl,Awz:()=>_l,Axb:()=>rs,B2j:()=>kr,B3l:()=>p,B5U:()=>lf,BHy:()=>Kc,BM1:()=>tf,BSP:()=>fc,BTT:()=>ml,BWL:()=>Ve,BbZ:()=>o,Bc6:()=>Rn,Bky:()=>Ya,Bvy:()=>fr,Bwm:()=>to,Bxb:()=>ro,C6I:()=>ac,C9t:()=>Sl,CB7:()=>s,CCZ:()=>nf,CW9:()=>gc,CbE:()=>Bn,Cj5:()=>Zo,D68:()=>Sn,D8i:()=>nn,DAo:()=>Gs,DBb:()=>wc,DEk:()=>Se,DM:()=>jl,DM2:()=>Ha,D__:()=>T,DcX:()=>Kl,Dgg:()=>Bc,Dm9:()=>uo,Dn:()=>Yo,DnL:()=>Tu,Dq:()=>Fs,Dr$:()=>ks,E$e:()=>Ba,E6I:()=>Dc,EH4:()=>fl,EMZ:()=>Su,EPR:()=>or,EVZ:()=>Uo,EW4:()=>Yl,EYP:()=>Yr,EZ0:()=>xe,Ehj:()=>Xn,EiH:()=>xu,Erj:()=>go,Evp:()=>si,F06:()=>So,F0I:()=>Rs,F8$:()=>Xr,F8G:()=>Ol,FEv:()=>he,FQh:()=>as,FSc:()=>Is,FU3:()=>ui,F_m:()=>We,FcV:()=>gl,FgH:()=>u,Fh_:()=>su,Fp$:()=>Ce,FpK:()=>Mf,Ft1:()=>qo,FyP:()=>Fl,G00:()=>Nl,GIj:()=>sl,GM3:()=>me,GR4:()=>y,GTV:()=>yi,GV0:()=>Ii,Gi2:()=>sn,GjS:()=>wr,Gow:()=>uu,GuG:()=>r,GuK:()=>Ef,Guy:()=>gr,H2K:()=>Ws,HBF:()=>qu,HDK:()=>hf,HGq:()=>dc,HHs:()=>lc,HM$:()=>Qc,HN$:()=>S,HPC:()=>M,HPM:()=>Sf,HRE:()=>et,Ham:()=>Iu,Hfs:()=>du,Hft:()=>Jr,Hh0:()=>bo,Hjq:()=>Vu,I2u:()=>Ka,I4M:()=>qe,IDP:()=>v,ILt:()=>qs,Iqe:()=>Hr,It5:()=>gn,Ith:()=>fe,IuO:()=>fn,J$B:()=>A,J6F:()=>Zu,JC7:()=>dt,JGk:()=>Me,JJY:()=>rn,JRp:()=>I,JZg:()=>wo,JqA:()=>mi,Jql:()=>sf,Jvo:()=>Ho,Jxz:()=>c,KAt:()=>Pf,KCX:()=>bl,KTo:()=>Ga,KY4:()=>fo,KZB:()=>Gn,KdC:()=>Ni,Ki3:()=>zs,KkT:()=>zi,Kn$:()=>Ue,Kn4:()=>Fc,Kwr:()=>Ar,Kzi:()=>Hc,Kzo:()=>N,L3p:()=>Ql,L42:()=>pf,L4c:()=>$u,L8z:()=>Ju,LCZ:()=>_e,LQI:()=>Ai,LUh:()=>js,LX0:()=>va,L_4:()=>Re,Lbl:()=>ct,LcQ:()=>yf,LhK:()=>Os,LjI:()=>dl,Lmx:()=>jn,LwI:()=>of,M0H:()=>zo,M0t:()=>l,M1Q:()=>er,MKG:()=>jt,MLp:()=>cc,MNF:()=>$s,M_8:()=>Rt,M_A:()=>gi,Mlt:()=>Xs,N8N:()=>Zt,N9T:()=>Mr,Nq4:()=>Pt,Nu1:()=>ut,NyC:()=>Et,Nyi:()=>Yc,O27:()=>ns,O5p:()=>$,OAM:()=>Es,OAe:()=>Xi,OBi:()=>$r,ODf:()=>Fr,OG0:()=>qn,OJ6:()=>jr,OSM:()=>ao,OT$:()=>Dt,ObQ:()=>fu,Od7:()=>Pe,OiW:()=>ee,Onn:()=>Cn,OoY:()=>Dn,P7o:()=>Fi,P8N:()=>_s,PB9:()=>Kr,PHR:()=>Yn,PKw:()=>Rc,PNz:()=>se,PU5:()=>At,PUO:()=>Pc,PUt:()=>Qi,PYx:()=>Ro,PZH:()=>Fa,Pa5:()=>Ps,PnX:()=>ms,Pw6:()=>Wt,Q$l:()=>qt,Q$q:()=>re,Q2$:()=>_u,Q4l:()=>zn,QH$:()=>F,QJs:()=>Un,QZz:()=>en,Qak:()=>d,Qbd:()=>J,Qh0:()=>Qu,QkI:()=>Js,Qlq:()=>xo,QoZ:()=>Ut,Qpw:()=>mt,QrU:()=>Gl,Qt8:()=>Df,R1c:()=>In,R66:()=>Va,RDW:()=>_i,RGR:()=>ti,RIC:()=>ke,RO1:()=>pr,RS3:()=>Pr,Rad:()=>st,RjA:()=>ar,Rk$:()=>vn,Ro9:()=>Ee,Rtt:()=>$n,Rw3:()=>tn,S00:()=>Zi,S1v:()=>pe,SEn:()=>br,SFW:()=>an,SH3:()=>Cc,SJU:()=>xa,SK7:()=>ko,SKn:()=>ii,SNQ:()=>ku,SUn:()=>bn,SX1:()=>nr,Sa0:()=>rc,SaD:()=>Pi,Seb:()=>Ea,Snx:()=>pn,Sp2:()=>Af,Spp:()=>pl,Spt:()=>Gi,SzQ:()=>zl,TAU:()=>Vs,TQ9:()=>Ra,TSE:()=>Qo,TY8:()=>wu,Td9:()=>Kt,TdU:()=>Qe,Tkf:()=>gu,TpV:()=>oo,Tr4:()=>wl,TsK:()=>Bl,TsT:()=>bi,U05:()=>mu,U4r:()=>Uu,UAv:()=>V,UBE:()=>es,UP3:()=>kn,URo:()=>Eo,UlJ:()=>_o,UnN:()=>mn,Ut4:()=>de,Uu$:()=>yr,UwG:()=>pc,VFW:()=>zu,VJW:()=>De,VNU:()=>Go,VPl:()=>Ft,VX_:()=>eo,VYu:()=>Ks,VdM:()=>Gu,Vfd:()=>_n,WB9:()=>xl,WBe:()=>xs,WHG:()=>Bi,WK5:()=>ae,WNe:()=>Xt,WPj:()=>ol,WQq:()=>hr,WRC:()=>q,WUY:()=>Oa,WVN:()=>df,WYY:()=>Do,Wen:()=>ht,WfD:()=>vs,Wkg:()=>za,Wlc:()=>ll,Wtd:()=>cr,X5J:()=>b,XE4:()=>ia,XEX:()=>Wr,XG_:()=>B,XPs:()=>ve,XY4:()=>Ll,XZ2:()=>Qs,XpU:()=>ga,XxT:()=>Mo,Y0n:()=>Ie,Y8m:()=>Er,YCV:()=>ju,YCj:()=>da,YNJ:()=>ri,YZ8:()=>Ln,Y_Y:()=>Ul,Yhe:()=>sc,YlY:()=>na,YoK:()=>el,YrP:()=>Lo,Ysb:()=>co,Ywg:()=>St,YxF:()=>mf,Yz$:()=>hi,Z$r:()=>ue,ZB$:()=>Oi,ZC4:()=>af,ZXb:()=>it,ZXo:()=>ei,ZhV:()=>ai,Zkt:()=>Nt,ZrN:()=>Wn,Zsj:()=>Li,ZtN:()=>As,Zvf:()=>li,Zx4:()=>ys,_$8:()=>Yt,_1o:()=>O,_5_:()=>ie,_8G:()=>cs,_EH:()=>Ji,_Ir:()=>Bo,_M2:()=>rl,_Mr:()=>Za,_TF:()=>ta,_TP:()=>Tt,_UX:()=>Cf,_YZ:()=>Zs,_ZX:()=>no,_b_:()=>Jo,_mt:()=>Hn,_sJ:()=>h,_zC:()=>cu,a$d:()=>Lr,a2d:()=>Au,a36:()=>Da,aK$:()=>il,aLt:()=>Hl,aXw:()=>Po,ad4:()=>we,aig:()=>fa,alV:()=>Ti,az3:()=>Ge,b0C:()=>H,b6i:()=>ne,bQw:()=>hl,bTO:()=>Ml,bTv:()=>ba,bXZ:()=>bc,bd_:()=>Oo,bmu:()=>Rl,bsK:()=>$e,bye:()=>Tf,c6V:()=>Pn,cN:()=>ot,cYm:()=>Wi,ccF:()=>oc,cds:()=>ma,cqm:()=>Ke,d6W:()=>Vl,d8l:()=>Bs,dH_:()=>sa,dIe:()=>xc,dN8:()=>Cu,dUx:()=>vi,dbf:()=>Sa,dcZ:()=>pu,djG:()=>Gc,dk8:()=>ja,dpg:()=>Pu,dtP:()=>Cr,dte:()=>nt,e3O:()=>Sr,eFf:()=>Je,eQR:()=>Ht,ebJ:()=>ci,eco:()=>io,egt:()=>ts,eke:()=>El,emu:()=>lr,eok:()=>wi,epv:()=>oi,eqO:()=>ef,eyW:()=>ql,f5L:()=>Ys,fL$:()=>Ur,fMn:()=>z,fNk:()=>Bt,fYk:()=>Zl,faJ:()=>Pa,fb9:()=>Mu,fln:()=>ff,fsJ:()=>ws,fsT:()=>wf,fxg:()=>Fu,gAT:()=>Ot,gI2:()=>W,gLP:()=>ul,gNb:()=>C,gOo:()=>ln,gbE:()=>fi,gcz:()=>pt,gj3:()=>$i,gwn:()=>os,gx8:()=>bt,h$M:()=>Ms,h2K:()=>Il,hAw:()=>je,hCR:()=>hc,hOW:()=>x,hRd:()=>bu,heo:()=>Mn,hfp:()=>Jt,hoP:()=>ce,hvl:()=>Y,hyR:()=>un,hys:()=>hn,hzX:()=>G,iIj:()=>Wo,iKz:()=>Ui,iLk:()=>Xl,iMT:()=>uf,iU2:()=>Or,iVc:()=>ur,ij3:()=>iu,iku:()=>ft,ip$:()=>Ja,ixi:()=>ec,iyB:()=>Du,j7V:()=>Qa,j7s:()=>Vi,jD8:()=>mo,jGD:()=>Cl,jH6:()=>ji,jHY:()=>$t,jIl:()=>Cs,jZr:()=>be,jol:()=>mr,jtX:()=>ge,k0l:()=>Si,k26:()=>Mi,k4y:()=>xn,k5c:()=>gf,kMJ:()=>vl,kOB:()=>vr,kUS:()=>Eu,kW3:()=>Ru,kWN:()=>ki,kcF:()=>Ei,kky:()=>Xo,koL:()=>g,kpL:()=>ir,krQ:()=>vo,ksA:()=>ni,ksX:()=>po,kvX:()=>hu,kyN:()=>zt,l3h:()=>Ac,lF1:()=>$c,lJZ:()=>R,lPV:()=>Nc,lQo:()=>Qt,lR$:()=>oa,lZq:()=>vt,l_g:()=>_f,lbA:()=>lo,lg3:()=>bs,lkd:()=>j,lkt:()=>xr,lmp:()=>Io,lsi:()=>Ma,lxv:()=>_t,ly5:()=>Qn,m7j:()=>No,m88:()=>yo,mED:()=>Ts,mMN:()=>Oc,mRc:()=>cf,mS1:()=>Uc,mae:()=>Ri,mcF:()=>Vc,mfM:()=>Oe,mhR:()=>$l,ml9:()=>Co,mrS:()=>ru,n0B:()=>le,n3r:()=>pi,n9O:()=>nl,nJx:()=>kt,nPy:()=>tr,nQ9:()=>pa,nTe:()=>An,nVM:()=>te,nsH:()=>vu,o4I:()=>ze,o7C:()=>Sc,o9e:()=>m,oC9:()=>Hu,oDL:()=>ye,oEd:()=>us,oHN:()=>On,oHv:()=>at,oIP:()=>lt,oLV:()=>bf,oR$:()=>Pl,oRF:()=>al,oY_:()=>Hi,obT:()=>E,ogk:()=>Q,oiY:()=>Us,opG:()=>Al,oqe:()=>ea,oud:()=>Ns,ozE:()=>Ls,p7w:()=>qa,p8j:()=>Nn,pBm:()=>so,pEo:()=>Mt,pJJ:()=>_r,pXP:()=>fs,pYl:()=>rr,pc5:()=>Ko,pcv:()=>wa,plb:()=>ra,pmD:()=>vc,ps6:()=>Bu,q7Q:()=>wt,qH5:()=>Ia,qNf:()=>Xu,qNt:()=>xi,qSO:()=>au,qWZ:()=>kc,q__:()=>Ec,qbs:()=>dn,qfx:()=>yu,qhU:()=>Tr,qiu:()=>ds,qk$:()=>To,qz_:()=>di,r0$:()=>aa,r4j:()=>Be,r7P:()=>Zr,r9F:()=>L,rWQ:()=>hs,rZr:()=>Wl,rfC:()=>Ic,rjz:()=>ss,rkl:()=>Ct,rve:()=>Tc,s7G:()=>Ze,sC0:()=>ha,sOz:()=>ua,shP:()=>cn,so$:()=>Xa,sr4:()=>Rf,suj:()=>Dl,sxC:()=>qc,t75:()=>Xc,tFw:()=>cl,tNI:()=>jc,tV_:()=>He,t_W:()=>ls,tef:()=>tt,tkF:()=>Fn,tps:()=>Vr,tqi:()=>Nr,ttq:()=>D,tzR:()=>Te,u$A:()=>a,u3g:()=>gt,uCq:()=>f,uER:()=>qi,uJm:()=>sr,uLG:()=>Yi,uM4:()=>Ki,uU2:()=>ps,ubh:()=>Ua,uik:()=>k,uri:()=>Mc,utc:()=>En,uyr:()=>xf,uyu:()=>yn,uzX:()=>Jn,vC$:()=>Kn,vEJ:()=>_c,vEN:()=>Ye,vEp:()=>ya,vHc:()=>Jc,vPW:()=>Ta,vPm:()=>qr,vTv:()=>Tn,vUb:()=>zr,vWN:()=>ic,vce:()=>Ss,vgW:()=>Br,vnd:()=>Gt,voy:()=>Vo,vpR:()=>Yu,vtI:()=>_,w4x:()=>is,w8k:()=>Qr,w97:()=>X,w9H:()=>la,wA8:()=>vf,wER:()=>Aa,wEd:()=>Lc,wGk:()=>xt,wIF:()=>rt,wMK:()=>Fo,wSW:()=>Gr,wVD:()=>It,wWb:()=>wn,wXe:()=>_a,w_G:()=>$a,wce:()=>Z,wm0:()=>Zc,wpZ:()=>Ku,wrZ:()=>on,x6H:()=>nc,xHF:()=>P,xIw:()=>ca,xR7:()=>oe,xUI:()=>zc,xp:()=>Ae,xug:()=>eu,xyr:()=>Dr,y$A:()=>Ao,y1m:()=>ka,y3j:()=>Hs,y3r:()=>kl,y8S:()=>uc,y9I:()=>Lt,yD3:()=>Vt,yYj:()=>Rr,yZM:()=>ou,yZh:()=>yl,ycd:()=>Tl,yd2:()=>gs,yun:()=>yc,yx3:()=>Di,z8r:()=>tl,zSL:()=>K,zSP:()=>Ne,zfW:()=>Wc,zsc:()=>Ci});var r=256,o=1024,i=16384,a=0,s=1,c=2,l=3,u=4,f=5,_=6,h=0,d=1,m=768,v=769,p=770,y=771,A=772,b=773,g=774,x=775,I=776,E=32769,w=32770,S=32771,T=32772,C=32774,P=32778,R=32779,D=32777,M=32777,B=34877,N=32968,O=32969,L=32970,F=32971,G=32773,V=34964,z=34965,k=2849,U=33901,Q=33902,j=2885,W=2886,X=2928,H=2930,q=2931,Y=2932,K=2961,J=2962,Z=2964,$=2965,ee=2966,te=2967,ne=2963,re=2968,oe=34816,ie=34817,ae=34818,se=34819,ce=36003,le=36004,ue=36005,fe=2978,_e=3088,he=3106,de=3107,me=3317,ve=3333,pe=3379,ye=3386,Ae=3408,be=3410,ge=3411,xe=3412,Ie=3413,Ee=3414,we=3415,Se=10752,Te=32824,Ce=32873,Pe=32936,Re=32937,De=32938,Me=32939,Be=34467,Ne=7936,Oe=7937,Le=7938,Fe=35738,Ge=35739,Ve=37444,ze=35044,ke=35040,Ue=35048,Qe=34962,je=34963,We=34660,Xe=34661,He=34342,qe=34338,Ye=34339,Ke=34340,Je=34341,Ze=34922,$e=34373,et=34975,tt=2884,nt=1028,rt=1029,ot=1032,it=3042,at=2929,st=3024,ct=32823,lt=32926,ut=32928,ft=3089,_t=2960,ht=0,dt=1280,mt=1281,vt=1282,pt=1285,yt=37442,At=2304,bt=2305,gt=4352,xt=4353,It=4354,Et=33170,wt=5120,St=5121,Tt=5122,Ct=5123,Pt=5124,Rt=5125,Dt=5126,Mt=6402,Bt=6406,Nt=6407,Ot=6408,Lt=6409,Ft=6410,Gt=5121,Vt=32819,zt=32820,kt=33635,Ut=35632,Qt=35633,jt=35713,Wt=35712,Xt=35714,Ht=35715,qt=35717,Yt=35721,Kt=35718,Jt=34921,Zt=36347,$t=36348,en=35661,tn=35660,nn=34930,rn=36349,on=35663,an=35724,sn=35725,cn=512,ln=519,un=513,fn=514,_n=515,hn=516,dn=518,mn=517,vn=7680,pn=7681,yn=7682,An=7683,bn=5386,gn=34055,xn=34056,In=9728,En=9729,wn=9984,Sn=9985,Tn=9986,Cn=9987,Pn=10240,Rn=10241,Dn=10242,Mn=10243,Bn=3553,Nn=5890,On=34067,Ln=34068,Fn=34069,Gn=34070,Vn=34071,zn=34072,kn=34073,Un=34074,Qn=34076,jn=33984,Wn=33985,Xn=33986,Hn=33987,qn=33988,Yn=33989,Kn=33990,Jn=33991,Zn=33992,$n=33993,er=33994,tr=33995,nr=33996,rr=33997,or=33998,ir=33999,ar=34e3,sr=34001,cr=34002,lr=34003,ur=34004,fr=34005,_r=34006,hr=34007,dr=34008,mr=34009,vr=34010,pr=34011,yr=34012,Ar=34013,br=34014,gr=34015,xr=34016,Ir=10497,Er=33071,wr=33648,Sr=35664,Tr=35665,Cr=35666,Pr=35667,Rr=35668,Dr=35669,Mr=35670,Br=35671,Nr=35672,Or=35673,Lr=35674,Fr=35675,Gr=35676,Vr=35678,zr=35680,kr=36336,Ur=36337,Qr=36338,jr=36339,Wr=36340,Xr=36341,Hr=36160,qr=36161,Yr=32854,Kr=32855,Jr=36194,Zr=33189,$r=6401,eo=36168,to=34041,no=36162,ro=36163,oo=36164,io=36176,ao=36177,so=36178,co=36179,lo=36180,uo=36181,fo=36048,_o=36049,ho=36050,mo=36051,vo=36064,po=36096,yo=36128,Ao=33306,bo=0,go=36053,xo=36054,Io=36055,Eo=36057,wo=36061,So=36006,To=36007,Co=34024,Po=1286,Ro=37440,Do=37441,Mo=37443,Bo=3074,No=3314,Oo=3315,Lo=3316,Fo=3330,Go=3331,Vo=3332,zo=32874,ko=32877,Uo=32878,Qo=32883,jo=33e3,Wo=33001,Xo=34045,Ho=35657,qo=35658,Yo=35071,Ko=35076,Jo=35077,Zo=35659,$o=35723,ei=35977,ti=34229,ni=37154,ri=37157,oi=37137,ii=36203,ai=6403,si=32849,ci=32856,li=32857,ui=32879,fi=32882,_i=33082,hi=33083,di=33084,mi=33085,vi=34892,pi=34893,yi=35904,Ai=35905,bi=35907,gi=34894,xi=34836,Ii=34837,Ei=34842,wi=34843,Si=35866,Ti=35869,Ci=35898,Pi=35901,Ri=36208,Di=36209,Mi=36214,Bi=36215,Ni=36220,Oi=36221,Li=36226,Fi=36227,Gi=36232,Vi=36233,zi=36238,ki=36239,Ui=36244,Qi=36248,ji=36249,Wi=33321,Xi=33323,Hi=33325,qi=33326,Yi=33327,Ki=33328,Ji=33329,Zi=33330,$i=33331,ea=33332,ta=33333,na=33334,ra=33335,oa=33336,ia=33337,aa=33338,sa=33339,ca=33340,la=36756,ua=36757,fa=36758,_a=36759,ha=36975,da=37167,ma=33503,va=33640,pa=35899,ya=35902,Aa=36269,ba=34042,ga=5131,xa=33319,Ia=33320,Ea=36255,wa=34917,Sa=34918,Ta=34919,Ca=35887,Pa=36202,Ra=34852,Da=34853,Ma=34854,Ba=34855,Na=34856,Oa=34857,La=34858,Fa=34859,Ga=34860,Va=34861,za=34862,ka=34863,Ua=34864,Qa=34865,ja=34866,Wa=34867,Xa=34868,Ha=36063,qa=36065,Ya=36066,Ka=36067,Ja=36068,Za=36069,$a=36070,es=36071,ts=36072,ns=36073,rs=36074,os=36075,is=36076,as=36077,ss=36078,cs=36079,ls=35679,us=35682,fs=36289,_s=36292,hs=36293,ds=36298,ms=36299,vs=36300,ps=36303,ys=36306,As=36307,bs=36308,gs=36311,xs=36183,Is=35097,Es=35051,ws=35052,Ss=35053,Ts=35055,Cs=36662,Ps=36663,Rs=36662,Ds=36663,Ms=35685,Bs=35686,Ns=35687,Os=35688,Ls=35689,Fs=35690,Gs=36294,Vs=36295,zs=36296,ks=35863,Us=36764,Qs=35069,js=35070,Ws=35967,Xs=35968,Hs=35971,qs=35972,Ys=35973,Ks=35976,Js=35978,Zs=35979,$s=35980,ec=35981,tc=35982,nc=35983,rc=36386,oc=36387,ic=36388,ac=36389,sc=33296,cc=33297,lc=33298,uc=33299,fc=33300,_c=33301,hc=33302,dc=33303,mc=33304,vc=35056,pc=36006,yc=36008,Ac=36009,bc=36010,gc=36011,xc=36052,Ic=36182,Ec=35345,wc=35368,Sc=35369,Tc=35370,Cc=35371,Pc=35373,Rc=35374,Dc=35375,Mc=35376,Bc=35377,Nc=35379,Oc=35380,Lc=35382,Fc=35383,Gc=35384,Vc=35386,zc=35387,kc=35388,Uc=35389,Qc=35390,jc=35391,Wc=35392,Xc=35394,Hc=35395,qc=35396,Yc=35398,Kc=37138,Jc=37139,Zc=37140,$c=37141,el=37142,tl=37143,nl=37144,rl=37145,ol=37146,il=37147,al=37148,sl=37149,cl=1,ll=6144,ul=6145,fl=6146,_l=32775,hl=32776,dl=33190,ml=35041,vl=35042,pl=35045,yl=35046,Al=35049,bl=35050,gl=36012,xl=36013,Il=4294967295,El=-1,wl=37447,Sl=35070,Tl=37445,Cl=37446,Pl=34047,Rl=34046,Dl=33776,Ml=33777,Bl=33778,Nl=33779,Ol=35916,Ll=35917,Fl=35918,Gl=35919,Vl=37488,zl=37489,kl=37490,Ul=37491,Ql=37492,jl=37493,Wl=37494,Xl=37495,Hl=37496,ql=37497,Yl=35840,Kl=35842,Jl=35841,Zl=35843,$l=36196,eu=35986,tu=35986,nu=34798,ru=37808,ou=37809,iu=37810,au=37811,su=37812,cu=37813,lu=37814,uu=37815,fu=37816,_u=37817,hu=37818,du=37819,mu=37820,vu=37821,pu=37840,yu=37841,Au=37842,bu=37843,gu=37844,xu=37845,Iu=37846,Eu=37847,wu=37848,Su=37849,Tu=37850,Cu=37851,Pu=37852,Ru=37853,Du=34042,Mu=36193,Bu=34836,Nu=34837,Ou=33297,Lu=35863,Fu=32775,Gu=32776,Vu=35904,zu=35906,ku=35907,Uu=33296,Qu=35723,ju=36064,Wu=36065,Xu=36066,Hu=36067,qu=36068,Yu=36069,Ku=36070,Ju=36071,Zu=36072,$u=36073,ef=36074,tf=36075,nf=36076,rf=36077,of=36078,af=36079,sf=34853,cf=34854,lf=34855,uf=34856,ff=34857,_f=34858,hf=34859,df=34860,mf=34861,vf=34862,pf=34863,yf=34864,Af=34865,bf=34866,gf=34867,xf=34868,If=36063,Ef=34852,wf=34229,Sf=34916,Tf=34917,Cf=34918,Pf=34919,Rf=35007,Df=36392,Mf=36795},3884:(e,t,n)=>{n.d(t,{C:()=>o,j:()=>r});var r="gltf_node_index";function o(e,t){return e.magFilter===t.magFilter&&e.minFilter===t.minFilter&&e.wrapS===t.wrapS&&e.wrapT===t.wrapT}},2142:(e,t,n)=>{n.d(t,{_$8:()=>i._$8,lkt:()=>i.lkt,Td9:()=>i.Td9,wEd:()=>i.wEd,ogk:()=>i.ogk,AY1:()=>i.AY1,fNk:()=>i.fNk,Y0n:()=>i.Y0n,WPj:()=>i.WPj,gOo:()=>i.gOo,$LR:()=>i.$LR,faJ:()=>i.faJ,TdU:()=>i.TdU,UAv:()=>i.UAv,Q$l:()=>i.Q$l,wIF:()=>i.wIF,ZXb:()=>i.ZXb,hzX:()=>i.hzX,r9F:()=>i.r9F,Kzo:()=>i.Kzo,ttq:()=>i.ttq,XG_:()=>i.XG_,HPC:()=>i.HPC,QH$:()=>i.QH$,_1o:()=>i._1o,EZ0:()=>i.EZ0,N9T:()=>i.N9T,vgW:()=>i.vgW,tqi:()=>i.tqi,iU2:()=>i.iU2,BWL:()=>i.BWL,F_m:()=>i.F_m,$et:()=>i.$et,gx8:()=>i.gx8,Y8m:()=>i.Y8m,Wlc:()=>i.Wlc,krQ:()=>i.krQ,YCV:()=>i.YCV,p7w:()=>i.p7w,Axb:()=>i.Axb,eqO:()=>i.eqO,gwn:()=>i.gwn,BM1:()=>i.BM1,w4x:()=>i.w4x,CCZ:()=>i.CCZ,FQh:()=>i.FQh,AOk:()=>i.AOk,rjz:()=>i.rjz,LwI:()=>i.LwI,_8G:()=>i._8G,ZC4:()=>i.ZC4,$9l:()=>i.$9l,Bky:()=>i.Bky,qNf:()=>i.qNf,I2u:()=>i.I2u,oC9:()=>i.oC9,ip$:()=>i.ip$,HBF:()=>i.HBF,_Mr:()=>i._Mr,vpR:()=>i.vpR,w_G:()=>i.w_G,wpZ:()=>i.wpZ,UBE:()=>i.UBE,L8z:()=>i.L8z,egt:()=>i.egt,J6F:()=>i.J6F,O27:()=>i.O27,L4c:()=>i.L4c,$FK:()=>i.$FK,FEv:()=>i.FEv,Ut4:()=>i.Ut4,M_A:()=>i.M_A,MKG:()=>i.MKG,d6W:()=>i.d6W,y3r:()=>i.y3r,L3p:()=>i.L3p,aLt:()=>i.aLt,DM:()=>i.DM,Hfs:()=>i.Hfs,ObQ:()=>i.ObQ,Q2$:()=>i.Q2$,kvX:()=>i.kvX,U05:()=>i.U05,nsH:()=>i.nsH,mrS:()=>i.mrS,yZM:()=>i.yZM,ij3:()=>i.ij3,qSO:()=>i.qSO,Fh_:()=>i.Fh_,_zC:()=>i._zC,$9u:()=>i.$9u,Gow:()=>i.Gow,$1s:()=>i.$1s,$PT:()=>i.$PT,fYk:()=>i.fYk,DcX:()=>i.DcX,bTO:()=>i.bTO,TsK:()=>i.TsK,G00:()=>i.G00,xug:()=>i.xug,mhR:()=>i.mhR,Awc:()=>i.Awc,EW4:()=>i.EW4,suj:()=>i.suj,SzQ:()=>i.SzQ,Y_Y:()=>i.Y_Y,dN8:()=>i.dN8,TY8:()=>i.TY8,EMZ:()=>i.EMZ,DnL:()=>i.DnL,dpg:()=>i.dpg,kW3:()=>i.kW3,dcZ:()=>i.dcZ,qfx:()=>i.qfx,a2d:()=>i.a2d,hRd:()=>i.hRd,Tkf:()=>i.Tkf,EiH:()=>i.EiH,Ham:()=>i.Ham,kUS:()=>i.kUS,iLk:()=>i.iLk,rZr:()=>i.rZr,eyW:()=>i.eyW,XY4:()=>i.XY4,FyP:()=>i.FyP,QrU:()=>i.QrU,F8G:()=>i.F8G,r4j:()=>i.r4j,oRF:()=>i.oRF,HN$:()=>i.HN$,obT:()=>i.obT,Ahs:()=>i.Ahs,jIl:()=>i.jIl,F0I:()=>i.F0I,Pa5:()=>i.Pa5,$XJ:()=>i.$XJ,tef:()=>i.tef,lkd:()=>i.lkd,Gi2:()=>i.Gi2,pcv:()=>i.pcv,bye:()=>i.bye,tV_:()=>i.tV_,PU5:()=>i.PU5,q7Q:()=>i.q7Q,OT$:()=>i.OT$,Nq4:()=>i.Nq4,_TP:()=>i._TP,Ywg:()=>i.Ywg,M_8:()=>i.M_8,rkl:()=>i.rkl,nTe:()=>i.nTe,k4y:()=>i.k4y,Pw6:()=>i.Pw6,gLP:()=>i.gLP,pmD:()=>i.pmD,WB9:()=>i.WB9,ksX:()=>i.ksX,Ro9:()=>i.Ro9,GuG:()=>i.GuG,WRC:()=>i.WRC,pEo:()=>i.pEo,r7P:()=>i.r7P,LjI:()=>i.LjI,FcV:()=>i.FcV,hvl:()=>i.hvl,w97:()=>i.w97,Bwm:()=>i.Bwm,y$A:()=>i.y$A,oHv:()=>i.oHv,b0C:()=>i.b0C,Rad:()=>i.Rad,u3g:()=>i.u3g,a36:()=>i.a36,Jql:()=>i.Jql,lsi:()=>i.lsi,y1m:()=>i.y1m,L42:()=>i.L42,ubh:()=>i.ubh,LcQ:()=>i.LcQ,j7V:()=>i.j7V,Sp2:()=>i.Sp2,dk8:()=>i.dk8,oLV:()=>i.oLV,AV8:()=>i.AV8,k5c:()=>i.k5c,so$:()=>i.so$,uyr:()=>i.uyr,mRc:()=>i.mRc,E$e:()=>i.E$e,B5U:()=>i.B5U,AQ3:()=>i.AQ3,iMT:()=>i.iMT,WUY:()=>i.WUY,fln:()=>i.fln,AtN:()=>i.AtN,l_g:()=>i.l_g,PZH:()=>i.PZH,HDK:()=>i.HDK,KTo:()=>i.KTo,WVN:()=>i.WVN,R66:()=>i.R66,YxF:()=>i.YxF,Wkg:()=>i.Wkg,wA8:()=>i.wA8,l3h:()=>i.l3h,UwG:()=>i.UwG,J$B:()=>i.J$B,koL:()=>i.koL,KCX:()=>i.KCX,Kn$:()=>i.Kn$,opG:()=>i.opG,hAw:()=>i.hAw,fMn:()=>i.fMn,IuO:()=>i.IuO,wGk:()=>i.wGk,wER:()=>i.wER,a$d:()=>i.a$d,h$M:()=>i.h$M,d8l:()=>i.d8l,ODf:()=>i.ODf,oud:()=>i.oud,LhK:()=>i.LhK,wSW:()=>i.wSW,ozE:()=>i.ozE,Dq:()=>i.Dq,e3O:()=>i.e3O,qhU:()=>i.qhU,dtP:()=>i.dtP,QoZ:()=>i.QoZ,AQL:()=>i.AQL,Qh0:()=>i.Qh0,Iqe:()=>i.Iqe,vEJ:()=>i.vEJ,BSP:()=>i.BSP,Yhe:()=>i.Yhe,U4r:()=>i.U4r,MLp:()=>i.MLp,$ri:()=>i.$ri,hCR:()=>i.hCR,y8S:()=>i.y8S,UlJ:()=>i.UlJ,KY4:()=>i.KY4,HHs:()=>i.HHs,HGq:()=>i.HGq,jD8:()=>i.jD8,dIe:()=>i.dIe,$TT:()=>i.$TT,F06:()=>i.F06,Erj:()=>i.Erj,AjE:()=>i.AjE,Qlq:()=>i.Qlq,URo:()=>i.URo,lmp:()=>i.lmp,rfC:()=>i.rfC,JZg:()=>i.JZg,dte:()=>i.dte,cN:()=>i.cN,gI2:()=>i.gI2,gNb:()=>i.gNb,lJZ:()=>i.lJZ,xHF:()=>i.xHF,NyC:()=>i.NyC,qbs:()=>i.qbs,FpK:()=>i.FpK,hys:()=>i.hys,jtX:()=>i.jtX,XpU:()=>i.XpU,fb9:()=>i.fb9,w8k:()=>i.w8k,F8$:()=>i.F8$,az3:()=>i.az3,AKO:()=>i.AKO,uyu:()=>i.uyu,It5:()=>i.It5,MNF:()=>i.MNF,Seb:()=>i.Seb,qiu:()=>i.qiu,uU2:()=>i.uU2,PnX:()=>i.PnX,WfD:()=>i.WfD,RS3:()=>i.RS3,yYj:()=>i.yYj,xyr:()=>i.xyr,JC7:()=>i.JC7,aXw:()=>i.aXw,h2K:()=>i.h2K,lZq:()=>i.lZq,Qpw:()=>i.Qpw,SUn:()=>i.SUn,Rk$:()=>i.Rk$,Vfd:()=>i.Vfd,hyR:()=>i.hyR,utc:()=>i.utc,Onn:()=>i.Onn,D68:()=>i.D68,CB7:()=>i.CB7,Jxz:()=>i.Jxz,M0t:()=>i.M0t,uik:()=>i.uik,WNe:()=>i.WNe,B2j:()=>i.B2j,OJ6:()=>i.OJ6,y9I:()=>i.y9I,VPl:()=>i.VPl,bQw:()=>i.bQw,TSE:()=>i.TSE,Dn:()=>i.Dn,Tr4:()=>i.Tr4,DM2:()=>i.DM2,AA5:()=>i.AA5,lPV:()=>i.lPV,QZz:()=>i.QZz,PKw:()=>i.PKw,Dgg:()=>i.Dgg,ly5:()=>i.ly5,TQ9:()=>i.TQ9,GuK:()=>i.GuK,iIj:()=>i.iIj,$OY:()=>i.$OY,SKn:()=>i.SKn,VdM:()=>i.VdM,YNJ:()=>i.YNJ,PUO:()=>i.PUO,Jvo:()=>i.Jvo,JJY:()=>i.JJY,_b_:()=>i._b_,ml9:()=>i.ml9,WBe:()=>i.WBe,epv:()=>i.epv,D8i:()=>i.D8i,kky:()=>i.kky,oR$:()=>i.oR$,S1v:()=>i.S1v,QkI:()=>i.QkI,_YZ:()=>i._YZ,Mlt:()=>i.Mlt,uri:()=>i.uri,E6I:()=>i.E6I,Cj5:()=>i.Cj5,jHY:()=>i.jHY,hfp:()=>i.hfp,ksA:()=>i.ksA,Rw3:()=>i.Rw3,SH3:()=>i.SH3,Ft1:()=>i.Ft1,N8N:()=>i.N8N,oDL:()=>i.oDL,fL$:()=>i.fL$,XEX:()=>i.XEX,Awz:()=>i.Awz,fxg:()=>i.fxg,pc5:()=>i.pc5,GjS:()=>i.GjS,R1c:()=>i.R1c,vTv:()=>i.vTv,wWb:()=>i.wWb,shP:()=>i.shP,wVD:()=>i.wVD,Hh0:()=>i.Hh0,UnN:()=>i.UnN,Wen:()=>i.Wen,BHy:()=>i.BHy,Qak:()=>i.Qak,D__:()=>i.D__,$rK:()=>i.$rK,X5J:()=>i.X5J,hOW:()=>i.hOW,GR4:()=>i.GR4,IDP:()=>i.IDP,gcz:()=>i.gcz,XPs:()=>i.XPs,wMK:()=>i.wMK,voy:()=>i.voy,VNU:()=>i.VNU,OAM:()=>i.OAM,vce:()=>i.vce,fsJ:()=>i.fsJ,mED:()=>i.mED,vnd:()=>i.vnd,yD3:()=>i.yD3,kyN:()=>i.kyN,nJx:()=>i.nJx,u$A:()=>i.u$A,tzR:()=>i.tzR,Lbl:()=>i.Lbl,DEk:()=>i.DEk,HPM:()=>i.HPM,dbf:()=>i.dbf,vPW:()=>i.vPW,KAt:()=>i.KAt,_UX:()=>i._UX,zsc:()=>i.zsc,oY_:()=>i.oY_,gj3:()=>i.gj3,oqe:()=>i.oqe,uER:()=>i.uER,_TF:()=>i._TF,YlY:()=>i.YlY,cYm:()=>i.cYm,_EH:()=>i._EH,S00:()=>i.S00,w9H:()=>i.w9H,ZXo:()=>i.ZXo,_Ir:()=>i._Ir,yun:()=>i.yun,bXZ:()=>i.bXZ,ZhV:()=>i.ZhV,jZr:()=>i.jZr,iKz:()=>i.iKz,vPm:()=>i.vPm,Ysb:()=>i.Ysb,qk$:()=>i.qk$,pBm:()=>i.pBm,lbA:()=>i.lbA,OSM:()=>i.OSM,Bxb:()=>i.Bxb,TpV:()=>i.TpV,eco:()=>i.eco,CW9:()=>i.CW9,Dm9:()=>i.Dm9,_ZX:()=>i._ZX,mfM:()=>i.mfM,$7R:()=>i.$7R,Snx:()=>i.Snx,SJU:()=>i.SJU,uLG:()=>i.uLG,XE4:()=>i.XE4,r0$:()=>i.r0$,uM4:()=>i.uM4,dH_:()=>i.dH_,xIw:()=>i.xIw,OAe:()=>i.OAe,plb:()=>i.plb,lR$:()=>i.lR$,sOz:()=>i.sOz,Zkt:()=>i.Zkt,Zvf:()=>i.Zvf,sC0:()=>i.sC0,eok:()=>i.eok,j7s:()=>i.j7s,WHG:()=>i.WHG,GV0:()=>i.GV0,Aoj:()=>i.Aoj,P7o:()=>i.P7o,yx3:()=>i.yx3,Hft:()=>i.Hft,PB9:()=>i.PB9,Evp:()=>i.Evp,kWN:()=>i.kWN,ZB$:()=>i.ZB$,aig:()=>i.aig,SaD:()=>i.SaD,gAT:()=>i.gAT,kcF:()=>i.kcF,Spt:()=>i.Spt,k26:()=>i.k26,qNt:()=>i.qNt,ps6:()=>i.ps6,Zsj:()=>i.Zsj,mae:()=>i.mae,EYP:()=>i.EYP,ebJ:()=>i.ebJ,KkT:()=>i.KkT,KdC:()=>i.KdC,wXe:()=>i.wXe,jH6:()=>i.jH6,PUt:()=>i.PUt,qH5:()=>i.qH5,tps:()=>i.tps,pXP:()=>i.pXP,P8N:()=>i.P8N,oEd:()=>i.oEd,t_W:()=>i.t_W,FSc:()=>i.FSc,vUb:()=>i.vUb,rWQ:()=>i.rWQ,L_4:()=>i.L_4,oIP:()=>i.oIP,Od7:()=>i.Od7,Nu1:()=>i.Nu1,JGk:()=>i.JGk,VJW:()=>i.VJW,LCZ:()=>i.LCZ,iku:()=>i.iku,ixi:()=>i.ixi,wrZ:()=>i.wrZ,SFW:()=>i.SFW,_M2:()=>i._M2,oiY:()=>i.oiY,B3l:()=>i.B3l,JRp:()=>i.JRp,o9e:()=>i.o9e,GTV:()=>i.GTV,LQI:()=>i.LQI,TsT:()=>i.TsT,SNQ:()=>i.SNQ,VFW:()=>i.VFW,Hjq:()=>i.Hjq,yZh:()=>i.yZh,o4I:()=>i.o4I,Spp:()=>i.Spp,EH4:()=>i.EH4,m88:()=>i.m88,_5_:()=>i._5_,xR7:()=>i.xR7,WK5:()=>i.WK5,PNz:()=>i.PNz,hoP:()=>i.hoP,n0B:()=>i.n0B,Z$r:()=>i.Z$r,ad4:()=>i.ad4,BbZ:()=>i.BbZ,zSL:()=>i.zSL,wce:()=>i.wce,Qbd:()=>i.Qbd,OBi:()=>i.OBi,VX_:()=>i.VX_,O5p:()=>i.O5p,OiW:()=>i.OiW,nVM:()=>i.nVM,lxv:()=>i.lxv,b6i:()=>i.b6i,Q$q:()=>i.Q$q,kMJ:()=>i.kMJ,RIC:()=>i.RIC,BTT:()=>i.BTT,xp:()=>i.xp,vHc:()=>i.vHc,YoK:()=>i.YoK,lF1:()=>i.lF1,tFw:()=>i.tFw,z8r:()=>i.z8r,wm0:()=>i.wm0,p8j:()=>i.p8j,Lmx:()=>i.Lmx,ZrN:()=>i.ZrN,M1Q:()=>i.M1Q,nPy:()=>i.nPy,SX1:()=>i.SX1,pYl:()=>i.pYl,EPR:()=>i.EPR,kpL:()=>i.kpL,RjA:()=>i.RjA,uJm:()=>i.uJm,Wtd:()=>i.Wtd,emu:()=>i.emu,Ehj:()=>i.Ehj,iVc:()=>i.iVc,Bvy:()=>i.Bvy,pJJ:()=>i.pJJ,WQq:()=>i.WQq,AC$:()=>i.AC$,jol:()=>i.jol,kOB:()=>i.kOB,RO1:()=>i.RO1,Uu$:()=>i.Uu$,Kwr:()=>i.Kwr,_mt:()=>i._mt,SEn:()=>i.SEn,Guy:()=>i.Guy,OG0:()=>i.OG0,PHR:()=>i.PHR,vC$:()=>i.vC$,uzX:()=>i.uzX,Ac_:()=>i.Ac_,Rtt:()=>i.Rtt,CbE:()=>i.CbE,k0l:()=>i.k0l,FU3:()=>i.FU3,qz_:()=>i.qz_,Fp$:()=>i.Fp$,alV:()=>i.alV,M0H:()=>i.M0H,YZ8:()=>i.YZ8,n3r:()=>i.n3r,dUx:()=>i.dUx,oHN:()=>i.oHN,KZB:()=>i.KZB,Q4l:()=>i.Q4l,QJs:()=>i.QJs,tkF:()=>i.tkF,AE4:()=>i.AE4,UP3:()=>i.UP3,YCj:()=>i.YCj,cds:()=>i.cds,c6V:()=>i.c6V,bmu:()=>i.bmu,JqA:()=>i.JqA,Yz$:()=>i.Yz$,Bc6:()=>i.Bc6,RDW:()=>i.RDW,gbE:()=>i.gbE,OoY:()=>i.OoY,heo:()=>i.heo,aK$:()=>i.aK$,eke:()=>i.eke,Qt8:()=>i.Qt8,sr4:()=>i.sr4,Sa0:()=>i.Sa0,vWN:()=>i.vWN,C6I:()=>i.C6I,AQZ:()=>i.AQZ,x6H:()=>i.x6H,H2K:()=>i.H2K,f5L:()=>i.f5L,ILt:()=>i.ILt,ccF:()=>i.ccF,VYu:()=>i.VYu,y3j:()=>i.y3j,FgH:()=>i.FgH,vtI:()=>i.vtI,uCq:()=>i.uCq,qWZ:()=>i.qWZ,t75:()=>i.t75,Kzi:()=>i.Kzi,tNI:()=>i.tNI,zfW:()=>i.zfW,mcF:()=>i.mcF,Nyi:()=>i.Nyi,sxC:()=>i.sxC,q__:()=>i.q__,DBb:()=>i.DBb,mMN:()=>i.mMN,rve:()=>i.rve,o7C:()=>i.o7C,HM$:()=>i.HM$,mS1:()=>i.mS1,xUI:()=>i.xUI,djG:()=>i.djG,Kn4:()=>i.Kn4,jGD:()=>i.jGD,ycd:()=>i.ycd,GM3:()=>i.GM3,XxT:()=>i.XxT,PYx:()=>i.PYx,EVZ:()=>i.EVZ,WYY:()=>i.WYY,m7j:()=>i.m7j,SK7:()=>i.SK7,YrP:()=>i.YrP,bd_:()=>i.bd_,n9O:()=>i.n9O,nQ9:()=>i.nQ9,bTv:()=>i.bTv,iyB:()=>i.iyB,LX0:()=>i.LX0,vEp:()=>i.vEp,Zx4:()=>i.Zx4,yd2:()=>i.yd2,ZtN:()=>i.ZtN,lg3:()=>i.lg3,DAo:()=>i.DAo,TAU:()=>i.TAU,Ki3:()=>i.Ki3,Dr$:()=>i.Dr$,$z8:()=>i.$z8,eQR:()=>i.eQR,zSP:()=>i.zSP,$bm:()=>i.$bm,RGR:()=>i.RGR,fsT:()=>i.fsT,HRE:()=>i.HRE,LUh:()=>i.LUh,C9t:()=>i.C9t,I4M:()=>i.I4M,XZ2:()=>i.XZ2,s7G:()=>i.s7G,bsK:()=>i.bsK,vEN:()=>i.vEN,cqm:()=>i.cqm,eFf:()=>i.eFf,lQo:()=>i.lQo,Ith:()=>i.Ith,GIj:()=>i.GIj,_sJ:()=>i._sJ,j3U:()=>a.j,bup:()=>o,CLY:()=>a.C});var r=n(3932);function o(e){switch(e.className){case"Scalar":return r.d.Scalar;case"Vector2":return r.d.Vec2;case"Vector3":return r.d.Vec3;case"Vector4":return r.d.Vec4;case"Matrix22":return r.d.Mat2;case"Matrix33":return r.d.Mat3;case"Matrix44":return r.d.Mat4;default:return console.error("CompositionType.Unknown"),r.d.Unknown}}var i=n(92),a=n(3884)},2129:(e,t,n)=>{n.d(t,{d:()=>p});var r=n(1067),o=n(6264);function i(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function a(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,i(e,t,"get"))}function s(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function c(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,i(e,t,"set"),n),n}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=-1,f=new WeakMap,_=new WeakMap,h=new WeakMap,d=new WeakMap,m=new WeakMap,v=new WeakMap,p=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__webglVersion=1,this.width=0,this.height=0,this.__activeTextureBackup=-1,this.__activeTextures2D=[],this.__activeTexturesCube=[],this.__isDebugMode=!1,this.__viewport_left=0,this.__viewport_top=0,this.__viewport_width=0,this.__viewport_height=0,this.__default_viewport_left=0,this.__default_viewport_top=0,this.__default_viewport_width=0,this.__default_viewport_height=0,s(this,f,{writable:!0,value:u}),s(this,_,{writable:!0,value:u}),s(this,h,{writable:!0,value:u}),s(this,d,{writable:!0,value:u}),s(this,m,{writable:!0,value:u}),s(this,v,{writable:!0,value:u}),this.__maxVertexUniformVectors=u,this.__maxFragmentUniformVectors=u,this._isWebXRMode=!1,this.__extensions=new Map,this.__gl=t,this.width=n.width,this.height=n.height,this.canvas=n,this.__viewport_width=this.__default_viewport_width=this.width,this.__viewport_height=this.__default_viewport_height=this.height,this.__isDebugMode=o,this.is_multiview=!0,"WebGL2RenderingContext"===this.__gl.constructor.name&&(this.__webglVersion=2,this.webgl2ExtTFL=this.__getExtension(r.c.TextureFloatLinear),this.webgl2ExtTFA=this.__getExtension(r.c.TextureFilterAnisotropic),this.webgl2ExtCBF=this.__getExtension(r.c.ColorBufferFloatWebGL2),this.webgl2ExtCBHF=this.__getExtension(r.c.ColorBufferHalfFloatWebGL2),this.webgl2ExtCTAstc=this.__getCompressedTextureExtension(r.c.CompressedTextureAstc),this.webgl2ExtCTS3tc=this.__getCompressedTextureExtension(r.c.CompressedTextureS3tc),this.webgl2ExtCTPvrtc=this.__getCompressedTextureExtension(r.c.CompressedTexturePvrtc),this.webgl2ExtCTAtc=this.__getCompressedTextureExtension(r.c.CompressedTextureAtc),this.webgl2ExtCTEtc=this.__getCompressedTextureExtension(r.c.CompressedTextureEtc),this.webgl2ExtCTEtc1=this.__getCompressedTextureExtension(r.c.CompressedTextureEtc1),this.webgl2ExtCTBptc=this.__getCompressedTextureExtension(r.c.CompressedTextureBptc),this.webgl2ExtMLTVIEW=this.__getExtension(r.c.OculusMultiview),this.webgl2ExtMLTVIEW?this.webgl2ExtMLTVIEW.is_multisample=!0:(this.webgl2ExtMLTVIEW=this.__getExtension(r.c.OvrMultiview2),this.webgl2ExtMLTVIEW?this.webgl2ExtMLTVIEW.is_multisample=!1:(console.warn("Neither OCULUS_multiview nor OVR_multiview2 extensions are supported"),this.is_multiview=!1)),this.webgl2ExtGmanWM=this.__getCompressedTextureExtension(r.c.GMAN_WEBGL_MEMORY)),this.__getUniformBufferInfo(),this.__getMaxUniformVectors()}var t,n,i=e.prototype;return i.getRawContext=function(){return this.__gl},i.getRawContextAsWebGL1=function(){return this.__gl},i.getRawContextAsWebGL2=function(){return this.__gl},i.isSupportWebGL1Extension=function(e){return!!this.__getExtension(e)},i.isNotSupportWebGL1Extension=function(e){return!this.isSupportWebGL1Extension(e)},i.getIsWebGL2=function(e){return this.isWebGL2},i.createVertexArray=function(){return this.getIsWebGL2(this.__gl)?this.__gl.createVertexArray():null!=this.webgl1ExtVAO?this.webgl1ExtVAO.createVertexArrayOES():void 0},i.deleteVertexArray=function(e){this.getIsWebGL2(this.__gl)?this.__gl.deleteVertexArray(e):null!=this.webgl1ExtVAO&&this.webgl1ExtVAO.deleteVertexArrayOES(e)},i.bindVertexArray=function(e){this.getIsWebGL2(this.__gl)?this.__gl.bindVertexArray(e):null!=this.webgl1ExtVAO&&this.webgl1ExtVAO.bindVertexArrayOES(e)},i.vertexAttribDivisor=function(e,t){this.getIsWebGL2(this.__gl)?this.__gl.vertexAttribDivisor(e,t):this.webgl1ExtIA.vertexAttribDivisorANGLE(e,t)},i.drawElementsInstanced=function(e,t,n,r,o){this.getIsWebGL2(this.__gl)?this.__gl.drawElementsInstanced(e,t,n,r,o):this.webgl1ExtIA.drawElementsInstancedANGLE(e,t,n,r,o)},i.drawArraysInstanced=function(e,t,n,r){this.getIsWebGL2(this.__gl)?this.__gl.drawArraysInstanced(e,t,n,r):this.webgl1ExtIA.drawArraysInstancedANGLE(e,t,n,r)},i.colorAttachment=function(e){return 36064+e},i.drawBuffers=function(e){var t=this.__gl;if(0!==e.length){var n=e[0].webGLConstantValue();t.drawBuffers(e.map((function(e){return e.webGLConstantValue()}))),n===t.NONE||0===e.length?t.colorMask(!1,!1,!1,!1):t.colorMask(!0,!0,!0,!0)}else t.drawBuffers([t.NONE])},i.__activeTexture=function(e){if(this.__activeTextureBackup!==e){switch(e){case 0:this.__gl.activeTexture(this.__gl.TEXTURE0);break;case 1:this.__gl.activeTexture(this.__gl.TEXTURE1);break;case 2:this.__gl.activeTexture(this.__gl.TEXTURE2);break;case 3:this.__gl.activeTexture(this.__gl.TEXTURE3);break;case 4:this.__gl.activeTexture(this.__gl.TEXTURE4);break;case 5:this.__gl.activeTexture(this.__gl.TEXTURE5);break;case 6:this.__gl.activeTexture(this.__gl.TEXTURE6);break;case 7:this.__gl.activeTexture(this.__gl.TEXTURE7);break;case 8:this.__gl.activeTexture(this.__gl.TEXTURE8);break;case 9:this.__gl.activeTexture(this.__gl.TEXTURE9);break;case 10:this.__gl.activeTexture(this.__gl.TEXTURE10);break;case 11:this.__gl.activeTexture(this.__gl.TEXTURE11);break;case 12:this.__gl.activeTexture(this.__gl.TEXTURE12);break;case 13:this.__gl.activeTexture(this.__gl.TEXTURE13);break;case 14:this.__gl.activeTexture(this.__gl.TEXTURE14);break;case 15:this.__gl.activeTexture(this.__gl.TEXTURE15)}this.__activeTextureBackup=e}},i.bindTexture2D=function(e,t){this.__activeTexture(e),this.__gl.bindTexture(this.__gl.TEXTURE_2D,t),this.__activeTextures2D[e]=t},i.bindTextureCube=function(e,t){this.__activeTexture(e),this.__gl.bindTexture(this.__gl.TEXTURE_CUBE_MAP,t),this.__activeTexturesCube[e]=t},i.unbindTexture2D=function(e){this.__activeTexture(e),this.__gl.bindTexture(this.__gl.TEXTURE_2D,null),delete this.__activeTextures2D[e]},i.unbindTextureCube=function(e){this.__activeTexture(e),this.__gl.bindTexture(this.__gl.TEXTURE_CUBE_MAP,null),delete this.__activeTexturesCube[e]},i.unbindTextures=function(){for(var e=0;e<this.__activeTextures2D.length;e++)null!=this.__activeTextures2D[e]&&(this.__activeTexture(e),this.__gl.bindTexture(this.__gl.TEXTURE_2D,null),delete this.__activeTextures2D[e]);for(var t=0;t<this.__activeTexturesCube.length;t++)null!=this.__activeTexturesCube[t]&&(this.__activeTexture(t),this.__gl.bindTexture(this.__gl.TEXTURE_CUBE_MAP,null),delete this.__activeTexturesCube[t])},i.__getExtension=function(e){var t=this.__gl;if(!this.__extensions.has(e)){var n=t.getExtension(e.toString());if(null==n){var r="".concat(e.toString()," Not Available in this environment");console.warn(r)}return this.__extensions.set(e,n),n}return this.__extensions.get(e)},i.__getCompressedTextureExtension=function(e){var t=this.__gl;if(!this.__extensions.has(e)){var n,r,o=e.toString(),i=null!==(r=null!==(n=t.getExtension(o))&&void 0!==n?n:t.getExtension("MOZ_"+o))&&void 0!==r?r:t.getExtension("WEBKIT_"+o);if(null==i){var a="".concat(e.toString()," Not Available in this environment");console.warn(a)}else this.__extensions.set(e,i);return i}return this.__extensions.get(e)},i.setViewport=function(e,t,n,r){var o=this.__gl;this.__viewport_width===n&&this.__viewport_height===r&&this.__viewport_left===e&&this.__viewport_top===t||(o.viewport(e,t,n,r),this.__viewport_left=e,this.__viewport_top=t,this.__viewport_width=n,this.__viewport_height=r)},i.setViewportAsVector4=function(e){var t=this.__gl;this.__viewport_width===e.z&&this.__viewport_height===e.w&&this.__viewport_left===e.x&&this.__viewport_top===e.y||(t.viewport(e.x,e.y,e.z,e.w),this.__viewport_left=e.x,this.__viewport_top=e.y,this.__viewport_width=e.z,this.__viewport_height=e.w)},i.__getUniformBufferInfo=function(){if(this.isWebGL2){var e=this.__gl,t=e.getParameter(e.UNIFORM_BUFFER_OFFSET_ALIGNMENT),n=e.getParameter(e.MAX_UNIFORM_BLOCK_SIZE);c(this,d,e.getParameter(e.MAX_VERTEX_UNIFORM_BLOCKS)),c(this,m,e.getParameter(e.MAX_FRAGMENT_UNIFORM_BLOCKS)),c(this,v,Math.min(a(this,d),a(this,m))),c(this,f,n-n%t),c(this,h,t),c(this,_,n)}},i.__getMaxUniformVectors=function(){var e=this.getRawContext();this.__maxVertexUniformVectors=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),this.__maxVertexUniformVectors=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS)},i.getMaxConventionUniformBlocks=function(){return a(this,v)},i.getAlignedMaxUniformBlockSize=function(){return a(this,f)},i.getMaxVertexUniformVectors=function(){return this.__maxVertexUniformVectors},i.getMaxFragmentUniformVectors=function(){return this.__maxFragmentUniformVectors},i.getWebGLMemoryInfo=function(){if(this.webgl2ExtGmanWM)return this.webgl2ExtGmanWM.getMemoryInfo()},t=e,(n=[{key:"viewport",get:function(){return o.Lt.fromCopyArray([this.__viewport_left,this.__viewport_top,this.__viewport_width,this.__viewport_height])}},{key:"defaultViewport",get:function(){return o.Lt.fromCopyArray([this.__default_viewport_left,this.__default_viewport_top,this.__default_viewport_width,this.__default_viewport_height])}},{key:"isDebugMode",get:function(){return this.__isDebugMode}},{key:"isWebGL2",get:function(){return 2===this.__webglVersion}}])&&l(t.prototype,n),e}()},1067:(e,t,n)=>{n.d(t,{c:()=>N});var r=n(3100);function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function i(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var a=o(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return i(this,e)});function s(e){var t=e.index,n=e.str;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,{index:t,str:n})}return s}(r.Jx),l=new c({index:1,str:"OES_vertex_array_object"}),u=new c({index:2,str:"OES_texture_float"}),f=new c({index:3,str:"OES_texture_half_float"}),_=new c({index:4,str:"OES_texture_float_linear"}),h=new c({index:5,str:"OES_texture_half_float_linear"}),d=new c({index:6,str:"ANGLE_instanced_arrays"}),m=new c({index:7,str:"EXT_texture_filter_anisotropic"}),v=new c({index:8,str:"OES_element_index_uint"}),p=new c({index:9,str:"EXT_shader_texture_lod"}),y=new c({index:10,str:"OES_standard_derivatives"}),A=new c({index:11,str:"WEBGL_draw_buffers"}),b=new c({index:12,str:"EXT_blend_minmax"}),g=new c({index:13,str:"WEBGL_color_buffer_float"}),x=new c({index:14,str:"WEBGL_compressed_texture_astc"}),I=new c({index:15,str:"WEBGL_compressed_texture_s3tc"}),E=new c({index:16,str:"WEBGL_compressed_texture_pvrtc"}),w=new c({index:17,str:"WEBGL_compressed_texture_atc"}),S=new c({index:18,str:"WEBGL_compressed_texture_etc"}),T=new c({index:19,str:"WEBGL_compressed_texture_etc1"}),C=new c({index:20,str:"EXT_texture_compression_bptc"}),P=new c({index:21,str:"GMAN_webgl_memory"}),R=new c({index:22,str:"EXT_color_buffer_float"}),D=new c({index:23,str:"EXT_color_buffer_half_float"}),M=new c({index:24,str:"OCULUS_multiview"}),B=new c({index:25,str:"OVR_multiview2"}),N=Object.freeze({VertexArrayObject:l,TextureFloat:u,TextureHalfFloat:f,TextureFloatLinear:_,TextureHalfFloatLinear:h,InstancedArrays:d,TextureFilterAnisotropic:m,ElementIndexUint:v,ShaderTextureLod:p,ShaderDerivatives:y,DrawBuffers:A,BlendMinmax:b,ColorBufferFloatWebGL1:g,CompressedTextureAstc:x,CompressedTextureS3tc:I,CompressedTexturePvrtc:E,CompressedTextureAtc:w,CompressedTextureEtc:S,CompressedTextureEtc1:T,CompressedTextureBptc:C,ColorBufferFloatWebGL2:R,ColorBufferHalfFloatWebGL2:D,OculusMultiview:M,OvrMultiview2:B,GMAN_WEBGL_MEMORY:P})},2166:(e,t,n)=>{n.d(t,{x:()=>L});var r=n(4021),o=n(6221),i=n(7102),a=n(4543),s=n(3932),c=n(2535),l=n(2129),u=n(4969),f=n(7416),_=n(4356),h=n(9978),d=n(6558),m=n(6264),v=n(7952),p=n(1274),y=n(5479),A=n(2503),b=n(1067),g=n(9197),x=n(425),I=n(6014),E=n(9977),w=n(92);function S(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){S(i,r,o,a,s,"next",e)}function s(e){S(i,r,o,a,s,"throw",e)}a(void 0)}))}}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function R(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function D(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e,t){return M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},M(e,t)}var B=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var N=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},O=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(B,e);var t,n,S=(t=B,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=P(t);if(n){var o=P(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return D(this,e)});function B(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,B),(e=S.call(this)).__webglContexts=new Map,e.__resourceCounter=r.F.InvalidCGAPIResourceUid,e.__webglResources=new Map,e}var L,F,G=B.prototype;return G.addWebGLContext=function(e,t,n,r){var o=new l.d(e,t,r);this.__webglContexts.set("default",o),n&&(this.__glw=o)},G.generateWebGLContext=function(e,t,n,r,o){var i=e.getContext("webgl2",o);return this.addWebGLContext(i,e,n,r),p.Kf.isSafari()&&(E.D.isUboEnabled=!1),i},G.getResourceNumber=function(){return++this.__resourceCounter},G.__registerResource=function(e){var t=this.getResourceNumber();return e._resourceUid=t,this.__webglResources.set(t,e),t},G.getWebGLResource=function(e){var t=this.__webglResources.get(e);return null!=t?t:null},G.createIndexBuffer=function(e){var t=this.__glw.getRawContext();if(null==t)throw new Error("No WebGLRenderingContext set as Default.");this.__glw.bindVertexArray(null);var n=t.createBuffer(),r=this.__registerResource(n);return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e.getTypedArray(),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),r},G.updateIndexBuffer=function(e,t){var n=this.__glw,r=null==n?void 0:n.getRawContext();if(g.Is.not.exist(r))throw new Error("No WebGLRenderingContext set as Default.");var o=this.__webglResources.get(t);if(g.Is.not.exist(o))throw new Error("Not found VBO.");n.bindVertexArray(null),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,o),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,0,e.getTypedArray()),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null)},G.createVertexBuffer=function(e){var t=this.__glw.getRawContext();if(null==t)throw new Error("No WebGLRenderingContext set as Default.");this.__glw.bindVertexArray(null);var n=t.createBuffer(),r=this.__registerResource(n);return t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,e.bufferView.getUint8Array(),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),r},G.createVertexBufferFromTypedArray=function(e){var t=this.__glw.getRawContext();if(null==t)throw new Error("No WebGLRenderingContext set as Default.");this.__glw.bindVertexArray(null);var n=t.createBuffer(),r=this.__registerResource(n);return t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),r},G.updateVertexBuffer=function(e,t){var n=this.__glw,r=null==n?void 0:n.getRawContext();if(!g.Is.exist(r))throw new Error("No WebGLRenderingContext set as Default.");var o=this.__webglResources.get(t);if(!g.Is.exist(o))throw new Error("Not found VBO.");n.bindVertexArray(null),r.bindBuffer(r.ARRAY_BUFFER,o),r.bufferSubData(r.ARRAY_BUFFER,0,e.bufferView.getUint8Array()),r.bindBuffer(r.ARRAY_BUFFER,null)},G.createVertexArray=function(){if(null==this.__glw)throw new Error("No WebGLRenderingContext set as Default.");var e=this.__glw.createVertexArray();if(!g.Is.not.exist(e))return this.__registerResource(e)},G.bindTexture2D=function(e,t){var n=this.getWebGLResource(t);this.__glw.bindTexture2D(e,n)},G.bindTextureCube=function(e,t){var n=this.getWebGLResource(t);this.__glw.bindTextureCube(e,n)},G.createVertexBufferAndIndexBuffer=function(e){var t,n=this;e.hasIndices()&&(t=this.createIndexBuffer(e.indicesAccessor));for(var r=[],i=0;i<o.T.AttributeTypeNumber;i++)r[i]=!1;var a=[];return e.attributeAccessors.forEach((function(t,i){var s=n.createVertexBuffer(t),c=o.T.toAttributeSlotFromJoinedString(e.attributeSemantics[i]);r[c]=!0,a.push(s)})),{vaoHandle:-1,iboHandle:t,vboHandles:a,attributesFlags:r,setComplete:!1}},G.updateVertexBufferAndIndexBuffer=function(e,t){t.iboHandle&&this.updateIndexBuffer(e.indicesAccessor,t.iboHandle);for(var n=e.attributeAccessors,r=0;r<n.length;r++)this.updateVertexBuffer(n[r],t.vboHandles[r])},G.createShaderProgram=function(e){var t=e.material,n=e.vertexShaderStr,o=e.fragmentShaderStr,i=e.attributeNames,a=e.attributeSemantics,s=e.onError,c=this.__glw.getRawContext();if(null==c)throw new Error("No WebGLRenderingContext set as Default.");var l=this.__glw.isDebugMode,u=c.createShader(c.VERTEX_SHADER);if(c.shaderSource(u,n),c.compileShader(u),l&&!this.__checkShaderCompileStatus(t.materialTypeName,u,n,s))return r.F.InvalidCGAPIResourceUid;var f=c.createShader(c.FRAGMENT_SHADER);c.shaderSource(f,o),c.compileShader(f),l&&this.__checkShaderCompileStatus(t.materialTypeName,f,o,s);var _=c.createProgram();if(_._gl=c,_._materialTypeName=t.materialTypeName,_._vertexShaderStr=n,_._fragmentShaderStr=o,_._shaderSemanticsInfoMap=new Map,_._material=t,c.attachShader(_,u),c.attachShader(_,f),i.forEach((function(e,t){c.bindAttribLocation(_,a[t].getAttributeSlot(),e)})),c.linkProgram(_),l&&!this.__checkShaderProgramLinkStatus(t.materialTypeName,_,n,o))return r.F.InvalidCGAPIResourceUid;_.__SPECTOR_rebuildProgram=this.rebuildProgramBySpector.bind(_);var h=this.__registerResource(_);return c.deleteShader(u),c.deleteShader(f),h},G.__checkShaderCompileStatus=function(e,t,n,r){var o=this.__glw.getRawContext();if(g.Is.false(o.getShaderParameter(t,o.COMPILE_STATUS))&&g.Is.false(o.isContextLost())){console.log("MaterialTypeName: "+e);var i=p.Kf.addLineNumberToCode(n);console.log(i);var a=o.getShaderInfoLog(t);return void 0===r?(console.error("An error occurred compiling the shaders:"+a),!1):(r(a),!1)}return!0},G.__checkShaderProgramLinkStatus=function(e,t,n,r){var o=this.__glw.getRawContext();if(g.Is.false(o.getProgramParameter(t,o.LINK_STATUS))&&g.Is.false(o.isContextLost())){console.log("MaterialTypeName: "+e),console.log(p.Kf.addLineNumberToCode("Vertex Shader:")),console.log(p.Kf.addLineNumberToCode(n)),console.log(p.Kf.addLineNumberToCode("Fragment Shader:")),console.log(p.Kf.addLineNumberToCode(r));var i=o.getProgramInfoLog(t);return console.error("Unable to initialize the shader program: "+i),!1}return!0},G.setupUniformLocations=function(e,t,n){for(var r=this.__glw,o=r.getRawContext(),i=this.getWebGLResource(e),a=t.length,c=0;c<a;c++){var l=t[c];i._shaderSemanticsInfoMap.set(l.semantic.str,l)}for(var u=0;u<a;u++){var _=t[u];if(n||_.needUniformInDataTextureMode||s.d.isTexture(_.compositionType)){var h=_.semantic.str,d=f.f5.fullSemanticStr(_);!0!==_.none_u_prefix&&(d="u_"+d);var m=o.getUniformLocation(i,d);i[h]=m,null==m&&r.isDebugMode&&console.warn("Rn: Can not get the uniform location: ".concat(d))}}return i},G.setupBasicUniformLocations=function(e){var t=this.getWebGLResource(e),n=this.currentWebGLContextWrapper.getRawContext();t.dataTexture=n.getUniformLocation(t,"u_dataTexture"),t.isMainVr=n.getUniformLocation(t,"u_isMainVr"),t.currentComponentSIDs=n.getUniformLocation(t,"u_currentComponentSIDs")},G.setUniformValue=function(e,t,n,r){var o=e._shaderSemanticsInfoMap.get(t);if(g.Is.not.exist(o))return!1;var i=!1,a=0;o.compositionType===s.d.Mat3?(i=!0,a=3):o.compositionType===s.d.Mat4?(i=!0,a=4):a=o.compositionType.getNumberOfComponents();var c=o.compositionType===s.d.ScalarArray||o.compositionType===s.d.Vec4Array||o.compositionType===s.d.Vec3Array||o.compositionType===s.d.Vec2Array,l=t,u=!1;return s.d.isTexture(o.compositionType)?(u=this.setUniformValueInner(e,l,o,i,a,!1,{x:r[0]}),this.bindTexture(o,r)):u=c?null==r._v?this.setUniformValueInner(e,l,o,i,a,!0,{x:r}):this.setUniformValueInner(e,l,o,i,a,!0,{x:r._v}):o.compositionType===s.d.Scalar?null==r._v?this.setUniformValueInner(e,l,o,i,a,!1,{x:r}):this.setUniformValueInner(e,l,o,i,a,!0,{x:r._v}):null==r._v?this.setUniformValueInner(e,l,o,i,a,!1,r):this.setUniformValueInner(e,l,o,i,a,!0,{x:r._v}),u},G.bindTexture=function(e,t){e.compositionType===s.d.Texture2D||e.compositionType===s.d.Texture2DShadow?this.bindTexture2D(t[0],R(t[1],_.y)?t[1]._textureResourceUid:t[1]):e.compositionType===s.d.TextureCube&&this.bindTextureCube(t[0],R(t[1],_.y)?t[1]._textureResourceUid:t[1])},G.setUniformValueInner=function(e,t,n,r,o,i,a){var s=a.x,l=a.y,u=a.z,f=a.w,_=e[t];if(null==_)return!1;var h=_,d=this.__glw.getRawContext();if(r)4===o?d.uniformMatrix4fv(h,!1,s):d.uniformMatrix3fv(h,!1,s);else if(i){var m=n.componentType===c.r.Int||n.componentType===c.r.Short||n.componentType===c.r.Byte;1===o?m?d.uniform1iv(h,s):d.uniform1fv(h,s):2===o?m?d.uniform2iv(h,s):d.uniform2fv(h,s):3===o?m?d.uniform3iv(h,s):d.uniform3fv(h,s):4===o&&(m?d.uniform4iv(h,s):d.uniform4fv(h,s))}else{var v=n.componentType===c.r.Int||n.componentType===c.r.Short||n.componentType===c.r.Byte;1===o?v?d.uniform1i(h,s):d.uniform1f(h,s):2===o?v?d.uniform2i(h,s,l):d.uniform2f(h,s,l):3===o?v?d.uniform3i(h,s,l,u):d.uniform3f(h,s,l,u):4===o&&(v?d.uniform4i(h,s,l,u,f):d.uniform4f(h,s,l,u,f))}return!0},G.setVertexDataToPipeline=function(e,t){var n=e.vaoHandle,i=e.iboHandle,a=e.vboHandles,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.F.InvalidCGAPIResourceUid,u=this,f=this.__glw.getRawContext(),_=this.getWebGLResource(n);if(this.__glw.bindVertexArray(_),null!=i){var h=this.getWebGLResource(i);if(null==h)throw new Error("Nothing Element Array Buffer!");f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,h)}if(a.forEach((function(e,n){var r=u.getWebGLResource(e);if(null==r)throw new Error("Nothing Element Array Buffer at index "+n);f.bindBuffer(f.ARRAY_BUFFER,r),f.enableVertexAttribArray(o.T.toAttributeSlotFromJoinedString(t.attributeSemantics[n])),f.vertexAttribPointer(o.T.toAttributeSlotFromJoinedString(t.attributeSemantics[n]),t.attributeCompositionTypes[n].getNumberOfComponents(),t.attributeComponentTypes[n].index,t.attributeAccessors[n].normalized,t.attributeAccessors[n].byteStride,t.attributeAccessors[n].byteOffsetInBufferView)})),l!==r.F.InvalidCGAPIResourceUid){var d=this.getWebGLResource(l);if(null==d)throw new Error("Nothing Element Array Buffer at index");f.bindBuffer(f.ARRAY_BUFFER,d),f.enableVertexAttribArray(o.T.Instance.getAttributeSlot()),f.vertexAttribPointer(o.T.Instance.getAttributeSlot(),s.d.Vec4.getNumberOfComponents(),c.r.Float.index,!1,0,0),this.__glw.vertexAttribDivisor(o.T.Instance.getAttributeSlot(),1)}f.bindBuffer(f.ARRAY_BUFFER,null),this.__glw.bindVertexArray(null),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,null)},G.createTexStorage2D=function(e){var t=e.levels,n=e.internalFormat,r=e.width,o=e.height,i=this.__glw.getRawContextAsWebGL2(),a=i.createTexture();this.__glw.bindTexture2D(0,a),i.texStorage2D(w.CbE,t,n.index,r,o);var s=this.__registerResource(a);return this.__glw.unbindTexture2D(0),s},G.createTexStorage2DWithSamplerParameters=function(e){var t=e.levels,n=e.internalFormat,r=e.width,o=e.height,i=e.magFilter,a=e.minFilter,s=e.wrapS,c=e.wrapT,l=e.anisotropy,f=(e.isPremultipliedAlpha,this.__glw.getRawContextAsWebGL2()),_=f.createTexture();this.__glw.bindTexture2D(0,_),f.texStorage2D(w.CbE,t,n.index,r,o);var h=this.__registerResource(_);return f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,s.index),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,c.index),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,i.index),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,a.index),u.k.isPowerOfTwoTexture(r,o)&&l&&this.__glw.webgl2ExtTFA&&f.texParameteri(f.TEXTURE_2D,this.__glw.webgl2ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT,4),this.__glw.unbindTexture2D(0),h},G.createTextureSampler=function(e){var t=e.magFilter,n=e.minFilter,r=e.wrapS,o=e.wrapT,i=e.anisotropy,a=(e.isPremultipliedAlpha,this.__glw.getRawContextAsWebGL2()),s=a.createSampler(),c=this.__registerResource(s);return a.samplerParameteri(s,a.TEXTURE_MIN_FILTER,n.index),a.samplerParameteri(s,a.TEXTURE_MAG_FILTER,t.index),a.samplerParameteri(s,a.TEXTURE_WRAP_S,r.index),a.samplerParameteri(s,a.TEXTURE_WRAP_T,o.index),i&&this.__glw.webgl2ExtTFA&&a.samplerParameteri(s,this.__glw.webgl2ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT,4),c},G.createTextureFromImageBitmapData=function(e,t){t.level;var n=t.internalFormat,r=t.width,o=t.height,i=(t.border,t.format),a=t.type,s=t.magFilter,c=t.minFilter,l=t.wrapS,u=t.wrapT,f=t.generateMipmap,_=t.anisotropy,h=t.isPremultipliedAlpha,d=this.__glw.getRawContextAsWebGL2(),m=d.createTexture(),v=this.__registerResource(m);this.__glw.bindTexture2D(0,m);var p=f?Math.max(Math.log2(r),Math.log2(o)):1;return d.texStorage2D(w.CbE,p,n.index,r,o),d.texSubImage2D(d.TEXTURE_2D,0,0,0,i.index,a.index,e),this.__createTextureInner(d,l,u,s,c,h,r,o,_,f),{textureHandle:v,samplerHandle:-1}},G.__createTextureInner=function(e,t,n,r,o,i,a,s,c,l){e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.index),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,n.index),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r.index),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,o.index),u.k.isPowerOfTwoTexture(a,s)&&(c&&this.__glw.webgl2ExtTFA&&e.texParameteri(e.TEXTURE_2D,this.__glw.webgl2ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT,4),l&&1!==s&&1!==a&&e.generateMipmap(e.TEXTURE_2D)),this.__glw.unbindTexture2D(0)},G.createTextureFromHTMLImageElement=function(e,t){t.level;var n=t.internalFormat,r=t.width,o=t.height,i=(t.border,t.format),a=t.type,s=t.magFilter,c=t.minFilter,l=t.wrapS,u=t.wrapT,f=t.generateMipmap,_=t.anisotropy,h=t.isPremultipliedAlpha,d=this.__glw.getRawContextAsWebGL2(),m=d.createTexture(),v=this.__registerResource(m);this.__glw.bindTexture2D(0,m);var p=f?Math.max(Math.log2(r),Math.log2(o)):1;return d.texStorage2D(w.CbE,p,n.index,r,o),d.texSubImage2D(d.TEXTURE_2D,0,0,0,i.index,a.index,e),this.__createTextureInner(d,l,u,s,c,h,r,o,_,f),v},G.createTextureFromTypedArray=function(e,t){t.level;var n=t.internalFormat,r=t.width,o=t.height,i=(t.border,t.format),a=t.type,s=t.magFilter,c=t.minFilter,l=t.wrapS,u=t.wrapT,f=t.generateMipmap,_=t.anisotropy,h=t.isPremultipliedAlpha,d=this.__glw.getRawContextAsWebGL2(),m=d.createTexture(),v=this.__registerResource(m);this.__glw.bindTexture2D(0,m);var p=f?Math.max(Math.log2(r),Math.log2(o)):1;return d.texStorage2D(w.CbE,p,n.index,r,o),d.texSubImage2D(d.TEXTURE_2D,0,0,0,r,o,i.index,a.index,e),this.__createTextureInner(d,l,u,s,c,h,r,o,_,f),v},G.createCompressedTexture=function(e,t,n){var r=n.magFilter,o=n.minFilter,a=n.wrapS,s=n.wrapT,c=n.anisotropy,l=this.__glw.getRawContext(),f=l.createTexture(),_=this.__registerResource(f);this.__glw.bindTexture2D(0,f);var h=t.index,d=!0,m=!1,v=void 0;try{for(var p,y=e[Symbol.iterator]();!(d=(p=y.next()).done);d=!0){var A=p.value;l.compressedTexImage2D(l.TEXTURE_2D,A.level,h,A.width,A.height,0,A.buffer)}}catch(e){m=!0,v=e}finally{try{d||null==y.return||y.return()}finally{if(m)throw v}}l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,r.index),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,a.index),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,s.index),o===i.d.LinearMipmapLinear&&(o=i.d.Linear),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,o.index);var b=e[0].width,g=e[0].height;return u.k.isPowerOfTwoTexture(b,g)&&c&&this.__glw.webgl2ExtTFA&&l.texParameteri(l.TEXTURE_2D,this.__glw.webgl2ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT,4),this.__glw.unbindTexture2D(0),_},G.createCompressedTextureFromBasis=function(e,t){var n,r,o=t.border,a=(t.format,t.type,t.magFilter),s=t.minFilter,c=t.wrapS,l=t.wrapT,u=t.anisotropy,f=(t.isPremultipliedAlpha,this.__glw.getRawContext()),_=f.createTexture(),h=this.__registerResource(_);f.bindTexture(f.TEXTURE_2D,_);var d=f.getExtension("WEBGL_compressed_texture_s3tc");d&&(n=A.l.BC3,r=d.COMPRESSED_RGBA_S3TC_DXT5_EXT);var m=f.getExtension("WEBGL_compressed_texture_etc1");m&&(n=A.l.ETC1,r=m.COMPRESSED_RGB_ETC1_WEBGL);var v=f.getExtension("WEBGL_compressed_texture_atc");v&&(n=A.l.ATC_RGBA,r=v.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL);var p=f.getExtension("WEBGL_compressed_texture_etc");p&&(n=A.l.ETC2,r=p.COMPRESSED_RGBA8_ETC2_EAC);var y=f.getExtension("WEBGL_compressed_texture_pvrtc")||f.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");y&&(n=A.l.PVRTC1_RGBA,r=y.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG);var b=f.getExtension("WEBGL_compressed_texture_astc");b&&(n=A.l.ASTC,r=b.COMPRESSED_RGBA_ASTC_4x4_KHR);for(var g=e.getNumLevels(0),x=0;x<g;x++){var I=e.getImageWidth(0,x),E=e.getImageHeight(0,x),w=this.decodeBasisImage(e,n,0,x);f.compressedTexImage2D(f.TEXTURE_2D,x,r,I,E,o,w)}if(0===g){f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,a.index);var S=s;s===i.d.LinearMipmapLinear&&(S=i.d.Linear),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,S.index)}else f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,a.index),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,s.index),u&&this.__glw.webgl1ExtTFA&&f.texParameteri(f.TEXTURE_2D,this.__glw.webgl1ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT,4);return f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,c.index),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,l.index),this.__glw.unbindTexture2D(0),h},G.decodeBasisImage=function(e,t,n,r){var o=e.getImageTranscodedSizeInBytes(n,r,t.index),i=new Uint8Array(o);return e.transcodeImage(i,n,r,t.index,0,0)||console.error("failed to transcode the image."),i},G.createFrameBufferObject=function(){var e=this.__glw.getRawContext().createFramebuffer();return this.__registerResource(e)},G.attachColorBufferToFrameBufferObject=function(e,t,n){var r=this.__glw.getRawContext(),o=this.getWebGLResource(e.framebufferUID);r.bindFramebuffer(r.FRAMEBUFFER,o);var i=this.getWebGLResource(n._textureResourceUid),a=this.__glw.colorAttachment(t);R(n,h._)?(n._fbo=e,r.framebufferTexture2D(r.FRAMEBUFFER,a,r.TEXTURE_2D,i,0)):(n._fbo=e,r.framebufferRenderbuffer(r.FRAMEBUFFER,a,r.RENDERBUFFER,i)),r.bindFramebuffer(r.FRAMEBUFFER,null)},G.attachDepthBufferToFrameBufferObject=function(e,t){this.__attachDepthOrStencilBufferToFrameBufferObject(e,t,36096)},G.attachStencilBufferToFrameBufferObject=function(e,t){this.__attachDepthOrStencilBufferToFrameBufferObject(e,t,36128)},G.attachDepthStencilBufferToFrameBufferObject=function(e,t){this.__attachDepthOrStencilBufferToFrameBufferObject(e,t,33306)},G.__attachDepthOrStencilBufferToFrameBufferObject=function(e,t,n){var r=this.__glw.getRawContext(),o=this.getWebGLResource(e.framebufferUID);r.bindFramebuffer(r.FRAMEBUFFER,o);var i=this.getWebGLResource(t._textureResourceUid);R(t,h._)?(t._fbo=e,r.framebufferTexture2D(r.FRAMEBUFFER,n,r.TEXTURE_2D,i,0)):(t._fbo=e,r.framebufferRenderbuffer(r.FRAMEBUFFER,n,r.RENDERBUFFER,i)),r.bindFramebuffer(r.FRAMEBUFFER,null)},G.createRenderBuffer=function(e,t,n,r,o){var i=this.__glw.getRawContext(),a=i.createRenderbuffer(),s=this.__registerResource(a);return i.bindRenderbuffer(i.RENDERBUFFER,a),r?i.renderbufferStorageMultisample(i.RENDERBUFFER,o,i[n.str],e,t):i.renderbufferStorage(i.RENDERBUFFER,i[n.str],e,t),i.bindRenderbuffer(i.RENDERBUFFER,null),s},G.setDrawTargets=function(e){var t=e.getFramebuffer();if(t){var n=e.getRenderTargetColorAttachments();g.Is.exist(n)?this.__glw.drawBuffers(n):this.__glw.drawBuffers(t.colorAttachmentsRenderBufferTargets)}else this.__glw.drawBuffers([v.G.Back])},G.bindFramebuffer=function(e){var t=this.__glw.getRawContext();if(e){var n=e.cgApiResourceUid,r=this.getWebGLResource(n);t.bindFramebuffer(t.FRAMEBUFFER,r)}else t.bindFramebuffer(t.FRAMEBUFFER,null)},G.unbindFramebuffer=function(){var e=this.__glw.getRawContext();e.bindFramebuffer(e.FRAMEBUFFER,null)},G.createRenderTargetTexture=function(e){var t=e.width,n=e.height,r=e.level,o=e.internalFormat,i=e.format,a=e.type,s=e.magFilter,c=e.minFilter,l=e.wrapS,f=e.wrapT,_=e.anisotropy,h=this.__glw.getRawContextAsWebGL2(),d=h.createTexture(),m=this.__registerResource(d);return this.__glw.bindTexture2D(0,d),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,s.index),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,c.index),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,l.index),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,f.index),u.k.isPowerOfTwoTexture(t,n)&&_&&this.__glw.webgl2ExtTFA&&h.texParameteri(h.TEXTURE_2D,this.__glw.webgl2ExtTFA.TEXTURE_MAX_ANISOTROPY_EXT,4),o.index!==w.pEo&&o.index!==w.r7P&&o.index!==w.LjI&&o.index!==w.FcV||(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_COMPARE_MODE,h.COMPARE_REF_TO_TEXTURE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_COMPARE_FUNC,h.LESS)),h.texImage2D(h.TEXTURE_2D,r,o.index,t,n,0,i.index,a.index,null),this.__glw.unbindTexture2D(0),m},G.createCubeTexture=function(e,t,n,r){var o=this,i=this.__glw.getRawContext(),a=i.createTexture(),s=this.__registerResource(a);this.__glw.bindTextureCube(0,a),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),t[0].posX.hdriFormat===d.c.HDR_LINEAR&&this.__glw.isNotSupportWebGL1Extension(b.c.TextureFloatLinear)?(e>=2?i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MIN_FILTER,i.NEAREST_MIPMAP_NEAREST):i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MAG_FILTER,i.NEAREST)):(e>=2?i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_LINEAR):i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MAG_FILTER,i.LINEAR));for(var c=function(e,t,a){if(e.hdriFormat===d.c.HDR_LINEAR){var s=o.__glw.getRawContextAsWebGL2();s.texImage2D(t,a,s.RGB32F,e.width,e.height,0,s.RGB,s.FLOAT,e.dataFloat)}else R(e,HTMLImageElement)||R(e,HTMLCanvasElement)?i.texImage2D(t,a,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e):i.texImage2D(t,a,i.RGBA,n/Math.pow(2,a),r/Math.pow(2,a),0,i.RGBA,i.UNSIGNED_BYTE,e)},l=0;l<t.length;l++){var u=t[l];c(u.posX,i.TEXTURE_CUBE_MAP_POSITIVE_X,l),c(u.negX,i.TEXTURE_CUBE_MAP_NEGATIVE_X,l),c(u.posY,i.TEXTURE_CUBE_MAP_POSITIVE_Y,l),c(u.negY,i.TEXTURE_CUBE_MAP_NEGATIVE_Y,l),c(u.posZ,i.TEXTURE_CUBE_MAP_POSITIVE_Z,l),c(u.negZ,i.TEXTURE_CUBE_MAP_NEGATIVE_Z,l)}return this.__glw.unbindTextureCube(0),s},G.createCubeTextureFromFiles=function(e,t,n,r){var o=this;return T((function(){var i,a,s,c,l,u;return N(this,(function(f){switch(f.label){case 0:i=function(t){var o,i,u,f,_,h,m,v,p,y;return N(this,(function(A){switch(A.label){case 0:o=function(){return new Promise((function(o,i){var s=function(e){var t=y[e][1],n=void 0;(n=r===d.c.HDR_LINEAR||r===d.c.RGB9_E5_PNG?new HDRImage:new Image).hdriFormat=r,n.side=t,n.uri=y[e][0],n.crossOrigin="Anonymous",n.onload=function(){c++,l.push(n),6===c&&o(l)},n.onerror=function(){i(n.uri)},n.src=y[e][0]},c=0,l=[],u=".jpg";r===d.c.HDR_LINEAR?u=".hdr":r===d.c.RGBE_PNG&&(u=".RGBE.PNG");var f="_right_",_="_left_",h="_top_",m="_bottom_",v="_front_",p="_back_";n&&(f="_posx_",_="_negx_",h="_posy_",m="_negy_",v="_posz_",p="_negz_");for(var y=[[e+f+t+u,a.TEXTURE_CUBE_MAP_POSITIVE_X],[e+_+t+u,a.TEXTURE_CUBE_MAP_NEGATIVE_X],[e+h+t+u,a.TEXTURE_CUBE_MAP_POSITIVE_Y],[e+m+t+u,a.TEXTURE_CUBE_MAP_NEGATIVE_Y],[e+v+t+u,a.TEXTURE_CUBE_MAP_POSITIVE_Z],[e+p+t+u,a.TEXTURE_CUBE_MAP_NEGATIVE_Z]],A=0;A<y.length;A++)s(A)}))},i=void 0,A.label=1;case 1:return A.trys.push([1,3,,8]),[4,o()];case 2:return i=A.sent(),[3,8];case 3:A.sent(),A.label=4;case 4:return A.trys.push([4,6,,7]),[4,o()];case 5:return i=A.sent(),[3,7];case 6:return u=A.sent(),console.error("failed to load ".concat(u)),[3,7];case 7:return[3,8];case 8:f={},_=!0,h=!1,m=void 0;try{for(v=i[Symbol.iterator]();!(_=(p=v.next()).done);_=!0){switch((y=p.value).side){case a.TEXTURE_CUBE_MAP_POSITIVE_X:f.posX=y;break;case a.TEXTURE_CUBE_MAP_POSITIVE_Y:f.posY=y;break;case a.TEXTURE_CUBE_MAP_POSITIVE_Z:f.posZ=y;break;case a.TEXTURE_CUBE_MAP_NEGATIVE_X:f.negX=y;break;case a.TEXTURE_CUBE_MAP_NEGATIVE_Y:f.negY=y;break;case a.TEXTURE_CUBE_MAP_NEGATIVE_Z:f.negZ=y}0===t&&(c=y.width,l=y.height)}}catch(e){h=!0,m=e}finally{try{_||null==v.return||v.return()}finally{if(h)throw m}}return s.push(f),[2]}}))},a=o.__glw.getRawContext(),s=[],c=0,l=0,u=0,f.label=1;case 1:return u<t?[5,O(i(u))]:[3,4];case 2:f.sent(),f.label=3;case 3:return u++,[3,1];case 4:return[2,o.createCubeTexture(t,s,c,l)]}}))}))()},G.createCubeTextureFromBasis=function(e,t){var n,r,o=t.magFilter,a=void 0===o?i.d.Linear:o,s=t.minFilter,c=void 0===s?i.d.LinearMipmapLinear:s,l=t.wrapS,u=void 0===l?i.d.Repeat:l,f=t.wrapT,_=void 0===f?i.d.Repeat:f,h=t.border,d=void 0===h?0:h,m=this.__glw.getRawContext(),v=m.createTexture(),p=this.__registerResource(v);this.__glw.bindTextureCube(0,v);var y=m.getExtension("WEBGL_compressed_texture_s3tc");y&&(n=A.l.BC3,r=y.COMPRESSED_RGBA_S3TC_DXT5_EXT);var b=m.getExtension("WEBGL_compressed_texture_etc1");b&&(n=A.l.ETC1,r=b.COMPRESSED_RGB_ETC1_WEBGL);var g=m.getExtension("WEBGL_compressed_texture_atc");g&&(n=A.l.ATC_RGBA,r=g.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL);var x=m.getExtension("WEBGL_compressed_texture_etc");x&&(n=A.l.ETC2,r=x.COMPRESSED_RGBA8_ETC2_EAC);var I=m.getExtension("WEBGL_compressed_texture_pvrtc")||m.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");I&&(n=A.l.PVRTC1_RGBA,r=I.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG);var E=m.getExtension("WEBGL_compressed_texture_astc");E&&(n=A.l.ASTC,r=E.COMPRESSED_RGBA_ASTC_4x4_KHR);var w=e.getNumImages(),S=e.getNumLevels(0);if(m.texParameteri(m.TEXTURE_CUBE_MAP,m.TEXTURE_WRAP_S,u.index),m.texParameteri(m.TEXTURE_CUBE_MAP,m.TEXTURE_WRAP_T,_.index),S>=2)m.texParameteri(m.TEXTURE_CUBE_MAP,m.TEXTURE_MIN_FILTER,c.index),m.texParameteri(m.TEXTURE_CUBE_MAP,m.TEXTURE_MAG_FILTER,a.index);else{var T=c;c===i.d.LinearMipmapLinear&&(T=i.d.Linear),m.texParameteri(m.TEXTURE_CUBE_MAP,m.TEXTURE_MIN_FILTER,T.index),m.texParameteri(m.TEXTURE_CUBE_MAP,m.TEXTURE_MAG_FILTER,a.index)}for(var C=0;C<S;C++)for(var P=0;P<w;P++){var R=e.getImageWidth(P,C),D=e.getImageHeight(P,C),M=this.decodeBasisImage(e,n,P,C);m.compressedTexImage2D(m.TEXTURE_CUBE_MAP_POSITIVE_X+P,C,r,R,D,d,M)}return this.__glw.unbindTextureCube(0),p},G.createDummyBlackCubeTexture=function(){var e=this.__createDummyTextureInner("iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPj/HwADBwIAMCbHYQAAAABJRU5ErkJggg=="),t=new Uint8Array(e);return this.createCubeTexture(1,[{posX:t,negX:t,posY:t,negY:t,posZ:t,negZ:t}],1,1)},G.createDummyCubeTexture=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rgba(0,0,0,1)",t=document.createElement("canvas");t.width=1,t.height=1;var n=t.getContext("2d");return n.fillStyle=e,n.fillRect(0,0,1,1),this.createCubeTexture(1,[{posX:t,negX:t,posY:t,negY:t,posZ:t,negZ:t}],1,1)},G.setWebGLTextureDirectly=function(e){var t=e;return this.__registerResource(t)},G.createTextureFromDataUri=function(e,t){var n=t.level,r=t.internalFormat,o=t.border,i=t.format,a=t.type,s=t.magFilter,c=t.minFilter,l=t.wrapS,u=t.wrapT,f=t.generateMipmap,_=t.anisotropy,h=t.isPremultipliedAlpha,d=this;return T((function(){return N(this,(function(t){return[2,new Promise((function(t){var m=new Image;e.match(/^data:/)||(m.crossOrigin="Anonymous"),m.onload=function(){var e=m.width,v=m.height,p=d.createTextureFromHTMLImageElement(m,{level:n,internalFormat:r,width:e,height:v,border:o,format:i,type:a,magFilter:s,minFilter:c,wrapS:l,wrapT:u,generateMipmap:f,anisotropy:_,isPremultipliedAlpha:h});t(p)},m.src=e}))]}))}))()},G.updateLevel0TextureAndGenerateMipmap=function(e,t,n){var r=n.width,o=n.height,i=n.format,a=n.type,s=this.getWebGLResource(e);this.__glw.bindTexture2D(0,s);var c=this.__glw.getRawContextAsWebGL2();c.texSubImage2D(c.TEXTURE_2D,0,0,0,r,o,i.index,a.index,t),c.generateMipmap(c.TEXTURE_2D),this.__glw.unbindTexture2D(0)},G.updateTexture=function(e,t,n){var r=n.level,o=(n.xoffset,n.yoffset,n.width),i=n.height,a=n.format,s=n.type,c=this.getWebGLResource(e);this.__glw.bindTexture2D(0,c);var l=this.__glw.getRawContextAsWebGL2();l.texSubImage2D(l.TEXTURE_2D,r,0,0,o,i,a.index,s.index,t),this.__glw.unbindTexture2D(0)},G.deleteFrameBufferObject=function(e){var t=this.getWebGLResource(e),n=this.__glw.getRawContext();null!=t&&(n.deleteFramebuffer(t),this.__webglResources.delete(e))},G.deleteRenderBuffer=function(e){var t=this.__glw.getRawContext(),n=this.getWebGLResource(e);t.deleteRenderbuffer(n),this.__webglResources.delete(e)},G.deleteTexture=function(e){var t=this.getWebGLResource(e),n=this.__glw.getRawContext();null!=t&&(n.deleteTexture(t),this.__webglResources.delete(e))},G.createDummyTexture=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rgba(255,255,255,1)",t=document.createElement("canvas");t.width=1,t.height=1;var n=t.getContext("2d");return n.fillStyle=e,n.fillRect(0,0,1,1),this.createTextureFromImageBitmapData(t,{level:0,internalFormat:i.d.RGBA8,width:1,height:1,border:0,format:a.V.RGBA,type:c.r.UnsignedByte,magFilter:i.d.Nearest,minFilter:i.d.Nearest,wrapS:i.d.ClampToEdge,wrapT:i.d.ClampToEdge,generateMipmap:!1,anisotropy:!1,isPremultipliedAlpha:!1})},G.createDummyBlackTexture=function(){return this.__createDummyTextureInner("iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPj/HwADBwIAMCbHYQAAAABJRU5ErkJggg==")},G.createDummyWhiteTexture=function(){return this.__createDummyTextureInner("iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5/hPwAIAgL/4d1j8wAAAABJRU5ErkJggg==")},G.createDummyNormalTexture=function(){return this.__createDummyTextureInner("iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mOsr///HwAGgAL+v1RumAAAAABJRU5ErkJggg==")},G.__createDummyTextureInner=function(e){var t=y.j.base64ToArrayBuffer(e);return this.createTextureFromTypedArray(new Uint8Array(t),{level:0,internalFormat:i.d.RGBA8,width:1,height:1,border:0,format:a.V.RGBA,type:c.r.UnsignedByte,magFilter:i.d.Nearest,minFilter:i.d.Nearest,wrapS:i.d.ClampToEdge,wrapT:i.d.ClampToEdge,generateMipmap:!1,anisotropy:!1,isPremultipliedAlpha:!1})},G.createUniformBuffer=function(e){var t=this.__glw.getRawContextAsWebGL2();if(null==t)throw new Error("No WebGLRenderingContext set as Default.");var n=t.createBuffer(),r=this.__registerResource(n);return t.bindBuffer(t.UNIFORM_BUFFER,n),t.bufferData(t.UNIFORM_BUFFER,e,t.DYNAMIC_DRAW),t.bindBuffer(t.UNIFORM_BUFFER,null),r},G.updateUniformBuffer=function(e,t,n,r){var o=this.__glw.getRawContextAsWebGL2(),i=this.getWebGLResource(e);o.bindBuffer(o.UNIFORM_BUFFER,i),o.bufferSubData(o.UNIFORM_BUFFER,0,t,n,r),o.bindBuffer(o.UNIFORM_BUFFER,null)},G.bindUniformBlock=function(e,t,n){var r=this.__glw.getRawContextAsWebGL2();if(null==r)throw new Error("No WebGLRenderingContext set as Default.");var o=this.getWebGLResource(e),i=r.getUniformBlockIndex(o,t);r.uniformBlockBinding(o,i,n)},G.bindUniformBufferBase=function(e,t){var n=this.__glw.getRawContextAsWebGL2();if(null==n)throw new Error("No WebGLRenderingContext set as Default.");var r=this.getWebGLResource(t);n.bindBufferBase(n.UNIFORM_BUFFER,e,r)},G.deleteUniformBuffer=function(e){var t=this.__glw.getRawContext();null==t&&new Error("No WebGLRenderingContext set as Default.");var n=this.getWebGLResource(e);this.__webglResources.delete(e),t.deleteBuffer(n)},G.setupUniformBufferDataArea=function(e){var t=this.__glw.getRawContextAsWebGL2();null==t&&new Error("No WebGLRenderingContext set as Default.");var n=t.createBuffer(),r=this.__registerResource(n),o=this.__glw.getMaxConventionUniformBlocks(),i=this.__glw.getAlignedMaxUniformBlockSize(),a=new Float32Array(i*o/4);g.Is.exist(e)&&a.set(e.subarray(0,a.length)),t.bindBuffer(t.UNIFORM_BUFFER,n),t.bufferData(t.UNIFORM_BUFFER,a,t.DYNAMIC_DRAW,0,0);for(var s=0;s<o;s++)t.bindBufferRange(t.UNIFORM_BUFFER,s,n,i*s,i);return t.bindBuffer(t.UNIFORM_BUFFER,null),r},G.getGlslRenderTargetBeginString=function(e){for(var t="",n=0;n<e;n++)t+="layout(location = ".concat(n,") out vec4 rt").concat(n,";");return t},G.getGlslRenderTargetEndString=function(e){return""},G.getGlslDataUBODefinitionString=function(){for(var e="",t=this.__glw.getMaxConventionUniformBlocks(),n=this.__glw.getAlignedMaxUniformBlockSize(),r=0;r<t;r++)e+="\nlayout (std140) uniform Vec4Block".concat(r," {\n  vec4 vec4Block").concat(r,"[").concat(n/4/4,"];\n};\n");e+="\nvec4 fetchVec4FromVec4Block(int vec4Idx) {\n  int vec4IdxForEachBlock = vec4Idx % dataUBOVec4Size;\n  if (vec4Idx < dataUBOVec4Size) {\n    return vec4Block0[vec4IdxForEachBlock];\n  }";for(var o=1;o<t;o++)e+="\n else if (vec4Idx < dataUBOVec4Size * ".concat(o+1,") {\n    return vec4Block").concat(o,"[vec4IdxForEachBlock];\n}");return e+"}\n"},G.getGlslDataUBOVec4SizeString=function(){var e=this.__glw.getAlignedMaxUniformBlockSize();return"const int dataUBOVec4Size = ".concat(e/4/4,";")},G.createMultiviewFramebuffer=function(e,t,n){if(g.Is.not.exist(this.__glw.webgl2ExtMLTVIEW))return[-1,-1];var r=this.__glw.getRawContextAsWebGL2(),o=r.createFramebuffer(),i=this.__registerResource(o);r.bindFramebuffer(r.DRAW_FRAMEBUFFER,o);var a=r.createTexture(),s=this.__registerResource(a);r.bindTexture(r.TEXTURE_2D_ARRAY,a),r.texStorage3D(r.TEXTURE_2D_ARRAY,1,r.RGBA8,e,t,2),this.__glw.webgl2ExtMLTVIEW.is_multisample?this.__glw.webgl2ExtMLTVIEW.framebufferTextureMultisampleMultiviewOVR(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,a,0,n,0,2):this.__glw.webgl2ExtMLTVIEW.framebufferTextureMultiviewOVR(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,a,0,0,2);var c=r.createTexture();return r.bindTexture(r.TEXTURE_2D_ARRAY,c),r.texStorage3D(r.TEXTURE_2D_ARRAY,1,r.DEPTH32F_STENCIL8,e,t,2),this.__glw.webgl2ExtMLTVIEW.is_multisample?this.__glw.webgl2ExtMLTVIEW.framebufferTextureMultisampleMultiviewOVR(r.DRAW_FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,c,0,n,0,2):this.__glw.webgl2ExtMLTVIEW.framebufferTextureMultiviewOVR(r.DRAW_FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,c,0,0,2),[i,s]},G.createTransformFeedback=function(){var e=this.__glw.getRawContextAsWebGL2(),t=e.createTransformFeedback(),n=this.__registerResource(t);return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,t),n},G.deleteTransformFeedback=function(e){var t=this.__glw.getRawContextAsWebGL2(),n=this.getWebGLResource(e);t.deleteTransformFeedback(n),this.__webglResources.delete(e)},G.setViewport=function(e){var t,n;e?null===(t=this.__glw)||void 0===t||t.setViewportAsVector4(e):null===(n=this.__glw)||void 0===n||n.setViewport(0,0,this.__glw.width,this.__glw.height)},G.clearFrameBuffer=function(e){var t=this.__glw.getRawContext(),n=0;e.toClearColorBuffer&&(t.clearColor(e.clearColor.x,e.clearColor.y,e.clearColor.z,e.clearColor.w),n|=t.COLOR_BUFFER_BIT),e.toClearDepthBuffer&&(t.clearDepth(e.clearDepth),n|=t.DEPTH_BUFFER_BIT),e.toClearStencilBuffer&&(t.clearStencil(e.clearStencil),n|=t.STENCIL_BUFFER_BIT),0!==n&&t.clear(n)},G.deleteVertexDataResources=function(e){var t=this.__glw.getRawContext(),n=e.iboHandle;if(n){var r=this.getWebGLResource(n);t.deleteBuffer(r)}var o=e.vboHandles,i=!0,a=!1,s=void 0;try{for(var c,l=o[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var u=c.value,f=this.getWebGLResource(u);t.deleteBuffer(f)}}catch(e){a=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}var _=e.vaoHandle,h=this.getWebGLResource(_);this.__glw.deleteVertexArray(h)},G.deleteVertexArray=function(e){var t=this.getWebGLResource(e);this.__glw.deleteVertexArray(t)},G.deleteVertexBuffer=function(e){var t=this.__glw.getRawContext(),n=this.getWebGLResource(e);t.deleteBuffer(n)},G.resizeCanvas=function(e,t){this.__glw.width=e,this.__glw.height=t,this.__glw.canvas.width=e,this.__glw.canvas.height=t,this.__glw.setViewportAsVector4(m.Lt.fromCopyArray([0,0,e,t]))},G.getCanvasSize=function(){return[this.__glw.canvas.width,this.__glw.canvas.height]},G.switchDepthTest=function(e){var t=this.__glw.getRawContext();e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST)},G.rebuildProgramBySpector=function(e,t,n,r){var o=this._material;if(g.Is.not.exist(o)){var i="Material Not found";return console.warn(i),r(i),!1}var a=x.x.processApproach,s=(0,I.Z)(a),c=e.replace(/! =/g,"!="),l=t.replace(/! =/g,"!="),u=s._reSetupShaderForMaterialBySpector(o,{vertex:c,pixel:l},r),f=B.getInstance().getWebGLResource(u);return u>0&&n(f),!0},G.rebuildProgram=function(e,t,n){var r=x.x.processApproach,o=(0,I.Z)(r),i=t.replace(/! =/g,"!="),a=n.replace(/! =/g,"!=");o._reSetupShaderForMaterialBySpector(e,{vertex:i,pixel:a},(function(e){}))},G.getPixelDataFromTexture=function(e,t,n,r,o){var i=this.__glw.getRawContext(),a=new Uint8Array((r-t)*(o-n)*4),s=this.getWebGLResource(e),c=i.createFramebuffer();return i.bindFramebuffer(i.FRAMEBUFFER,c),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,s,0),i.readPixels(t,n,r,o,i.RGBA,i.UNSIGNED_BYTE,a),i.bindFramebuffer(i.FRAMEBUFFER,null),i.deleteFramebuffer(c),a},G.setWebGLStateToDefault=function(){var e=this.__glw.getRawContextAsWebGL2();e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindTexture(e.TEXTURE_2D,null),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindVertexArray(null),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(0),e.depthFunc(e.LESS),e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.disable(e.CULL_FACE),e.frontFace(e.CCW),e.cullFace(e.BACK),e.blendColor(0,0,0,0),e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.stencilOpSeparate(e.FRONT,e.KEEP,e.KEEP,e.KEEP),e.stencilOpSeparate(e.BACK,e.KEEP,e.KEEP,e.KEEP),e.stencilFuncSeparate(e.FRONT,e.ALWAYS,0,4294967295),e.stencilFuncSeparate(e.BACK,e.ALWAYS,0,4294967295),e.stencilMaskSeparate(e.FRONT,4294967295),e.stencilMaskSeparate(e.BACK,4294967295),e.colorMask(!0,!0,!0,!0),e.depthMask(!0),e.sampleCoverage(1,!1)},B.getInstance=function(){return this.__instance||(this.__instance=new B),this.__instance},L=B,(F=[{key:"currentWebGLContextWrapper",get:function(){return this.__glw}}])&&C(L.prototype,F),B}(r.F)},9807:(e,t,n)=>{n.d(t,{M:()=>P,Z:()=>R});var r,o,i,a,s,c,l,u,f,_,h=n(3650),d=n(6807),m=n(9856),v=n(4021),p=n(9197),y=n(178),A=n(2166),b=n(7416),g=n(3932),x=n(2535),I=n(5685),E=n(1811),w=n(678),S=n(6860);function T(e,t,n){(o!==e||i!==t)&&(n.blendEquationSeparate(e,t),o=e,i=t)}function C(e,t,n,r,o){(a!==e||s!==t||c!==n||l!==r)&&(o.blendFuncSeparate(e,t,n,r),a=e,s=t,c=n,l=r)}function P(e,t){if(null!=t.mesh)for(var n=t.mesh.getPrimitiveNumber(),r=0;r<n;r++){var o=t.mesh.getPrimitiveAt(r),i=o.material;if(null!=i&&!i.isEmptyMaterial()&&!i.isShaderProgramReady()){var a=v.F.getWebGLResourceRepository().currentWebGLContextWrapper.getRawContext();o.primitiveMode.index,a.POINTS;try{e.setupShaderForMaterial(i),o._backupMaterial()}catch(t){console.log(t),o._restoreMaterial(),e.setupShaderForMaterial(o._prevMaterial)}}}else m.$.alertNoMeshSet(t)}const R=Object.freeze({setWebGLParameters:function(e,t){!function(e,t){var n=e.cullFace,r=e.cullFrontFaceCCW;u!==n&&(n?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),u=n),!0===n&&f!==r&&(r?t.frontFace(t.CCW):t.frontFace(t.CW),f=r)}(e,t),function(e,t){var n=e.isBlend();r!==n&&(n?t.enable(t.BLEND):t.disable(t.BLEND),r=n),e.alphaMode===h.F.Translucent?(T(e.blendEquationMode,e.blendEquationModeAlpha,t),C(e.blendFuncSrcFactor,e.blendFuncDstFactor,e.blendFuncAlphaSrcFactor,e.blendFuncAlphaDstFactor,t)):e.alphaMode===h.F.Additive&&(T(32774,32774,t),C(1,1,1,1,t))}(e,t),function(e,t){var n=e.alphaToCoverage;n!==_&&(n?t.enable(t.SAMPLE_ALPHA_TO_COVERAGE):t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),_=n)}(e,t)},startDepthMasking:function(e,t){d.Y.isDepthMaskTrueForTransparencies||e._sortkey===d.Y._firstTransparentSortKey&&t.depthMask(!1)},endDepthMasking:function(e,t){e._sortkey===d.Y._lastTransparentSortKey&&t.depthMask(!0)},updateVBOAndVAO:function(e){for(var t=e.getPrimitiveNumber(),n=0;n<t;n++){var r=e.getPrimitiveAt(n);p.Is.exist(r.vertexHandles)?r.update3DAPIVertexData():r.create3DAPIVertexData()}e.updateVariationVBO(),e.updateVAO()},isMaterialsSetup:function(e){if(e.mesh._variationVBOUid!==v.F.InvalidCGAPIResourceUid){for(var t=e.mesh.getPrimitiveNumber(),n=0,r=0;r<t;r++)-1!==e.mesh.getPrimitiveAt(r).material._shaderProgramUid&&n++;return t===n}return!1},isSkipDrawing:function(e){return!(!e.isEmptyMaterial()&&-1!==e._shaderProgramUid)},setVRViewport:function(e,t){var n=A.x.getInstance(),r=y.x.getInstance().getModule("xr").WebXRSystem.getInstance();r.isWebXRMode&&n.setViewport(r._getViewportAt(t))},getDisplayNumber:function(e){return e?2:1},isVrMainPass:function(e){var t=y.x.getInstance().getModule("xr");return(null==t?void 0:t.WebXRSystem.getInstance().isWebXRMode)&&e.isVrRendering},getPointSpriteShaderSemanticsInfoArray:function(){return[{semantic:b.f5.PointSize,compositionType:g.d.Scalar,componentType:x.r.Float,stage:I.H.PixelShader,initialValue:E.Ru.fromCopyNumber(30),min:0,max:Number.MAX_VALUE,isCustomSetting:!1,updateInterval:w.a.EveryTime},{semantic:b.f5.PointDistanceAttenuation,compositionType:g.d.Vec3,componentType:x.r.Float,stage:I.H.PixelShader,initialValue:S.P.fromCopyArray([0,.1,.01]),min:0,max:1,isCustomSetting:!1,updateInterval:w.a.EveryTime}]}})},1623:(e,t,n)=>{n.d(t,{X:()=>C});var r=n(2166),o=n(4395),i=n(4543),a=n(2535),s=n(7102),c=n(5171),l=n(9856),u=n(8118),f=n(4021),_=n(7416),h=n(3932),d=n(1410),m=n(429),v=n(6807),p=n(6383),y=n(9977),A=n(3279),b=n(9481),g=n(6174),x=n(1274),I=n(9807),E=n(178),w=n(9197),S=n(4654),T=n(2603),C=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__webglResourceRepository=r.x.getInstance(),this.__dataTextureUid=f.F.InvalidCGAPIResourceUid,this.__dataUBOUid=f.F.InvalidCGAPIResourceUid,this.__lastShader=f.F.InvalidCGAPIResourceUid,this.__lastRenderPassTickCount=-1,this._totalSizeOfGPUShaderDataStorageExceptMorphData=0,this.__latestPrimitivePositionAccessorVersions=[]}var t=e.prototype;return t.setupShaderForMaterial=function(t){var n=r.x.getInstance().currentWebGLContextWrapper,o=t._createProgram(e.getVertexShaderMethodDefinitions_dataTexture(),e.__getShaderProperty,n.isWebGL2);return t._setupBasicUniformsLocations(),t._setUniformLocationsOfMaterialNodes(!1),t._setupAdditionalUniformLocations(I.Z.getPointSpriteShaderSemanticsInfoArray(),!1),e.__globalDataRepository._setUniformLocationsForDataTextureModeOnly(t._shaderProgramUid),o},t._reSetupShaderForMaterialBySpector=function(t,n,r){var o=t._createProgramByUpdatedSources(n,r);return t._setupBasicUniformsLocations(),t._setUniformLocationsOfMaterialNodes(!1),t._setupAdditionalUniformLocations(I.Z.getPointSpriteShaderSemanticsInfoArray(),!1),e.__globalDataRepository._setUniformLocationsForDataTextureModeOnly(t._shaderProgramUid),o},t.$load=function(t){var n=t.mesh;if(w.Is.not.exist(n))l.$.alertNoMeshSet(t);else if(e.__currentComponentSIDs=e.__globalDataRepository.getValue(_.f5.CurrentComponentSIDs,0),I.Z.isMaterialsSetup(t)||(0,I.M)(this,t),!this.isMeshSetup(n)){this.deleteDataTexture(),I.Z.updateVBOAndVAO(n);for(var r=n.getPrimitiveNumber(),o=0;o<r;o++){var i=n.getPrimitiveAt(o);this.__latestPrimitivePositionAccessorVersions[i.primitiveUid]=i.positionAccessorVersion}}},t.isMeshSetup=function(e){if(e._variationVBOUid===f.F.InvalidCGAPIResourceUid)return!1;for(var t=e.getPrimitiveNumber(),n=0;n<t;n++){var r=e.getPrimitiveAt(n);if(w.Is.not.exist(r.vertexHandles)||r.positionAccessorVersion!==this.__latestPrimitivePositionAccessorVersions[r.primitiveUid])return!1}return!0},t.$prerender=function(e,t,n){t._readyForRendering||(null!=e.mesh?t._readyForRendering=!0:l.$.alertNoMeshSet(e))},t.__createAndUpdateDataTexture=function(){var t=o.B.getInstance(),n=t.getBuffer(c.$.GPUInstanceData),r=this.__webglResourceRepository.currentWebGLContextWrapper.getAlignedMaxUniformBlockSize(),l=this.__isUboUse()?r:0;if(null!=n){var u=o.B.bufferWidthLength*o.B.bufferHeightLength*4*4;if(this.__dataTextureUid!==f.F.InvalidCGAPIResourceUid){var _=n.takenSizeInByte-l,h=Math.min(Math.ceil(_/o.B.bufferWidthLength/4/4),o.B.bufferHeightLength),d=o.B.bufferWidthLength*h*4*4;_>u&&console.warn("The buffer size exceeds the size of the data texture.");var m=new Float32Array(n.getArrayBuffer(),l,d/4);this.__webglResourceRepository.updateTexture(this.__dataTextureUid,m,{level:0,xoffset:0,yoffset:0,width:o.B.bufferWidthLength,height:h,format:i.V.RGBA,type:a.r.Float}),e.__isDebugOperationToDataTextureBufferDone||(x.Kf.downloadTypedArray("Rhodonite_dataTextureBuffer.bin",m),e.__isDebugOperationToDataTextureBufferDone=!0)}else{var v,p=t.getBuffer(c.$.GPUVertexData);new ArrayBuffer(0),w.Is.exist(p)&&(p.takenSizeInByte,p.getArrayBuffer());var A=t.getBuffer(c.$.GPUVertexData),b=0;w.Is.exist(A)&&(b=A.takenSizeInByte);var g=new ArrayBuffer(0);w.Is.exist(A)&&(g=A.getArrayBuffer());var I=n.takenSizeInByte-l,E=4*(o.B.bufferWidthLength-I/4/4%o.B.bufferWidthLength)*4,S=x.Kf.concatArrayBuffers2({finalSize:u,srcs:[n.getArrayBuffer(),g],srcsCopySize:[I+E,b],srcsOffset:[l,0]});I+E+b>u&&console.warn("The buffer size exceeds the size of the data texture."),v=new Float32Array(S),y.D.totalSizeOfGPUShaderDataStorageExceptMorphData=n.takenSizeInByte+E,this.__dataTextureUid=this.__webglResourceRepository.createTextureFromTypedArray(v,{level:0,internalFormat:s.d.RGBA32F,width:o.B.bufferWidthLength,height:o.B.bufferHeightLength,border:0,format:i.V.RGBA,type:a.r.Float,magFilter:s.d.Nearest,minFilter:s.d.Nearest,wrapS:s.d.Repeat,wrapT:s.d.Repeat,generateMipmap:!1,anisotropy:!1,isPremultipliedAlpha:!0})}}},t.deleteDataTexture=function(){null!=this.__dataTextureUid&&(this.__webglResourceRepository.deleteTexture(this.__dataTextureUid),this.__dataTextureUid=f.F.InvalidCGAPIResourceUid)},t.common_$prerender=function(){this.__createAndUpdateDataTexture(),this.__createAndUpdateUBO(),this.__lightComponents=p.C.getComponentsWithType(S.r)},t.__isUboUse=function(){return this.__webglResourceRepository.currentWebGLContextWrapper.isWebGL2&&y.D.isUboEnabled},t.__createAndUpdateUBO=function(){if(this.__isUboUse()){var e=this.__webglResourceRepository.currentWebGLContextWrapper,t=e.getAlignedMaxUniformBlockSize(),n=e.getMaxConventionUniformBlocks(),r=o.B.getInstance().getBuffer(c.$.GPUInstanceData);if(this.__dataUBOUid===f.F.InvalidCGAPIResourceUid)this.__dataUBOUid=this.__webglResourceRepository.setupUniformBufferDataArea(new Float32Array(r.getArrayBuffer()));else{var i=new Float32Array(r.getArrayBuffer());this.__webglResourceRepository.updateUniformBuffer(this.__dataUBOUid,i,0,t*n/4)}}},t.attachGPUData=function(e){},t.attachGPUDataInner=function(e,t){},t.attachShaderProgram=function(e){var t=e._shaderProgramUid;if(t!==this.__lastShader){var n=this.__webglResourceRepository.currentWebGLContextWrapper.getRawContext(),r=this.__webglResourceRepository.getWebGLResource(t);n.useProgram(r),this.__lastShader=t}},t.attachVertexData=function(e,t,n,r){},t.attachVertexDataInner=function(e,t,n,r,o){var i=t.vertexHandles,a=r.getRawContext(),s=this.__webglResourceRepository.getWebGLResource(e.getVaoUids(n));if(null!=s)r.bindVertexArray(s);else{this.__webglResourceRepository.setVertexDataToPipeline(i,t,e._variationVBOUid);var c=this.__webglResourceRepository.getWebGLResource(i.iboHandle);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c)}},t.__setCurrentComponentSIDsForEachRenderPass=function(t,n,r){if(r){var o=E.x.getInstance().getModule("xr").WebXRSystem.getInstance(),i=-1;o.isWebXRMode&&(i=o.isMultiView()?o._getCameraComponentSIDAt(0):o._getCameraComponentSIDAt(n)),e.__currentComponentSIDs._v[g.z.CameraComponentTID]=i}else{var a=t.cameraComponent;null==a&&(a=p.C.getComponent(A.M,A.M.current)),e.__currentComponentSIDs._v[g.z.CameraComponentTID]=a?a.componentSID:-1}},t.__setCurrentComponentSIDsForEachEntity=function(t,n,r){var o=r.tryToGetSkeletal();if(o){var i=0;o.componentSID<y.D.maxSkeletonNumber&&(i=o.componentSID),e.__currentComponentSIDs._v[g.z.SkeletalComponentTID]=i}else e.__currentComponentSIDs._v[g.z.SkeletalComponentTID]=-1},t.__setCurrentComponentSIDsForEachPrimitive=function(t,n,r){e.__currentComponentSIDs._v[0]=n.materialSID,t.uniform1fv(r.currentComponentSIDs,e.__currentComponentSIDs._v)},t.common_$render=function(e,t,n){"undefined"!=typeof spector&&spector.setMarker("|  |  DataTexture:common_$render#");for(var r=this.__webglResourceRepository.currentWebGLContextWrapper,o=r.getRawContext(),i=I.Z.isVrMainPass(t),a=I.Z.getDisplayNumber(i),s=0;s<a;s++){i&&I.Z.setVRViewport(t,s),this.__setCurrentComponentSIDsForEachRenderPass(t,s,i);for(var c=0;c<t.drawCount;c++){if(t.doPreEachDraw(c),t.toRenderOpaquePrimitives)for(var l=0;l<=v.Y._lastOpaqueIndex;l++){var u=e[l];this.renderInner(u,r,t,i,s)}if(t.toRenderTransparentPrimitives){v.Y.isDepthMaskTrueForTransparencies||o.depthMask(!1);for(var f=v.Y._lastOpaqueIndex+1;f<=v.Y._lastTransparentIndex;f++){var _=e[f];this.renderInner(_,r,t,i,s)}o.depthMask(!0)}}}return this.__lastRenderPassTickCount=n,!1},t.renderInner=function(t,n,r,o,i){var a=n.getRawContext(),s=u.W.getPrimitive(t),c=s.mesh,l=c.meshEntitiesInner[0],f=r.getAppropriateMaterial(s);if(I.Z.isSkipDrawing(f))return!1;this.__setCurrentComponentSIDsForEachEntity(a,r,l);var _=l.getMeshRenderer(),h=c.getPrimitiveIndexInMesh(s);this.attachVertexDataInner(c,s,h,n,c._variationVBOUid);var d=!1,m=f._shaderProgramUid;if(m!==this.__lastShader){var v=this.__webglResourceRepository.getWebGLResource(m);a.useProgram(v),a.uniform1i(v.dataTexture,7),a.uniform1i(v.isMainVr,o?1:0),this.__webglResourceRepository.bindTexture2D(7,this.__dataTextureUid),e.__shaderProgram=v,d=!0}return this.__lastMaterial!==f&&(d=!0,this.__lastMaterial=f),this.__setCurrentComponentSIDsForEachPrimitive(a,f,e.__shaderProgram),I.Z.setWebGLParameters(f,a),f._setParametersToGpu({material:f,shaderProgram:e.__shaderProgram,firstTime:d,args:{glw:n,entity:l,worldMatrix:l.getSceneGraph().matrixInner,normalMatrix:l.getSceneGraph().normalMatrixInner,isBillboard:l.getSceneGraph().isBillboard,lightComponents:this.__lightComponents,renderPass:r,primitive:s,diffuseCube:_.diffuseCubeMap,specularCube:_.specularCubeMap,setUniform:!1,isVr:o,displayIdx:i}}),s.indicesAccessor?n.drawElementsInstanced(s.primitiveMode.index,s.indicesAccessor.elementCount,s.indicesAccessor.componentType.index,0,c.meshEntitiesInner.length):n.drawArraysInstanced(s.primitiveMode.index,0,s.getVertexCountAsVerticesBased(),c.meshEntitiesInner.length),this.__lastShader=m,!0},e.dumpDataTextureBuffer=function(){this.__isDebugOperationToDataTextureBufferDone=!1},e.getVertexShaderMethodDefinitions_dataTexture=function(){return"\n\n  mat4 get_worldMatrix(float instanceId)\n  {\n    int index = ".concat(d.w.getLocationOffsetOfMemberOfComponent(m.a,"worldMatrix")," + 4 * int(instanceId);\n    mat4 matrix = fetchMat4(index);\n\n    return matrix;\n  }\n\n\n  mat3 get_normalMatrix(float instanceId) {\n    int index = ").concat(d.w.getLocationOffsetOfMemberOfComponent(m.a,"normalMatrix")," * 4 + 9 * int(instanceId);\n    mat3 matrix = fetchMat3No16BytesAligned(index);\n    return matrix;\n  }\n\n  bool get_isVisible(float instanceId) {\n    int index = ").concat(d.w.getLocationOffsetOfMemberOfComponent(m.a,"isVisible")," * 4 + int(instanceId);\n    float visibility = fetchScalarNo16BytesAligned(index);\n    return (visibility > 0.5) ? true : false;\n  }\n\n  bool get_isBillboard(float instanceId) {\n    int index = ").concat(d.w.getLocationOffsetOfMemberOfComponent(m.a,"isBillboard")," * 4 + int(instanceId);\n    float isBillboard = fetchScalarNo16BytesAligned(index);\n    return (isBillboard > 0.5) ? true : false;\n  }\n\n#ifdef RN_IS_VERTEX_SHADER\n  #ifdef RN_IS_MORPHING\n  vec3 get_position(float vertexId, vec3 basePosition) {\n    vec3 position = basePosition;\n    int scalar_idx = 3 * int(vertexId);\n    for (int i=0; i<").concat(y.D.maxVertexMorphNumberInShader,"; i++) {\n\n      int basePosIn4bytes = u_dataTextureMorphOffsetPosition[i] * 4 + scalar_idx;\n      vec3 addPos = fetchVec3No16BytesAligned(basePosIn4bytes);\n\n      position += addPos * u_morphWeights[i];\n      if (i == u_morphTargetNumber-1) {\n        break;\n      }\n    }\n\n    return position;\n  }\n  #endif\n#endif\n")},e.__getShaderProperty=function(t,n,r,o,i){var s,c=n.compositionType.getGlslStr(n.componentType),l=h.d.isTexture(n.compositionType),u=n.semantic.str.replace(".","_"),f="",_=n.compositionType.getGlslStr(n.componentType),d="";n.arrayLength&&(d="[".concat(n.arrayLength,"]")),(n.needUniformInDataTextureMode||l)&&(f="  uniform ".concat(_," u_").concat(u).concat(d,";\n"));var m,v=n.compositionType.getVec4SizeOfProperty(),p=n.compositionType.getNumberOfComponents(),y=e.getOffsetOfPropertyInShader(o,r,t);-1===y&&console.error("Could not get the location offset of the property.");var A=v*(null!==(m=n.arrayLength)&&void 0!==m?m:1);if(s="int vec4_idx = ".concat(y," + ").concat(A," * instanceId;\n"),h.d.isArray(n.compositionType)){var b,g=p*(null!==(b=n.arrayLength)&&void 0!==b?b:1);s="int vec4_idx = ".concat(y," + ").concat(A," * instanceId + ").concat(v," * idxOfArray;\n"),s+="int scalar_idx = ".concat(4*y," + ").concat(g," * instanceId + ").concat(p," * idxOfArray;\n")}var x="";n.componentType===a.r.Int&&n.compositionType!==h.d.Scalar&&(x="i");var I="";if(l||n.needUniformInDataTextureMode){if(!l&&n.needUniformInDataTextureMode){if(!i&&n.arrayLength)return"\n".concat(f,"\n");var E="";return n.arrayLength&&(E="[idxOfArray]"),"".concat(f,"\n").concat(c," get_").concat(u,"(highp float _instanceId, const int idxOfArray) {\n  return u_").concat(u).concat(E,";\n}\n")}return f}I+="\n".concat(c," get_").concat(u,"(highp float _instanceId, const int idxOfArray) {\n  int instanceId = int(_instanceId);\n  ").concat(s,"\n  ");var w="".concat(f,"\n").concat(I);switch(n.compositionType){case h.d.Vec4:case h.d.Vec4Array:w+="        highp vec4 val = fetchElement(vec4_idx);\n";break;case h.d.Vec3:w+="        vec4 col0 = fetchElement(vec4_idx);\n",w+="        highp ".concat(x,"vec3 val = ").concat(x,"vec3(col0.xyz);");break;case h.d.Vec3Array:w+="        vec3 val = fetchVec3No16BytesAligned(scalar_idx);\n";break;case h.d.Vec2:w+="        highp vec4 col0 = fetchElement(vec4_idx);\n",w+="        highp ".concat(x,"vec2 val = ").concat(x,"vec2(col0.xy);");break;case h.d.Vec2Array:w+="        highp vec2 val = fetchVec2No16BytesAligned(scalar_idx);\n";break;case h.d.Scalar:w+="        vec4 col0 = fetchElement(vec4_idx);\n",n.componentType===a.r.Int?w+="        int val = int(col0.x);":n.componentType===a.r.Bool?w+="        bool val = bool(col0.x);":w+="       float val = col0.x;";break;case h.d.ScalarArray:w+="        float col0 = fetchScalarNo16BytesAligned(scalar_idx);\n",n.componentType===a.r.Int?w+="        int val = int(col0);":n.componentType===a.r.Bool?w+="        bool val = bool(col0);":w+="       float val = col0;";break;case h.d.Mat4:case h.d.Mat4Array:w+="        mat4 val = fetchMat4(vec4_idx);\n";break;case h.d.Mat3:w+="        mat3 val = fetchMat3(vec4_idx);\n";break;case h.d.Mat3Array:w+="        mat3 val = fetchMat3No16BytesAligned(scalar_idx);\n";break;case h.d.Mat2:w+="        mat2 val = fetchMat2(vec4_idx);\n";break;case h.d.Mat2Array:w+="        mat2 val = fetchMat2No16BytesAligned(scalar_idx);\n";break;default:w+=""}return w+"\n  return val;\n}\n"},e.getOffsetOfPropertyInShader=function(e,t,n){return e?b.$.getInstance().getLocationOffsetOfProperty(t):T.r.getLocationOffsetOfMemberOfMaterial(n,t)},e.getInstance=function(){return this.__instance||(this.__instance=new e),this.__instance},e}();C.__globalDataRepository=b.$.getInstance(),C.__isDebugOperationToDataTextureBufferDone=!0},733:(e,t,n)=>{n.d(t,{I:()=>I});var r=n(2166),o=n(8118),i=n(4021),a=n(7416),s=n(6383),c=n(4654),l=n(9977),u=n(4543),f=n(2535),_=n(7102),h=n(6807),d=n(3932),m=n(678),v=n(4395),p=n(5685),y=n(5171),A=n(9481),b=n(1274),g=n(9807),x=n(9197),I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__webglResourceRepository=r.x.getInstance(),this.__dataTextureUid=i.F.InvalidCGAPIResourceUid,this.__lastShader=-1,this.__lastRenderPassTickCount=-1,this.__latestPrimitivePositionAccessorVersions=[]}var t=e.prototype;return t.setupShaderForMaterial=function(t){var n=r.x.getInstance().currentWebGLContextWrapper,o=t._createProgram(e.__vertexShaderMethodDefinitions_uniform,a.f5.getShaderProperty,n.isWebGL2);t._setupBasicUniformsLocations(),t._setUniformLocationsOfMaterialNodes(!0);var i=e.componentMatrices,s=g.Z.getPointSpriteShaderSemanticsInfoArray();return t._setupAdditionalUniformLocations(i.concat(s),!0),e.__globalDataRepository._setUniformLocationsForUniformModeOnly(t._shaderProgramUid),o},t._reSetupShaderForMaterialBySpector=function(t,n,r){var o=t._createProgramByUpdatedSources(n,r);t._setupBasicUniformsLocations(),t._setUniformLocationsOfMaterialNodes(!0);var i=e.componentMatrices,a=g.Z.getPointSpriteShaderSemanticsInfoArray();return t._setupAdditionalUniformLocations(i.concat(a),!0),e.__globalDataRepository._setUniformLocationsForUniformModeOnly(t._shaderProgramUid),o},t.$load=function(e){var t=e.mesh;if(x.Is.exist(t)&&(g.Z.isMaterialsSetup(e)||(0,g.M)(this,e),!this.isMeshSetup(t))){g.Z.updateVBOAndVAO(t);for(var n=t.getPrimitiveNumber(),r=0;r<n;r++){var o=t.getPrimitiveAt(r);this.__latestPrimitivePositionAccessorVersions[o.primitiveUid]=o.positionAccessorVersion}}},t.isMeshSetup=function(e){if(e._variationVBOUid===i.F.InvalidCGAPIResourceUid)return!1;for(var t=e.getPrimitiveNumber(),n=0;n<t;n++){var r=e.getPrimitiveAt(n);if(x.Is.not.exist(r.vertexHandles)||r.positionAccessorVersion!==this.__latestPrimitivePositionAccessorVersions[r.primitiveUid])return!1}return!0},t.$prerender=function(e,t,n){e.mesh},t.common_$prerender=function(){if(this.__lightComponents=s.C.getComponentsWithType(c.r),this.__dataTextureUid===i.F.InvalidCGAPIResourceUid){var e=v.B.getInstance().getBuffer(y.$.GPUVertexData);if(null==e)return;e.takenSizeInByte/v.B.bufferWidthLength/4>v.B.bufferHeightLength&&console.warn("The buffer size exceeds the size of the data texture.");var t=v.B.bufferWidthLength*v.B.bufferHeightLength*4*4,n=b.Kf.concatArrayBuffers2({finalSize:t,srcs:[e.getArrayBuffer()],srcsCopySize:[e.takenSizeInByte],srcsOffset:[0]}),r=new Float32Array(n);this.__dataTextureUid=this.__webglResourceRepository.createTextureFromTypedArray(r,{level:0,internalFormat:_.d.RGBA32F,width:v.B.bufferWidthLength,height:v.B.bufferHeightLength,border:0,format:u.V.RGBA,type:f.r.Float,magFilter:_.d.Nearest,minFilter:_.d.Nearest,wrapS:_.d.Repeat,wrapT:_.d.Repeat,generateMipmap:!1,anisotropy:!1,isPremultipliedAlpha:!0})}},t.attachGPUData=function(e){},t.attachShaderProgram=function(e){},t.attachVertexData=function(e,t,n,r){},t.attachVertexDataInner=function(e,t,n,r,o){var i=t.vertexHandles,a=this.__webglResourceRepository.getWebGLResource(e.getVaoUidsByPrimitiveUid(n)),s=r.getRawContext();if(null!=a)r.bindVertexArray(a);else{this.__webglResourceRepository.setVertexDataToPipeline(i,t,o);var c=this.__webglResourceRepository.getWebGLResource(i.iboHandle);s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,c)}},t.dettachVertexData=function(e){var t=e.getRawContext();e.bindVertexArray&&e.bindVertexArray(null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindBuffer(t.ARRAY_BUFFER,null)},t.common_$render=function(e,t,n){"undefined"!=typeof spector&&spector.setMarker("|  |  Uniform:$render#");for(var r=this.__webglResourceRepository.currentWebGLContextWrapper,o=r.getRawContext(),i=g.Z.isVrMainPass(t),a=g.Z.getDisplayNumber(i),s=0;s<a;s++){i&&g.Z.setVRViewport(t,s);for(var c=0;c<t.drawCount;c++){if(t.doPreEachDraw(c),t.toRenderOpaquePrimitives)for(var l=0;l<=h.Y._lastOpaqueIndex;l++){var u=e[l];this.renderInner(u,r,t,n,i,s)}if(t.toRenderTransparentPrimitives){h.Y.isDepthMaskTrueForTransparencies||o.depthMask(!1);for(var f=h.Y._lastOpaqueIndex+1;f<=h.Y._lastTransparentIndex;f++){var _=e[f];this.renderInner(_,r,t,n,i,s)}o.depthMask(!0)}}}return!1},t.renderInner=function(e,t,n,r,a,s){var c=t.getRawContext(),l=o.W.getPrimitive(e),u=n.getAppropriateMaterial(l);if(g.Z.isSkipDrawing(u))return!1;var f=l.mesh.meshEntitiesInner,_=!0,h=!1,d=void 0;try{for(var m,v=f[Symbol.iterator]();!(_=(m=v.next()).done);_=!0){var p,y,A=m.value;if(A.getSceneGraph().isVisible&&!A.getSceneGraph()._isCulled){var b=A.getMesh();this.attachVertexDataInner(b.mesh,l,e,t,i.F.InvalidCGAPIResourceUid);var x=this.__webglResourceRepository.getWebGLResource(u._shaderProgramUid),I=u._shaderProgramUid,E=r!==this.__lastRenderPassTickCount;I!==this.__lastShader&&(E=!0,c.useProgram(x),c.uniform1i(x.dataTexture,7),this.__webglResourceRepository.bindTexture2D(7,this.__dataTextureUid),this.__lastShader=I),this.__lastMaterial!==u&&(E=!0,this.__lastMaterial=u),g.Z.setWebGLParameters(u,c),u._setParametersToGpu({material:u,shaderProgram:x,firstTime:E,args:{setUniform:!0,glw:t,entity:A,primitive:l,worldMatrix:A.getSceneGraph().matrix,normalMatrix:A.getSceneGraph().normalMatrix,isBillboard:A.getSceneGraph().isBillboard,lightComponents:this.__lightComponents,renderPass:n,diffuseCube:null===(p=A.tryToGetMeshRenderer())||void 0===p?void 0:p.diffuseCubeMap,specularCube:null===(y=A.tryToGetMeshRenderer())||void 0===y?void 0:y.specularCubeMap,isVr:a,displayIdx:s}}),l.indicesAccessor?c.drawElements(l.primitiveMode.index,l.indicesAccessor.elementCount,l.indicesAccessor.componentType.index,0):c.drawArrays(l.primitiveMode.index,0,l.getVertexCountAsVerticesBased())}}}catch(e){h=!0,d=e}finally{try{_||null==v.return||v.return()}finally{if(h)throw d}}return!0},t.$render=function(){},e.getInstance=function(){return this.__instance||(this.__instance=new e),this.__instance},e}();I.__globalDataRepository=A.$.getInstance(),I.componentMatrices=[{semantic:a.f5.VertexAttributesExistenceArray,compositionType:d.d.ScalarArray,componentType:f.r.Int,stage:p.H.VertexShader,min:0,max:1,isCustomSetting:!0,updateInterval:m.a.EveryTime},{semantic:a.f5.WorldMatrix,compositionType:d.d.Mat4,componentType:f.r.Float,stage:p.H.VertexShader,min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isCustomSetting:!0,updateInterval:m.a.EveryTime},{semantic:a.f5.NormalMatrix,compositionType:d.d.Mat3,componentType:f.r.Float,stage:p.H.VertexShader,min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isCustomSetting:!0,updateInterval:m.a.EveryTime},{semantic:a.f5.IsBillboard,compositionType:d.d.Scalar,componentType:f.r.Bool,stage:p.H.VertexShader,min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isCustomSetting:!0,updateInterval:m.a.EveryTime}],I.__vertexShaderMethodDefinitions_uniform="uniform mat4 u_worldMatrix;\nuniform mat3 u_normalMatrix;\nuniform bool u_isBillboard;\n\nmat4 get_worldMatrix(float instanceId) {\n  return u_worldMatrix;\n}\n\nmat3 get_normalMatrix(float instanceId) {\n  return u_normalMatrix;\n}\n\nbool get_isVisible(float instanceId) {\n  return true; // visibility is handled in CPU side in WebGLStrategyUniform, so this is dummy value.\n}\n\nbool get_isBillboard(float instanceId) {\n  return u_isBillboard;\n}\n\n#ifdef RN_IS_VERTEX_SHADER\n# ifdef RN_IS_MORPHING\n  vec3 get_position(float vertexId, vec3 basePosition) {\n    vec3 position = basePosition;\n    int scalar_idx = 3 * int(vertexId);\n    #ifdef GLSL_ES3\n      int posIn4bytes = scalar_idx % 4;\n    #else\n      int posIn4bytes = int(mod(float(scalar_idx), 4.0));\n    #endif\n    for (int i=0; i<".concat(l.D.maxVertexMorphNumberInShader,"; i++) {\n\n      int basePosIn16bytes = u_dataTextureMorphOffsetPosition[i] + (scalar_idx - posIn4bytes)/4;\n\n      vec3 addPos = vec3(0.0);\n      if (posIn4bytes == 0) {\n        vec4 val = fetchElement(basePosIn16bytes);\n        addPos = val.xyz;\n      } else if (posIn4bytes == 1) {\n        vec4 val0 = fetchElement(basePosIn16bytes);\n        addPos = vec3(val0.yzw);\n      } else if (posIn4bytes == 2) {\n        vec4 val0 = fetchElement(basePosIn16bytes);\n        vec4 val1 = fetchElement(basePosIn16bytes+1);\n        addPos = vec3(val0.zw, val1.x);\n      } else if (posIn4bytes == 3) {\n        vec4 val0 = fetchElement(basePosIn16bytes);\n        vec4 val1 = fetchElement(basePosIn16bytes+1);\n        addPos = vec3(val0.w, val1.xy);\n      }\n\n      // int index = u_dataTextureMorphOffsetPosition[i] + 1 * int(vertexId);\n      // vec3 addPos = fetchElement(u_dataTexture, index, widthOfDataTexture, heightOfDataTexture).xyz;\n\n      position += addPos * u_morphWeights[i];\n      if (i == u_morphTargetNumber-1) {\n        break;\n      }\n    }\n\n    return position;\n  }\n# endif\n#endif\n  ")},6014:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(7042),o=n(733),i=n(1623);const a=function(e){return r.V.isDataTextureApproach(e)?i.X.getInstance():(r.V.isUniformApproach(e),o.I.getInstance())}},3237:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r=n(6014),o=n(8808),i=n(2129),a=n(2166),s=n(733),c=n(1623),l=Object.freeze({getRenderingStrategy:r.Z,GLSLShader:o.m,WebGLContextWrapper:i.d,WebGLResourceRepository:a.x,WebGLStrategyUniform:s.I,WebGLStrategyDataTexture:c.X});const u=l;(0,eval)("this").RnWebGL=l},8808:(e,t,n)=>{n.d(t,{m:()=>l});var r=n(7042),o=n(7416),i=n(6221),a=n(2166),s=n(2612);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__webglResourceRepository=a.x.getInstance()}var t,n,l;return e.prototype.getGlslVertexShaderProperies=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e},e.getStringFromShaderAnyDataType=function(e){return t=e,(null!=(n=o.wy)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n)?"u_"+e.str:i.T.isInstanceOfVertexAttributeClass(e)?e.shaderStr:e;var t,n},t=e,l=[{key:"glslMainBegin",get:function(){return"\nvoid main() {\n"}},{key:"glslMainEnd",get:function(){return"\n}\n    "}}],(n=[{key:"glsl_fragColor",get:function(){var e=this.__webglResourceRepository;return null!=e.currentWebGLContextWrapper&&e.currentWebGLContextWrapper.isWebGL2?"":"gl_FragColor = rt0;\n"}},{key:"glsl_textureCube",get:function(){return this.__webglResourceRepository.currentWebGLContextWrapper.isWebGL2?"texture":"textureCube"}},{key:"prerequisites",get:function(){return"uniform float u_materialSID;\n"}},{key:"mainPrerequisites",get:function(){var e=s.Z.currentProcessApproach;return r.V.isDataTextureApproach(e)?"\n":"\n      "}}])&&c(t.prototype,n),l&&c(t,l),e}()},4387:(e,t,n)=>{n.d(t,{I:()=>l});var r=n(8808);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}var c=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,r,c,l=(r=u,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=i(r);if(c){var n=i(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return a(this,e)});function u(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=l.call(this)).__functionName=e,r.__valueInputs=t,r.__valueOutputs=n,r}return t=u,(n=[{key:"vertexShaderDefinitions",get:function(){for(var e="void ".concat(this.__functionName,"(\nin bool context,\n      "),t=0;t<this.__valueInputs.length;t++){var n=this.__valueInputs[t],r=n.compositionType.getGlslStr(n.componentType);e+="\n        in ".concat(r," value").concat(t,",")}for(var o=0;o<this.__valueOutputs.length;o++){var i=this.__valueOutputs[o],a=i.compositionType.getGlslStr(i.componentType);e+="\n        out ".concat(a," outValue").concat(o)+(o===this.__valueOutputs.length-1?"":",")}e+=") {\n";for(var s=0;s<this.__valueOutputs.length;s++)e+="\n      outValue".concat(s," = value").concat(s,";\n");return e+"}"}},{key:"pixelShaderDefinitions",get:function(){return this.vertexShaderDefinitions}},{key:"attributeNames",get:function(){return[]}},{key:"attributeSemantics",get:function(){return[]}},{key:"attributeCompositions",get:function(){return[]}}])&&o(t.prototype,n),u}(r.m)},1256:(e,t,n)=>{n.d(t,{$:()=>l});var r=n(8808);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}var c=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,r,c,l=(r=u,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=i(r);if(c){var n=i(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return a(this,e)});function u(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=l.call(this)).__functionName=e,r.__valueInputs=t,r.__valueOutputs=n,r}return t=u,(n=[{key:"vertexShaderDefinitions",get:function(){for(var e="void ".concat(this.__functionName,"("),t=0;t<this.__valueInputs.length;t++){var n=this.__valueInputs[t],r=n.compositionType.getGlslStr(n.componentType);e+="\n        in ".concat(r," value").concat(t,",")}for(var o=0;o<this.__valueOutputs.length;o++){var i=this.__valueOutputs[o],a=i.compositionType.getGlslStr(i.componentType);e+="\n        out ".concat(a," outValue").concat(o)+(o===this.__valueOutputs.length-1?"":",")}e+=") {\n";for(var s=0;s<this.__valueOutputs.length;s++)e+="\n      outValue".concat(s," = value").concat(s,";\n");return e+"}"}},{key:"pixelShaderDefinitions",get:function(){return this.vertexShaderDefinitions}},{key:"attributeNames",get:function(){return[]}},{key:"attributeSemantics",get:function(){return[]}},{key:"attributeCompositions",get:function(){return[]}}])&&o(t.prototype,n),u}(r.m)},3389:(e,t,n)=>{n.d(t,{i:()=>u});var r=n(8808),o=n(2535);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}var l=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,e);var t,n,r,l,u=(r=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(r);if(l){var n=a(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return s(this,e)});function f(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(r=u.call(this)).__functionName=e,r.__compositionType=t,r.__componentType=n,r.__constantValueStr="",r}return f.prototype.setConstantValue=function(e){var t="";this.__componentType.isFloatingPoint()?t=e.glslStrAsFloat:this.__componentType.isInteger()?t=e.glslStrAsInt:this.__componentType===o.r.Bool&&(t=e.x?"true":"false"),this.__constantValueStr=t},t=f,(n=[{key:"vertexShaderDefinitions",get:function(){return"\n    void ".concat(this.__functionName,"(\n      out ").concat(this.__compositionType.getGlslStr(this.__componentType)," outValue) {\n      outValue = ").concat(this.__constantValueStr,";\n    }\n    ")}},{key:"pixelShaderDefinitions",get:function(){return"\n    void ".concat(this.__functionName,"(\n      out ").concat(this.__compositionType.getGlslStr(this.__componentType)," outValue) {\n      outValue = ").concat(this.__constantValueStr,";\n    }\n    ")}},{key:"attributeNames",get:function(){return[]}},{key:"attributeSemantics",get:function(){return[]}},{key:"attributeCompositions",get:function(){return[]}}])&&i(t.prototype,n),f}(r.m)},6114:(e,t,n)=>{n.d(t,{x:()=>u});var r=n(8808),o=n(3740);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}var l=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(u,e);var t,n,r,o,l=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(r);if(o){var n=a(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return s(this,e)});function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),l.call(this)}return u.prototype.getPixelShaderBody=function(){return""},u.getInstance=function(){return this.__instance||(this.__instance=new u),this.__instance},t=u,(n=[{key:"vertexShaderDefinitions",get:function(){return"\n    void outPosition(in vec4 inPosition) {\n      gl_Position = inPosition;\n    }\n    "}},{key:"vertexShaderBody",get:function(){return"\n\n    "}},{key:"pixelShaderDefinitions",get:function(){var e=this.glsl_fragColor,t="";return""!==e&&(t="vec4"),"\n    void outColor(in vec4 inColor) {\n      ".concat(t," rt0 = inColor;\n      ").concat(e,"\n    }\n    ")}},{key:"attributeNames",get:function(){return[]}},{key:"attributeSemantics",get:function(){return[]}},{key:"attributeCompositions",get:function(){return[]}}])&&i(t.prototype,n),u}(r.m);u.materialElement=o.Z.PBRShading},6080:(e,t,n)=>{n.d(t,{p:()=>l});var r=n(8808);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}var c=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,r,c,l=(r=u,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=i(r);if(c){var n=i(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return a(this,e)});function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),l.call(this)}return t=u,(n=[{key:"vertexShaderDefinitions",get:function(){return"\n    "}},{key:"pixelShaderDefinitions",get:function(){return"\n    "}},{key:"attributeNames",get:function(){return[]}},{key:"attributeSemantics",get:function(){return[]}},{key:"attributeCompositions",get:function(){return[]}}])&&o(t.prototype,n),u}(r.m)},2489:(e,t,n)=>{n.d(t,{S:()=>l});var r=n(8808);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}var c=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,r,c,l=(r=u,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=i(r);if(c){var n=i(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return a(this,e)});function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=l.call(this)).__materialNodeUid=0,e.vertexShaderBody="\n  ",e}return u.prototype.getPixelShaderBody=function(){return"\n    "},t=u,(n=[{key:"materialNodeUid",set:function(e){this.__materialNodeUid=e}},{key:"attributeNames",get:function(){return[]}},{key:"attributeSemantics",get:function(){return[]}},{key:"attributeCompositions",get:function(){return[]}}])&&o(t.prototype,n),u}(r.m)},4200:(e,t,n)=>{n.d(t,{$:()=>l});var r=n(8808);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}var c=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=i(t);if(n){var o=i(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return a(this,e)});function c(e,t,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(o=r.call(this)).__functionName=e,o.__compositionType=t,o.__componentType=n,o.__variableName="",o.__valueStr="",o}var l,u,f=c.prototype;return f.setVariableName=function(e){this.__variableName=e},f.setDefaultValue=function(e){this.__valueStr=e.toString()},l=c,(u=[{key:"vertexShaderDefinitions",get:function(){return"\n    uniform ".concat(this.__compositionType.getGlslStr(this.__componentType)," u_").concat(this.__variableName,"; // initialValue=").concat(this.__valueStr,"\n    void ").concat(this.__functionName,"(out ").concat(this.__compositionType.getGlslStr(this.__componentType)," outValue) {\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n#else\n  float materialSID = u_materialSID;\n#endif\n\noutValue = get_").concat(this.__variableName,"(materialSID, 0);\n    }\n    ")}},{key:"pixelShaderDefinitions",get:function(){return"\n    uniform ".concat(this.__compositionType.getGlslStr(this.__componentType)," u_").concat(this.__variableName,"; // initialValue=").concat(this.__valueStr,"\n    void ").concat(this.__functionName,"(out ").concat(this.__compositionType.getGlslStr(this.__componentType)," outValue) {\n#ifdef RN_IS_DATATEXTURE_MODE\n  float materialSID = u_currentComponentSIDs[0]; // index 0 data is the materialSID\n#else\n  float materialSID = u_materialSID;\n#endif\n\noutValue = get_").concat(this.__variableName,"(materialSID, 0);\n    }\n    ")}},{key:"attributeNames",get:function(){return[]}},{key:"attributeSemantics",get:function(){return[]}},{key:"attributeCompositions",get:function(){return[]}}])&&o(l.prototype,u),c}(r.m)},2850:(e,t,n)=>{n.d(t,{e:()=>l});var r=n(8808);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}var c=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,r,c,l=(r=u,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=i(r);if(c){var n=i(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return a(this,e)});function u(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=l.call(this)).__functionName=e,r.__compositionType=t,r.__componentType=n,r.__variableName="",r}return u.prototype.setVariableName=function(e){this.__variableName=e},t=u,(n=[{key:"vertexShaderDefinitions",get:function(){return"\n    out ".concat(this.__compositionType.getGlslStr(this.__componentType)," ").concat(this.__variableName,";\n    void ").concat(this.__functionName,"(\n      in ").concat(this.__compositionType.getGlslStr(this.__componentType)," value) {\n      ").concat(this.__variableName," = value;\n    }\n    ")}},{key:"pixelShaderDefinitions",get:function(){return"\n    in ".concat(this.__compositionType.getGlslStr(this.__componentType)," ").concat(this.__variableName,";\n    void ").concat(this.__functionName,"(\n      out ").concat(this.__compositionType.getGlslStr(this.__componentType)," outValue) {\n      outValue = ").concat(this.__variableName,";\n    }\n    ")}},{key:"attributeNames",get:function(){return[]}},{key:"attributeSemantics",get:function(){return[]}},{key:"attributeCompositions",get:function(){return[]}}])&&o(t.prototype,n),u}(r.m)},4436:(e,t,n)=>{n.d(t,{N:()=>w}),new Uint8Array([0]);const r=[171,75,84,88,32,50,48,187,13,10,26,10];var o,i,a,s,c,l,u,f,_;(_=o||(o={}))[_.NONE=0]="NONE",_[_.BASISLZ=1]="BASISLZ",_[_.ZSTD=2]="ZSTD",_[_.ZLIB=3]="ZLIB",function(e){e[e.BASICFORMAT=0]="BASICFORMAT"}(i||(i={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ETC1S=163]="ETC1S",e[e.UASTC=166]="UASTC"}(a||(a={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SRGB=1]="SRGB"}(s||(s={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.LINEAR=1]="LINEAR",e[e.SRGB=2]="SRGB",e[e.ITU=3]="ITU",e[e.NTSC=4]="NTSC",e[e.SLOG=5]="SLOG",e[e.SLOG2=6]="SLOG2"}(c||(c={})),function(e){e[e.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",e[e.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(l||(l={})),function(e){e[e.RGB=0]="RGB",e[e.RRR=3]="RRR",e[e.GGG=4]="GGG",e[e.AAA=15]="AAA"}(u||(u={})),function(e){e[e.RGB=0]="RGB",e[e.RGBA=3]="RGBA",e[e.RRR=4]="RRR",e[e.RRRG=5]="RRRG"}(f||(f={}));class h{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=o.NONE,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:i.BASICFORMAT,versionNumber:2,descriptorBlockSize:40,colorModel:a.UNSPECIFIED,colorPrimaries:s.SRGB,transferFunction:s.SRGB,flags:l.ALPHA_STRAIGHT,texelBlockDimension:{x:4,y:4,z:1,w:1},bytesPlane:[],samples:[]}],this.keyValue={},this.globalData=null}}class d{constructor(e,t,n,r){this._dataView=new DataView(e.buffer,e.byteOffset+t,n),this._littleEndian=r,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_skip(e){return this._offset+=e,this}_scan(e,t=0){const n=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==t&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,r)}}function m(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):Buffer.from(e).toString("utf8")}var v=n(4021),p=n(1903);let y,A,b;const g={env:{emscripten_notify_memory_growth:function(e){b=new Uint8Array(A.exports.memory.buffer)}}};class x{init(){return y||(y="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+I).then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,g))).then(this._init):WebAssembly.instantiate(Buffer.from(I,"base64"),g).then(this._init),y)}_init(e){A=e.instance,g.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!A)throw new Error("ZSTDDecoder: Await .init() before decoding.");const n=e.byteLength,r=A.exports.malloc(n);b.set(e,r),t=t||Number(A.exports.ZSTD_findDecompressedSize(r,n));const o=A.exports.malloc(t),i=A.exports.ZSTD_decompress(o,t,r,n),a=b.slice(o,o+i);return A.exports.free(r),A.exports.free(o),a}}const I="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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";var E="ETC1_RGB",w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"undefined"==typeof MSC_TRANSCODER&&console.error("Failed to call MSC_TRANSCODER() function. Please check to import msc_basis_transcoder.js."),this.__mscTranscoderPromise=this.__loadMSCTranscoder()}var t=e.prototype;return t.transcode=function(t){var n=this,r=this.__parse(t);if(r.pixelDepth>0)throw new Error("Only 2D textures are currently supported");if(r.layerCount>1)throw new Error("Array textures are not currently supported");if(r.faceCount>1)throw new Error("Cube textures are not currently supported");return r.supercompressionScheme===o.ZSTD?(null==e.__zstdDecoder&&(e.__zstdDecoder=new x),e.__zstdDecoder.init().then((function(){return n.__mscTranscoderPromise.then((function(){return n.__transcodeData(r)}))}))):this.__mscTranscoderPromise.then((function(){return n.__transcodeData(r)}))},t.__loadMSCTranscoder=function(){return new Promise((function(t){e.__mscTranscoderModule&&t(),MSC_TRANSCODER().then((function(n){n.initTranscoders(),e.__mscTranscoderModule=n,t()}))}))},t.__getDeviceDependentParameters=function(e){var t,n,r=v.F.getWebGLResourceRepository().currentWebGLContextWrapper,o=r.webgl2ExtCTAstc||r.webgl1ExtCTAstc,i=r.webgl2ExtCTBptc||r.webgl1ExtCTBptc,a=r.webgl2ExtCTS3tc||r.webgl1ExtCTS3tc,s=r.webgl2ExtCTPvrtc||r.webgl1ExtCTPvrtc,c=r.webgl2ExtCTEtc||r.webgl1ExtCTEtc,l=r.webgl2ExtCTEtc1||r.webgl1ExtCTEtc1;return o?(t="ASTC_4x4_RGBA",n=p.b.ASTC_RGBA_4x4):i?(t="BC7_RGBA",n=p.b.BPTC_RGBA):a?e?(t="BC3_RGBA",n=p.b.S3TC_RGBA_DXT5):(t="BC1_RGB",n=p.b.S3TC_RGB_DXT1):s?e?(t="PVRTC1_4_RGBA",n=p.b.PVRTC_RGBA_4BPPV1):(t="PVRTC1_4_RGB",n=p.b.PVRTC_RGB_4BPPV1):c?e?(t="ETC2_RGBA",n=p.b.ETC2_RGBA8_EAC):(t=E,n=p.b.ETC2_RGB8):l?(t=E,n=p.b.ETC1_RGB):(t="RGBA32",n=p.b.RGBA8_EXT),{transcodeTargetStr:t,compressionTextureType:n}},t.__parse=function(e){return function(e){const t=new Uint8Array(e.buffer,e.byteOffset,r.length);if(t[0]!==r[0]||t[1]!==r[1]||t[2]!==r[2]||t[3]!==r[3]||t[4]!==r[4]||t[5]!==r[5]||t[6]!==r[6]||t[7]!==r[7]||t[8]!==r[8]||t[9]!==r[9]||t[10]!==r[10]||t[11]!==r[11])throw new Error("Missing KTX 2.0 identifier.");const n=new h,o=17*Uint32Array.BYTES_PER_ELEMENT,i=new d(e,r.length,o,!0);n.vkFormat=i._nextUint32(),n.typeSize=i._nextUint32(),n.pixelWidth=i._nextUint32(),n.pixelHeight=i._nextUint32(),n.pixelDepth=i._nextUint32(),n.layerCount=i._nextUint32(),n.faceCount=i._nextUint32();const a=i._nextUint32();n.supercompressionScheme=i._nextUint32();const s=i._nextUint32(),c=i._nextUint32(),l=i._nextUint32(),u=i._nextUint32(),f=i._nextUint64(),_=i._nextUint64(),v=new d(e,r.length+o,3*a*8,!0);for(let t=0;t<a;t++)n.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+v._nextUint64(),v._nextUint64()),uncompressedByteLength:v._nextUint64()});const p=new d(e,s,c,!0),y={vendorId:p._skip(4)._nextUint16(),descriptorType:p._nextUint16(),versionNumber:p._nextUint16(),descriptorBlockSize:p._nextUint16(),colorModel:p._nextUint8(),colorPrimaries:p._nextUint8(),transferFunction:p._nextUint8(),flags:p._nextUint8(),texelBlockDimension:{x:p._nextUint8()+1,y:p._nextUint8()+1,z:p._nextUint8()+1,w:p._nextUint8()+1},bytesPlane:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],samples:[]},A=(y.descriptorBlockSize/4-6)/4;for(let e=0;e<A;e++)y.samples[e]={bitOffset:p._nextUint16(),bitLength:p._nextUint8(),channelID:p._nextUint8(),samplePosition:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],sampleLower:p._nextUint32(),sampleUpper:p._nextUint32()};n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(y);const b=new d(e,l,u,!0);for(;b._offset<u;){const e=b._nextUint32(),t=b._scan(e),r=m(t),o=b._scan(e-t.byteLength);n.keyValue[r]=r.match(/^ktx/i)?m(o):o,b._offset%4&&b._skip(4-b._offset%4)}if(_<=0)return n;const g=new d(e,f,_,!0),x=g._nextUint16(),I=g._nextUint16(),E=g._nextUint32(),w=g._nextUint32(),S=g._nextUint32(),T=g._nextUint32(),C=[];for(let e=0;e<a;e++)C.push({imageFlags:g._nextUint32(),rgbSliceByteOffset:g._nextUint32(),rgbSliceByteLength:g._nextUint32(),alphaSliceByteOffset:g._nextUint32(),alphaSliceByteLength:g._nextUint32()});const P=f+g._offset,R=P+E,D=R+w,M=D+S,B=new Uint8Array(e.buffer,e.byteOffset+P,E),N=new Uint8Array(e.buffer,e.byteOffset+R,w),O=new Uint8Array(e.buffer,e.byteOffset+D,S),L=new Uint8Array(e.buffer,e.byteOffset+M,T);return n.globalData={endpointCount:x,selectorCount:I,imageDescs:C,endpointsData:B,selectorsData:N,tablesData:O,extendedData:L},n}(e)},t.__transcodeData=function(t){for(var n,r=t.pixelWidth,i=t.pixelHeight,s=t.faceCount,l=null===(n=t.globalData)||void 0===n?void 0:n.imageDescs,u=t.dataFormatDescriptor[0],f=u.colorModel===a.UASTC?1:0,_=this.__hasAlpha(u,f),h=e.__mscTranscoderModule,d=1===f?new h.UastcImageTranscoder:new h.BasisLzEtc1sImageTranscoder,m=1===f?h.TextureFormat.UASTC4x4:h.TextureFormat.ETC1S,v=this.__getDeviceDependentParameters(_),p=v.transcodeTargetStr,y=v.compressionTextureType,A=h.TranscodeTarget[p],b=[],g={width:r,height:i,compressionTextureType:y,mipmapData:b,needGammaCorrection:u.transferFunction!==c.SRGB},x=0;x<t.levels.length;x++){var I=Math.max(1,r>>x),E=Math.max(1,i>>x),w=new h.ImageInfo(m,I,E,x),S=t.levels[x].levelData,T=t.levels[x].uncompressedByteLength,C=w.numBlocksX*w.numBlocksY*u.bytesPlane[0];t.supercompressionScheme===o.ZSTD&&(S=e.__zstdDecoder.decode(S,T));for(var P=0,R=x*Math.max(t.layerCount,1)*s*Math.max(t.pixelDepth,1),D=0;D<s;D++){var M=null,B=void 0;t.supercompressionScheme===o.BASISLZ?(M=null==l?void 0:l[R+D],B=new Uint8Array(S,M.rgbSliceByteOffset,M.rgbSliceByteLength+M.alphaSliceByteLength)):(B=new Uint8Array(S,P,C),P+=C);var N=void 0;if(1===f)w.flags=0,w.rgbByteOffset=0,w.rgbByteLength=T,w.alphaByteOffset=0,w.alphaByteLength=0,N=d.transcodeImage(A,B,w,0,_,!1);else{var O=t.globalData,L=d;L.decodePalettes(O.endpointCount,O.endpointsData,O.selectorCount,O.selectorsData),L.decodeTables(O.tablesData),w.flags=M.imageFlags,w.rgbByteOffset=0,w.rgbByteLength=M.rgbSliceByteLength,w.alphaByteOffset=M.alphaSliceByteOffset>0?M.rgbSliceByteLength:0,w.alphaByteLength=M.alphaSliceByteLength,N=L.transcodeImage(A,B,w,0,!1)}if(null!=(null==N?void 0:N.transcodedImage)){var F=N.transcodedImage.get_typed_memory_view().slice();N.transcodedImage.delete();var G={level:x,width:I,height:E,buffer:F};b.push(G)}}}return g},t.__hasAlpha=function(e,t){return 1===t?e.samples[0].channelID===f.RGBA:2===e.samples.length&&(e.samples[0].channelID===u.AAA||e.samples[1].channelID===u.AAA)},e.getInstance=function(){return this.__instance||(this.__instance=new e),this.__instance},e}()},6968:(e,t,n)=>{n.d(t,{RQ:()=>E,sz:()=>B,KA:()=>C,_0:()=>M});const r={Handedness:Object.freeze({NONE:"none",LEFT:"left",RIGHT:"right"}),ComponentState:Object.freeze({DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"}),ComponentProperty:Object.freeze({BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"}),ComponentType:Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"}),ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:Object.freeze({TRANSFORM:"transform",VISIBILITY:"visibility"})},o={xAxis:0,yAxis:0,button:0,state:r.ComponentState.DEFAULT};class i{constructor(e){this.componentProperty=e.componentProperty,this.states=e.states,this.valueNodeName=e.valueNodeName,this.valueNodeProperty=e.valueNodeProperty,this.valueNodeProperty===r.VisualResponseProperty.TRANSFORM&&(this.minNodeName=e.minNodeName,this.maxNodeName=e.maxNodeName),this.value=0,this.updateFromComponent(o)}updateFromComponent({xAxis:e,yAxis:t,button:n,state:o}){const{normalizedXAxis:i,normalizedYAxis:a}=function(e=0,t=0){let n=e,r=t;if(Math.sqrt(e*e+t*t)>1){const o=Math.atan2(t,e);n=Math.cos(o),r=Math.sin(o)}return{normalizedXAxis:.5*n+.5,normalizedYAxis:.5*r+.5}}(e,t);switch(this.componentProperty){case r.ComponentProperty.X_AXIS:this.value=this.states.includes(o)?i:.5;break;case r.ComponentProperty.Y_AXIS:this.value=this.states.includes(o)?a:.5;break;case r.ComponentProperty.BUTTON:this.value=this.states.includes(o)?n:0;break;case r.ComponentProperty.STATE:this.valueNodeProperty===r.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(o):this.value=this.states.includes(o)?1:0;break;default:throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`)}}}class a{constructor(e,t){if(!(e&&t&&t.visualResponses&&t.gamepadIndices&&0!==Object.keys(t.gamepadIndices).length))throw new Error("Invalid arguments supplied");this.id=e,this.type=t.type,this.rootNodeName=t.rootNodeName,this.touchPointNodeName=t.touchPointNodeName,this.visualResponses={},Object.keys(t.visualResponses).forEach((e=>{const n=new i(t.visualResponses[e]);this.visualResponses[e]=n})),this.gamepadIndices=Object.assign({},t.gamepadIndices),this.values={state:r.ComponentState.DEFAULT,button:void 0!==this.gamepadIndices.button?0:void 0,xAxis:void 0!==this.gamepadIndices.xAxis?0:void 0,yAxis:void 0!==this.gamepadIndices.yAxis?0:void 0}}get data(){return{id:this.id,...this.values}}updateFromGamepad(e){if(this.values.state=r.ComponentState.DEFAULT,void 0!==this.gamepadIndices.button&&e.buttons.length>this.gamepadIndices.button){const t=e.buttons[this.gamepadIndices.button];this.values.button=t.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,t.pressed||1===this.values.button?this.values.state=r.ComponentState.PRESSED:(t.touched||this.values.button>r.ButtonTouchThreshold)&&(this.values.state=r.ComponentState.TOUCHED)}void 0!==this.gamepadIndices.xAxis&&e.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=e.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===r.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>r.AxisTouchThreshold&&(this.values.state=r.ComponentState.TOUCHED)),void 0!==this.gamepadIndices.yAxis&&e.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=e.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===r.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>r.AxisTouchThreshold&&(this.values.state=r.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach((e=>{e.updateFromComponent(this.values)}))}}class s{constructor(e,t,n){if(!e)throw new Error("No xrInputSource supplied");if(!t)throw new Error("No profile supplied");this.xrInputSource=e,this.assetUrl=n,this.id=t.profileId,this.layoutDescription=t.layouts[e.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach((e=>{const t=this.layoutDescription.components[e];this.components[e]=new a(e,t)})),this.updateFromGamepad()}get gripSpace(){return this.xrInputSource.gripSpace}get targetRaySpace(){return this.xrInputSource.targetRaySpace}get data(){const e=[];return Object.values(this.components).forEach((t=>{e.push(t.data)})),e}updateFromGamepad(){Object.values(this.components).forEach((e=>{e.updateFromGamepad(this.xrInputSource.gamepad)}))}}async function c(e){const t=await fetch(e);if(t.ok)return t.json();throw new Error(t.statusText)}async function l(e,t,n=null,r=!0){if(!e)throw new Error("No xrInputSource supplied");if(!t)throw new Error("No basePath supplied");const o=await async function(e){if(!e)throw new Error("No basePath supplied");return await c(`${e}/profilesList.json`)}(t);let i;if(e.profiles.some((e=>{const n=o[e];return n&&(i={profileId:e,profilePath:`${t}/${n.path}`,deprecated:!!n.deprecated}),!!i})),!i){if(!n)throw new Error("No matching profile name found");const e=o[n];if(!e)throw new Error(`No matching profile name found and default profile "${n}" missing.`);i={profileId:n,profilePath:`${t}/${e.path}`,deprecated:!!e.deprecated}}const a=await c(i.profilePath);let s;if(r){let t;if(t="any"===e.handedness?a.layouts[Object.keys(a.layouts)[0]]:a.layouts[e.handedness],!t)throw new Error(`No matching handedness, ${e.handedness}, in profile ${i.profileId}`);t.assetPath&&(s=i.profilePath.replace("profile.json",t.assetPath))}return{profile:a,assetPath:s}}var u=n(5936),f=n(9645),_=n(9197),h=n(5233),d=n(6860),m=n(1274),v=n(988),p=n(2863);function y(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){y(i,r,o,a,s,"next",e)}function s(e){y(i,r,o,a,s,"throw",e)}a(void 0)}))}}var b=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},g=new Map,x=Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON_1:"button_1",BUTTON_2:"button_2",BUTTON_3:"button_3",BUTTON_SPECIAL:"button_special"}),I=new Map;function E(e,t,n){return w.apply(this,arguments)}function w(){return(w=A((function(e,t,n){var r,o,i,a,c;return b(this,(function(n){switch(n.label){case 0:return[4,l(e,t)];case 1:return r=n.sent(),o=r.profile,i=r.assetPath,a=new s(e,o,i),g.set(e,a),[4,S(a)];case 2:return(c=n.sent()).isOk()?[2,f.e.convertToRhodoniteObject(c.get())]:[2,void 0]}}))}))).apply(this,arguments)}function S(e){return T.apply(this,arguments)}function T(){return(T=A((function(e){var t;return b(this,(function(n){switch(n.label){case 0:return[4,u.Z.importFromUri(e.assetUrl)];case 1:return t=n.sent(),D(e,t),[2,t]}}))}))).apply(this,arguments)}function C(e,t,n){Array.from(g.values()).forEach((function(t){t.updateFromGamepad(),Object.keys(t.components).forEach((function(o){!function(e,t,n,o){var i=I.get(e.rootNodeName);if(!_.Is.not.exist(i))if(0!==P){var a,s=1e-6*(o-P);switch(i){case x.TRIGGER:!function(e,t,n,o){var i=0,a=I.get(e.rootNodeName);(e.values.state===r.ComponentState.PRESSED||e.values.state===r.ComponentState.TOUCHED)&&(console.log(a,e.values.button,t),i=(0,m.kS)({value:e.values.button,defaultValue:0})*o),"right"===t&&(i*=-1),R.x-=.1*i,R.y-=.1*i,R.z-=.1*i,R.x=Math.max(R.x,.05),R.y=Math.max(R.y,.05),R.z=Math.max(R.z,.05),R.x=Math.min(R.x,3),R.y=Math.min(R.y,3),R.z=Math.min(R.z,3),n.viewerScale.copyComponents(R)}(e,t,n,s);break;case x.THUMBSTICK:!function(e,t,n,o){var i=I.get(e.rootNodeName),a=0,s=0;e.values.state===r.ComponentState.PRESSED?(console.log(i,e.values.button,e.values.state,t),a=(0,m.kS)({value:e.values.xAxis,defaultValue:0})*o,s=(0,m.kS)({value:e.values.yAxis,defaultValue:0})*o):e.values.state===r.ComponentState.TOUCHED&&(a=(0,m.kS)({value:e.values.xAxis,defaultValue:0})*o,s=(0,m.kS)({value:e.values.yAxis,defaultValue:0})*o),a=Math.min(a,1),s=Math.min(s,1);var c=v.d6.zero();"right"===t?(n.viewerAzimuthAngle.x-=.15*a,c.y-=.1*s*n.viewerScale.x):(c.x+=.25*a*n.viewerScale.x,c.z+=.25*s*n.viewerScale.x),p.x.fromCopyQuaternion(n.viewerOrientation).multiply(p.x.rotateY(n.viewerAzimuthAngle.x)).multiplyVectorTo(c,c),n.viewerTranslate.add(c)}(e,t,n,s);break;case x.SQUEEZE:!function(e,t,n,o){var i=I.get(e.rootNodeName);(e.values.state===r.ComponentState.PRESSED||e.values.state===r.ComponentState.TOUCHED)&&console.log(i,e.values.button,t)}(e,t);break;case x.BUTTON_1:case x.BUTTON_2:case x.BUTTON_3:case x.BUTTON_SPECIAL:!function(e,t,n,o){var i=I.get(e.rootNodeName);(e.values.state===r.ComponentState.PRESSED||e.values.state===r.ComponentState.TOUCHED)&&console.log(i,e.values.button,e.values.state,t)}(e,t);break;case x.TOUCHPAD:(a=e).values.state===r.ComponentState.PRESSED||a.values.state===r.ComponentState.TOUCHED&&0!==a.values.yAxis&&a.values.yAxis}}else P=o}(t.components[o],t.xrInputSource.handedness,n,e)}))}))}I.set("a_button",x.BUTTON_1),I.set("b_button",x.BUTTON_2),I.set("x_button",x.BUTTON_1),I.set("y_button",x.BUTTON_2),I.set("thumbrest",x.BUTTON_3),I.set("menu",x.BUTTON_SPECIAL),I.set("xr_standard_trigger",x.TRIGGER),I.set("xr_standard_squeeze",x.SQUEEZE),I.set("xr_standard_thumbstick",x.THUMBSTICK),I.set("xr_standard_touchpad",x.TOUCHPAD),I.set("trigger",x.TRIGGER),I.set("squeeze",x.SQUEEZE),I.set("thumbstick",x.THUMBSTICK),I.set("touchpad",x.TOUCHPAD);var P=0,R=v.d6.one();function D(e,t){Object.values(e.components).forEach((function(e){e.touchPointNodeName&&t.getChildByName(e.touchPointNodeName,!0)}))}function M(e,t){var n=e.getTagValue("rnEntitiesByNames");Object.values(t.components).forEach((function(e){for(var t in e.visualResponses){var r=e.visualResponses[t],o=n.get(r.valueNodeName);if(_.Is.not.exist(o))console.warn("The entity of the controller doesn't exist");else if("visibility"===r.valueNodeProperty)o.getSceneGraph().isVisible=!!r.value;else if("transform"===r.valueNodeProperty){var i=n.get(r.minNodeName),a=n.get(r.maxNodeName);if(_.Is.not.exist(i)||_.Is.not.exist(a)){console.warn("The min/max Node of the component of the controller doesn't exist");continue}var s=i.getTransform(),c=a.getTransform();o.getTransform().quaternion=h._.qlerp(s.localRotationInner,c.localRotationInner,r.value),o.getTransform().localPosition=d.P.lerp(c.localPositionInner,s.localPositionInner,r.value)}}}))}function B(e){return g.get(e)}},875:(e,t,n)=>{n.d(t,{X:()=>g});var r=n(4021),o=n(6860),i=n(8289),a=n(6264),s=n(425),c=n(178),l=n(6968),u=n(9197),f=n(988),_=n(8776),h=n(3764),d=n(524),m=n(1442);function v(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){v(i,r,o,a,s,"next",e)}function s(e){v(i,r,o,a,s,"throw",e)}a(void 0)}))}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},b=o.P.fromCopyArray([0,1.1,0]),g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__isWebXRMode=!1,this.__spaceType="local",this.__requestedToEnterWebXR=!1,this.__isReadyForWebXR=!1,this.__defaultPositionInLocalSpaceMode=b,this.__canvasWidthForVR=0,this.__canvasHeightForVR=0,this.__controllerEntities=[],this.__xrInputSources=[],this.__viewerTranslate=f.d6.zero(),this.__viewerAzimuthAngle=h.DU.zero(),this.__viewerOrientation=_.y.identity(),this.__viewerScale=f.d6.one(),this.__multiviewFramebufferHandle=-1,this.__multiviewColorTextureHandle=-1,this.__viewerEntity=d._.createGroupEntity(),this.__viewerEntity.tryToSetUniqueName("WebXR Viewer",!0),this.__viewerEntity.tryToSetTag({tag:"type",value:"background-assets"}),this.__leftCameraEntity=d._.createCameraEntity(),this.__leftCameraEntity.tryToSetUniqueName("WebXR Left Camera",!0),this.__leftCameraEntity.tryToSetTag({tag:"type",value:"background-assets"}),this.__leftCameraEntity.getCamera()._xrLeft=!0,this.__rightCameraEntity=d._.createCameraEntity(),this.__rightCameraEntity.tryToSetUniqueName("WebXR Right Camera",!0),this.__rightCameraEntity.tryToSetTag({tag:"type",value:"background-assets"}),this.__rightCameraEntity.getCamera()._xrRight=!0,this.__viewerEntity.getSceneGraph().addChild(this.__leftCameraEntity.getSceneGraph()),this.__viewerEntity.getSceneGraph().addChild(this.__rightCameraEntity.getSceneGraph())}var t,n,v=e.prototype;return v.readyForWebXR=function(e,t){var n=this;return p((function(){var o,i,a,s,l;return A(this,(function(u){switch(u.label){case 0:return n.__basePath=t,[4,c.x.getInstance().loadModule("xr")];case 1:return u.sent(),null==(o=r.F.getWebGLResourceRepository().currentWebGLContextWrapper)?(console.error("WebGL Context is not ready yet."),[2,[]]):(n.__glw=o,[4,navigator.xr.isSessionSupported("immersive-vr")]);case 2:if(!u.sent())throw new Error("WebXR is not supported in this environment.");return e?e.style.display="block":(i=document.createElement("p"),(a=document.createElement("a")).setAttribute("id","enter-vr"),s=document.createTextNode("Enter VR"),a.appendChild(s),i.appendChild(a),(l=o.canvas).parentNode.insertBefore(i,l),window.addEventListener("click",n.enterWebXR.bind(n))),n.__isReadyForWebXR=!0,[2,[]]}}))}))()},v.enterWebXR=function(e){var t=e.initialUserPosition,n=e.callbackOnXrSessionStart,o=void 0===n?function(){}:n,i=e.callbackOnXrSessionEnd,a=void 0===i?function(){}:i,c=e.profilePriorities,l=void 0===c?[]:c,u=this;return p((function(){var e,n,i,c,f;return A(this,(function(_){switch(_.label){case 0:return e=r.F.getWebGLResourceRepository(),null!=(n=e.currentWebGLContextWrapper)&&u.__isReadyForWebXR?[4,navigator.xr.requestSession("immersive-vr")]:[3,4];case 1:return c=_.sent(),u.__xrSession=c,c.addEventListener("end",(function(){n.__gl.bindFramebuffer(n.__gl.FRAMEBUFFER,null),u.__xrSession=void 0,u.__webglLayer=void 0,u.__xrViewerPose=void 0,u.__xrReferenceSpace=void 0,u.__spaceType="local",u.__isReadyForWebXR=!1,u.__requestedToEnterWebXR=!1,u.__setWebXRMode(!1),m.rFg._makeShaderInvalidateToAllMaterials(),u.__defaultPositionInLocalSpaceMode=b,console.log("XRSession ends."),s.x.stopRenderLoop(),s.x.restartRenderLoop(),a()})),f=new Promise((function(e){c.addEventListener("inputsourceschange",(function(t){u.__onInputSourcesChange(t,e,l)}))})),[4,c.requestReferenceSpace("local")];case 2:return i=_.sent(),u.__spaceType="local",u.__defaultPositionInLocalSpaceMode=null!=t?t:b,u.__xrReferenceSpace=i,s.x.stopRenderLoop(),[4,u.__setupWebGLLayer(c,o)];case 3:return _.sent(),u.__requestedToEnterWebXR=!0,s.x.restartRenderLoop(),console.warn("End of enterWebXR."),[2,f];case 4:return console.error("WebGL context or WebXRSession is not ready yet."),[2,void 0];case 5:return[2]}}))}))()},v.exitWebXR=function(){var e=this;return p((function(){return A(this,(function(t){switch(t.label){case 0:return null==e.__xrSession?[3,2]:[4,e.__xrSession.end()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))()},v.getCanvasWidthForVr=function(){return this.__canvasWidthForVR},v.getCanvasHeightForVr=function(){return this.__canvasHeightForVR},v.getControllerEntities=function(){return this.__controllerEntities},v.isMultiView=function(){return this.__multiviewFramebufferHandle>0},v.__setWebXRMode=function(e){this.__isWebXRMode=e,this.__glw._isWebXRMode=e},v._getViewMatrixAt=function(e){return 0===e?this.leftViewMatrix:this.rightViewMatrix},v._getProjectMatrixAt=function(e){return 0===e?this.leftProjectionMatrix:this.rightProjectionMatrix},v._getViewportAt=function(e){return 0===e?this._getLeftViewport():this._getRightViewport()},v._getLeftViewport=function(){return a.Lt.fromCopyArray([0,0,this.__canvasWidthForVR/2,this.__canvasHeightForVR])},v._getRightViewport=function(){return this.__multiviewFramebufferHandle>0?a.Lt.fromCopyArray([0,0,this.__canvasWidthForVR/2,this.__canvasHeightForVR]):a.Lt.fromCopyArray([this.__canvasWidthForVR/2,0,this.__canvasWidthForVR/2,this.__canvasHeightForVR])},v._setValuesToGlobalDataRepository=function(){this.__leftCameraEntity.getCamera().projectionMatrix=this.leftProjectionMatrix,this.__rightCameraEntity.getCamera().projectionMatrix=this.rightProjectionMatrix,this.__leftCameraEntity.getCamera().setValuesToGlobalDataRepository(),this.__rightCameraEntity.getCamera().setValuesToGlobalDataRepository()},v._getCameraWorldPositionAt=function(e){var t,n=null===(t=this.__xrViewerPose)||void 0===t?void 0:t.views[e];if(u.Is.exist(n)){var r=n.transform.position,i=this.__defaultPositionInLocalSpaceMode,a=this.__viewerTranslate,s=o.P.add(o.P.fromCopyArray([r.x,r.y,r.z]),i);return o.P.fromCopyArray([(s.x+a.x)*this.__viewerScale.x,(s.y+a.y)*this.__viewerScale.y,(s.z+a.z)*this.__viewerScale.z])}return this.__defaultPositionInLocalSpaceMode},v._getCameraComponentSIDAt=function(e){return 0===e?this.__leftCameraEntity.getCamera().componentSID:this.__rightCameraEntity.getCamera().componentSID},v._preRender=function(e,t){this.isWebXRMode&&this.__requestedToEnterWebXR&&null!=t&&(this.__updateView(t),this.__updateInputSources(t),(0,l.KA)(e,t,{viewerTranslate:this.__viewerTranslate,viewerScale:this.__viewerScale,viewerOrientation:this.__viewerOrientation,viewerAzimuthAngle:this.__viewerAzimuthAngle}))},v._postRender=function(){if(this.__isWebXRMode){var e=this.__glw.getRawContextAsWebGL2();if(this.__multiviewFramebufferHandle>0){var t=r.F.getWebGLResourceRepository();e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[e.DEPTH_STENCIL_ATTACHMENT]),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this.__xrSession.renderState.baseLayer.framebuffer);var n=t.getWebGLResource(this.__multiviewColorTextureHandle);this.__webglStereoUtil.blit(n,0,0,1,1,this.__canvasWidthForVR,this.__canvasHeightForVR)}}this.requestedToEnterWebVR},v.__onInputSourcesChange=function(e,t,n){var r=this;return p((function(){var o,i,a,s,c,f,_,h;return A(this,(function(d){switch(d.label){case 0:r.__xrInputSources.length=0,o=!0,i=!1,a=void 0,d.label=1;case 1:d.trys.push([1,6,7,8]),s=e.added[Symbol.iterator](),d.label=2;case 2:return(o=(c=s.next()).done)?[3,5]:(f=c.value,r.__xrInputSources.push(f),[4,(0,l.RQ)(f,r.__basePath,n)]);case 3:_=d.sent(),u.Is.exist(_)&&(r.__controllerEntities.push(_),r.__viewerEntity.getSceneGraph().addChild(_.getSceneGraph())),d.label=4;case 4:return o=!0,[3,2];case 5:return[3,8];case 6:return h=d.sent(),i=!0,a=h,[3,8];case 7:try{o||null==s.return||s.return()}finally{if(i)throw a}return[7];case 8:return t(r.__controllerEntities),[2]}}))}))()},v.__setCameraInfoFromXRViews=function(e){if(u.Is.not.exist(e))console.warn("xrViewerPose not exist");else{var t=e.views[0],n=e.views[1];if(!u.Is.not.exist(t)&&!u.Is.not.exist(n)){var r=e.transform.orientation;this.__viewerOrientation.x=r.x,this.__viewerOrientation.y=r.y,this.__viewerOrientation.z=r.z,this.__viewerOrientation.w=r.w;var a=i.e.fromCopyFloat32ArrayColumnMajor(null==t?void 0:t.transform.matrix),s=i.e.fromCopyFloat32ArrayColumnMajor(null==n?void 0:n.transform.matrix),c=this.__viewerScale.x,l=t.transform.position,_=f.d6.add(this.__defaultPositionInLocalSpaceMode,this.__viewerTranslate),h=f.d6.add(this.__defaultPositionInLocalSpaceMode,this.__viewerTranslate),d=o.P.fromCopyArray([l.x,l.y,l.z]),m=o.P.fromCopyArray([l.x,l.y,l.z]),v=f.d6.add(this.__defaultPositionInLocalSpaceMode,this.__viewerTranslate).add(d),p=f.d6.add(this.__defaultPositionInLocalSpaceMode,this.__viewerTranslate).add(m),y=(_.x+h.x)/2,A=(_.z+h.z)/2,b=(v.x+p.x)/2,g=(v.z+p.z)/2,x=this.__viewerEntity.getTransform();x.localPosition=o.P.fromCopyArray([y,0,A]),x.localScale=o.P.fromCopyArray([c,c,c]),x.localEulerAngles=o.P.fromCopyArray([0,this.__viewerAzimuthAngle.x,0]),a.translateY=v.y,a.translateX=v.x-b,a.translateZ=v.z-g,a.translateY+=d.y,a.translateX+=d.x,a.translateZ+=d.z,s.translateY=p.y,s.translateX=p.x-b,s.translateZ=p.z-g,s.translateY+=m.y,s.translateX+=m.x,s.translateZ+=m.z,this.__leftCameraEntity.getTransform().localMatrix=a,this.__rightCameraEntity.getTransform().localMatrix=s}}},v.__setupWebGLLayer=function(e,t){var n=this;return p((function(){var o,i,a,s;return A(this,(function(c){switch(c.label){case 0:return null==(i=null===(o=n.__glw)||void 0===o?void 0:o.getRawContextAsWebGL2())?[3,2]:[4,i.makeXRCompatible()];case 1:return c.sent(),n.__webglLayer=new window.XRWebGLLayer(e,i),a=n.__webglLayer,e.updateRenderState({baseLayer:a,depthNear:.01,depthFar:1e3}),s=r.F.getWebGLResourceRepository(),n.__canvasWidthForVR=a.framebufferWidth,n.__canvasHeightForVR=a.framebufferHeight,console.log(n.__canvasWidthForVR),console.log(n.__canvasHeightForVR),n.__multiviewFramebufferHandle,m.rFg._makeShaderInvalidateToAllMaterials(),s.resizeCanvas(n.__canvasWidthForVR,n.__canvasHeightForVR),n.__setWebXRMode(!0),t(),[3,3];case 2:console.error("WebGL context is not ready for WebXR."),c.label=3;case 3:return[2]}}))}))()},v.__updateView=function(e){this.__xrViewerPose=e.getViewerPose(this.__xrReferenceSpace),this.__setCameraInfoFromXRViews(this.__xrViewerPose)},v.__updateInputSources=function(e){var t=this;this.__xrInputSources.forEach((function(n,r){if(u.Is.exist(n.gripSpace)){var o=e.getPose(n.gripSpace,t.__xrReferenceSpace);if(u.Is.exist(o)){var a=t.__controllerEntities[r];if(u.Is.exist(a)){var s=i.e.fromCopyFloat32ArrayColumnMajor(o.transform.matrix),c=i.e.fromCopyMatrix44(s);c.translateY+=t.__defaultPositionInLocalSpaceMode.y,c.translateY+=t.__viewerTranslate.y,a.getTransform().localMatrix=c;var f=(0,l.sz)(n);u.Is.exist(f)?(0,l._0)(a,f):console.warn("motionController not found")}}}}))},e.getInstance=function(){return this.__instance||(this.__instance=new e),this.__instance},t=e,(n=[{key:"leftViewMatrix",get:function(){return this.__leftCameraEntity.getCamera().viewMatrix}},{key:"rightViewMatrix",get:function(){return this.__rightCameraEntity.getCamera().viewMatrix}},{key:"leftProjectionMatrix",get:function(){var e,t=null===(e=this.__xrViewerPose)||void 0===e?void 0:e.views[0];return i.e.fromCopyFloat32ArrayColumnMajor(u.Is.exist(t)?t.projectionMatrix:i.e.identity()._v)}},{key:"rightProjectionMatrix",get:function(){var e,t=null===(e=this.__xrViewerPose)||void 0===e?void 0:e.views[1];return i.e.fromCopyFloat32ArrayColumnMajor(u.Is.exist(t)?t.projectionMatrix:i.e.identity()._v)}},{key:"framebuffer",get:function(){var e,t;return this.__multiviewFramebufferHandle>0?r.F.getWebGLResourceRepository().getWebGLResource(this.__multiviewFramebufferHandle):null===(e=null===(t=this.__xrSession)||void 0===t?void 0:t.renderState.baseLayer)||void 0===e?void 0:e.framebuffer}},{key:"requestedToEnterWebXR",get:function(){return this.__requestedToEnterWebXR}},{key:"xrSession",get:function(){return this.__xrSession}},{key:"requestedToEnterWebVR",get:function(){return this.__requestedToEnterWebXR}},{key:"isWebXRMode",get:function(){return this.__isWebXRMode}},{key:"isReadyForWebXR",get:function(){return this.__isReadyForWebXR}}])&&y(t.prototype,n),e}()},6265:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var r=n(875),o=n(524),i=n(8289),a=n(8776),s=n(3764),c=n(988),l=n(6860),u=n(9197),f=n(2879),_=n(4021),h=n(178),d=n(425);function m(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){m(i,r,o,a,s,"next",e)}function s(e){m(i,r,o,a,s,"throw",e)}a(void 0)}))}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},A=l.P.fromCopyArray([0,1.1,0]),b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.__oGlw=new f.Hq,this.__isReadyForWebAR=!1,this.__oArSession=new f.Hq,this.__oWebglLayer=new f.Hq,this.__spaceType="local",this.__isWebARMode=!1,this.__requestedToEnterWebAR=!1,this.__oArViewerPose=new f.Hq,this.__oArReferenceSpace=new f.Hq,this.__defaultPositionInLocalSpaceMode=A,this.__canvasWidthForAR=0,this.__canvasHeightForAR=0,this._cameraEntity=o._.createCameraEntity(),this.__viewerTranslate=c.d6.zero(),this.__viewerAzimuthAngle=s.DU.zero(),this.__viewerOrientation=a.y.identity(),this.__viewerScale=c.d6.one(),this._cameraEntity.tryToSetUniqueName("WebAR Viewer",!0),this._cameraEntity.tryToSetTag({tag:"type",value:"background-assets"})}var t,n,r=e.prototype;return r.readyForWebAR=function(e){var t=this;return v((function(){var n,r,o,i,a;return y(this,(function(s){switch(s.label){case 0:return[4,h.x.getInstance().loadModule("xr")];case 1:if(s.sent(),null==(n=_.F.getWebGLResourceRepository().currentWebGLContextWrapper))throw new Error("WebGL Context is not ready yet.");return t.__oGlw=new f.bD(n),[4,navigator.xr.isSessionSupported("immersive-ar")];case 2:if(!s.sent())throw new Error("WebAR is not supported in this environment.");return console.log("WebAR is supported."),e?e.style.display="block":(r=document.createElement("p"),(o=document.createElement("a")).setAttribute("id","enter-ar"),i=document.createTextNode("Enter AR"),o.appendChild(i),r.appendChild(o),(a=n.canvas).parentNode.insertBefore(r,a),window.addEventListener("click",t.enterWebAR.bind(t))),t.__isReadyForWebAR=!0,[2,[]]}}))}))()},r.enterWebAR=function(e){var t=e.initialUserPosition,n=e.callbackOnXrSessionStart,r=void 0===n?function(){}:n,o=e.callbackOnXrSessionEnd,i=void 0===o?function(){}:o,a=this;return v((function(){var e,n,o,s;return y(this,(function(c){switch(c.label){case 0:return e=_.F.getWebGLResourceRepository(),null!=(n=e.currentWebGLContextWrapper)&&a.__isReadyForWebAR?[4,navigator.xr.requestSession("immersive-vr")]:[3,4];case 1:return o=c.sent(),a.__oArSession=new f.bD(o),o.addEventListener("end",(function(){n.__gl.bindFramebuffer(n.__gl.FRAMEBUFFER,null),a.__oArSession=new f.Hq,a.__oWebglLayer=new f.Hq,a.__oArViewerPose=new f.Hq,a.__oArReferenceSpace=new f.Hq,a.__spaceType="local",a.__isReadyForWebAR=!1,a.__requestedToEnterWebAR=!1,a.__isWebARMode=!1,a.__defaultPositionInLocalSpaceMode=A,console.log("XRSession ends."),d.x.stopRenderLoop(),d.x.restartRenderLoop(),i()})),[4,o.requestReferenceSpace("local")];case 2:return s=c.sent(),a.__spaceType="local",a.__defaultPositionInLocalSpaceMode=null!=t?t:A,a.__oArReferenceSpace=new f.bD(s),d.x.stopRenderLoop(),[4,a.__setupWebGLLayer(o,r)];case 3:return c.sent(),a.__requestedToEnterWebAR=!0,d.x.restartRenderLoop(),console.warn("End of enterWebXR."),[2];case 4:return console.error("WebGL context or WebXRSession is not ready yet."),[2];case 5:return[2]}}))}))()},r.__setupWebGLLayer=function(e,t){var n=this;return v((function(){var r,o,i;return y(this,(function(a){switch(a.label){case 0:return null==(r=n.__oGlw.unwrapForce().getRawContext())?[3,2]:[4,r.makeXRCompatible()];case 1:return a.sent(),n.__oWebglLayer=new f.bD(window.XRWebGLLayer(e,r)),o=n.__oWebglLayer.unwrapForce(),e.updateRenderState({baseLayer:o,depthNear:.1,depthFar:1e4}),i=_.F.getWebGLResourceRepository(),n.__canvasWidthForAR=o.framebufferWidth,n.__canvasHeightForAR=o.framebufferHeight,console.log(n.__canvasWidthForAR),console.log(n.__canvasHeightForAR),i.resizeCanvas(n.__canvasWidthForAR,n.__canvasHeightForAR),n.__isWebARMode=!0,t(),[3,3];case 2:console.error("WebGL context is not ready for WebXR."),a.label=3;case 3:return[2]}}))}))()},r.exitWebAR=function(){var e=this;return v((function(){return y(this,(function(t){switch(t.label){case 0:return e.__oArSession.has()?[4,e.__oArSession.get().end()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))()},r.getCanvasWidthForVr=function(){return this.__canvasWidthForAR},r.getCanvasHeightForVr=function(){return this.__canvasHeightForAR},r.__updateView=function(e){this.__oArViewerPose=new f.bD(e.getViewerPose(this.__oArReferenceSpace.unwrapForce())),this.__setCameraInfoFromXRViews(this.__oArViewerPose.unwrapForce())},r.__setCameraInfoFromXRViews=function(e){if(u.Is.not.exist(e))console.warn("xrViewerPose not exist");else{var t=e.views[0];if(!u.Is.not.exist(t)){var n=e.transform.orientation;this.__viewerOrientation.x=n.x,this.__viewerOrientation.y=n.y,this.__viewerOrientation.z=n.z,this.__viewerOrientation.w=n.w;var r=i.e.fromCopyFloat32ArrayColumnMajor(null==t?void 0:t.transform.matrix),o=this.__viewerScale.x,a=t.transform.position,s=c.d6.add(this.__defaultPositionInLocalSpaceMode,this.__viewerTranslate),f=l.P.fromCopyArray([a.x,a.y,a.z]),_=c.d6.add(this.__defaultPositionInLocalSpaceMode,this.__viewerTranslate).add(f),h=s.x,d=s.z,m=_.x,v=_.z,p=this._cameraEntity.getTransform();p.localPosition=l.P.fromCopyArray([h,0,d]),p.localScale=l.P.fromCopyArray([o,o,o]),p.localEulerAngles=l.P.fromCopyArray([0,this.__viewerAzimuthAngle.x,0]),r.translateY=_.y,r.translateX=_.x-m,r.translateZ=_.z-v,r.translateY+=f.y,r.translateX+=f.x,r.translateZ+=f.z,this._cameraEntity.getTransform().localMatrix=r}}},r._preRender=function(e,t){this.isWebARMode&&this.__requestedToEnterWebAR&&null!=t&&this.__updateView(t)},r._postRender=function(){this.isWebARMode&&this.__oGlw.unwrapForce().getRawContext(),this.requestedToEnterWebAR},e.getInstance=function(){return this.__instance||(this.__instance=new e),this.__instance},t=e,(n=[{key:"viewMatrix",get:function(){return this._cameraEntity.getCamera().viewMatrix}},{key:"projectionMatrix",get:function(){var e=this.__oArViewerPose.unwrapForce().views[0];return i.e.fromCopyFloat32ArrayColumnMajor(u.Is.exist(e)?e.projectionMatrix:i.e.identity()._v)}},{key:"isWebARMode",get:function(){return this.__isWebARMode}},{key:"isReadyForWebAR",get:function(){return this.__isReadyForWebAR}},{key:"requestedToEnterWebAR",get:function(){return this.__requestedToEnterWebAR}},{key:"arSession",get:function(){return this.__oArSession.unwrapOrUndefined()}},{key:"framebuffer",get:function(){var e,t;return null===(e=null===(t=this.__oArSession.unwrapOrUndefined())||void 0===t?void 0:t.renderState.baseLayer)||void 0===e?void 0:e.framebuffer}}])&&p(t.prototype,n),e}(),g=Object.freeze({WebXRSystem:r.X,WebARSystem:b});const x=g;(0,eval)("this").RnXR=g},5337:(e,t,n)=>{n.d(t,{Z:()=>r});const r={version:"v0.11.3-0-g711e95b-dirty",branch:""}},6893:function(){(function(){function l(e){throw e}var r=void 0,t,aa=this;function v(e,t){var n,o=e.split("."),i=aa;!(o[0]in i)&&i.execScript&&i.execScript("var "+o[0]);for(;o.length&&(n=o.shift());)o.length||t===r?i=i[n]?i[n]:i[n]={}:i[n]=t}var y="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView,z;for(new(y?Uint8Array:Array)(256),z=0;256>z;++z)for(var B=z,ba=7,B=B>>>1;B;B>>>=1)--ba;var ca=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],C=y?new Uint32Array(ca):ca,a;if(aa.Uint8Array!==r)try{eval("String.fromCharCode.apply(null, new Uint8Array([0]));")}catch(e){String.fromCharCode.apply=(a=String.fromCharCode.apply,function(e,t){return a.call(String.fromCharCode,e,Array.prototype.slice.call(t))})}function D(e){var t,n,r,o,i,a,s,c,l,u,f=e.length,_=0,h=Number.POSITIVE_INFINITY;for(c=0;c<f;++c)e[c]>_&&(_=e[c]),e[c]<h&&(h=e[c]);for(t=1<<_,n=new(y?Uint32Array:Array)(t),r=1,o=0,i=2;r<=_;){for(c=0;c<f;++c)if(e[c]===r){for(a=0,s=o,l=0;l<r;++l)a=a<<1|1&s,s>>=1;for(u=r<<16|c,l=a;l<t;l+=i)n[l]=u;++o}++r,o<<=1,i<<=1}return[n,_,h]}var F=[],G;for(G=0;288>G;G++)switch(!0){case 143>=G:F.push([G+48,8]);break;case 255>=G:F.push([G-144+400,9]);break;case 279>=G:F.push([G-256+0,7]);break;case 287>=G:F.push([G-280+192,8]);break;default:l("invalid literal: "+G)}var fa=function(){function e(e){switch(!0){case 3===e:return[257,e-3,0];case 4===e:return[258,e-4,0];case 5===e:return[259,e-5,0];case 6===e:return[260,e-6,0];case 7===e:return[261,e-7,0];case 8===e:return[262,e-8,0];case 9===e:return[263,e-9,0];case 10===e:return[264,e-10,0];case 12>=e:return[265,e-11,1];case 14>=e:return[266,e-13,1];case 16>=e:return[267,e-15,1];case 18>=e:return[268,e-17,1];case 22>=e:return[269,e-19,2];case 26>=e:return[270,e-23,2];case 30>=e:return[271,e-27,2];case 34>=e:return[272,e-31,2];case 42>=e:return[273,e-35,3];case 50>=e:return[274,e-43,3];case 58>=e:return[275,e-51,3];case 66>=e:return[276,e-59,3];case 82>=e:return[277,e-67,4];case 98>=e:return[278,e-83,4];case 114>=e:return[279,e-99,4];case 130>=e:return[280,e-115,4];case 162>=e:return[281,e-131,5];case 194>=e:return[282,e-163,5];case 226>=e:return[283,e-195,5];case 257>=e:return[284,e-227,5];case 258===e:return[285,e-258,0];default:l("invalid length: "+e)}}var t,n,r=[];for(t=3;258>=t;t++)n=e(t),r[t]=n[2]<<24|n[1]<<16|n[0];return r}();function I(e,t){switch(this.l=[],this.m=32768,this.d=this.f=this.c=this.t=0,this.input=y?new Uint8Array(e):e,this.u=!1,this.n=J,this.K=!1,!t&&(t={})||(t.index&&(this.c=t.index),t.bufferSize&&(this.m=t.bufferSize),t.bufferType&&(this.n=t.bufferType),t.resize&&(this.K=t.resize)),this.n){case ga:this.a=32768,this.b=new(y?Uint8Array:Array)(32768+this.m+258);break;case J:this.a=0,this.b=new(y?Uint8Array:Array)(this.m),this.e=this.W,this.B=this.R,this.q=this.V;break;default:l(Error("invalid inflate mode"))}}y&&new Uint32Array(fa);var ga=0,J=1;I.prototype.r=function(){for(;!this.u;){var e=K(this,3);switch(1&e&&(this.u=!0),e>>>=1){case 0:var t=this.input,n=this.c,o=this.b,i=this.a,a=t.length,s=r,c=o.length,u=r;switch(this.d=this.f=0,n+1>=a&&l(Error("invalid uncompressed block header: LEN")),s=t[n++]|t[n++]<<8,n+1>=a&&l(Error("invalid uncompressed block header: NLEN")),s===~(t[n++]|t[n++]<<8)&&l(Error("invalid uncompressed block header: length verify")),n+s>t.length&&l(Error("input buffer is broken")),this.n){case ga:for(;i+s>o.length;){if(s-=u=c-i,y)o.set(t.subarray(n,n+u),i),i+=u,n+=u;else for(;u--;)o[i++]=t[n++];this.a=i,o=this.e(),i=this.a}break;case J:for(;i+s>o.length;)o=this.e({H:2});break;default:l(Error("invalid inflate mode"))}if(y)o.set(t.subarray(n,n+s),i),i+=s,n+=s;else for(;s--;)o[i++]=t[n++];this.c=n,this.a=i,this.b=o;break;case 1:this.q(ha,ia);break;case 2:var f,_,h,d,m=K(this,5)+257,v=K(this,5)+1,p=K(this,4)+4,A=new(y?Uint8Array:Array)(L.length),b=r,g=r,x=r,I=r,E=r;for(E=0;E<p;++E)A[L[E]]=K(this,3);if(!y)for(E=p,p=A.length;E<p;++E)A[L[E]]=0;for(f=D(A),b=new(y?Uint8Array:Array)(m+v),E=0,d=m+v;E<d;)switch(g=M(this,f),g){case 16:for(I=3+K(this,2);I--;)b[E++]=x;break;case 17:for(I=3+K(this,3);I--;)b[E++]=0;x=0;break;case 18:for(I=11+K(this,7);I--;)b[E++]=0;x=0;break;default:x=b[E++]=g}_=D(y?b.subarray(0,m):b.slice(0,m)),h=D(y?b.subarray(m):b.slice(m)),this.q(_,h);break;default:l(Error("unknown BTYPE: "+e))}}return this.B()};var ja=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=y?new Uint16Array(ja):ja,ka=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],la=y?new Uint16Array(ka):ka,ma=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],N=y?new Uint8Array(ma):ma,na=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],oa=y?new Uint16Array(na):na,pa=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=y?new Uint8Array(pa):pa,Q=new(y?Uint8Array:Array)(288),R,qa;for(R=0,qa=Q.length;R<qa;++R)Q[R]=143>=R?8:255>=R?9:279>=R?7:8;var ha=D(Q),S=new(y?Uint8Array:Array)(30),T,ra;for(T=0,ra=S.length;T<ra;++T)S[T]=5;var ia=D(S);function K(e,t){for(var n,r=e.f,o=e.d,i=e.input,a=e.c,s=i.length;o<t;)a>=s&&l(Error("input buffer is broken")),r|=i[a++]<<o,o+=8;return n=r&(1<<t)-1,e.f=r>>>t,e.d=o-t,e.c=a,n}function M(e,t){for(var n,r,o=e.f,i=e.d,a=e.input,s=e.c,c=a.length,u=t[0],f=t[1];i<f&&!(s>=c);)o|=a[s++]<<i,i+=8;return(r=(n=u[o&(1<<f)-1])>>>16)>i&&l(Error("invalid code length: "+r)),e.f=o>>r,e.d=i-r,e.c=s,65535&n}function U(e){e=e||{},this.files=[],this.v=e.comment}function V(e,t){t=t||{},this.input=y&&e instanceof Array?new Uint8Array(e):e,this.c=0,this.ba=t.verify||!1,this.j=t.password}t=I.prototype,t.q=function(e,t){var n=this.b,r=this.a;this.C=e;for(var o,i,a,s,c=n.length-258;256!==(o=M(this,e));)if(256>o)r>=c&&(this.a=r,n=this.e(),r=this.a),n[r++]=o;else for(s=la[i=o-257],0<N[i]&&(s+=K(this,N[i])),o=M(this,t),a=oa[o],0<P[o]&&(a+=K(this,P[o])),r>=c&&(this.a=r,n=this.e(),r=this.a);s--;)n[r]=n[r++-a];for(;8<=this.d;)this.d-=8,this.c--;this.a=r},t.V=function(e,t){var n=this.b,r=this.a;this.C=e;for(var o,i,a,s,c=n.length;256!==(o=M(this,e));)if(256>o)r>=c&&(c=(n=this.e()).length),n[r++]=o;else for(s=la[i=o-257],0<N[i]&&(s+=K(this,N[i])),o=M(this,t),a=oa[o],0<P[o]&&(a+=K(this,P[o])),r+s>c&&(c=(n=this.e()).length);s--;)n[r]=n[r++-a];for(;8<=this.d;)this.d-=8,this.c--;this.a=r},t.e=function(){var e,t,n=new(y?Uint8Array:Array)(this.a-32768),r=this.a-32768,o=this.b;if(y)n.set(o.subarray(32768,n.length));else for(e=0,t=n.length;e<t;++e)n[e]=o[e+32768];if(this.l.push(n),this.t+=n.length,y)o.set(o.subarray(r,r+32768));else for(e=0;32768>e;++e)o[e]=o[r+e];return this.a=32768,o},t.W=function(e){var t,n,r,o=this.input.length/this.c+1|0,i=this.input,a=this.b;return e&&("number"==typeof e.H&&(o=e.H),"number"==typeof e.P&&(o+=e.P)),n=2>o?(r=(i.length-this.c)/this.C[2]/2*258|0)<a.length?a.length+r:a.length<<1:a.length*o,y?(t=new Uint8Array(n)).set(a):t=a,this.b=t},t.B=function(){var e,t,n,r,o,i=0,a=this.b,s=this.l,c=new(y?Uint8Array:Array)(this.t+(this.a-32768));if(0===s.length)return y?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);for(t=0,n=s.length;t<n;++t)for(r=0,o=(e=s[t]).length;r<o;++r)c[i++]=e[r];for(t=32768,n=this.a;t<n;++t)c[i++]=a[t];return this.l=[],this.buffer=c},t.R=function(){var e,t=this.a;return y?this.K?(e=new Uint8Array(t)).set(this.b.subarray(0,t)):e=this.b.subarray(0,t):(this.b.length>t&&(this.b.length=t),e=this.b),this.buffer=e},U.prototype.L=function(e){this.j=e},U.prototype.s=function(e){var t=65535&e[2]|2;return t*(1^t)>>8&255},U.prototype.k=function(e,t){e[0]=(C[255&(e[0]^t)]^e[0]>>>8)>>>0,e[1]=1+(6681*(20173*(e[1]+(255&e[0]))>>>0)>>>0)>>>0,e[2]=(C[255&(e[2]^e[1]>>>24)]^e[2]>>>8)>>>0},U.prototype.T=function(e){var t,n,r=[305419896,591751049,878082192];for(y&&(r=new Uint32Array(r)),t=0,n=e.length;t<n;++t)this.k(r,255&e[t]);return r};var sa={O:0,M:8},W=[80,75,1,2],Y=[80,75,3,4],Z=[80,75,5,6];function ta(e,t){this.input=e,this.offset=t}function ua(e,t){this.input=e,this.offset=t}ta.prototype.parse=function(){var e=this.input,t=this.offset;(e[t++]!==W[0]||e[t++]!==W[1]||e[t++]!==W[2]||e[t++]!==W[3])&&l(Error("invalid file header signature")),this.version=e[t++],this.ia=e[t++],this.Z=e[t++]|e[t++]<<8,this.I=e[t++]|e[t++]<<8,this.A=e[t++]|e[t++]<<8,this.time=e[t++]|e[t++]<<8,this.U=e[t++]|e[t++]<<8,this.p=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.z=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.J=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.h=e[t++]|e[t++]<<8,this.g=e[t++]|e[t++]<<8,this.F=e[t++]|e[t++]<<8,this.ea=e[t++]|e[t++]<<8,this.ga=e[t++]|e[t++]<<8,this.fa=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,this.$=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,y?e.subarray(t,t+=this.h):e.slice(t,t+=this.h)),this.X=y?e.subarray(t,t+=this.g):e.slice(t,t+=this.g),this.v=y?e.subarray(t,t+this.F):e.slice(t,t+this.F),this.length=t-this.offset};var va={N:1,ca:8,da:2048};function $(e){var t,n,o,i,a=[],s={};if(!e.i){if(e.o===r){var c,u=e.input;if(!e.D)e:{var f,_=e.input;for(f=_.length-12;0<f;--f)if(_[f]===Z[0]&&_[f+1]===Z[1]&&_[f+2]===Z[2]&&_[f+3]===Z[3]){e.D=f;break e}l(Error("End of Central Directory Record not found"))}c=e.D,(u[c++]!==Z[0]||u[c++]!==Z[1]||u[c++]!==Z[2]||u[c++]!==Z[3])&&l(Error("invalid signature")),e.ha=u[c++]|u[c++]<<8,e.ja=u[c++]|u[c++]<<8,e.ka=u[c++]|u[c++]<<8,e.aa=u[c++]|u[c++]<<8,e.Q=(u[c++]|u[c++]<<8|u[c++]<<16|u[c++]<<24)>>>0,e.o=(u[c++]|u[c++]<<8|u[c++]<<16|u[c++]<<24)>>>0,e.w=u[c++]|u[c++]<<8,e.v=y?u.subarray(c,c+e.w):u.slice(c,c+e.w)}for(t=e.o,o=0,i=e.aa;o<i;++o)(n=new ta(e.input,t)).parse(),t+=n.length,a[o]=n,s[n.filename]=o;e.Q<t-e.o&&l(Error("invalid file header size")),e.i=a,e.G=s}}function wa(e,t,n){return n^=e.s(t),e.k(t,n),n}ua.prototype.parse=function(){var e=this.input,t=this.offset;(e[t++]!==Y[0]||e[t++]!==Y[1]||e[t++]!==Y[2]||e[t++]!==Y[3])&&l(Error("invalid local file header signature")),this.Z=e[t++]|e[t++]<<8,this.I=e[t++]|e[t++]<<8,this.A=e[t++]|e[t++]<<8,this.time=e[t++]|e[t++]<<8,this.U=e[t++]|e[t++]<<8,this.p=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.z=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.J=(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)>>>0,this.h=e[t++]|e[t++]<<8,this.g=e[t++]|e[t++]<<8,this.filename=String.fromCharCode.apply(null,y?e.subarray(t,t+=this.h):e.slice(t,t+=this.h)),this.X=y?e.subarray(t,t+=this.g):e.slice(t,t+=this.g),this.length=t-this.offset},t=V.prototype,t.Y=function(){var e,t,n,r=[];for(this.i||$(this),e=0,t=(n=this.i).length;e<t;++e)r[e]=n[e].filename;return r},t.r=function(e,t){var n,o;this.G||$(this),(n=this.G[e])===r&&l(Error(e+" not found")),o=t||{};var i,a,s,c,u,f,_,h,d=this.input,m=this.i;if(m||$(this),m[n]===r&&l(Error("wrong index")),a=m[n].$,(i=new ua(this.input,a)).parse(),a+=i.length,s=i.z,0!=(i.I&va.N)){for(!o.password&&!this.j&&l(Error("please set password")),f=this.S(o.password||this.j),_=a,h=a+12;_<h;++_)wa(this,f,d[_]);for(_=a+=12,h=a+(s-=12);_<h;++_)d[_]=wa(this,f,d[_])}switch(i.A){case sa.O:c=y?this.input.subarray(a,a+s):this.input.slice(a,a+s);break;case sa.M:c=new I(this.input,{index:a,bufferSize:i.J}).r();break;default:l(Error("unknown compression type"))}if(this.ba){var v,p=r,A="number"==typeof p?p:p=0,b=c.length;for(v=-1,A=7&b;A--;++p)v=v>>>8^C[255&(v^c[p])];for(A=b>>3;A--;p+=8)v=(v=(v=(v=(v=(v=(v=(v=v>>>8^C[255&(v^c[p])])>>>8^C[255&(v^c[p+1])])>>>8^C[255&(v^c[p+2])])>>>8^C[255&(v^c[p+3])])>>>8^C[255&(v^c[p+4])])>>>8^C[255&(v^c[p+5])])>>>8^C[255&(v^c[p+6])])>>>8^C[255&(v^c[p+7])];u=(4294967295^v)>>>0,i.p!==u&&l(Error("wrong crc: file=0x"+i.p.toString(16)+", data=0x"+u.toString(16)))}return c},t.L=function(e){this.j=e},t.k=U.prototype.k,t.S=U.prototype.T,t.s=U.prototype.s,v("Zlib.Unzip",V),v("Zlib.Unzip.prototype.decompress",V.prototype.r),v("Zlib.Unzip.prototype.getFilenames",V.prototype.Y),v("Zlib.Unzip.prototype.setPassword",V.prototype.L)}).call(this)}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(7302),__webpack_exports__default=__webpack_exports__.Z;export{__webpack_exports__default as default};